(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var zo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var af={exports:{}},ji={},uf={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo=Symbol.for("react.element"),vm=Symbol.for("react.portal"),_m=Symbol.for("react.fragment"),Sm=Symbol.for("react.strict_mode"),wm=Symbol.for("react.profiler"),xm=Symbol.for("react.provider"),Em=Symbol.for("react.context"),Cm=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),Im=Symbol.for("react.memo"),km=Symbol.for("react.lazy"),pu=Symbol.iterator;function Am(t){return t===null||typeof t!="object"?null:(t=pu&&t[pu]||t["@@iterator"],typeof t=="function"?t:null)}var cf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},df=Object.assign,ff={};function Lr(t,e,n){this.props=t,this.context=e,this.refs=ff,this.updater=n||cf}Lr.prototype.isReactComponent={};Lr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Lr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pf(){}pf.prototype=Lr.prototype;function ua(t,e,n){this.props=t,this.context=e,this.refs=ff,this.updater=n||cf}var ca=ua.prototype=new pf;ca.constructor=ua;df(ca,Lr.prototype);ca.isPureReactComponent=!0;var hu=Array.isArray,hf=Object.prototype.hasOwnProperty,da={current:null},mf={key:!0,ref:!0,__self:!0,__source:!0};function gf(t,e,n){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)hf.call(e,r)&&!mf.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];o.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:bo,type:t,key:i,ref:s,props:o,_owner:da.current}}function Nm(t,e){return{$$typeof:bo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fa(t){return typeof t=="object"&&t!==null&&t.$$typeof===bo}function Rm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mu=/\/+/g;function Ts(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Rm(""+t.key):e.toString(36)}function ui(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case bo:case vm:s=!0}}if(s)return s=t,o=o(s),t=r===""?"."+Ts(s,0):r,hu(o)?(n="",t!=null&&(n=t.replace(mu,"$&/")+"/"),ui(o,e,n,"",function(d){return d})):o!=null&&(fa(o)&&(o=Nm(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(mu,"$&/")+"/")+t)),e.push(o)),1;if(s=0,r=r===""?".":r+":",hu(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Ts(i,l);s+=ui(i,e,n,u,o)}else if(u=Am(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Ts(i,l++),s+=ui(i,e,n,u,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Vo(t,e,n){if(t==null)return t;var r=[],o=0;return ui(t,r,"","",function(i){return e.call(n,i,o++)}),r}function Pm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ut={current:null},ci={transition:null},Mm={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:ci,ReactCurrentOwner:da};function yf(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Vo,forEach:function(t,e,n){Vo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vo(t,function(){e++}),e},toArray:function(t){return Vo(t,function(e){return e})||[]},only:function(t){if(!fa(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Lr;ye.Fragment=_m;ye.Profiler=wm;ye.PureComponent=ua;ye.StrictMode=Sm;ye.Suspense=Tm;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mm;ye.act=yf;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=df({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=da.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)hf.call(e,u)&&!mf.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:bo,type:t.type,key:o,ref:i,props:r,_owner:s}};ye.createContext=function(t){return t={$$typeof:Em,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xm,_context:t},t.Consumer=t};ye.createElement=gf;ye.createFactory=function(t){var e=gf.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:Cm,render:t}};ye.isValidElement=fa;ye.lazy=function(t){return{$$typeof:km,_payload:{_status:-1,_result:t},_init:Pm}};ye.memo=function(t,e){return{$$typeof:Im,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=ci.transition;ci.transition={};try{t()}finally{ci.transition=e}};ye.unstable_act=yf;ye.useCallback=function(t,e){return ut.current.useCallback(t,e)};ye.useContext=function(t){return ut.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return ut.current.useDeferredValue(t)};ye.useEffect=function(t,e){return ut.current.useEffect(t,e)};ye.useId=function(){return ut.current.useId()};ye.useImperativeHandle=function(t,e,n){return ut.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return ut.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return ut.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return ut.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return ut.current.useReducer(t,e,n)};ye.useRef=function(t){return ut.current.useRef(t)};ye.useState=function(t){return ut.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return ut.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return ut.current.useTransition()};ye.version="18.3.1";uf.exports=ye;var te=uf.exports;const el=lf(te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm=te,Dm=Symbol.for("react.element"),Lm=Symbol.for("react.fragment"),Um=Object.prototype.hasOwnProperty,Fm=bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bm={key:!0,ref:!0,__self:!0,__source:!0};function vf(t,e,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Um.call(e,r)&&!Bm.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:Dm,type:t,key:i,ref:s,props:o,_owner:Fm.current}}ji.Fragment=Lm;ji.jsx=vf;ji.jsxs=vf;af.exports=ji;var E=af.exports,tl={},_f={exports:{}},wt={},Sf={exports:{}},wf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,O){var J=Y.length;Y.push(O);e:for(;0<J;){var z=J-1>>>1,M=Y[z];if(0<o(M,O))Y[z]=O,Y[J]=M,J=z;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var O=Y[0],J=Y.pop();if(J!==O){Y[0]=J;e:for(var z=0,M=Y.length,ee=M>>>1;z<ee;){var j=2*(z+1)-1,ne=Y[j],pe=j+1,ve=Y[pe];if(0>o(ne,J))pe<M&&0>o(ve,ne)?(Y[z]=ve,Y[pe]=J,z=pe):(Y[z]=ne,Y[j]=J,z=j);else if(pe<M&&0>o(ve,J))Y[z]=ve,Y[pe]=J,z=pe;else break e}}return O}function o(Y,O){var J=Y.sortIndex-O.sortIndex;return J!==0?J:Y.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],d=[],f=1,p=null,h=3,m=!1,_=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Y){for(var O=n(d);O!==null;){if(O.callback===null)r(d);else if(O.startTime<=Y)r(d),O.sortIndex=O.expirationTime,e(u,O);else break;O=n(d)}}function T(Y){if(y=!1,S(Y),!_)if(n(u)!==null)_=!0,ie(I);else{var O=n(d);O!==null&&X(T,O.startTime-Y)}}function I(Y,O){_=!1,y&&(y=!1,g(F),F=-1),m=!0;var J=h;try{for(S(O),p=n(u);p!==null&&(!(p.expirationTime>O)||Y&&!Z());){var z=p.callback;if(typeof z=="function"){p.callback=null,h=p.priorityLevel;var M=z(p.expirationTime<=O);O=t.unstable_now(),typeof M=="function"?p.callback=M:p===n(u)&&r(u),S(O)}else r(u);p=n(u)}if(p!==null)var ee=!0;else{var j=n(d);j!==null&&X(T,j.startTime-O),ee=!1}return ee}finally{p=null,h=J,m=!1}}var b=!1,N=null,F=-1,D=5,V=-1;function Z(){return!(t.unstable_now()-V<D)}function P(){if(N!==null){var Y=t.unstable_now();V=Y;var O=!0;try{O=N(!0,Y)}finally{O?B():(b=!1,N=null)}}else b=!1}var B;if(typeof v=="function")B=function(){v(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,H=C.port2;C.port1.onmessage=P,B=function(){H.postMessage(null)}}else B=function(){x(P,0)};function ie(Y){N=Y,b||(b=!0,B())}function X(Y,O){F=x(function(){Y(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,ie(I))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var J=h;h=O;try{return Y()}finally{h=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,O){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var J=h;h=Y;try{return O()}finally{h=J}},t.unstable_scheduleCallback=function(Y,O,J){var z=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?z+J:z):J=z,Y){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=J+M,Y={id:f++,callback:O,priorityLevel:Y,startTime:J,expirationTime:M,sortIndex:-1},J>z?(Y.sortIndex=J,e(d,Y),n(u)===null&&Y===n(d)&&(y?(g(F),F=-1):y=!0,X(T,J-z))):(Y.sortIndex=M,e(u,Y),_||m||(_=!0,ie(I))),Y},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(Y){var O=h;return function(){var J=h;h=O;try{return Y.apply(this,arguments)}finally{h=J}}}})(wf);Sf.exports=wf;var zm=Sf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=te,St=zm;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xf=new Set,mo={};function Zn(t,e){Ar(t,e),Ar(t+"Capture",e)}function Ar(t,e){for(mo[t]=e,t=0;t<e.length;t++)xf.add(e[t])}var tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nl=Object.prototype.hasOwnProperty,Gm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gu={},yu={};function Hm(t){return nl.call(yu,t)?!0:nl.call(gu,t)?!1:Gm.test(t)?yu[t]=!0:(gu[t]=!0,!1)}function Om(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qm(t,e,n,r){if(e===null||typeof e>"u"||Om(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ct(t,e,n,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var pa=/[\-:]([a-z])/g;function ha(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pa,ha);Xe[e]=new ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pa,ha);Xe[e]=new ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pa,ha);Xe[e]=new ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new ct(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function ma(t,e,n,r){var o=Xe.hasOwnProperty(e)?Xe[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qm(e,n,o,r)&&(n=null),r||o===null?Hm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ln=Vm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Go=Symbol.for("react.element"),or=Symbol.for("react.portal"),ir=Symbol.for("react.fragment"),ga=Symbol.for("react.strict_mode"),rl=Symbol.for("react.profiler"),Ef=Symbol.for("react.provider"),Cf=Symbol.for("react.context"),ya=Symbol.for("react.forward_ref"),ol=Symbol.for("react.suspense"),il=Symbol.for("react.suspense_list"),va=Symbol.for("react.memo"),pn=Symbol.for("react.lazy"),Tf=Symbol.for("react.offscreen"),vu=Symbol.iterator;function Or(t){return t===null||typeof t!="object"?null:(t=vu&&t[vu]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Is;function jr(t){if(Is===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Is=e&&e[1]||""}return`
`+Is+t}var ks=!1;function As(t,e){if(!t||ks)return"";ks=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,l=i.length-1;1<=s&&0<=l&&o[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(o[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||o[s]!==i[l]){var u=`
`+o[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{ks=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jr(t):""}function $m(t){switch(t.tag){case 5:return jr(t.type);case 16:return jr("Lazy");case 13:return jr("Suspense");case 19:return jr("SuspenseList");case 0:case 2:case 15:return t=As(t.type,!1),t;case 11:return t=As(t.type.render,!1),t;case 1:return t=As(t.type,!0),t;default:return""}}function sl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ir:return"Fragment";case or:return"Portal";case rl:return"Profiler";case ga:return"StrictMode";case ol:return"Suspense";case il:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cf:return(t.displayName||"Context")+".Consumer";case Ef:return(t._context.displayName||"Context")+".Provider";case ya:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case va:return e=t.displayName||null,e!==null?e:sl(t.type)||"Memo";case pn:e=t._payload,t=t._init;try{return sl(t(e))}catch{}}return null}function Wm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sl(e);case 8:return e===ga?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function If(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jm(t){var e=If(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ho(t){t._valueTracker||(t._valueTracker=Jm(t))}function kf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=If(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ei(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ll(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _u(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Af(t,e){e=e.checked,e!=null&&ma(t,"checked",e,!1)}function al(t,e){Af(t,e);var n=kn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ul(t,e.type,n):e.hasOwnProperty("defaultValue")&&ul(t,e.type,kn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Su(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ul(t,e,n){(e!=="number"||Ei(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eo=Array.isArray;function Sr(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kn(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function cl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(eo(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kn(n)}}function Nf(t,e){var n=kn(e.value),r=kn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oo,Pf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oo=Oo||document.createElement("div"),Oo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ym=["Webkit","ms","Moz","O"];Object.keys(oo).forEach(function(t){Ym.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oo[e]=oo[t]})});function Mf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oo.hasOwnProperty(t)&&oo[t]?(""+e).trim():e+"px"}function bf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Mf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Km=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fl(t,e){if(e){if(Km[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function pl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=null;function _a(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ml=null,wr=null,xr=null;function Eu(t){if(t=Uo(t)){if(typeof ml!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=os(e),ml(t.stateNode,t.type,e))}}function Df(t){wr?xr?xr.push(t):xr=[t]:wr=t}function Lf(){if(wr){var t=wr,e=xr;if(xr=wr=null,Eu(t),e)for(t=0;t<e.length;t++)Eu(e[t])}}function Uf(t,e){return t(e)}function Ff(){}var Ns=!1;function Bf(t,e,n){if(Ns)return t(e,n);Ns=!0;try{return Uf(t,e,n)}finally{Ns=!1,(wr!==null||xr!==null)&&(Ff(),Lf())}}function yo(t,e){var n=t.stateNode;if(n===null)return null;var r=os(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var gl=!1;if(tn)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){gl=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{gl=!1}function Xm(t,e,n,r,o,i,s,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var io=!1,Ci=null,Ti=!1,yl=null,Qm={onError:function(t){io=!0,Ci=t}};function Zm(t,e,n,r,o,i,s,l,u){io=!1,Ci=null,Xm.apply(Qm,arguments)}function jm(t,e,n,r,o,i,s,l,u){if(Zm.apply(this,arguments),io){if(io){var d=Ci;io=!1,Ci=null}else throw Error(oe(198));Ti||(Ti=!0,yl=d)}}function jn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cu(t){if(jn(t)!==t)throw Error(oe(188))}function eg(t){var e=t.alternate;if(!e){if(e=jn(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Cu(o),t;if(i===r)return Cu(o),e;i=i.sibling}throw Error(oe(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function Vf(t){return t=eg(t),t!==null?Gf(t):null}function Gf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gf(t);if(e!==null)return e;t=t.sibling}return null}var Hf=St.unstable_scheduleCallback,Tu=St.unstable_cancelCallback,tg=St.unstable_shouldYield,ng=St.unstable_requestPaint,Fe=St.unstable_now,rg=St.unstable_getCurrentPriorityLevel,Sa=St.unstable_ImmediatePriority,Of=St.unstable_UserBlockingPriority,Ii=St.unstable_NormalPriority,og=St.unstable_LowPriority,qf=St.unstable_IdlePriority,es=null,Yt=null;function ig(t){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(es,t,void 0,(t.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:ag,sg=Math.log,lg=Math.LN2;function ag(t){return t>>>=0,t===0?32:31-(sg(t)/lg|0)|0}var qo=64,$o=4194304;function to(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ki(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~o;l!==0?r=to(l):(i&=s,i!==0&&(r=to(i)))}else s=n&~o,s!==0?r=to(s):i!==0&&(r=to(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bt(e),o=1<<n,r|=t[n],e&=~o;return r}function ug(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cg(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Bt(i),l=1<<s,u=o[s];u===-1?(!(l&n)||l&r)&&(o[s]=ug(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function vl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $f(){var t=qo;return qo<<=1,!(qo&4194240)&&(qo=64),t}function Rs(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Do(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bt(e),t[e]=n}function dg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Bt(n),i=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~i}}function wa(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bt(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Ee=0;function Wf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jf,xa,Yf,Kf,Xf,_l=!1,Wo=[],_n=null,Sn=null,wn=null,vo=new Map,_o=new Map,mn=[],fg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Iu(t,e){switch(t){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(e.pointerId)}}function $r(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=Uo(e),e!==null&&xa(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function pg(t,e,n,r,o){switch(e){case"focusin":return _n=$r(_n,t,e,n,r,o),!0;case"dragenter":return Sn=$r(Sn,t,e,n,r,o),!0;case"mouseover":return wn=$r(wn,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return vo.set(i,$r(vo.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,_o.set(i,$r(_o.get(i)||null,t,e,n,r,o)),!0}return!1}function Qf(t){var e=Hn(t.target);if(e!==null){var n=jn(e);if(n!==null){if(e=n.tag,e===13){if(e=zf(n),e!==null){t.blockedOn=e,Xf(t.priority,function(){Yf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function di(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hl=r,n.target.dispatchEvent(r),hl=null}else return e=Uo(n),e!==null&&xa(e),t.blockedOn=n,!1;e.shift()}return!0}function ku(t,e,n){di(t)&&n.delete(e)}function hg(){_l=!1,_n!==null&&di(_n)&&(_n=null),Sn!==null&&di(Sn)&&(Sn=null),wn!==null&&di(wn)&&(wn=null),vo.forEach(ku),_o.forEach(ku)}function Wr(t,e){t.blockedOn===e&&(t.blockedOn=null,_l||(_l=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,hg)))}function So(t){function e(o){return Wr(o,t)}if(0<Wo.length){Wr(Wo[0],t);for(var n=1;n<Wo.length;n++){var r=Wo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_n!==null&&Wr(_n,t),Sn!==null&&Wr(Sn,t),wn!==null&&Wr(wn,t),vo.forEach(e),_o.forEach(e),n=0;n<mn.length;n++)r=mn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mn.length&&(n=mn[0],n.blockedOn===null);)Qf(n),n.blockedOn===null&&mn.shift()}var Er=ln.ReactCurrentBatchConfig,Ai=!0;function mg(t,e,n,r){var o=Ee,i=Er.transition;Er.transition=null;try{Ee=1,Ea(t,e,n,r)}finally{Ee=o,Er.transition=i}}function gg(t,e,n,r){var o=Ee,i=Er.transition;Er.transition=null;try{Ee=4,Ea(t,e,n,r)}finally{Ee=o,Er.transition=i}}function Ea(t,e,n,r){if(Ai){var o=Sl(t,e,n,r);if(o===null)Vs(t,e,r,Ni,n),Iu(t,r);else if(pg(o,t,e,n,r))r.stopPropagation();else if(Iu(t,r),e&4&&-1<fg.indexOf(t)){for(;o!==null;){var i=Uo(o);if(i!==null&&Jf(i),i=Sl(t,e,n,r),i===null&&Vs(t,e,r,Ni,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Vs(t,e,r,null,n)}}var Ni=null;function Sl(t,e,n,r){if(Ni=null,t=_a(r),t=Hn(t),t!==null)if(e=jn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ni=t,null}function Zf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rg()){case Sa:return 1;case Of:return 4;case Ii:case og:return 16;case qf:return 536870912;default:return 16}default:return 16}}var yn=null,Ca=null,fi=null;function jf(){if(fi)return fi;var t,e=Ca,n=e.length,r,o="value"in yn?yn.value:yn.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===o[i-r];r++);return fi=o.slice(t,1<r?1-r:void 0)}function pi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jo(){return!0}function Au(){return!1}function xt(t){function e(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jo:Au,this.isPropagationStopped=Au,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),e}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=xt(Ur),Lo=Le({},Ur,{view:0,detail:0}),yg=xt(Lo),Ps,Ms,Jr,ts=Le({},Lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ia,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jr&&(Jr&&t.type==="mousemove"?(Ps=t.screenX-Jr.screenX,Ms=t.screenY-Jr.screenY):Ms=Ps=0,Jr=t),Ps)},movementY:function(t){return"movementY"in t?t.movementY:Ms}}),Nu=xt(ts),vg=Le({},ts,{dataTransfer:0}),_g=xt(vg),Sg=Le({},Lo,{relatedTarget:0}),bs=xt(Sg),wg=Le({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),xg=xt(wg),Eg=Le({},Ur,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cg=xt(Eg),Tg=Le({},Ur,{data:0}),Ru=xt(Tg),Ig={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ag={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ng(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ag[t])?!!e[t]:!1}function Ia(){return Ng}var Rg=Le({},Lo,{key:function(t){if(t.key){var e=Ig[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ia,charCode:function(t){return t.type==="keypress"?pi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pg=xt(Rg),Mg=Le({},ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pu=xt(Mg),bg=Le({},Lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ia}),Dg=xt(bg),Lg=Le({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ug=xt(Lg),Fg=Le({},ts,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bg=xt(Fg),zg=[9,13,27,32],ka=tn&&"CompositionEvent"in window,so=null;tn&&"documentMode"in document&&(so=document.documentMode);var Vg=tn&&"TextEvent"in window&&!so,ep=tn&&(!ka||so&&8<so&&11>=so),Mu=" ",bu=!1;function tp(t,e){switch(t){case"keyup":return zg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function np(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var sr=!1;function Gg(t,e){switch(t){case"compositionend":return np(e);case"keypress":return e.which!==32?null:(bu=!0,Mu);case"textInput":return t=e.data,t===Mu&&bu?null:t;default:return null}}function Hg(t,e){if(sr)return t==="compositionend"||!ka&&tp(t,e)?(t=jf(),fi=Ca=yn=null,sr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ep&&e.locale!=="ko"?null:e.data;default:return null}}var Og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Du(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Og[t.type]:e==="textarea"}function rp(t,e,n,r){Df(r),e=Ri(e,"onChange"),0<e.length&&(n=new Ta("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var lo=null,wo=null;function qg(t){hp(t,0)}function ns(t){var e=ur(t);if(kf(e))return t}function $g(t,e){if(t==="change")return e}var op=!1;if(tn){var Ds;if(tn){var Ls="oninput"in document;if(!Ls){var Lu=document.createElement("div");Lu.setAttribute("oninput","return;"),Ls=typeof Lu.oninput=="function"}Ds=Ls}else Ds=!1;op=Ds&&(!document.documentMode||9<document.documentMode)}function Uu(){lo&&(lo.detachEvent("onpropertychange",ip),wo=lo=null)}function ip(t){if(t.propertyName==="value"&&ns(wo)){var e=[];rp(e,wo,t,_a(t)),Bf(qg,e)}}function Wg(t,e,n){t==="focusin"?(Uu(),lo=e,wo=n,lo.attachEvent("onpropertychange",ip)):t==="focusout"&&Uu()}function Jg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ns(wo)}function Yg(t,e){if(t==="click")return ns(e)}function Kg(t,e){if(t==="input"||t==="change")return ns(e)}function Xg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:Xg;function xo(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!nl.call(e,o)||!Ht(t[o],e[o]))return!1}return!0}function Fu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bu(t,e){var n=Fu(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fu(n)}}function sp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lp(){for(var t=window,e=Ei();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ei(t.document)}return e}function Aa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qg(t){var e=lp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sp(n.ownerDocument.documentElement,n)){if(r!==null&&Aa(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!t.extend&&i>r&&(o=r,r=i,i=o),o=Bu(n,i);var s=Bu(n,r);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Zg=tn&&"documentMode"in document&&11>=document.documentMode,lr=null,wl=null,ao=null,xl=!1;function zu(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xl||lr==null||lr!==Ei(r)||(r=lr,"selectionStart"in r&&Aa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ao&&xo(ao,r)||(ao=r,r=Ri(wl,"onSelect"),0<r.length&&(e=new Ta("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lr)))}function Yo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ar={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},Us={},ap={};tn&&(ap=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function rs(t){if(Us[t])return Us[t];if(!ar[t])return t;var e=ar[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ap)return Us[t]=e[n];return t}var up=rs("animationend"),cp=rs("animationiteration"),dp=rs("animationstart"),fp=rs("transitionend"),pp=new Map,Vu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(t,e){pp.set(t,e),Zn(e,[t])}for(var Fs=0;Fs<Vu.length;Fs++){var Bs=Vu[Fs],jg=Bs.toLowerCase(),e0=Bs[0].toUpperCase()+Bs.slice(1);Nn(jg,"on"+e0)}Nn(up,"onAnimationEnd");Nn(cp,"onAnimationIteration");Nn(dp,"onAnimationStart");Nn("dblclick","onDoubleClick");Nn("focusin","onFocus");Nn("focusout","onBlur");Nn(fp,"onTransitionEnd");Ar("onMouseEnter",["mouseout","mouseover"]);Ar("onMouseLeave",["mouseout","mouseover"]);Ar("onPointerEnter",["pointerout","pointerover"]);Ar("onPointerLeave",["pointerout","pointerover"]);Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t0=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function Gu(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jm(r,e,void 0,t),t.currentTarget=null}function hp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&o.isPropagationStopped())break e;Gu(o,l,d),i=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&o.isPropagationStopped())break e;Gu(o,l,d),i=u}}}if(Ti)throw t=yl,Ti=!1,yl=null,t}function ke(t,e){var n=e[kl];n===void 0&&(n=e[kl]=new Set);var r=t+"__bubble";n.has(r)||(mp(e,t,2,!1),n.add(r))}function zs(t,e,n){var r=0;e&&(r|=4),mp(n,t,r,e)}var Ko="_reactListening"+Math.random().toString(36).slice(2);function Eo(t){if(!t[Ko]){t[Ko]=!0,xf.forEach(function(n){n!=="selectionchange"&&(t0.has(n)||zs(n,!1,t),zs(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ko]||(e[Ko]=!0,zs("selectionchange",!1,e))}}function mp(t,e,n,r){switch(Zf(e)){case 1:var o=mg;break;case 4:o=gg;break;default:o=Ea}n=o.bind(null,e,n,t),o=void 0,!gl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Vs(t,e,n,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;s=s.return}for(;l!==null;){if(s=Hn(l),s===null)return;if(u=s.tag,u===5||u===6){r=i=s;continue e}l=l.parentNode}}r=r.return}Bf(function(){var d=i,f=_a(n),p=[];e:{var h=pp.get(t);if(h!==void 0){var m=Ta,_=t;switch(t){case"keypress":if(pi(n)===0)break e;case"keydown":case"keyup":m=Pg;break;case"focusin":_="focus",m=bs;break;case"focusout":_="blur",m=bs;break;case"beforeblur":case"afterblur":m=bs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=_g;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Dg;break;case up:case cp:case dp:m=xg;break;case fp:m=Ug;break;case"scroll":m=yg;break;case"wheel":m=Bg;break;case"copy":case"cut":case"paste":m=Cg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Pu}var y=(e&4)!==0,x=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var v=d,S;v!==null;){S=v;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,g!==null&&(T=yo(v,g),T!=null&&y.push(Co(v,T,S)))),x)break;v=v.return}0<y.length&&(h=new m(h,_,null,n,f),p.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==hl&&(_=n.relatedTarget||n.fromElement)&&(Hn(_)||_[nn]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=d,_=_?Hn(_):null,_!==null&&(x=jn(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=d),m!==_)){if(y=Nu,T="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=Pu,T="onPointerLeave",g="onPointerEnter",v="pointer"),x=m==null?h:ur(m),S=_==null?h:ur(_),h=new y(T,v+"leave",m,n,f),h.target=x,h.relatedTarget=S,T=null,Hn(f)===d&&(y=new y(g,v+"enter",_,n,f),y.target=S,y.relatedTarget=x,T=y),x=T,m&&_)t:{for(y=m,g=_,v=0,S=y;S;S=nr(S))v++;for(S=0,T=g;T;T=nr(T))S++;for(;0<v-S;)y=nr(y),v--;for(;0<S-v;)g=nr(g),S--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=nr(y),g=nr(g)}y=null}else y=null;m!==null&&Hu(p,h,m,y,!1),_!==null&&x!==null&&Hu(p,x,_,y,!0)}}e:{if(h=d?ur(d):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var I=$g;else if(Du(h))if(op)I=Kg;else{I=Jg;var b=Wg}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=Yg);if(I&&(I=I(t,d))){rp(p,I,n,f);break e}b&&b(t,h,d),t==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&ul(h,"number",h.value)}switch(b=d?ur(d):window,t){case"focusin":(Du(b)||b.contentEditable==="true")&&(lr=b,wl=d,ao=null);break;case"focusout":ao=wl=lr=null;break;case"mousedown":xl=!0;break;case"contextmenu":case"mouseup":case"dragend":xl=!1,zu(p,n,f);break;case"selectionchange":if(Zg)break;case"keydown":case"keyup":zu(p,n,f)}var N;if(ka)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else sr?tp(t,n)&&(F="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(ep&&n.locale!=="ko"&&(sr||F!=="onCompositionStart"?F==="onCompositionEnd"&&sr&&(N=jf()):(yn=f,Ca="value"in yn?yn.value:yn.textContent,sr=!0)),b=Ri(d,F),0<b.length&&(F=new Ru(F,t,null,n,f),p.push({event:F,listeners:b}),N?F.data=N:(N=np(n),N!==null&&(F.data=N)))),(N=Vg?Gg(t,n):Hg(t,n))&&(d=Ri(d,"onBeforeInput"),0<d.length&&(f=new Ru("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=N))}hp(p,e)})}function Co(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ri(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=yo(t,n),i!=null&&r.unshift(Co(t,i,o)),i=yo(t,e),i!=null&&r.push(Co(t,i,o))),t=t.return}return r}function nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hu(t,e,n,r,o){for(var i=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,o?(u=yo(n,i),u!=null&&s.unshift(Co(n,u,l))):o||(u=yo(n,i),u!=null&&s.push(Co(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var n0=/\r\n?/g,r0=/\u0000|\uFFFD/g;function Ou(t){return(typeof t=="string"?t:""+t).replace(n0,`
`).replace(r0,"")}function Xo(t,e,n){if(e=Ou(e),Ou(t)!==e&&n)throw Error(oe(425))}function Pi(){}var El=null,Cl=null;function Tl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Il=typeof setTimeout=="function"?setTimeout:void 0,o0=typeof clearTimeout=="function"?clearTimeout:void 0,qu=typeof Promise=="function"?Promise:void 0,i0=typeof queueMicrotask=="function"?queueMicrotask:typeof qu<"u"?function(t){return qu.resolve(null).then(t).catch(s0)}:Il;function s0(t){setTimeout(function(){throw t})}function Gs(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),So(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);So(e)}function xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $u(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fr=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Fr,To="__reactProps$"+Fr,nn="__reactContainer$"+Fr,kl="__reactEvents$"+Fr,l0="__reactListeners$"+Fr,a0="__reactHandles$"+Fr;function Hn(t){var e=t[Jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nn]||n[Jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$u(t);t!==null;){if(n=t[Jt])return n;t=$u(t)}return e}t=n,n=t.parentNode}return null}function Uo(t){return t=t[Jt]||t[nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ur(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function os(t){return t[To]||null}var Al=[],cr=-1;function Rn(t){return{current:t}}function Ne(t){0>cr||(t.current=Al[cr],Al[cr]=null,cr--)}function Te(t,e){cr++,Al[cr]=t.current,t.current=e}var An={},nt=Rn(An),ht=Rn(!1),Jn=An;function Nr(t,e){var n=t.type.contextTypes;if(!n)return An;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function mt(t){return t=t.childContextTypes,t!=null}function Mi(){Ne(ht),Ne(nt)}function Wu(t,e,n){if(nt.current!==An)throw Error(oe(168));Te(nt,e),Te(ht,n)}function gp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(oe(108,Wm(t)||"Unknown",o));return Le({},n,r)}function bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||An,Jn=nt.current,Te(nt,t),Te(ht,ht.current),!0}function Ju(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=gp(t,e,Jn),r.__reactInternalMemoizedMergedChildContext=t,Ne(ht),Ne(nt),Te(nt,t)):Ne(ht),Te(ht,n)}var Qt=null,is=!1,Hs=!1;function yp(t){Qt===null?Qt=[t]:Qt.push(t)}function u0(t){is=!0,yp(t)}function Pn(){if(!Hs&&Qt!==null){Hs=!0;var t=0,e=Ee;try{var n=Qt;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qt=null,is=!1}catch(o){throw Qt!==null&&(Qt=Qt.slice(t+1)),Hf(Sa,Pn),o}finally{Ee=e,Hs=!1}}return null}var dr=[],fr=0,Di=null,Li=0,Tt=[],It=0,Yn=null,Zt=1,jt="";function zn(t,e){dr[fr++]=Li,dr[fr++]=Di,Di=t,Li=e}function vp(t,e,n){Tt[It++]=Zt,Tt[It++]=jt,Tt[It++]=Yn,Yn=t;var r=Zt;t=jt;var o=32-Bt(r)-1;r&=~(1<<o),n+=1;var i=32-Bt(e)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Zt=1<<32-Bt(e)+o|n<<o|r,jt=i+t}else Zt=1<<i|n<<o|r,jt=t}function Na(t){t.return!==null&&(zn(t,1),vp(t,1,0))}function Ra(t){for(;t===Di;)Di=dr[--fr],dr[fr]=null,Li=dr[--fr],dr[fr]=null;for(;t===Yn;)Yn=Tt[--It],Tt[It]=null,jt=Tt[--It],Tt[It]=null,Zt=Tt[--It],Tt[It]=null}var _t=null,vt=null,Pe=!1,Ft=null;function _p(t,e){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_t=t,vt=xn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_t=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yn!==null?{id:Zt,overflow:jt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_t=t,vt=null,!0):!1;default:return!1}}function Nl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rl(t){if(Pe){var e=vt;if(e){var n=e;if(!Yu(t,e)){if(Nl(t))throw Error(oe(418));e=xn(n.nextSibling);var r=_t;e&&Yu(t,e)?_p(r,n):(t.flags=t.flags&-4097|2,Pe=!1,_t=t)}}else{if(Nl(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Pe=!1,_t=t}}}function Ku(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_t=t}function Qo(t){if(t!==_t)return!1;if(!Pe)return Ku(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tl(t.type,t.memoizedProps)),e&&(e=vt)){if(Nl(t))throw Sp(),Error(oe(418));for(;e;)_p(t,e),e=xn(e.nextSibling)}if(Ku(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=xn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=_t?xn(t.stateNode.nextSibling):null;return!0}function Sp(){for(var t=vt;t;)t=xn(t.nextSibling)}function Rr(){vt=_t=null,Pe=!1}function Pa(t){Ft===null?Ft=[t]:Ft.push(t)}var c0=ln.ReactCurrentBatchConfig;function Yr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var o=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var l=o.refs;s===null?delete l[i]:l[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Zo(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xu(t){var e=t._init;return e(t._payload)}function wp(t){function e(g,v){if(t){var S=g.deletions;S===null?(g.deletions=[v],g.flags|=16):S.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function o(g,v){return g=In(g,v),g.index=0,g.sibling=null,g}function i(g,v,S){return g.index=S,t?(S=g.alternate,S!==null?(S=S.index,S<v?(g.flags|=2,v):S):(g.flags|=2,v)):(g.flags|=1048576,v)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,v,S,T){return v===null||v.tag!==6?(v=Ks(S,g.mode,T),v.return=g,v):(v=o(v,S),v.return=g,v)}function u(g,v,S,T){var I=S.type;return I===ir?f(g,v,S.props.children,T,S.key):v!==null&&(v.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===pn&&Xu(I)===v.type)?(T=o(v,S.props),T.ref=Yr(g,v,S),T.return=g,T):(T=Si(S.type,S.key,S.props,null,g.mode,T),T.ref=Yr(g,v,S),T.return=g,T)}function d(g,v,S,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Xs(S,g.mode,T),v.return=g,v):(v=o(v,S.children||[]),v.return=g,v)}function f(g,v,S,T,I){return v===null||v.tag!==7?(v=Wn(S,g.mode,T,I),v.return=g,v):(v=o(v,S),v.return=g,v)}function p(g,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ks(""+v,g.mode,S),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Go:return S=Si(v.type,v.key,v.props,null,g.mode,S),S.ref=Yr(g,null,v),S.return=g,S;case or:return v=Xs(v,g.mode,S),v.return=g,v;case pn:var T=v._init;return p(g,T(v._payload),S)}if(eo(v)||Or(v))return v=Wn(v,g.mode,S,null),v.return=g,v;Zo(g,v)}return null}function h(g,v,S,T){var I=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return I!==null?null:l(g,v,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Go:return S.key===I?u(g,v,S,T):null;case or:return S.key===I?d(g,v,S,T):null;case pn:return I=S._init,h(g,v,I(S._payload),T)}if(eo(S)||Or(S))return I!==null?null:f(g,v,S,T,null);Zo(g,S)}return null}function m(g,v,S,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(S)||null,l(v,g,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Go:return g=g.get(T.key===null?S:T.key)||null,u(v,g,T,I);case or:return g=g.get(T.key===null?S:T.key)||null,d(v,g,T,I);case pn:var b=T._init;return m(g,v,S,b(T._payload),I)}if(eo(T)||Or(T))return g=g.get(S)||null,f(v,g,T,I,null);Zo(v,T)}return null}function _(g,v,S,T){for(var I=null,b=null,N=v,F=v=0,D=null;N!==null&&F<S.length;F++){N.index>F?(D=N,N=null):D=N.sibling;var V=h(g,N,S[F],T);if(V===null){N===null&&(N=D);break}t&&N&&V.alternate===null&&e(g,N),v=i(V,v,F),b===null?I=V:b.sibling=V,b=V,N=D}if(F===S.length)return n(g,N),Pe&&zn(g,F),I;if(N===null){for(;F<S.length;F++)N=p(g,S[F],T),N!==null&&(v=i(N,v,F),b===null?I=N:b.sibling=N,b=N);return Pe&&zn(g,F),I}for(N=r(g,N);F<S.length;F++)D=m(N,g,F,S[F],T),D!==null&&(t&&D.alternate!==null&&N.delete(D.key===null?F:D.key),v=i(D,v,F),b===null?I=D:b.sibling=D,b=D);return t&&N.forEach(function(Z){return e(g,Z)}),Pe&&zn(g,F),I}function y(g,v,S,T){var I=Or(S);if(typeof I!="function")throw Error(oe(150));if(S=I.call(S),S==null)throw Error(oe(151));for(var b=I=null,N=v,F=v=0,D=null,V=S.next();N!==null&&!V.done;F++,V=S.next()){N.index>F?(D=N,N=null):D=N.sibling;var Z=h(g,N,V.value,T);if(Z===null){N===null&&(N=D);break}t&&N&&Z.alternate===null&&e(g,N),v=i(Z,v,F),b===null?I=Z:b.sibling=Z,b=Z,N=D}if(V.done)return n(g,N),Pe&&zn(g,F),I;if(N===null){for(;!V.done;F++,V=S.next())V=p(g,V.value,T),V!==null&&(v=i(V,v,F),b===null?I=V:b.sibling=V,b=V);return Pe&&zn(g,F),I}for(N=r(g,N);!V.done;F++,V=S.next())V=m(N,g,F,V.value,T),V!==null&&(t&&V.alternate!==null&&N.delete(V.key===null?F:V.key),v=i(V,v,F),b===null?I=V:b.sibling=V,b=V);return t&&N.forEach(function(P){return e(g,P)}),Pe&&zn(g,F),I}function x(g,v,S,T){if(typeof S=="object"&&S!==null&&S.type===ir&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Go:e:{for(var I=S.key,b=v;b!==null;){if(b.key===I){if(I=S.type,I===ir){if(b.tag===7){n(g,b.sibling),v=o(b,S.props.children),v.return=g,g=v;break e}}else if(b.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===pn&&Xu(I)===b.type){n(g,b.sibling),v=o(b,S.props),v.ref=Yr(g,b,S),v.return=g,g=v;break e}n(g,b);break}else e(g,b);b=b.sibling}S.type===ir?(v=Wn(S.props.children,g.mode,T,S.key),v.return=g,g=v):(T=Si(S.type,S.key,S.props,null,g.mode,T),T.ref=Yr(g,v,S),T.return=g,g=T)}return s(g);case or:e:{for(b=S.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(g,v.sibling),v=o(v,S.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=Xs(S,g.mode,T),v.return=g,g=v}return s(g);case pn:return b=S._init,x(g,v,b(S._payload),T)}if(eo(S))return _(g,v,S,T);if(Or(S))return y(g,v,S,T);Zo(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(g,v.sibling),v=o(v,S),v.return=g,g=v):(n(g,v),v=Ks(S,g.mode,T),v.return=g,g=v),s(g)):n(g,v)}return x}var Pr=wp(!0),xp=wp(!1),Ui=Rn(null),Fi=null,pr=null,Ma=null;function ba(){Ma=pr=Fi=null}function Da(t){var e=Ui.current;Ne(Ui),t._currentValue=e}function Pl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Cr(t,e){Fi=t,Ma=pr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pt=!0),t.firstContext=null)}function Pt(t){var e=t._currentValue;if(Ma!==t)if(t={context:t,memoizedValue:e,next:null},pr===null){if(Fi===null)throw Error(oe(308));pr=t,Fi.dependencies={lanes:0,firstContext:t}}else pr=pr.next=t;return e}var On=null;function La(t){On===null?On=[t]:On.push(t)}function Ep(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,La(e)):(n.next=o.next,o.next=n),e.interleaved=n,rn(t,r)}function rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hn=!1;function Ua(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function en(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function En(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,rn(t,n)}return o=r.interleaved,o===null?(e.next=e,La(r)):(e.next=o.next,o.next=e),r.interleaved=e,rn(t,n)}function hi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wa(t,n)}}function Qu(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bi(t,e,n,r){var o=t.updateQueue;hn=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var u=l,d=u.next;u.next=null,s===null?i=d:s.next=d,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=o.baseState;s=0,f=d=u=null,l=i;do{var h=l.lane,m=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,y=l;switch(h=e,m=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){p=_.call(m,p,h);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,h=typeof _=="function"?_.call(m,p,h):_,h==null)break e;p=Le({},p,h);break e;case 2:hn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=m,u=p):f=f.next=m,s|=h;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(f===null&&(u=p),o.baseState=u,o.firstBaseUpdate=d,o.lastBaseUpdate=f,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);Xn|=s,t.lanes=s,t.memoizedState=p}}function Zu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(oe(191,o));o.call(r)}}}var Fo={},Kt=Rn(Fo),Io=Rn(Fo),ko=Rn(Fo);function qn(t){if(t===Fo)throw Error(oe(174));return t}function Fa(t,e){switch(Te(ko,e),Te(Io,t),Te(Kt,Fo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dl(e,t)}Ne(Kt),Te(Kt,e)}function Mr(){Ne(Kt),Ne(Io),Ne(ko)}function Tp(t){qn(ko.current);var e=qn(Kt.current),n=dl(e,t.type);e!==n&&(Te(Io,t),Te(Kt,n))}function Ba(t){Io.current===t&&(Ne(Kt),Ne(Io))}var be=Rn(0);function zi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Os=[];function za(){for(var t=0;t<Os.length;t++)Os[t]._workInProgressVersionPrimary=null;Os.length=0}var mi=ln.ReactCurrentDispatcher,qs=ln.ReactCurrentBatchConfig,Kn=0,De=null,Ge=null,Oe=null,Vi=!1,uo=!1,Ao=0,d0=0;function Ze(){throw Error(oe(321))}function Va(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function Ga(t,e,n,r,o,i){if(Kn=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mi.current=t===null||t.memoizedState===null?m0:g0,t=n(r,o),uo){i=0;do{if(uo=!1,Ao=0,25<=i)throw Error(oe(301));i+=1,Oe=Ge=null,e.updateQueue=null,mi.current=y0,t=n(r,o)}while(uo)}if(mi.current=Gi,e=Ge!==null&&Ge.next!==null,Kn=0,Oe=Ge=De=null,Vi=!1,e)throw Error(oe(300));return t}function Ha(){var t=Ao!==0;return Ao=0,t}function Wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?De.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function Mt(){if(Ge===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Oe===null?De.memoizedState:Oe.next;if(e!==null)Oe=e,Ge=t;else{if(t===null)throw Error(oe(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Oe===null?De.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function No(t,e){return typeof e=="function"?e(t):e}function $s(t){var e=Mt(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=Ge,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var l=s=null,u=null,d=i;do{var f=d.lane;if((Kn&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,De.lanes|=f,Xn|=f}d=d.next}while(d!==null&&d!==i);u===null?s=r:u.next=l,Ht(r,e.memoizedState)||(pt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do i=o.lane,De.lanes|=i,Xn|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ws(t){var e=Mt(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);Ht(i,e.memoizedState)||(pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ip(){}function kp(t,e){var n=De,r=Mt(),o=e(),i=!Ht(r.memoizedState,o);if(i&&(r.memoizedState=o,pt=!0),r=r.queue,Oa(Rp.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,Ro(9,Np.bind(null,n,r,o,e),void 0,null),qe===null)throw Error(oe(349));Kn&30||Ap(n,e,o)}return o}function Ap(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Np(t,e,n,r){e.value=n,e.getSnapshot=r,Pp(e)&&Mp(t)}function Rp(t,e,n){return n(function(){Pp(e)&&Mp(t)})}function Pp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function Mp(t){var e=rn(t,1);e!==null&&zt(e,t,1,-1)}function ju(t){var e=Wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},e.queue=t,t=t.dispatch=h0.bind(null,De,t),[e.memoizedState,t]}function Ro(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bp(){return Mt().memoizedState}function gi(t,e,n,r){var o=Wt();De.flags|=t,o.memoizedState=Ro(1|e,n,void 0,r===void 0?null:r)}function ss(t,e,n,r){var o=Mt();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var s=Ge.memoizedState;if(i=s.destroy,r!==null&&Va(r,s.deps)){o.memoizedState=Ro(e,n,i,r);return}}De.flags|=t,o.memoizedState=Ro(1|e,n,i,r)}function ec(t,e){return gi(8390656,8,t,e)}function Oa(t,e){return ss(2048,8,t,e)}function Dp(t,e){return ss(4,2,t,e)}function Lp(t,e){return ss(4,4,t,e)}function Up(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fp(t,e,n){return n=n!=null?n.concat([t]):null,ss(4,4,Up.bind(null,e,t),n)}function qa(){}function Bp(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Va(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zp(t,e){var n=Mt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Va(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vp(t,e,n){return Kn&21?(Ht(n,e)||(n=$f(),De.lanes|=n,Xn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pt=!0),t.memoizedState=n)}function f0(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=qs.transition;qs.transition={};try{t(!1),e()}finally{Ee=n,qs.transition=r}}function Gp(){return Mt().memoizedState}function p0(t,e,n){var r=Tn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hp(t))Op(e,n);else if(n=Ep(t,e,n,r),n!==null){var o=lt();zt(n,t,r,o),qp(n,e,r)}}function h0(t,e,n){var r=Tn(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hp(t))Op(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,l=i(s,n);if(o.hasEagerState=!0,o.eagerState=l,Ht(l,s)){var u=e.interleaved;u===null?(o.next=o,La(e)):(o.next=u.next,u.next=o),e.interleaved=o;return}}catch{}finally{}n=Ep(t,e,o,r),n!==null&&(o=lt(),zt(n,t,r,o),qp(n,e,r))}}function Hp(t){var e=t.alternate;return t===De||e!==null&&e===De}function Op(t,e){uo=Vi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wa(t,n)}}var Gi={readContext:Pt,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},m0={readContext:Pt,useCallback:function(t,e){return Wt().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:ec,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gi(4194308,4,Up.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gi(4194308,4,t,e)},useInsertionEffect:function(t,e){return gi(4,2,t,e)},useMemo:function(t,e){var n=Wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=p0.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=Wt();return t={current:t},e.memoizedState=t},useState:ju,useDebugValue:qa,useDeferredValue:function(t){return Wt().memoizedState=t},useTransition:function(){var t=ju(!1),e=t[0];return t=f0.bind(null,t[1]),Wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,o=Wt();if(Pe){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),qe===null)throw Error(oe(349));Kn&30||Ap(r,e,n)}o.memoizedState=n;var i={value:n,getSnapshot:e};return o.queue=i,ec(Rp.bind(null,r,i,t),[t]),r.flags|=2048,Ro(9,Np.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wt(),e=qe.identifierPrefix;if(Pe){var n=jt,r=Zt;n=(r&~(1<<32-Bt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ao++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=d0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},g0={readContext:Pt,useCallback:Bp,useContext:Pt,useEffect:Oa,useImperativeHandle:Fp,useInsertionEffect:Dp,useLayoutEffect:Lp,useMemo:zp,useReducer:$s,useRef:bp,useState:function(){return $s(No)},useDebugValue:qa,useDeferredValue:function(t){var e=Mt();return Vp(e,Ge.memoizedState,t)},useTransition:function(){var t=$s(No)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:Ip,useSyncExternalStore:kp,useId:Gp,unstable_isNewReconciler:!1},y0={readContext:Pt,useCallback:Bp,useContext:Pt,useEffect:Oa,useImperativeHandle:Fp,useInsertionEffect:Dp,useLayoutEffect:Lp,useMemo:zp,useReducer:Ws,useRef:bp,useState:function(){return Ws(No)},useDebugValue:qa,useDeferredValue:function(t){var e=Mt();return Ge===null?e.memoizedState=t:Vp(e,Ge.memoizedState,t)},useTransition:function(){var t=Ws(No)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:Ip,useSyncExternalStore:kp,useId:Gp,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ml(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ls={isMounted:function(t){return(t=t._reactInternals)?jn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lt(),o=Tn(t),i=en(r,o);i.payload=e,n!=null&&(i.callback=n),e=En(t,i,o),e!==null&&(zt(e,t,o,r),hi(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lt(),o=Tn(t),i=en(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=En(t,i,o),e!==null&&(zt(e,t,o,r),hi(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),r=Tn(t),o=en(n,r);o.tag=2,e!=null&&(o.callback=e),e=En(t,o,r),e!==null&&(zt(e,t,r,n),hi(e,t,r))}};function tc(t,e,n,r,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!xo(n,r)||!xo(o,i):!0}function $p(t,e,n){var r=!1,o=An,i=e.contextType;return typeof i=="object"&&i!==null?i=Pt(i):(o=mt(e)?Jn:nt.current,r=e.contextTypes,i=(r=r!=null)?Nr(t,o):An),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ls,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function nc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ls.enqueueReplaceState(e,e.state,null)}function bl(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Ua(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=Pt(i):(i=mt(e)?Jn:nt.current,o.context=Nr(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ml(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&ls.enqueueReplaceState(o,o.state,null),Bi(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function br(t,e){try{var n="",r=e;do n+=$m(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function Js(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var v0=typeof WeakMap=="function"?WeakMap:Map;function Wp(t,e,n){n=en(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Oi||(Oi=!0,ql=r),Dl(t,e)},n}function Jp(t,e,n){n=en(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){Dl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dl(t,e),typeof r!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function rc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new v0;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=M0.bind(null,t,e,n),e.then(t,t))}function oc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ic(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=en(-1,1),e.tag=2,En(n,e,1))),n.lanes|=1),t)}var _0=ln.ReactCurrentOwner,pt=!1;function st(t,e,n,r){e.child=t===null?xp(e,null,n,r):Pr(e,t.child,n,r)}function sc(t,e,n,r,o){n=n.render;var i=e.ref;return Cr(e,o),r=Ga(t,e,n,r,i,o),n=Ha(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,on(t,e,o)):(Pe&&n&&Na(e),e.flags|=1,st(t,e,r,o),e.child)}function lc(t,e,n,r,o){if(t===null){var i=n.type;return typeof i=="function"&&!Za(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Yp(t,e,i,r,o)):(t=Si(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:xo,n(s,r)&&t.ref===e.ref)return on(t,e,o)}return e.flags|=1,t=In(i,r),t.ref=e.ref,t.return=e,e.child=t}function Yp(t,e,n,r,o){if(t!==null){var i=t.memoizedProps;if(xo(i,r)&&t.ref===e.ref)if(pt=!1,e.pendingProps=r=i,(t.lanes&o)!==0)t.flags&131072&&(pt=!0);else return e.lanes=t.lanes,on(t,e,o)}return Ll(t,e,n,r,o)}function Kp(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(mr,yt),yt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(mr,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(mr,yt),yt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(mr,yt),yt|=r;return st(t,e,o,n),e.child}function Xp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ll(t,e,n,r,o){var i=mt(n)?Jn:nt.current;return i=Nr(e,i),Cr(e,o),n=Ga(t,e,n,r,i,o),r=Ha(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,on(t,e,o)):(Pe&&r&&Na(e),e.flags|=1,st(t,e,n,o),e.child)}function ac(t,e,n,r,o){if(mt(n)){var i=!0;bi(e)}else i=!1;if(Cr(e,o),e.stateNode===null)yi(t,e),$p(e,n,r),bl(e,n,r,o),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Pt(d):(d=mt(n)?Jn:nt.current,d=Nr(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==d)&&nc(e,s,r,d),hn=!1;var h=e.memoizedState;s.state=h,Bi(e,r,s,o),u=e.memoizedState,l!==r||h!==u||ht.current||hn?(typeof f=="function"&&(Ml(e,n,f,r),u=e.memoizedState),(l=hn||tc(e,n,l,r,h,u,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=d,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Cp(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Lt(e.type,l),s.props=d,p=e.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Pt(u):(u=mt(n)?Jn:nt.current,u=Nr(e,u));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||h!==u)&&nc(e,s,r,u),hn=!1,h=e.memoizedState,s.state=h,Bi(e,r,s,o);var _=e.memoizedState;l!==p||h!==_||ht.current||hn?(typeof m=="function"&&(Ml(e,n,m,r),_=e.memoizedState),(d=hn||tc(e,n,d,r,h,_,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=u,r=d):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ul(t,e,n,r,i,o)}function Ul(t,e,n,r,o,i){Xp(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return o&&Ju(e,n,!1),on(t,e,i);r=e.stateNode,_0.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Pr(e,t.child,null,i),e.child=Pr(e,null,l,i)):st(t,e,l,i),e.memoizedState=r.state,o&&Ju(e,n,!0),e.child}function Qp(t){var e=t.stateNode;e.pendingContext?Wu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wu(t,e.context,!1),Fa(t,e.containerInfo)}function uc(t,e,n,r,o){return Rr(),Pa(o),e.flags|=256,st(t,e,n,r),e.child}var Fl={dehydrated:null,treeContext:null,retryLane:0};function Bl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zp(t,e,n){var r=e.pendingProps,o=be.current,i=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(o&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Te(be,o&1),t===null)return Rl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=cs(s,r,0,null),t=Wn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Bl(n),e.memoizedState=Fl,t):$a(e,s));if(o=t.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return S0(t,e,s,r,l,o,n);if(i){i=r.fallback,s=e.mode,o=t.child,l=o.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=In(o,u),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?i=In(l,i):(i=Wn(i,s,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=t.child.memoizedState,s=s===null?Bl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Fl,r}return i=t.child,t=i.sibling,r=In(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $a(t,e){return e=cs({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jo(t,e,n,r){return r!==null&&Pa(r),Pr(e,t.child,null,n),t=$a(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function S0(t,e,n,r,o,i,s){if(n)return e.flags&256?(e.flags&=-257,r=Js(Error(oe(422))),jo(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=cs({mode:"visible",children:r.children},o,0,null),i=Wn(i,o,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pr(e,t.child,null,s),e.child.memoizedState=Bl(s),e.memoizedState=Fl,i);if(!(e.mode&1))return jo(t,e,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(oe(419)),r=Js(i,r,void 0),jo(t,e,s,r)}if(l=(s&t.childLanes)!==0,pt||l){if(r=qe,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,rn(t,o),zt(r,t,o,-1))}return Qa(),r=Js(Error(oe(421))),jo(t,e,s,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=b0.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,vt=xn(o.nextSibling),_t=e,Pe=!0,Ft=null,t!==null&&(Tt[It++]=Zt,Tt[It++]=jt,Tt[It++]=Yn,Zt=t.id,jt=t.overflow,Yn=e),e=$a(e,r.children),e.flags|=4096,e)}function cc(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pl(t.return,e,n)}function Ys(t,e,n,r,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function jp(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(st(t,e,r.children,n),r=be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cc(t,n,e);else if(t.tag===19)cc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(be,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&zi(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Ys(e,!1,o,n,i);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&zi(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Ys(e,!0,n,null,i);break;case"together":Ys(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function on(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=In(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=In(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function w0(t,e,n){switch(e.tag){case 3:Qp(e),Rr();break;case 5:Tp(e);break;case 1:mt(e.type)&&bi(e);break;case 4:Fa(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Te(Ui,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?Zp(t,e,n):(Te(be,be.current&1),t=on(t,e,n),t!==null?t.sibling:null);Te(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jp(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Te(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,Kp(t,e,n)}return on(t,e,n)}var eh,zl,th,nh;eh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zl=function(){};th=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,qn(Kt.current);var i=null;switch(n){case"input":o=ll(t,o),r=ll(t,r),i=[];break;case"select":o=Le({},o,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":o=cl(t,o),r=cl(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pi)}fl(n,r);var s;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var l=o[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(mo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(mo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ke("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};nh=function(t,e,n,r){n!==r&&(e.flags|=4)};function Kr(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function x0(t,e,n){var r=e.pendingProps;switch(Ra(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(e),null;case 1:return mt(e.type)&&Mi(),je(e),null;case 3:return r=e.stateNode,Mr(),Ne(ht),Ne(nt),za(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(Jl(Ft),Ft=null))),zl(t,e),je(e),null;case 5:Ba(e);var o=qn(ko.current);if(n=e.type,t!==null&&e.stateNode!=null)th(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return je(e),null}if(t=qn(Kt.current),Qo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Jt]=e,r[To]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(o=0;o<no.length;o++)ke(no[o],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":_u(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":wu(r,i),ke("invalid",r)}fl(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Xo(r.textContent,l,t),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Xo(r.textContent,l,t),o=["children",""+l]):mo.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ke("scroll",r)}switch(n){case"input":Ho(r),Su(r,i,!0);break;case"textarea":Ho(r),xu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pi)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Jt]=e,t[To]=r,eh(t,e,!1,!1),e.stateNode=t;e:{switch(s=pl(n,r),n){case"dialog":ke("cancel",t),ke("close",t),o=r;break;case"iframe":case"object":case"embed":ke("load",t),o=r;break;case"video":case"audio":for(o=0;o<no.length;o++)ke(no[o],t);o=r;break;case"source":ke("error",t),o=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),o=r;break;case"details":ke("toggle",t),o=r;break;case"input":_u(t,r),o=ll(t,r),ke("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Le({},r,{value:void 0}),ke("invalid",t);break;case"textarea":wu(t,r),o=cl(t,r),ke("invalid",t);break;default:o=r}fl(n,o),l=o;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?bf(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Pf(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&go(t,u):typeof u=="number"&&go(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ke("scroll",t):u!=null&&ma(t,i,u,s))}switch(n){case"input":Ho(t),Su(t,r,!1);break;case"textarea":Ho(t),xu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Sr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Sr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Pi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return je(e),null;case 6:if(t&&e.stateNode!=null)nh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=qn(ko.current),qn(Kt.current),Qo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jt]=e,(i=r.nodeValue!==n)&&(t=_t,t!==null))switch(t.tag){case 3:Xo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jt]=e,e.stateNode=r}return je(e),null;case 13:if(Ne(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&vt!==null&&e.mode&1&&!(e.flags&128))Sp(),Rr(),e.flags|=98560,i=!1;else if(i=Qo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(oe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(oe(317));i[Jt]=e}else Rr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;je(e),i=!1}else Ft!==null&&(Jl(Ft),Ft=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?He===0&&(He=3):Qa())),e.updateQueue!==null&&(e.flags|=4),je(e),null);case 4:return Mr(),zl(t,e),t===null&&Eo(e.stateNode.containerInfo),je(e),null;case 10:return Da(e.type._context),je(e),null;case 17:return mt(e.type)&&Mi(),je(e),null;case 19:if(Ne(be),i=e.memoizedState,i===null)return je(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Kr(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=zi(t),s!==null){for(e.flags|=128,Kr(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(be,be.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Dr&&(e.flags|=128,r=!0,Kr(i,!1),e.lanes=4194304)}else{if(!r)if(t=zi(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Kr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Pe)return je(e),null}else 2*Fe()-i.renderingStartTime>Dr&&n!==1073741824&&(e.flags|=128,r=!0,Kr(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=be.current,Te(be,r?n&1|2:n&1),e):(je(e),null);case 22:case 23:return Xa(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yt&1073741824&&(je(e),e.subtreeFlags&6&&(e.flags|=8192)):je(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function E0(t,e){switch(Ra(e),e.tag){case 1:return mt(e.type)&&Mi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mr(),Ne(ht),Ne(nt),za(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ba(e),null;case 13:if(Ne(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Rr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(be),null;case 4:return Mr(),null;case 10:return Da(e.type._context),null;case 22:case 23:return Xa(),null;case 24:return null;default:return null}}var ei=!1,et=!1,C0=typeof WeakSet=="function"?WeakSet:Set,ae=null;function hr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function Vl(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var dc=!1;function T0(t,e){if(El=Ai,t=lp(),Aa(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,d=0,f=0,p=t,h=null;t:for(;;){for(var m;p!==n||o!==0&&p.nodeType!==3||(l=s+o),p!==i||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(m=p.firstChild)!==null;)h=p,p=m;for(;;){if(p===t)break t;if(h===n&&++d===o&&(l=s),h===i&&++f===r&&(u=s),(m=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=m}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cl={focusedElem:t,selectionRange:n},Ai=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,x=_.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Lt(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(T){Ue(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return _=dc,dc=!1,_}function co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&Vl(e,n,i)}o=o.next}while(o!==r)}}function as(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rh(t){var e=t.alternate;e!==null&&(t.alternate=null,rh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jt],delete e[To],delete e[kl],delete e[l0],delete e[a0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oh(t){return t.tag===5||t.tag===3||t.tag===4}function fc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pi));else if(r!==4&&(t=t.child,t!==null))for(Hl(t,e,n),t=t.sibling;t!==null;)Hl(t,e,n),t=t.sibling}function Ol(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ol(t,e,n),t=t.sibling;t!==null;)Ol(t,e,n),t=t.sibling}var Je=null,Ut=!1;function fn(t,e,n){for(n=n.child;n!==null;)ih(t,e,n),n=n.sibling}function ih(t,e,n){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(es,n)}catch{}switch(n.tag){case 5:et||hr(n,e);case 6:var r=Je,o=Ut;Je=null,fn(t,e,n),Je=r,Ut=o,Je!==null&&(Ut?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Ut?(t=Je,n=n.stateNode,t.nodeType===8?Gs(t.parentNode,n):t.nodeType===1&&Gs(t,n),So(t)):Gs(Je,n.stateNode));break;case 4:r=Je,o=Ut,Je=n.stateNode.containerInfo,Ut=!0,fn(t,e,n),Je=r,Ut=o;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Vl(n,e,s),o=o.next}while(o!==r)}fn(t,e,n);break;case 1:if(!et&&(hr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ue(n,e,l)}fn(t,e,n);break;case 21:fn(t,e,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,fn(t,e,n),et=r):fn(t,e,n);break;default:fn(t,e,n)}}function pc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new C0),e.forEach(function(r){var o=D0.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Dt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,Ut=!1;break e;case 3:Je=l.stateNode.containerInfo,Ut=!0;break e;case 4:Je=l.stateNode.containerInfo,Ut=!0;break e}l=l.return}if(Je===null)throw Error(oe(160));ih(i,s,o),Je=null,Ut=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(d){Ue(o,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sh(e,t),e=e.sibling}function sh(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dt(e,t),$t(t),r&4){try{co(3,t,t.return),as(3,t)}catch(y){Ue(t,t.return,y)}try{co(5,t,t.return)}catch(y){Ue(t,t.return,y)}}break;case 1:Dt(e,t),$t(t),r&512&&n!==null&&hr(n,n.return);break;case 5:if(Dt(e,t),$t(t),r&512&&n!==null&&hr(n,n.return),t.flags&32){var o=t.stateNode;try{go(o,"")}catch(y){Ue(t,t.return,y)}}if(r&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Af(o,i),pl(l,s);var d=pl(l,i);for(s=0;s<u.length;s+=2){var f=u[s],p=u[s+1];f==="style"?bf(o,p):f==="dangerouslySetInnerHTML"?Pf(o,p):f==="children"?go(o,p):ma(o,f,p,d)}switch(l){case"input":al(o,i);break;case"textarea":Nf(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Sr(o,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Sr(o,!!i.multiple,i.defaultValue,!0):Sr(o,!!i.multiple,i.multiple?[]:"",!1))}o[To]=i}catch(y){Ue(t,t.return,y)}}break;case 6:if(Dt(e,t),$t(t),r&4){if(t.stateNode===null)throw Error(oe(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(y){Ue(t,t.return,y)}}break;case 3:if(Dt(e,t),$t(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{So(e.containerInfo)}catch(y){Ue(t,t.return,y)}break;case 4:Dt(e,t),$t(t);break;case 13:Dt(e,t),$t(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Ya=Fe())),r&4&&pc(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(et=(d=et)||f,Dt(e,t),et=d):Dt(e,t),$t(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(ae=t,f=t.child;f!==null;){for(p=ae=f;ae!==null;){switch(h=ae,m=h.child,h.tag){case 0:case 11:case 14:case 15:co(4,h,h.return);break;case 1:hr(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){Ue(r,n,y)}}break;case 5:hr(h,h.return);break;case 22:if(h.memoizedState!==null){mc(p);continue}}m!==null?(m.return=h,ae=m):mc(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{o=p.stateNode,d?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Mf("display",s))}catch(y){Ue(t,t.return,y)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(y){Ue(t,t.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Dt(e,t),$t(t),r&4&&pc(t);break;case 21:break;default:Dt(e,t),$t(t)}}function $t(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oh(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(go(o,""),r.flags&=-33);var i=fc(t);Ol(t,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,l=fc(t);Hl(t,l,s);break;default:throw Error(oe(161))}}catch(u){Ue(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function I0(t,e,n){ae=t,lh(t)}function lh(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var o=ae,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||ei;if(!s){var l=o.alternate,u=l!==null&&l.memoizedState!==null||et;l=ei;var d=et;if(ei=s,(et=u)&&!d)for(ae=o;ae!==null;)s=ae,u=s.child,s.tag===22&&s.memoizedState!==null?gc(o):u!==null?(u.return=s,ae=u):gc(o);for(;i!==null;)ae=i,lh(i),i=i.sibling;ae=o,ei=l,et=d}hc(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ae=i):hc(t)}}function hc(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:et||as(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!et)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Zu(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zu(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&So(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}et||e.flags&512&&Gl(e)}catch(h){Ue(e,e.return,h)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function mc(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function gc(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{as(4,e)}catch(u){Ue(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(u){Ue(e,o,u)}}var i=e.return;try{Gl(e)}catch(u){Ue(e,i,u)}break;case 5:var s=e.return;try{Gl(e)}catch(u){Ue(e,s,u)}}}catch(u){Ue(e,e.return,u)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var k0=Math.ceil,Hi=ln.ReactCurrentDispatcher,Wa=ln.ReactCurrentOwner,Nt=ln.ReactCurrentBatchConfig,_e=0,qe=null,Ve=null,Ke=0,yt=0,mr=Rn(0),He=0,Po=null,Xn=0,us=0,Ja=0,fo=null,ft=null,Ya=0,Dr=1/0,Xt=null,Oi=!1,ql=null,Cn=null,ti=!1,vn=null,qi=0,po=0,$l=null,vi=-1,_i=0;function lt(){return _e&6?Fe():vi!==-1?vi:vi=Fe()}function Tn(t){return t.mode&1?_e&2&&Ke!==0?Ke&-Ke:c0.transition!==null?(_i===0&&(_i=$f()),_i):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:Zf(t.type)),t):1}function zt(t,e,n,r){if(50<po)throw po=0,$l=null,Error(oe(185));Do(t,n,r),(!(_e&2)||t!==qe)&&(t===qe&&(!(_e&2)&&(us|=n),He===4&&gn(t,Ke)),gt(t,r),n===1&&_e===0&&!(e.mode&1)&&(Dr=Fe()+500,is&&Pn()))}function gt(t,e){var n=t.callbackNode;cg(t,e);var r=ki(t,t===qe?Ke:0);if(r===0)n!==null&&Tu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Tu(n),e===1)t.tag===0?u0(yc.bind(null,t)):yp(yc.bind(null,t)),i0(function(){!(_e&6)&&Pn()}),n=null;else{switch(Wf(r)){case 1:n=Sa;break;case 4:n=Of;break;case 16:n=Ii;break;case 536870912:n=qf;break;default:n=Ii}n=mh(n,ah.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ah(t,e){if(vi=-1,_i=0,_e&6)throw Error(oe(327));var n=t.callbackNode;if(Tr()&&t.callbackNode!==n)return null;var r=ki(t,t===qe?Ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$i(t,r);else{e=r;var o=_e;_e|=2;var i=ch();(qe!==t||Ke!==e)&&(Xt=null,Dr=Fe()+500,$n(t,e));do try{R0();break}catch(l){uh(t,l)}while(!0);ba(),Hi.current=i,_e=o,Ve!==null?e=0:(qe=null,Ke=0,e=He)}if(e!==0){if(e===2&&(o=vl(t),o!==0&&(r=o,e=Wl(t,o))),e===1)throw n=Po,$n(t,0),gn(t,r),gt(t,Fe()),n;if(e===6)gn(t,r);else{if(o=t.current.alternate,!(r&30)&&!A0(o)&&(e=$i(t,r),e===2&&(i=vl(t),i!==0&&(r=i,e=Wl(t,i))),e===1))throw n=Po,$n(t,0),gn(t,r),gt(t,Fe()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:Vn(t,ft,Xt);break;case 3:if(gn(t,r),(r&130023424)===r&&(e=Ya+500-Fe(),10<e)){if(ki(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){lt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Il(Vn.bind(null,t,ft,Xt),e);break}Vn(t,ft,Xt);break;case 4:if(gn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var s=31-Bt(r);i=1<<s,s=e[s],s>o&&(o=s),r&=~i}if(r=o,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*k0(r/1960))-r,10<r){t.timeoutHandle=Il(Vn.bind(null,t,ft,Xt),r);break}Vn(t,ft,Xt);break;case 5:Vn(t,ft,Xt);break;default:throw Error(oe(329))}}}return gt(t,Fe()),t.callbackNode===n?ah.bind(null,t):null}function Wl(t,e){var n=fo;return t.current.memoizedState.isDehydrated&&($n(t,e).flags|=256),t=$i(t,e),t!==2&&(e=ft,ft=n,e!==null&&Jl(e)),t}function Jl(t){ft===null?ft=t:ft.push.apply(ft,t)}function A0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Ht(i(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gn(t,e){for(e&=~Ja,e&=~us,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bt(e),r=1<<n;t[n]=-1,e&=~r}}function yc(t){if(_e&6)throw Error(oe(327));Tr();var e=ki(t,0);if(!(e&1))return gt(t,Fe()),null;var n=$i(t,e);if(t.tag!==0&&n===2){var r=vl(t);r!==0&&(e=r,n=Wl(t,r))}if(n===1)throw n=Po,$n(t,0),gn(t,e),gt(t,Fe()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vn(t,ft,Xt),gt(t,Fe()),null}function Ka(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(Dr=Fe()+500,is&&Pn())}}function Qn(t){vn!==null&&vn.tag===0&&!(_e&6)&&Tr();var e=_e;_e|=1;var n=Nt.transition,r=Ee;try{if(Nt.transition=null,Ee=1,t)return t()}finally{Ee=r,Nt.transition=n,_e=e,!(_e&6)&&Pn()}}function Xa(){yt=mr.current,Ne(mr)}function $n(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,o0(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Ra(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mi();break;case 3:Mr(),Ne(ht),Ne(nt),za();break;case 5:Ba(r);break;case 4:Mr();break;case 13:Ne(be);break;case 19:Ne(be);break;case 10:Da(r.type._context);break;case 22:case 23:Xa()}n=n.return}if(qe=t,Ve=t=In(t.current,null),Ke=yt=e,He=0,Po=null,Ja=us=Xn=0,ft=fo=null,On!==null){for(e=0;e<On.length;e++)if(n=On[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}On=null}return t}function uh(t,e){do{var n=Ve;try{if(ba(),mi.current=Gi,Vi){for(var r=De.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Vi=!1}if(Kn=0,Oe=Ge=De=null,uo=!1,Ao=0,Wa.current=null,n===null||n.return===null){He=1,Po=e,Ve=null;break}e:{var i=t,s=n.return,l=n,u=e;if(e=Ke,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=oc(s);if(m!==null){m.flags&=-257,ic(m,s,l,i,e),m.mode&1&&rc(i,d,e),e=m,u=d;var _=e.updateQueue;if(_===null){var y=new Set;y.add(u),e.updateQueue=y}else _.add(u);break e}else{if(!(e&1)){rc(i,d,e),Qa();break e}u=Error(oe(426))}}else if(Pe&&l.mode&1){var x=oc(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ic(x,s,l,i,e),Pa(br(u,l));break e}}i=u=br(u,l),He!==4&&(He=2),fo===null?fo=[i]:fo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Wp(i,u,e);Qu(i,g);break e;case 1:l=u;var v=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Cn===null||!Cn.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=Jp(i,l,e);Qu(i,T);break e}}i=i.return}while(i!==null)}fh(n)}catch(I){e=I,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function ch(){var t=Hi.current;return Hi.current=Gi,t===null?Gi:t}function Qa(){(He===0||He===3||He===2)&&(He=4),qe===null||!(Xn&268435455)&&!(us&268435455)||gn(qe,Ke)}function $i(t,e){var n=_e;_e|=2;var r=ch();(qe!==t||Ke!==e)&&(Xt=null,$n(t,e));do try{N0();break}catch(o){uh(t,o)}while(!0);if(ba(),_e=n,Hi.current=r,Ve!==null)throw Error(oe(261));return qe=null,Ke=0,He}function N0(){for(;Ve!==null;)dh(Ve)}function R0(){for(;Ve!==null&&!tg();)dh(Ve)}function dh(t){var e=hh(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?fh(t):Ve=e,Wa.current=null}function fh(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=E0(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Ve=null;return}}else if(n=x0(n,e,yt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);He===0&&(He=5)}function Vn(t,e,n){var r=Ee,o=Nt.transition;try{Nt.transition=null,Ee=1,P0(t,e,n,r)}finally{Nt.transition=o,Ee=r}return null}function P0(t,e,n,r){do Tr();while(vn!==null);if(_e&6)throw Error(oe(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(dg(t,i),t===qe&&(Ve=qe=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ti||(ti=!0,mh(Ii,function(){return Tr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var s=Ee;Ee=1;var l=_e;_e|=4,Wa.current=null,T0(t,n),sh(n,t),Qg(Cl),Ai=!!El,Cl=El=null,t.current=n,I0(n),ng(),_e=l,Ee=s,Nt.transition=i}else t.current=n;if(ti&&(ti=!1,vn=t,qi=o),i=t.pendingLanes,i===0&&(Cn=null),ig(n.stateNode),gt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Oi)throw Oi=!1,t=ql,ql=null,t;return qi&1&&t.tag!==0&&Tr(),i=t.pendingLanes,i&1?t===$l?po++:(po=0,$l=t):po=0,Pn(),null}function Tr(){if(vn!==null){var t=Wf(qi),e=Nt.transition,n=Ee;try{if(Nt.transition=null,Ee=16>t?16:t,vn===null)var r=!1;else{if(t=vn,vn=null,qi=0,_e&6)throw Error(oe(331));var o=_e;for(_e|=4,ae=t.current;ae!==null;){var i=ae,s=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(ae=d;ae!==null;){var f=ae;switch(f.tag){case 0:case 11:case 15:co(8,f,i)}var p=f.child;if(p!==null)p.return=f,ae=p;else for(;ae!==null;){f=ae;var h=f.sibling,m=f.return;if(rh(f),f===d){ae=null;break}if(h!==null){h.return=m,ae=h;break}ae=m}}}var _=i.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}ae=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,ae=s;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:co(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ae=g;break e}ae=i.return}}var v=t.current;for(ae=v;ae!==null;){s=ae;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,ae=S;else e:for(s=v;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:as(9,l)}}catch(I){Ue(l,l.return,I)}if(l===s){ae=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,ae=T;break e}ae=l.return}}if(_e=o,Pn(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(es,t)}catch{}r=!0}return r}finally{Ee=n,Nt.transition=e}}return!1}function vc(t,e,n){e=br(n,e),e=Wp(t,e,1),t=En(t,e,1),e=lt(),t!==null&&(Do(t,1,e),gt(t,e))}function Ue(t,e,n){if(t.tag===3)vc(t,t,n);else for(;e!==null;){if(e.tag===3){vc(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cn===null||!Cn.has(r))){t=br(n,t),t=Jp(e,t,1),e=En(e,t,1),t=lt(),e!==null&&(Do(e,1,t),gt(e,t));break}}e=e.return}}function M0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Ke&n)===n&&(He===4||He===3&&(Ke&130023424)===Ke&&500>Fe()-Ya?$n(t,0):Ja|=n),gt(t,e)}function ph(t,e){e===0&&(t.mode&1?(e=$o,$o<<=1,!($o&130023424)&&($o=4194304)):e=1);var n=lt();t=rn(t,e),t!==null&&(Do(t,e,n),gt(t,n))}function b0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ph(t,n)}function D0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),ph(t,n)}var hh;hh=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pt=!1,w0(t,e,n);pt=!!(t.flags&131072)}else pt=!1,Pe&&e.flags&1048576&&vp(e,Li,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yi(t,e),t=e.pendingProps;var o=Nr(e,nt.current);Cr(e,n),o=Ga(null,e,r,t,o,n);var i=Ha();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(r)?(i=!0,bi(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ua(e),o.updater=ls,e.stateNode=o,o._reactInternals=e,bl(e,r,t,n),e=Ul(null,e,r,!0,i,n)):(e.tag=0,Pe&&i&&Na(e),st(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yi(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=U0(r),t=Lt(r,t),o){case 0:e=Ll(null,e,r,t,n);break e;case 1:e=ac(null,e,r,t,n);break e;case 11:e=sc(null,e,r,t,n);break e;case 14:e=lc(null,e,r,Lt(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Lt(r,o),Ll(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Lt(r,o),ac(t,e,r,o,n);case 3:e:{if(Qp(e),t===null)throw Error(oe(387));r=e.pendingProps,i=e.memoizedState,o=i.element,Cp(t,e),Bi(e,r,null,n);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=br(Error(oe(423)),e),e=uc(t,e,r,n,o);break e}else if(r!==o){o=br(Error(oe(424)),e),e=uc(t,e,r,n,o);break e}else for(vt=xn(e.stateNode.containerInfo.firstChild),_t=e,Pe=!0,Ft=null,n=xp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rr(),r===o){e=on(t,e,n);break e}st(t,e,r,n)}e=e.child}return e;case 5:return Tp(e),t===null&&Rl(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,Tl(r,o)?s=null:i!==null&&Tl(r,i)&&(e.flags|=32),Xp(t,e),st(t,e,s,n),e.child;case 6:return t===null&&Rl(e),null;case 13:return Zp(t,e,n);case 4:return Fa(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pr(e,null,r,n):st(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Lt(r,o),sc(t,e,r,o,n);case 7:return st(t,e,e.pendingProps,n),e.child;case 8:return st(t,e,e.pendingProps.children,n),e.child;case 12:return st(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,Te(Ui,r._currentValue),r._currentValue=s,i!==null)if(Ht(i.value,s)){if(i.children===o.children&&!ht.current){e=on(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=en(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Pl(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(oe(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Pl(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}st(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Cr(e,n),o=Pt(o),r=r(o),e.flags|=1,st(t,e,r,n),e.child;case 14:return r=e.type,o=Lt(r,e.pendingProps),o=Lt(r.type,o),lc(t,e,r,o,n);case 15:return Yp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Lt(r,o),yi(t,e),e.tag=1,mt(r)?(t=!0,bi(e)):t=!1,Cr(e,n),$p(e,r,o),bl(e,r,o,n),Ul(null,e,r,!0,t,n);case 19:return jp(t,e,n);case 22:return Kp(t,e,n)}throw Error(oe(156,e.tag))};function mh(t,e){return Hf(t,e)}function L0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(t,e,n,r){return new L0(t,e,n,r)}function Za(t){return t=t.prototype,!(!t||!t.isReactComponent)}function U0(t){if(typeof t=="function")return Za(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ya)return 11;if(t===va)return 14}return 2}function In(t,e){var n=t.alternate;return n===null?(n=At(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Si(t,e,n,r,o,i){var s=2;if(r=t,typeof t=="function")Za(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ir:return Wn(n.children,o,i,e);case ga:s=8,o|=8;break;case rl:return t=At(12,n,e,o|2),t.elementType=rl,t.lanes=i,t;case ol:return t=At(13,n,e,o),t.elementType=ol,t.lanes=i,t;case il:return t=At(19,n,e,o),t.elementType=il,t.lanes=i,t;case Tf:return cs(n,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ef:s=10;break e;case Cf:s=9;break e;case ya:s=11;break e;case va:s=14;break e;case pn:s=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=At(s,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function Wn(t,e,n,r){return t=At(7,t,r,e),t.lanes=n,t}function cs(t,e,n,r){return t=At(22,t,r,e),t.elementType=Tf,t.lanes=n,t.stateNode={isHidden:!1},t}function Ks(t,e,n){return t=At(6,t,null,e),t.lanes=n,t}function Xs(t,e,n){return e=At(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function F0(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rs(0),this.expirationTimes=Rs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rs(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ja(t,e,n,r,o,i,s,l,u){return t=new F0(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=At(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ua(i),t}function B0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:or,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gh(t){if(!t)return An;t=t._reactInternals;e:{if(jn(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(mt(n))return gp(t,n,e)}return e}function yh(t,e,n,r,o,i,s,l,u){return t=ja(n,r,!0,t,o,i,s,l,u),t.context=gh(null),n=t.current,r=lt(),o=Tn(n),i=en(r,o),i.callback=e??null,En(n,i,o),t.current.lanes=o,Do(t,o,r),gt(t,r),t}function ds(t,e,n,r){var o=e.current,i=lt(),s=Tn(o);return n=gh(n),e.context===null?e.context=n:e.pendingContext=n,e=en(i,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=En(o,e,s),t!==null&&(zt(t,o,s,i),hi(t,o,s)),s}function Wi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _c(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eu(t,e){_c(t,e),(t=t.alternate)&&_c(t,e)}function z0(){return null}var vh=typeof reportError=="function"?reportError:function(t){console.error(t)};function tu(t){this._internalRoot=t}fs.prototype.render=tu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));ds(t,e,null,null)};fs.prototype.unmount=tu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qn(function(){ds(null,t,null,null)}),e[nn]=null}};function fs(t){this._internalRoot=t}fs.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mn.length&&e!==0&&e<mn[n].priority;n++);mn.splice(n,0,t),n===0&&Qf(t)}};function nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ps(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sc(){}function V0(t,e,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var d=Wi(s);i.call(d)}}var s=yh(e,r,t,0,null,!1,!1,"",Sc);return t._reactRootContainer=s,t[nn]=s.current,Eo(t.nodeType===8?t.parentNode:t),Qn(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var d=Wi(u);l.call(d)}}var u=ja(t,0,!1,null,null,!1,!1,"",Sc);return t._reactRootContainer=u,t[nn]=u.current,Eo(t.nodeType===8?t.parentNode:t),Qn(function(){ds(e,u,n,r)}),u}function hs(t,e,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var l=o;o=function(){var u=Wi(s);l.call(u)}}ds(e,s,t,o)}else s=V0(n,e,t,o,r);return Wi(s)}Jf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=to(e.pendingLanes);n!==0&&(wa(e,n|1),gt(e,Fe()),!(_e&6)&&(Dr=Fe()+500,Pn()))}break;case 13:Qn(function(){var r=rn(t,1);if(r!==null){var o=lt();zt(r,t,1,o)}}),eu(t,1)}};xa=function(t){if(t.tag===13){var e=rn(t,134217728);if(e!==null){var n=lt();zt(e,t,134217728,n)}eu(t,134217728)}};Yf=function(t){if(t.tag===13){var e=Tn(t),n=rn(t,e);if(n!==null){var r=lt();zt(n,t,e,r)}eu(t,e)}};Kf=function(){return Ee};Xf=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};ml=function(t,e,n){switch(e){case"input":if(al(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=os(r);if(!o)throw Error(oe(90));kf(r),al(r,o)}}}break;case"textarea":Nf(t,n);break;case"select":e=n.value,e!=null&&Sr(t,!!n.multiple,e,!1)}};Uf=Ka;Ff=Qn;var G0={usingClientEntryPoint:!1,Events:[Uo,ur,os,Df,Lf,Ka]},Xr={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H0={bundleType:Xr.bundleType,version:Xr.version,rendererPackageName:Xr.rendererPackageName,rendererConfig:Xr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vf(t),t===null?null:t.stateNode},findFiberByHostInstance:Xr.findFiberByHostInstance||z0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ni=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ni.isDisabled&&ni.supportsFiber)try{es=ni.inject(H0),Yt=ni}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G0;wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nu(e))throw Error(oe(200));return B0(t,e,null,n)};wt.createRoot=function(t,e){if(!nu(t))throw Error(oe(299));var n=!1,r="",o=vh;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=ja(t,1,!1,null,null,n,!1,r,o),t[nn]=e.current,Eo(t.nodeType===8?t.parentNode:t),new tu(e)};wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=Vf(e),t=t===null?null:t.stateNode,t};wt.flushSync=function(t){return Qn(t)};wt.hydrate=function(t,e,n){if(!ps(e))throw Error(oe(200));return hs(null,t,e,!0,n)};wt.hydrateRoot=function(t,e,n){if(!nu(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=vh;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=yh(e,null,t,1,n??null,o,!1,i,s),t[nn]=e.current,Eo(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new fs(e)};wt.render=function(t,e,n){if(!ps(e))throw Error(oe(200));return hs(null,t,e,!1,n)};wt.unmountComponentAtNode=function(t){if(!ps(t))throw Error(oe(40));return t._reactRootContainer?(Qn(function(){hs(null,null,t,!1,function(){t._reactRootContainer=null,t[nn]=null})}),!0):!1};wt.unstable_batchedUpdates=Ka;wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ps(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return hs(t,e,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function _h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_h)}catch(t){console.error(t)}}_h(),_f.exports=wt;var O0=_f.exports,wc=O0;tl.createRoot=wc.createRoot,tl.hydrateRoot=wc.hydrateRoot;var kt=(t=>(t.LIGHT="light",t.DARK="dark",t.CHALKBOARD="chalkboard",t.BLUEPRINT="blueprint",t))(kt||{}),gr=(t=>(t.GEMINI_3_FLASH="gemini-3-flash-preview",t.GEMINI_3_PRO="gemini-3-pro-preview",t.GEMINI_2_5_FLASH="gemini-2.5-flash",t.GEMINI_2_5_PRO="gemini-2.5-pro",t))(gr||{});const q0=kt.DARK,Sh=gr.GEMINI_3_PRO,wh="FATY_V4_AUTO",Yl=[{label:"Gemini 3.0 Pro Preview",value:gr.GEMINI_3_PRO},{label:"Gemini 3.0 Flash Preview",value:gr.GEMINI_3_FLASH},{label:"Gemini 2.5 Flash",value:gr.GEMINI_2_5_FLASH},{label:"Gemini 2.5 Pro",value:gr.GEMINI_2_5_PRO}],xc=[{label:"Light Paper",value:kt.LIGHT},{label:"Dark Mode",value:kt.DARK},{label:"Chalkboard",value:kt.CHALKBOARD},{label:"Blueprint",value:kt.BLUEPRINT}],ze={SESSION:"ai_teacher_session",API_KEY:"ai_teacher_api_key",SETTINGS:"ai_teacher_settings",LIBRARY_INDEX:"ai_teacher_library_index",LIBRARY_DATA_PREFIX:"ai_teacher_lib_data_",SYLLABUS_GALLERY:"ai_teacher_syllabus_gallery",TEST_RESULTS:"ai_teacher_test_results",AUTO_SAVE_CONFIG:"ai_teacher_auto_save_config"},yr=({label:t,options:e,className:n="",...r})=>E.jsxs("div",{className:"flex flex-col gap-1",children:[t&&E.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),E.jsx("select",{className:`block w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 dark:text-gray-100 sm:text-sm ${n}`,...r,children:e.map(o=>E.jsx("option",{value:o.value,children:o.label},o.value))})]}),$0=({label:t,className:e="",...n})=>E.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[t&&E.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),E.jsx("input",{className:`w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 dark:text-gray-100 placeholder-gray-400 ${e}`,...n})]}),Ae=({children:t,variant:e="primary",size:n="md",className:r="",...o})=>{const i="inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",s={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 dark:bg-blue-500 dark:hover:bg-blue-600",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-400 dark:text-gray-300 dark:hover:bg-gray-800",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},l={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return E.jsx("button",{className:`${i} ${s[e]} ${l[n]} ${r}`,...o,children:t})},W0=({theme:t,setTheme:e,model:n,setModel:r,apiKey:o,setApiKey:i,onClearSession:s,saveToLocal:l,setSaveToLocal:u,toggleAdvancedMode:d,onOpenSessionManager:f,playgroundOpen:p,togglePlayground:h,hasPlaygroundCode:m,onResumeAutoSave:_})=>{const[y,x]=te.useState(!1),[g,v]=te.useState(!o);return te.useEffect(()=>{},[o]),E.jsx("header",{className:"sticky top-0 z-30 w-full backdrop-blur-md bg-white/70 dark:bg-gray-900/70 border-b border-gray-200 dark:border-gray-800 shadow-sm transition-colors duration-300 flex-shrink-0",children:E.jsxs("div",{className:"max-w-[1920px] mx-auto px-4 py-3",children:[E.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),E.jsx("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400",children:"Fatygoras"})]}),E.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m&&!p&&E.jsxs(Ae,{size:"sm",onClick:h,className:"animate-pulse bg-green-600 hover:bg-green-700 text-white border-none text-xs sm:text-sm",children:[E.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),E.jsx("span",{className:"hidden sm:inline",children:"Playground"})]}),_&&E.jsxs(Ae,{size:"sm",onClick:_,className:"bg-orange-500 hover:bg-orange-600 text-white border-none animate-pulse",title:"Reconnect to Auto-Save Folder",children:[E.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Resume Auto-Save"]}),E.jsx("button",{onClick:()=>v(!g),className:`p-2 rounded-lg transition-colors ${o?"text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800":"text-red-500 animate-pulse"}`,title:"API Key Settings",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),E.jsx("button",{className:"lg:hidden p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",onClick:()=>x(!y),children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:y?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),E.jsxs("div",{className:"hidden lg:flex flex-wrap items-center gap-3",children:[E.jsxs("div",{className:"flex items-center gap-2 mr-4 ml-2",children:[E.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Storage"}),E.jsx("button",{onClick:()=>u(!l),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${l?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:E.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})]}),E.jsx(yr,{options:Yl,value:n,onChange:S=>r(S.target.value),className:"w-48 text-sm py-1"}),E.jsx(yr,{options:xc,value:t,onChange:S=>e(S.target.value),className:"w-32 text-sm py-1"}),E.jsx(Ae,{variant:"ghost",size:"sm",onClick:f,title:"Sessions Import/Export",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})}),E.jsx(Ae,{variant:"ghost",size:"sm",onClick:s,title:"Clear Session",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),E.jsx(Ae,{variant:"ghost",size:"sm",onClick:d,title:"Advanced Mode (API Tracker)",children:E.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})})]})]})]}),y&&E.jsxs("div",{className:"lg:hidden mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 space-y-4 animate-fade-in",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:"Local Storage"}),E.jsx("button",{onClick:()=>u(!l),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${l?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:E.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})]}),_&&E.jsx(Ae,{size:"sm",onClick:_,className:"w-full bg-orange-500 text-white",children:"Resume Auto-Save"}),E.jsx(yr,{label:"AI Model",options:Yl,value:n,onChange:S=>r(S.target.value),className:"w-full text-sm py-1"}),E.jsx(yr,{label:"Theme",options:xc,value:t,onChange:S=>e(S.target.value),className:"w-full text-sm py-1"}),E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(Ae,{variant:"secondary",size:"sm",onClick:f,children:"Sessions"}),E.jsx(Ae,{variant:"secondary",size:"sm",onClick:d,children:"Debug"})]}),E.jsx(Ae,{variant:"danger",size:"sm",onClick:()=>{s(),x(!1)},className:"w-full",children:"Clear Session"})]}),g&&E.jsx("div",{className:"mt-2 bg-gray-50 dark:bg-gray-800 rounded-lg p-3 animate-fade-in",children:E.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[E.jsx($0,{type:"password",placeholder:"Enter Google Gemini API Key",value:o,onChange:S=>i(S.target.value),className:"w-full",autoFocus:!o}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:"Auto-saves if Storage ON"}),E.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})]})})},J0=["#ef4444","#f97316","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#000000"],Y0=t=>{let e=t;if(/preserveAspectRatio/i.test(e)||(e=e.replace(/<svg/i,'<svg preserveAspectRatio="xMidYMid meet"')),!/viewBox/i.test(e)){const n=e.match(/width=["']?(\d+(\.\d+)?)["']?/i),r=e.match(/height=["']?(\d+(\.\d+)?)["']?/i);if(n&&r){const o=n[1],i=r[1];e=e.replace(/<svg/i,`<svg viewBox="0 0 ${o} ${i}"`).replace(/width=["']?(\d+(\.\d+)?)["']?/i,"").replace(/height=["']?(\d+(\.\d+)?)["']?/i,"")}}return e},K0=({svgContent:t,explanation:e,topic:n,onRefine:r,isRefining:o})=>{const[i,s]=te.useState(!1),[l,u]=te.useState(1),[d,f]=te.useState({x:0,y:0}),[p,h]=te.useState(!1),[m,_]=te.useState(!1),[y,x]=te.useState({x:0,y:0}),[g,v]=te.useState(0),[S,T]=te.useState(1),[I,b]=te.useState("pen"),[N,F]=te.useState("#ef4444"),[D,V]=te.useState(!1),[Z,P]=te.useState(null),[B,C]=te.useState([]),[H,ie]=te.useState(-1),[X,Y]=te.useState(""),O=te.useRef(null),J=te.useRef(null),z=te.useRef(null),M=te.useMemo(()=>Y0(t),[t]),ee=()=>{s(!i)},j=()=>{u(1),f({x:0,y:0})},ne=()=>{const L=new Blob([M],{type:"image/svg+xml"}),R=URL.createObjectURL(L),q=document.createElement("a");q.href=R,q.download=`${n.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.svg`,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(R)};te.useEffect(()=>{if(p&&J.current&&z.current){const L=J.current,R=L.getContext("2d"),q=z.current,re=q.clientWidth,W=q.clientHeight;if(L.width!==re||L.height!==W){let le=null;R&&L.width>0&&L.height>0&&(le=R.getImageData(0,0,L.width,L.height)),L.width=re,L.height=W,R&&(R.lineCap="round",R.lineJoin="round",R.lineWidth=3,R.font="bold 20px sans-serif",R.textBaseline="middle",le&&!i&&R.putImageData(le,0,0))}}},[p,i]);const pe=()=>{if(!J.current)return;const L=J.current.getContext("2d");if(!L)return;const R=B.slice(0,H+1);R.push(L.getImageData(0,0,J.current.width,J.current.height)),C(R),ie(R.length-1)},ve=()=>{var L;if(H>0){const R=H-1,q=B[R];ie(R);const re=(L=J.current)==null?void 0:L.getContext("2d");re&&q&&re.putImageData(q,0,0)}else H===0&&(ie(-1),U(!1))},fe=()=>{var L;if(H<B.length-1){const R=H+1,q=B[R];ie(R);const re=(L=J.current)==null?void 0:L.getContext("2d");re&&q&&re.putImageData(q,0,0)}},he=L=>{p?G(L):(_(!0),x({x:L.clientX-d.x,y:L.clientY-d.y}))},Re=L=>{p?A(L):m&&(L.preventDefault(),f({x:L.clientX-y.x,y:L.clientY-y.y}))},xe=()=>{p?k():_(!1)},rt=L=>{if(p){G(L);return}if(L.touches.length===2){const R=Math.hypot(L.touches[0].clientX-L.touches[1].clientX,L.touches[0].clientY-L.touches[1].clientY);v(R),T(l),_(!1)}else L.touches.length===1&&(_(!0),x({x:L.touches[0].clientX-d.x,y:L.touches[0].clientY-d.y}))},ot=L=>{if(p){A(L);return}if(L.touches.length===2){const R=Math.hypot(L.touches[0].clientX-L.touches[1].clientX,L.touches[0].clientY-L.touches[1].clientY);if(g>0){const q=R/g,re=Math.min(Math.max(.5,S*q),5);u(re)}}else L.touches.length===1&&m&&(L.cancelable&&L.preventDefault(),f({x:L.touches[0].clientX-y.x,y:L.touches[0].clientY-y.y}))},w=()=>{p&&k(),_(!1),v(0)},$=L=>{if(!J.current)return{x:0,y:0};const R=J.current.getBoundingClientRect(),q="touches"in L?L.touches[0].clientX:L.clientX,re="touches"in L?L.touches[0].clientY:L.clientY;return{x:(q-R.left)/l,y:(re-R.top)/l}},G=L=>{if(!p||!J.current)return;const R=J.current.getContext("2d");if(!R)return;if(I==="text"){const re=$(L);setTimeout(()=>{const W=prompt("Enter annotation text:");W&&(R.fillStyle=N,R.font="bold 20px sans-serif",R.textBaseline="middle",R.fillText(W,re.x,re.y),pe())},10);return}V(!0);const q=$(L);P(q),R.beginPath(),R.moveTo(q.x,q.y),I==="eraser"?(R.globalCompositeOperation="destination-out",R.lineWidth=20):(R.globalCompositeOperation="source-over",R.strokeStyle=N,R.lineWidth=3)},A=L=>{if(!p||!D||!J.current||!Z)return;const R=J.current.getContext("2d");if(!R)return;const q=$(L);if(I==="pen"||I==="eraser")R.lineTo(q.x,q.y),R.stroke();else if(H>=0&&B[H]?R.putImageData(B[H],0,0):R.clearRect(0,0,J.current.width,J.current.height),R.beginPath(),R.strokeStyle=N,R.fillStyle=N,R.lineWidth=3,R.globalCompositeOperation="source-over",I==="box")R.strokeRect(Z.x,Z.y,q.x-Z.x,q.y-Z.y);else if(I==="circle"){const re=Math.sqrt(Math.pow(q.x-Z.x,2)+Math.pow(q.y-Z.y,2));R.arc(Z.x,Z.y,re,0,2*Math.PI),R.stroke()}else if(I==="arrow"){R.moveTo(Z.x,Z.y),R.lineTo(q.x,q.y),R.stroke();const re=10,W=q.x-Z.x,le=q.y-Z.y,ge=Math.atan2(le,W);R.beginPath(),R.moveTo(q.x,q.y),R.lineTo(q.x-re*Math.cos(ge-Math.PI/6),q.y-re*Math.sin(ge-Math.PI/6)),R.lineTo(q.x-re*Math.cos(ge+Math.PI/6),q.y-re*Math.sin(ge+Math.PI/6)),R.lineTo(q.x,q.y),R.fill()}},k=()=>{var L,R;D&&(V(!1),P(null),(R=(L=J.current)==null?void 0:L.getContext("2d"))==null||R.closePath(),pe())},U=(L=!0)=>{const R=J.current;if(R){const q=R.getContext("2d");q==null||q.clearRect(0,0,R.width,R.height),L&&(C([]),ie(-1))}},Q=async()=>{var me,We,Et;if(!X.trim())return;const L=(me=z.current)==null?void 0:me.querySelector("svg");if(!L)return;const R=new XMLSerializer().serializeToString(L),re=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(R)))}`,W=document.createElement("canvas");W.width=((We=J.current)==null?void 0:We.width)||800,W.height=((Et=J.current)==null?void 0:Et.height)||600;const le=W.getContext("2d"),ge=new Image;ge.onload=()=>{if(!le)return;le.fillStyle="white",le.fillRect(0,0,W.width,W.height),le.drawImage(ge,0,0,W.width,W.height),J.current&&le.drawImage(J.current,0,0);const Qe=W.toDataURL("image/png").split(",")[1];r(Qe,X),Y(""),h(!1)},ge.src=re};return E.jsxs("div",{ref:O,className:`flex flex-col gap-6 mb-12 ${i?"fixed inset-0 z-[100] bg-gray-900 p-0 sm:p-4 overflow-hidden h-[100dvh]":"animate-fade-in"}`,children:[E.jsxs("div",{className:"relative group w-full h-full flex flex-col",children:[!i&&E.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"}),E.jsxs("div",{className:`relative bg-white dark:bg-[#1e1e1e] ring-1 ring-gray-900/5 dark:ring-white/10 shadow-xl overflow-hidden ${i?"h-full flex flex-col rounded-none sm:rounded-lg":"rounded-lg"}`,children:[E.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex flex-wrap justify-between items-center z-10 gap-2 overflow-x-auto no-scrollbar shrink-0",children:[E.jsx("h3",{className:"font-hand font-bold text-lg text-gray-800 dark:text-gray-200 truncate max-w-[150px] sm:max-w-[200px] shrink-0",children:n}),E.jsxs("div",{className:"flex items-center gap-2 flex-nowrap shrink-0",children:[p&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"flex items-center bg-gray-200 dark:bg-gray-700 rounded-lg p-0.5 mr-2",children:["pen","eraser","box","circle","arrow","text"].map(L=>E.jsxs("button",{onClick:()=>b(L),className:`p-2 sm:p-1.5 rounded-md text-xs font-semibold capitalize ${I===L?"bg-white dark:bg-gray-600 shadow text-blue-600":"text-gray-500"}`,title:L,children:[L==="pen"&&"",L==="eraser"&&"",L==="box"&&"",L==="circle"&&"",L==="arrow"&&"",L==="text"&&"T"]},L))}),E.jsx("div",{className:"flex items-center gap-1 mr-2 bg-gray-200 dark:bg-gray-700 p-1 rounded-lg",children:J0.map(L=>E.jsx("button",{onClick:()=>F(L),className:`w-5 h-5 sm:w-4 sm:h-4 rounded-full border border-gray-300 dark:border-gray-600 ${N===L?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:L},title:L},L))}),E.jsxs("div",{className:"flex items-center mr-2 text-gray-500 border-l border-gray-300 dark:border-gray-600 pl-2",children:[E.jsx("button",{onClick:ve,disabled:H<0,className:"p-2 sm:p-1 hover:text-blue-500 disabled:opacity-30",title:"Undo",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),E.jsx("button",{onClick:fe,disabled:H>=B.length-1,className:"p-2 sm:p-1 hover:text-blue-500 disabled:opacity-30",title:"Redo",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})})})]})]}),E.jsx("button",{onClick:ne,className:"p-2 sm:p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded mr-1",title:"Download SVG",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),E.jsx("button",{onClick:j,className:"p-2 sm:p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:"Reset View",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),E.jsx("button",{onClick:()=>u(L=>Math.max(.5,L-.1)),className:"p-2 sm:p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:"Zoom Out",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),E.jsxs("span",{className:"text-xs font-mono min-w-[30px] text-center hidden sm:inline",children:[Math.round(l*100),"%"]}),E.jsx("button",{onClick:()=>u(L=>Math.min(3,L+.1)),className:"p-2 sm:p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:"Zoom In",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),E.jsx("div",{className:"h-4 w-px bg-gray-300 dark:bg-gray-600 mx-1"}),E.jsx("button",{onClick:()=>h(!p),className:`p-2 sm:p-1 rounded transition-colors ${p?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:p?"Exit Annotation Mode":"Annotate",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),E.jsx("button",{onClick:ee,className:"p-2 sm:p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:i?"Minimize":"Maximize",children:i?E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]}),E.jsx("div",{className:`relative overflow-hidden bg-paper dark:bg-chalkboard-800 ${i?"flex-1":"min-h-[400px] aspect-square sm:aspect-video"} ${p?"":"cursor-grab active:cursor-grabbing"}`,style:{touchAction:"none"},onMouseDown:he,onMouseMove:Re,onMouseUp:xe,onMouseLeave:xe,onTouchStart:rt,onTouchMove:ot,onTouchEnd:w,children:E.jsxs("div",{ref:z,className:"absolute inset-0 transition-transform duration-75 origin-top-left flex items-center justify-center w-full h-full will-change-transform",style:{transform:`translate(${d.x}px, ${d.y}px) scale(${l})`},children:[E.jsx("div",{className:"pointer-events-none select-none w-full h-full flex items-center justify-center p-2 sm:p-8 [&>svg]:w-full [&>svg]:h-full",dangerouslySetInnerHTML:{__html:M}}),p&&E.jsx("canvas",{ref:J,className:"absolute inset-0 z-20 cursor-crosshair touch-none",onClick:L=>L.stopPropagation()})]})}),p&&E.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 p-3 flex flex-wrap gap-2 items-center justify-between shrink-0",children:[E.jsx("div",{className:"flex gap-2 text-xs",children:E.jsx("button",{onClick:()=>U(!0),className:"text-red-500 hover:underline",children:"Clear Drawings"})}),E.jsxs("div",{className:"flex gap-2 flex-1 max-w-md",children:[E.jsx("input",{type:"text",value:X,onChange:L=>Y(L.target.value),placeholder:"Circle something and ask...",className:"flex-1 px-3 py-1 text-sm rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"}),E.jsx(Ae,{size:"sm",onClick:Q,disabled:o||!X,children:o?"Analyzing...":"Ask AI"})]})]})]})]}),E.jsx("div",{className:`prose dark:prose-invert max-w-none bg-white/50 dark:bg-gray-800/50 p-6 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm ${i?"hidden":""}`,children:E.jsx("div",{className:"markdown-body whitespace-pre-wrap font-mono text-sm leading-relaxed",children:e})})]})};var X0={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Q0,Z0;function j0(){return{geminiUrl:Q0,vertexUrl:Z0}}function ey(t,e,n,r){var o,i;if(!(t!=null&&t.baseUrl)){const s=j0();return e?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(i=s.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class an{}function se(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function c(t,e,n){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let d=0;d<u.length;d++){const f=u[d];c(f,e.slice(i+1),n[d])}else for(const d of u)c(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];c(u[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],o=t[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const o=e[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(l=>a(l,e.slice(r+1),n)):n}else return n}else t=t[o]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function ty(t,e){for(const[n,r]of Object.entries(e)){const o=n.split("."),i=r.split("."),s=new Set;let l=-1;for(let u=0;u<o.length;u++)if(o[u]==="*"){l=u;break}if(l!==-1&&i.length>l)for(let u=l;u<i.length;u++){const d=i[u];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Kl(t,o,i,0,s)}}function Kl(t,e,n,r,o){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const u of l[s])Kl(u,e,n,r+1,o)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(d=>!d.startsWith("_")&&!o.has(d)),u={};for(const d of l)u[d]=s[d];for(const[d,f]of Object.entries(u)){const p=[];for(const h of n.slice(r))h==="*"?p.push(d):p.push(h);c(s,p,f)}for(const d of l)delete s[d]}}else{const s=t;i in s&&Kl(s[i],e,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ru(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ny(t){const e={},n=a(t,["operationName"]);n!=null&&c(e,["operationName"],n);const r=a(t,["resourceName"]);return r!=null&&c(e,["_url","resourceName"],r),e}function ry(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],iy(s)),e}function oy(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response"]);return s!=null&&c(e,["response"],sy(s)),e}function iy(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ly(s))),c(e,["generatedVideos"],i)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function sy(t){const e={},n=a(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ay(s))),c(e,["generatedVideos"],i)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function ly(t){const e={},n=a(t,["video"]);return n!=null&&c(e,["video"],hy(n)),e}function ay(t){const e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],my(n)),e}function uy(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function cy(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function dy(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response"]);return s!=null&&c(e,["response"],fy(s)),e}function fy(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function xh(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response"]);return s!=null&&c(e,["response"],py(s)),e}function py(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function hy(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&c(e,["videoBytes"],ru(r));const o=a(t,["encoding"]);return o!=null&&c(e,["mimeType"],o),e}function my(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["videoBytes"],ru(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ec;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ec||(Ec={}));var Cc;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Cc||(Cc={}));var Tc;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Tc||(Tc={}));var Ye;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ye||(Ye={}));var Ic;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ic||(Ic={}));var kc;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kc||(kc={}));var Ac;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ac||(Ac={}));var Nc;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Nc||(Nc={}));var Rc;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Rc||(Rc={}));var Pc;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Pc||(Pc={}));var Mc;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Mc||(Mc={}));var bc;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(bc||(bc={}));var Dc;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Dc||(Dc={}));var Lc;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Lc||(Lc={}));var Uc;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Uc||(Uc={}));var Fc;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Fc||(Fc={}));var Bc;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Bc||(Bc={}));var zc;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(zc||(zc={}));var Vc;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Vc||(Vc={}));var Ji;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ji||(Ji={}));var Gc;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Gc||(Gc={}));var Hc;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Hc||(Hc={}));var Oc;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Oc||(Oc={}));var Xl;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xl||(Xl={}));var qc;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(qc||(qc={}));var $c;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})($c||($c={}));var Wc;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Wc||(Wc={}));var Jc;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Jc||(Jc={}));var Yc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Yc||(Yc={}));var Kc;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Kc||(Kc={}));var Xc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Xc||(Xc={}));var Qc;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Qc||(Qc={}));var Zc;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Zc||(Zc={}));var jc;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(jc||(jc={}));var ed;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ed||(ed={}));var td;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(td||(td={}));var nd;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(nd||(nd={}));var rd;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(rd||(rd={}));var od;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(od||(od={}));var id;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(id||(id={}));var sd;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(sd||(sd={}));var ld;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ld||(ld={}));var ad;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ad||(ad={}));var ud;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(ud||(ud={}));var cd;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(cd||(cd={}));var dd;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(dd||(dd={}));var fd;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(fd||(fd={}));var pd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(pd||(pd={}));var hd;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(hd||(hd={}));var md;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(md||(md={}));var gd;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gd||(gd={}));var yd;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(yd||(yd={}));var vd;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vd||(vd={}));var _d;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_d||(_d={}));var Sd;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Sd||(Sd={}));var vr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(vr||(vr={}));class Ql{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Qr{get text(){var e,n,r,o,i,s,l,u;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const h of(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[m,_]of Object.entries(h))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(_!==null||_!==void 0)&&p.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,o,i,s,l,u;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[h,m]of Object.entries(p))h!=="inlineData"&&(m!==null||m!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,o,i,s,l,u;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,o,i,s,l,u,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,o,i,s,l,u,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class wd{}class xd{}class gy{}class yy{}class vy{}class _y{}class Ed{}class Cd{}class Td{}class Sy{}class Yi{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Yi;let o;const i=e;return n?o=oy(i):o=ry(i),Object.assign(r,o),r}}class Id{}class kd{}class Ad{}class Nd{}class wy{}class xy{}class Ey{}class ou{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ou,i=dy(e);return Object.assign(r,i),r}}class Cy{}class Ty{}class Iy{}class Rd{}class ky{get text(){var e,n,r;let o="",i=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,d]of Object.entries(l))u!=="text"&&u!=="thought"&&d!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,o+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,n,r;let o="";const i=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&i.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Ay{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class iu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new iu,i=xh(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Se(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Eh(t,e){const n=Se(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Ch(t){return Array.isArray(t)?t.map(e=>Ki(e)):[Ki(t)]}function Ki(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Th(t){const e=Ki(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ih(t){const e=Ki(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pd(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function kh(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Pd(e)):[Pd(t)]}function Zl(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Md(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function bd(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function tt(t){if(t==null)throw new Error("ContentUnion is required");return Zl(t)?t:{role:"user",parts:kh(t)}}function su(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=tt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=tt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>tt(n)):[tt(e)]}function Rt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Md(t)||bd(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tt(t)]}const e=[],n=[],r=Zl(t[0]);for(const o of t){const i=Zl(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(o);else{if(Md(o)||bd(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||e.push({role:"user",parts:kh(n)}),e}function Ny(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Ye).includes(n[0].toUpperCase())?n[0].toUpperCase():Ye.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Ye).includes(r.toUpperCase())?r.toUpperCase():Ye.TYPE_UNSPECIFIED})}}function Ir(t){const e={},n=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&Ny(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Ye).includes(l.toUpperCase())?l.toUpperCase():Ye.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Ir(l);else if(r.includes(s)){const u=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}u.push(Ir(d))}e[s]=u}else if(o.includes(s)){const u={};for(const[d,f]of Object.entries(l))u[d]=Ir(f);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=l}return e}function lu(t){return Ir(t)}function au(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function uu(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Br(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ir(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ir(e.response));return t}function zr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Ry(t,e,n,r=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function un(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ry(t,e,"cachedContents")}function Ah(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Mn(t){return ru(t)}function Py(t){return t!=null&&typeof t=="object"&&"name"in t}function My(t){return t!=null&&typeof t=="object"&&"video"in t}function by(t){return t!=null&&typeof t=="object"&&"uri"in t}function Nh(t){var e;let n;if(Py(t)&&(n=t.name),!(by(t)&&(n=t.uri,n===void 0))&&!(My(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Rh(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Ph(t){for(const e of["models","tunedModels","publisherModels"])if(Dy(t,e))return t[e];return[]}function Dy(t,e){return t!==null&&typeof t=="object"&&e in t}function Ly(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Uy(t,e={}){const n=[],r=new Set;for(const o of t){const i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const s=Ly(o,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Mh(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Fy(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function bh(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let i=!1;for(const s of o){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Vr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Dh(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function By(t){const e={},n=a(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);const r=a(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>vv(s))),c(e,["inlinedResponses"],i)}const o=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["inlinedEmbedContentResponses"],i)}return e}function zy(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsDestination","outputUriPrefix"]);r!=null&&c(e,["gcsUri"],r);const o=a(t,["bigqueryDestination","outputUri"]);return o!=null&&c(e,["bigqueryUri"],o),e}function Vy(t){const e={},n=a(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsDestination","outputUriPrefix"],r);const o=a(t,["bigqueryUri"]);if(o!=null&&c(e,["bigqueryDestination","outputUri"],o),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function wi(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata","displayName"]);r!=null&&c(e,["displayName"],r);const o=a(t,["metadata","state"]);o!=null&&c(e,["state"],Dh(o));const i=a(t,["metadata","createTime"]);i!=null&&c(e,["createTime"],i);const s=a(t,["metadata","endTime"]);s!=null&&c(e,["endTime"],s);const l=a(t,["metadata","updateTime"]);l!=null&&c(e,["updateTime"],l);const u=a(t,["metadata","model"]);u!=null&&c(e,["model"],u);const d=a(t,["metadata","output"]);return d!=null&&c(e,["dest"],By(bh(d))),e}function jl(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const o=a(t,["state"]);o!=null&&c(e,["state"],Dh(o));const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["createTime"]);s!=null&&c(e,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(e,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(e,["endTime"],u);const d=a(t,["updateTime"]);d!=null&&c(e,["updateTime"],d);const f=a(t,["model"]);f!=null&&c(e,["model"],f);const p=a(t,["inputConfig"]);p!=null&&c(e,["src"],Gy(p));const h=a(t,["outputConfig"]);h!=null&&c(e,["dest"],zy(bh(h)));const m=a(t,["completionStats"]);return m!=null&&c(e,["completionStats"],m),e}function Gy(t){const e={},n=a(t,["instancesFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsSource","uris"]);r!=null&&c(e,["gcsUri"],r);const o=a(t,["bigquerySource","inputUri"]);return o!=null&&c(e,["bigqueryUri"],o),e}function Hy(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(e,["fileName"]);r!=null&&c(n,["fileName"],r);const o=a(e,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>yv(t,s))),c(n,["requests","requests"],i)}return n}function Oy(t){const e={},n=a(t,["format"]);n!=null&&c(e,["instancesFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsSource","uris"],r);const o=a(t,["bigqueryUri"]);if(o!=null&&c(e,["bigquerySource","inputUri"],o),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function qy(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function $y(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Vr(t,r)),n}function Wy(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Vr(t,r)),n}function Jy(t){const e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&c(e,["citationMetadata"],Yy(r));const o=a(t,["tokenCount"]);o!=null&&c(e,["tokenCount"],o);const i=a(t,["finishReason"]);i!=null&&c(e,["finishReason"],i);const s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&c(e,["index"],u);const d=a(t,["logprobsResult"]);d!=null&&c(e,["logprobsResult"],d);const f=a(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),c(e,["safetyRatings"],h)}const p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function Yy(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),c(e,["citations"],r)}return e}function Lh(t){const e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Tv(i))),c(e,["parts"],o)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function Ky(t,e){const n={},r=a(t,["displayName"]);if(e!==void 0&&r!=null&&c(e,["batch","displayName"],r),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Xy(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const o=a(t,["dest"]);return e!==void 0&&o!=null&&c(e,["outputConfig"],Vy(Fy(o))),n}function Dd(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["src"]);o!=null&&c(n,["batch","inputConfig"],Hy(t,Mh(t,o)));const i=a(e,["config"]);return i!=null&&Ky(i,n),n}function Qy(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],Se(t,r));const o=a(e,["src"]);o!=null&&c(n,["inputConfig"],Oy(Mh(t,o)));const i=a(e,["config"]);return i!=null&&Xy(i,n),n}function Zy(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["batch","displayName"],r),n}function jy(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["src"]);o!=null&&c(n,["batch","inputConfig"],sv(t,o));const i=a(e,["config"]);return i!=null&&Zy(i,n),n}function ev(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Vr(t,r)),n}function tv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Vr(t,r)),n}function nv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);return i!=null&&c(e,["error"],i),e}function rv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);return i!=null&&c(e,["error"],i),e}function ov(t,e){const n={},r=a(e,["contents"]);if(r!=null){let i=su(t,r);Array.isArray(i)&&(i=i.map(s=>s)),c(n,["requests[]","request","content"],i)}const o=a(e,["config"]);return o!=null&&(c(n,["_self"],iv(o,n)),ty(n,{"requests[].*":"requests[].request.*"})),n}function iv(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["requests[]","taskType"],r);const o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);const i=a(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&c(e,["requests[]","outputDimensionality"],i),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function sv(t,e){const n={},r=a(e,["fileName"]);r!=null&&c(n,["file_name"],r);const o=a(e,["inlinedRequests"]);return o!=null&&c(n,["requests"],ov(t,o)),n}function lv(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function av(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uv(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cv(t,e,n){const r={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],Lh(tt(o)));const i=a(e,["temperature"]);i!=null&&c(r,["temperature"],i);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(r,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&c(r,["stopSequences"],f);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const h=a(e,["logprobs"]);h!=null&&c(r,["logprobs"],h);const m=a(e,["presencePenalty"]);m!=null&&c(r,["presencePenalty"],m);const _=a(e,["frequencyPenalty"]);_!=null&&c(r,["frequencyPenalty"],_);const y=a(e,["seed"]);y!=null&&c(r,["seed"],y);const x=a(e,["responseMimeType"]);x!=null&&c(r,["responseMimeType"],x);const g=a(e,["responseSchema"]);g!=null&&c(r,["responseSchema"],lu(g));const v=a(e,["responseJsonSchema"]);if(v!=null&&c(r,["responseJsonSchema"],v),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=a(e,["safetySettings"]);if(n!==void 0&&S!=null){let B=S;Array.isArray(B)&&(B=B.map(C=>Iv(C))),c(n,["safetySettings"],B)}const T=a(e,["tools"]);if(n!==void 0&&T!=null){let B=zr(T);Array.isArray(B)&&(B=B.map(C=>Av(Br(C)))),c(n,["tools"],B)}const I=a(e,["toolConfig"]);if(n!==void 0&&I!=null&&c(n,["toolConfig"],kv(I)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=a(e,["cachedContent"]);n!==void 0&&b!=null&&c(n,["cachedContent"],un(t,b));const N=a(e,["responseModalities"]);N!=null&&c(r,["responseModalities"],N);const F=a(e,["mediaResolution"]);F!=null&&c(r,["mediaResolution"],F);const D=a(e,["speechConfig"]);if(D!=null&&c(r,["speechConfig"],au(D)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=a(e,["thinkingConfig"]);V!=null&&c(r,["thinkingConfig"],V);const Z=a(e,["imageConfig"]);Z!=null&&c(r,["imageConfig"],gv(Z));const P=a(e,["enableEnhancedCivicAnswers"]);return P!=null&&c(r,["enableEnhancedCivicAnswers"],P),r}function dv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Jy(d))),c(e,["candidates"],u)}const o=a(t,["modelVersion"]);o!=null&&c(e,["modelVersion"],o);const i=a(t,["promptFeedback"]);i!=null&&c(e,["promptFeedback"],i);const s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function fv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Vr(t,r)),n}function pv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Vr(t,r)),n}function hv(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function mv(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function gv(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&c(e,["imageSize"],r),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function yv(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["request","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let l=Rt(o);Array.isArray(l)&&(l=l.map(u=>Lh(u))),c(n,["request","contents"],l)}const i=a(e,["metadata"]);i!=null&&c(n,["metadata"],i);const s=a(e,["config"]);return s!=null&&c(n,["request","generationConfig"],cv(t,s,a(n,["request"],{}))),n}function vv(t){const e={},n=a(t,["response"]);n!=null&&c(e,["response"],dv(n));const r=a(t,["error"]);return r!=null&&c(e,["error"],r),e}function _v(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);if(e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Sv(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const i=a(t,["filter"]);return e!==void 0&&i!=null&&c(e,["_query","filter"],i),n}function wv(t){const e={},n=a(t,["config"]);return n!=null&&_v(n,e),e}function xv(t){const e={},n=a(t,["config"]);return n!=null&&Sv(n,e),e}function Ev(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>wi(s))),c(e,["batchJobs"],i)}return e}function Cv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>jl(s))),c(e,["batchJobs"],i)}return e}function Tv(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);const i=a(t,["fileData"]);i!=null&&c(e,["fileData"],lv(i));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],av(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],qy(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const f=a(t,["thought"]);f!=null&&c(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&c(e,["videoMetadata"],h),e}function Iv(t){const e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function kv(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],uv(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function Av(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],hv(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],mv(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(sn||(sn={}));class er{constructor(e,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,o)}init(e,n,r){var o,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nv extends an{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new er(sn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Dd(this.apiClient,e),r=n._url,o=se("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,u=l.requests,d=[];for(const f of u){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const m=p.request;m.systemInstruction=h,p.request=m}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(s)r.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Qy(this.apiClient,e);return l=se("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>jl(f))}else{const d=Dd(this.apiClient,e);return l=se("{model}:batchGenerateContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>wi(f))}}async createEmbeddingsInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=jy(this.apiClient,e);return i=se("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>wi(u))}}async get(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=pv(this.apiClient,e);return l=se("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>jl(f))}else{const d=fv(this.apiClient,e);return l=se("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>wi(f))}}async cancel(e){var n,r,o,i;let s="",l={};if(this.apiClient.isVertexAI()){const u=Wy(this.apiClient,e);s=se("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=$y(this.apiClient,e);s=se("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=xv(e);return l=se("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Cv(f),h=new Rd;return Object.assign(h,p),h})}else{const d=wv(e);return l=se("batches",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Ev(f),h=new Rd;return Object.assign(h,p),h})}}async delete(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=tv(this.apiClient,e);return l=se("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>rv(f))}else{const d=ev(this.apiClient,e);return l=se("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>nv(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rv(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Ld(t){const e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>jv(i))),c(e,["parts"],o)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function Pv(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const o=a(t,["expireTime"]);e!==void 0&&o!=null&&c(e,["expireTime"],o);const i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let f=Rt(s);Array.isArray(f)&&(f=f.map(p=>Ld(p))),c(e,["contents"],f)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],Ld(tt(l)));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(p=>t_(p))),c(e,["tools"],f)}const d=a(t,["toolConfig"]);if(e!==void 0&&d!=null&&c(e,["toolConfig"],e_(d)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Mv(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const o=a(t,["expireTime"]);e!==void 0&&o!=null&&c(e,["expireTime"],o);const i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=Rt(s);Array.isArray(p)&&(p=p.map(h=>h)),c(e,["contents"],p)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],tt(l));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(h=>n_(h))),c(e,["tools"],p)}const d=a(t,["toolConfig"]);e!==void 0&&d!=null&&c(e,["toolConfig"],d);const f=a(t,["kmsKeyName"]);return e!==void 0&&f!=null&&c(e,["encryption_spec","kmsKeyName"],f),n}function bv(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],Eh(t,r));const o=a(e,["config"]);return o!=null&&Pv(o,n),n}function Dv(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],Eh(t,r));const o=a(e,["config"]);return o!=null&&Mv(o,n),n}function Lv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],un(t,r)),n}function Uv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],un(t,r)),n}function Fv(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function Bv(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function zv(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Vv(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gv(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Hv(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);const i=a(t,["parametersJsonSchema"]);i!=null&&c(e,["parametersJsonSchema"],i);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function Ov(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],un(t,r)),n}function qv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],un(t,r)),n}function $v(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function Wv(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function Jv(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function Yv(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function Kv(t){const e={},n=a(t,["config"]);return n!=null&&Jv(n,e),e}function Xv(t){const e={},n=a(t,["config"]);return n!=null&&Yv(n,e),e}function Qv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["cachedContents"],i)}return e}function Zv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["cachedContents"],i)}return e}function jv(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);const i=a(t,["fileData"]);i!=null&&c(e,["fileData"],zv(i));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],Vv(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Rv(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const f=a(t,["thought"]);f!=null&&c(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&c(e,["videoMetadata"],h),e}function e_(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],Gv(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function t_(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],$v(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],Wv(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function n_(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>Hv(h))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],d);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function r_(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const o=a(t,["expireTime"]);return e!==void 0&&o!=null&&c(e,["expireTime"],o),n}function o_(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const o=a(t,["expireTime"]);return e!==void 0&&o!=null&&c(e,["expireTime"],o),n}function i_(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],un(t,r));const o=a(e,["config"]);return o!=null&&r_(o,n),n}function s_(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],un(t,r));const o=a(e,["config"]);return o!=null&&o_(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l_ extends an{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new er(sn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Dv(this.apiClient,e);return l=se("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=bv(this.apiClient,e);return l=se("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=qv(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=Ov(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Uv(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Bv(f),h=new Ad;return Object.assign(h,p),h})}else{const d=Lv(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Fv(f),h=new Ad;return Object.assign(h,p),h})}}async update(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=s_(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=i_(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Xv(e);return l=se("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Zv(f),h=new Nd;return Object.assign(h,p),h})}else{const d=Kv(e);return l=se("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Qv(f),h=new Nd;return Object.assign(h,p),h})}}}function Xi(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Ud(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function de(t){return this instanceof de?(this.v=t,this):new de(t)}function Vt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(_){return Promise.resolve(_).then(m,p)}}function l(m,_){r[m]&&(o[m]=function(y){return new Promise(function(x,g){i.push([m,y,x,g])>1||u(m,y)})},_&&(o[m]=_(o[m])))}function u(m,_){try{d(r[m](_))}catch(y){h(i[0][3],y)}}function d(m){m.value instanceof de?Promise.resolve(m.value.v).then(f,p):h(i[0][2],m)}function f(m){u("next",m)}function p(m){u("throw",m)}function h(m,_){m(_),i.shift(),i.length&&u(i[0][0],i[0][1])}}function Gt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ud=="function"?Ud(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(l,u){s=t[i](s),o(l,u,s.done,s.value)})}}function o(i,s,l,u){Promise.resolve(u).then(function(d){i({value:d,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a_(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Uh(n)}function Uh(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function u_(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Fd(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const o=[];let i=!0;for(;r<n&&t[r].role==="model";)o.push(t[r]),i&&!Uh(t[r])&&(i=!1),r++;i?e.push(...o):e.pop()}return e}class c_{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new d_(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class d_{constructor(e,n,r,o={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),u_(i)}async sendMessage(e){var n;await this.sendPromise;const r=tt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,l;const u=await o,d=(s=(i=u.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(l=f.slice(p))!==null&&l!==void 0?l:[]);const m=d?[d]:[];this.recordHistory(r,m,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const r=tt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const i=await o;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?Fd(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Vt(this,arguments,function*(){var o,i,s,l,u,d;const f=[];try{for(var p=!0,h=Gt(e),m;m=yield de(h.next()),o=m.done,!o;p=!0){l=m.value,p=!1;const _=l;if(a_(_)){const y=(d=(u=_.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content;y!==void 0&&f.push(y)}yield yield de(_)}}catch(_){i={error:_}}finally{try{!p&&!o&&(s=h.return)&&(yield de(s.call(h)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let o=[];n.length>0&&n.every(i=>i.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Fd(r)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ms extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ms.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f_(t){const e={},n=a(t,["file"]);return n!=null&&c(e,["file"],n),e}function p_(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function h_(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],Nh(n)),e}function m_(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function g_(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],Nh(n)),e}function y_(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function v_(t){const e={},n=a(t,["config"]);return n!=null&&y_(n,e),e}function __(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S_ extends an{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new er(sn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=v_(e);return i=se("files",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>{const d=__(u),f=new Cy;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=f_(e);return i=se("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=p_(u),f=new Ty;return Object.assign(f,d),f})}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=g_(e);return i=se("files/{file}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=h_(e);return i=se("files/{file}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>{const d=m_(u),f=new Iy;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xi(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function w_(t){const e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>F_(i))),c(e,["parts"],o)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function x_(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function E_(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C_(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);const i=a(t,["parametersJsonSchema"]);i!=null&&c(e,["parametersJsonSchema"],i);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function T_(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&c(e,["responseJsonSchema"],r);const o=a(t,["audioTimestamp"]);o!=null&&c(e,["audioTimestamp"],o);const i=a(t,["candidateCount"]);i!=null&&c(e,["candidateCount"],i);const s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);const d=a(t,["maxOutputTokens"]);d!=null&&c(e,["maxOutputTokens"],d);const f=a(t,["mediaResolution"]);f!=null&&c(e,["mediaResolution"],f);const p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);const h=a(t,["responseLogprobs"]);h!=null&&c(e,["responseLogprobs"],h);const m=a(t,["responseMimeType"]);m!=null&&c(e,["responseMimeType"],m);const _=a(t,["responseModalities"]);_!=null&&c(e,["responseModalities"],_);const y=a(t,["responseSchema"]);y!=null&&c(e,["responseSchema"],y);const x=a(t,["routingConfig"]);x!=null&&c(e,["routingConfig"],x);const g=a(t,["seed"]);g!=null&&c(e,["seed"],g);const v=a(t,["speechConfig"]);v!=null&&c(e,["speechConfig"],v);const S=a(t,["stopSequences"]);S!=null&&c(e,["stopSequences"],S);const T=a(t,["temperature"]);T!=null&&c(e,["temperature"],T);const I=a(t,["thinkingConfig"]);I!=null&&c(e,["thinkingConfig"],I);const b=a(t,["topK"]);b!=null&&c(e,["topK"],b);const N=a(t,["topP"]);if(N!=null&&c(e,["topP"],N),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function I_(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function k_(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function A_(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);const i=a(t,["temperature"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","temperature"],i);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","seed"],f);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],uu(p));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","thinkingConfig"],h);const m=a(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=a(t,["systemInstruction"]);e!==void 0&&_!=null&&c(e,["setup","systemInstruction"],w_(tt(_)));const y=a(t,["tools"]);if(e!==void 0&&y!=null){let b=zr(y);Array.isArray(b)&&(b=b.map(N=>z_(Br(N)))),c(e,["setup","tools"],b)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&c(e,["setup","sessionResumption"],B_(x));const g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);const v=a(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&c(e,["setup","outputAudioTranscription"],v);const S=a(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&c(e,["setup","realtimeInputConfig"],S);const T=a(t,["contextWindowCompression"]);e!==void 0&&T!=null&&c(e,["setup","contextWindowCompression"],T);const I=a(t,["proactivity"]);if(e!==void 0&&I!=null&&c(e,["setup","proactivity"],I),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function N_(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],T_(r));const o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);const i=a(t,["temperature"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","temperature"],i);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","seed"],f);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],uu(p));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","thinkingConfig"],h);const m=a(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=a(t,["systemInstruction"]);e!==void 0&&_!=null&&c(e,["setup","systemInstruction"],tt(_));const y=a(t,["tools"]);if(e!==void 0&&y!=null){let N=zr(y);Array.isArray(N)&&(N=N.map(F=>V_(Br(F)))),c(e,["setup","tools"],N)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&c(e,["setup","sessionResumption"],x);const g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);const v=a(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&c(e,["setup","outputAudioTranscription"],v);const S=a(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&c(e,["setup","realtimeInputConfig"],S);const T=a(t,["contextWindowCompression"]);e!==void 0&&T!=null&&c(e,["setup","contextWindowCompression"],T);const I=a(t,["proactivity"]);e!==void 0&&I!=null&&c(e,["setup","proactivity"],I);const b=a(t,["explicitVadSignal"]);return e!==void 0&&b!=null&&c(e,["setup","explicitVadSignal"],b),n}function R_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],Se(t,r));const o=a(e,["config"]);return o!=null&&c(n,["config"],A_(o,n)),n}function P_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],Se(t,r));const o=a(e,["config"]);return o!=null&&c(n,["config"],N_(o,n)),n}function M_(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],n),e}function b_(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),c(e,["weightedPrompts"],r)}return e}function D_(t){const e={},n=a(t,["media"]);if(n!=null){let d=Ch(n);Array.isArray(d)&&(d=d.map(f=>xi(f))),c(e,["mediaChunks"],d)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],xi(Ih(r)));const o=a(t,["audioStreamEnd"]);o!=null&&c(e,["audioStreamEnd"],o);const i=a(t,["video"]);i!=null&&c(e,["video"],xi(Th(i)));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function L_(t){const e={},n=a(t,["media"]);if(n!=null){let d=Ch(n);Array.isArray(d)&&(d=d.map(f=>f)),c(e,["mediaChunks"],d)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],Ih(r));const o=a(t,["audioStreamEnd"]);o!=null&&c(e,["audioStreamEnd"],o);const i=a(t,["video"]);i!=null&&c(e,["video"],Th(i));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function U_(t){const e={},n=a(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],n);const r=a(t,["serverContent"]);r!=null&&c(e,["serverContent"],r);const o=a(t,["toolCall"]);o!=null&&c(e,["toolCall"],o);const i=a(t,["toolCallCancellation"]);i!=null&&c(e,["toolCallCancellation"],i);const s=a(t,["usageMetadata"]);s!=null&&c(e,["usageMetadata"],G_(s));const l=a(t,["goAway"]);l!=null&&c(e,["goAway"],l);const u=a(t,["sessionResumptionUpdate"]);u!=null&&c(e,["sessionResumptionUpdate"],u);const d=a(t,["voiceActivityDetectionSignal"]);return d!=null&&c(e,["voiceActivityDetectionSignal"],d),e}function F_(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);const i=a(t,["fileData"]);i!=null&&c(e,["fileData"],x_(i));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],E_(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],xi(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const f=a(t,["thought"]);f!=null&&c(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&c(e,["videoMetadata"],h),e}function B_(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function z_(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],I_(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],k_(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function V_(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>C_(h))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],d);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function G_(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&c(e,["cachedContentTokenCount"],r);const o=a(t,["candidatesTokenCount"]);o!=null&&c(e,["responseTokenCount"],o);const i=a(t,["toolUsePromptTokenCount"]);i!=null&&c(e,["toolUsePromptTokenCount"],i);const s=a(t,["thoughtsTokenCount"]);s!=null&&c(e,["thoughtsTokenCount"],s);const l=a(t,["totalTokenCount"]);l!=null&&c(e,["totalTokenCount"],l);const u=a(t,["promptTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(_=>_)),c(e,["promptTokensDetails"],m)}const d=a(t,["cacheTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(_=>_)),c(e,["cacheTokensDetails"],m)}const f=a(t,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(_=>_)),c(e,["responseTokensDetails"],m)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>_)),c(e,["toolUsePromptTokensDetails"],m)}const h=a(t,["trafficType"]);return h!=null&&c(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H_(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function O_(t){const e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&c(e,["citationMetadata"],q_(r));const o=a(t,["tokenCount"]);o!=null&&c(e,["tokenCount"],o);const i=a(t,["finishReason"]);i!=null&&c(e,["finishReason"],i);const s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&c(e,["index"],u);const d=a(t,["logprobsResult"]);d!=null&&c(e,["logprobsResult"],d);const f=a(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),c(e,["safetyRatings"],h)}const p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function q_(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),c(e,["citations"],r)}return e}function $_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let i=Rt(o);Array.isArray(i)&&(i=i.map(s=>s)),c(n,["contents"],i)}return n}function W_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),c(e,["tokensInfo"],o)}return e}function J_(t){const e={},n=a(t,["values"]);n!=null&&c(e,["values"],n);const r=a(t,["statistics"]);return r!=null&&c(e,["statistics"],Y_(r)),e}function Y_(t){const e={},n=a(t,["truncated"]);n!=null&&c(e,["truncated"],n);const r=a(t,["token_count"]);return r!=null&&c(e,["tokenCount"],r),e}function gs(t){const e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>rw(i))),c(e,["parts"],o)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function K_(t){const e={},n=a(t,["controlType"]);n!=null&&c(e,["controlType"],n);const r=a(t,["enableControlImageComputation"]);return r!=null&&c(e,["computeControl"],r),e}function X_(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Q_(t,e){const n={},r=a(t,["systemInstruction"]);e!==void 0&&r!=null&&c(e,["systemInstruction"],tt(r));const o=a(t,["tools"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Vh(l))),c(e,["tools"],s)}const i=a(t,["generationConfig"]);return e!==void 0&&i!=null&&c(e,["generationConfig"],HS(i)),n}function Z_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let s=Rt(o);Array.isArray(s)&&(s=s.map(l=>gs(l))),c(n,["contents"],s)}const i=a(e,["config"]);return i!=null&&X_(i),n}function j_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let s=Rt(o);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["contents"],s)}const i=a(e,["config"]);return i!=null&&Q_(i,n),n}function eS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);r!=null&&c(e,["totalTokens"],r);const o=a(t,["cachedContentTokenCount"]);return o!=null&&c(e,["cachedContentTokenCount"],o),e}function tS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);return r!=null&&c(e,["totalTokens"],r),e}function nS(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],Se(t,r)),n}function rS(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],Se(t,r)),n}function oS(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function iS(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function sS(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&c(e,["parameters","includeRaiReason"],h);const m=a(t,["language"]);e!==void 0&&m!=null&&c(e,["parameters","language"],m);const _=a(t,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const y=a(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&c(e,["parameters","outputOptions","compressionQuality"],y);const x=a(t,["addWatermark"]);e!==void 0&&x!=null&&c(e,["parameters","addWatermark"],x);const g=a(t,["labels"]);e!==void 0&&g!=null&&c(e,["labels"],g);const v=a(t,["editMode"]);e!==void 0&&v!=null&&c(e,["parameters","editMode"],v);const S=a(t,["baseSteps"]);return e!==void 0&&S!=null&&c(e,["parameters","editConfig","baseSteps"],S),n}function lS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);const i=a(e,["referenceImages"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>uw(u))),c(n,["instances[0]","referenceImages"],l)}const s=a(e,["config"]);return s!=null&&sS(s,n),n}function aS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>ys(i))),c(e,["generatedImages"],o)}return e}function uS(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["requests[]","taskType"],r);const o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);const i=a(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&c(e,["requests[]","outputDimensionality"],i),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function cS(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["instances[]","task_type"],r);const o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["instances[]","title"],o);const i=a(t,["outputDimensionality"]);e!==void 0&&i!=null&&c(e,["parameters","outputDimensionality"],i);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&c(e,["instances[]","mimeType"],s);const l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&c(e,["parameters","autoTruncate"],l),n}function dS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let l=su(t,o);Array.isArray(l)&&(l=l.map(u=>u)),c(n,["requests[]","content"],l)}const i=a(e,["config"]);i!=null&&uS(i,n);const s=a(e,["model"]);return s!==void 0&&c(n,["requests[]","model"],Se(t,s)),n}function fS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let s=su(t,o);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["instances[]","content"],s)}const i=a(e,["config"]);return i!=null&&cS(i,n),n}function pS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["embeddings"],i)}const o=a(t,["metadata"]);return o!=null&&c(e,["metadata"],o),e}function hS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>J_(s))),c(e,["embeddings"],i)}const o=a(t,["metadata"]);return o!=null&&c(e,["metadata"],o),e}function mS(t){const e={},n=a(t,["endpoint"]);n!=null&&c(e,["name"],n);const r=a(t,["deployedModelId"]);return r!=null&&c(e,["deployedModelId"],r),e}function gS(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function yS(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vS(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _S(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);const i=a(t,["parametersJsonSchema"]);i!=null&&c(e,["parametersJsonSchema"],i);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function SS(t,e,n){const r={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],gs(tt(o)));const i=a(e,["temperature"]);i!=null&&c(r,["temperature"],i);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(r,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&c(r,["stopSequences"],f);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const h=a(e,["logprobs"]);h!=null&&c(r,["logprobs"],h);const m=a(e,["presencePenalty"]);m!=null&&c(r,["presencePenalty"],m);const _=a(e,["frequencyPenalty"]);_!=null&&c(r,["frequencyPenalty"],_);const y=a(e,["seed"]);y!=null&&c(r,["seed"],y);const x=a(e,["responseMimeType"]);x!=null&&c(r,["responseMimeType"],x);const g=a(e,["responseSchema"]);g!=null&&c(r,["responseSchema"],lu(g));const v=a(e,["responseJsonSchema"]);if(v!=null&&c(r,["responseJsonSchema"],v),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=a(e,["safetySettings"]);if(n!==void 0&&S!=null){let B=S;Array.isArray(B)&&(B=B.map(C=>cw(C))),c(n,["safetySettings"],B)}const T=a(e,["tools"]);if(n!==void 0&&T!=null){let B=zr(T);Array.isArray(B)&&(B=B.map(C=>yw(Br(C)))),c(n,["tools"],B)}const I=a(e,["toolConfig"]);if(n!==void 0&&I!=null&&c(n,["toolConfig"],gw(I)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=a(e,["cachedContent"]);n!==void 0&&b!=null&&c(n,["cachedContent"],un(t,b));const N=a(e,["responseModalities"]);N!=null&&c(r,["responseModalities"],N);const F=a(e,["mediaResolution"]);F!=null&&c(r,["mediaResolution"],F);const D=a(e,["speechConfig"]);if(D!=null&&c(r,["speechConfig"],au(D)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=a(e,["thinkingConfig"]);V!=null&&c(r,["thinkingConfig"],V);const Z=a(e,["imageConfig"]);Z!=null&&c(r,["imageConfig"],JS(Z));const P=a(e,["enableEnhancedCivicAnswers"]);return P!=null&&c(r,["enableEnhancedCivicAnswers"],P),r}function wS(t,e,n){const r={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],tt(o));const i=a(e,["temperature"]);i!=null&&c(r,["temperature"],i);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(r,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&c(r,["stopSequences"],f);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const h=a(e,["logprobs"]);h!=null&&c(r,["logprobs"],h);const m=a(e,["presencePenalty"]);m!=null&&c(r,["presencePenalty"],m);const _=a(e,["frequencyPenalty"]);_!=null&&c(r,["frequencyPenalty"],_);const y=a(e,["seed"]);y!=null&&c(r,["seed"],y);const x=a(e,["responseMimeType"]);x!=null&&c(r,["responseMimeType"],x);const g=a(e,["responseSchema"]);g!=null&&c(r,["responseSchema"],lu(g));const v=a(e,["responseJsonSchema"]);v!=null&&c(r,["responseJsonSchema"],v);const S=a(e,["routingConfig"]);S!=null&&c(r,["routingConfig"],S);const T=a(e,["modelSelectionConfig"]);T!=null&&c(r,["modelConfig"],T);const I=a(e,["safetySettings"]);if(n!==void 0&&I!=null){let ie=I;Array.isArray(ie)&&(ie=ie.map(X=>X)),c(n,["safetySettings"],ie)}const b=a(e,["tools"]);if(n!==void 0&&b!=null){let ie=zr(b);Array.isArray(ie)&&(ie=ie.map(X=>Vh(Br(X)))),c(n,["tools"],ie)}const N=a(e,["toolConfig"]);n!==void 0&&N!=null&&c(n,["toolConfig"],N);const F=a(e,["labels"]);n!==void 0&&F!=null&&c(n,["labels"],F);const D=a(e,["cachedContent"]);n!==void 0&&D!=null&&c(n,["cachedContent"],un(t,D));const V=a(e,["responseModalities"]);V!=null&&c(r,["responseModalities"],V);const Z=a(e,["mediaResolution"]);Z!=null&&c(r,["mediaResolution"],Z);const P=a(e,["speechConfig"]);P!=null&&c(r,["speechConfig"],au(P));const B=a(e,["audioTimestamp"]);B!=null&&c(r,["audioTimestamp"],B);const C=a(e,["thinkingConfig"]);C!=null&&c(r,["thinkingConfig"],C);const H=a(e,["imageConfig"]);if(H!=null&&c(r,["imageConfig"],YS(H)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Bd(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let s=Rt(o);Array.isArray(s)&&(s=s.map(l=>gs(l))),c(n,["contents"],s)}const i=a(e,["config"]);return i!=null&&c(n,["generationConfig"],SS(t,i,n)),n}function zd(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let s=Rt(o);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["contents"],s)}const i=a(e,["config"]);return i!=null&&c(n,["generationConfig"],wS(t,i,n)),n}function Vd(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>O_(d))),c(e,["candidates"],u)}const o=a(t,["modelVersion"]);o!=null&&c(e,["modelVersion"],o);const i=a(t,["promptFeedback"]);i!=null&&c(e,["promptFeedback"],i);const s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function Gd(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),c(e,["candidates"],d)}const o=a(t,["createTime"]);o!=null&&c(e,["createTime"],o);const i=a(t,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);const s=a(t,["promptFeedback"]);s!=null&&c(e,["promptFeedback"],s);const l=a(t,["responseId"]);l!=null&&c(e,["responseId"],l);const u=a(t,["usageMetadata"]);return u!=null&&c(e,["usageMetadata"],u),e}function xS(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&c(e,["parameters","aspectRatio"],o);const i=a(t,["guidanceScale"]);if(e!==void 0&&i!=null&&c(e,["parameters","guidanceScale"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&c(e,["parameters","safetySetting"],s);const l=a(t,["personGeneration"]);e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l);const u=a(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&c(e,["parameters","includeSafetyAttributes"],u);const d=a(t,["includeRaiReason"]);e!==void 0&&d!=null&&c(e,["parameters","includeRaiReason"],d);const f=a(t,["language"]);e!==void 0&&f!=null&&c(e,["parameters","language"],f);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","mimeType"],p);const h=a(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&c(e,["parameters","outputOptions","compressionQuality"],h),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const m=a(t,["imageSize"]);if(e!==void 0&&m!=null&&c(e,["parameters","sampleImageSize"],m),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ES(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&c(e,["parameters","includeRaiReason"],h);const m=a(t,["language"]);e!==void 0&&m!=null&&c(e,["parameters","language"],m);const _=a(t,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const y=a(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&c(e,["parameters","outputOptions","compressionQuality"],y);const x=a(t,["addWatermark"]);e!==void 0&&x!=null&&c(e,["parameters","addWatermark"],x);const g=a(t,["labels"]);e!==void 0&&g!=null&&c(e,["labels"],g);const v=a(t,["imageSize"]);e!==void 0&&v!=null&&c(e,["parameters","sampleImageSize"],v);const S=a(t,["enhancePrompt"]);return e!==void 0&&S!=null&&c(e,["parameters","enhancePrompt"],S),n}function CS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);const i=a(e,["config"]);return i!=null&&xS(i,n),n}function TS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);const i=a(e,["config"]);return i!=null&&ES(i,n),n}function IS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>BS(s))),c(e,["generatedImages"],i)}const o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(e,["positivePromptSafetyAttributes"],Bh(o)),e}function kS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>ys(s))),c(e,["generatedImages"],i)}const o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(e,["positivePromptSafetyAttributes"],zh(o)),e}function AS(t,e){const n={},r=a(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=a(t,["durationSeconds"]);if(e!==void 0&&o!=null&&c(e,["parameters","durationSeconds"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&c(e,["parameters","aspectRatio"],i);const s=a(t,["resolution"]);e!==void 0&&s!=null&&c(e,["parameters","resolution"],s);const l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&c(e,["parameters","negativePrompt"],u);const d=a(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&c(e,["parameters","enhancePrompt"],d),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=a(t,["lastFrame"]);e!==void 0&&f!=null&&c(e,["instances[0]","lastFrame"],vs(f));const p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>Rw(m))),c(e,["instances[0]","referenceImages"],h)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function NS(t,e){const n={},r=a(t,["numberOfVideos"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);const i=a(t,["fps"]);e!==void 0&&i!=null&&c(e,["parameters","fps"],i);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&c(e,["parameters","durationSeconds"],s);const l=a(t,["seed"]);e!==void 0&&l!=null&&c(e,["parameters","seed"],l);const u=a(t,["aspectRatio"]);e!==void 0&&u!=null&&c(e,["parameters","aspectRatio"],u);const d=a(t,["resolution"]);e!==void 0&&d!=null&&c(e,["parameters","resolution"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);const p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&c(e,["parameters","pubsubTopic"],p);const h=a(t,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const m=a(t,["enhancePrompt"]);e!==void 0&&m!=null&&c(e,["parameters","enhancePrompt"],m);const _=a(t,["generateAudio"]);e!==void 0&&_!=null&&c(e,["parameters","generateAudio"],_);const y=a(t,["lastFrame"]);e!==void 0&&y!=null&&c(e,["instances[0]","lastFrame"],Ot(y));const x=a(t,["referenceImages"]);if(e!==void 0&&x!=null){let S=x;Array.isArray(S)&&(S=S.map(T=>Pw(T))),c(e,["instances[0]","referenceImages"],S)}const g=a(t,["mask"]);e!==void 0&&g!=null&&c(e,["instances[0]","mask"],Nw(g));const v=a(t,["compressionQuality"]);return e!==void 0&&v!=null&&c(e,["parameters","compressionQuality"],v),n}function RS(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],DS(s)),e}function PS(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response"]);return s!=null&&c(e,["response"],LS(s)),e}function MS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);const i=a(e,["image"]);i!=null&&c(n,["instances[0]","image"],vs(i));const s=a(e,["video"]);s!=null&&c(n,["instances[0]","video"],Gh(s));const l=a(e,["source"]);l!=null&&US(l,n);const u=a(e,["config"]);return u!=null&&AS(u,n),n}function bS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);const i=a(e,["image"]);i!=null&&c(n,["instances[0]","image"],Ot(i));const s=a(e,["video"]);s!=null&&c(n,["instances[0]","video"],Hh(s));const l=a(e,["source"]);l!=null&&FS(l,n);const u=a(e,["config"]);return u!=null&&NS(u,n),n}function DS(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>VS(s))),c(e,["generatedVideos"],i)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function LS(t){const e={},n=a(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>GS(s))),c(e,["generatedVideos"],i)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function US(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],vs(o));const i=a(t,["video"]);return e!==void 0&&i!=null&&c(e,["instances[0]","video"],Gh(i)),n}function FS(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],Ot(o));const i=a(t,["video"]);return e!==void 0&&i!=null&&c(e,["instances[0]","video"],Hh(i)),n}function BS(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["image"],KS(n));const r=a(t,["raiFilteredReason"]);r!=null&&c(e,["raiFilteredReason"],r);const o=a(t,["_self"]);return o!=null&&c(e,["safetyAttributes"],Bh(o)),e}function ys(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["image"],Fh(n));const r=a(t,["raiFilteredReason"]);r!=null&&c(e,["raiFilteredReason"],r);const o=a(t,["_self"]);o!=null&&c(e,["safetyAttributes"],zh(o));const i=a(t,["prompt"]);return i!=null&&c(e,["enhancedPrompt"],i),e}function zS(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["mask"],Fh(n));const r=a(t,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),c(e,["labels"],o)}return e}function VS(t){const e={},n=a(t,["video"]);return n!=null&&c(e,["video"],kw(n)),e}function GS(t){const e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],Aw(n)),e}function HS(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&c(e,["responseJsonSchema"],r);const o=a(t,["audioTimestamp"]);o!=null&&c(e,["audioTimestamp"],o);const i=a(t,["candidateCount"]);i!=null&&c(e,["candidateCount"],i);const s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);const d=a(t,["maxOutputTokens"]);d!=null&&c(e,["maxOutputTokens"],d);const f=a(t,["mediaResolution"]);f!=null&&c(e,["mediaResolution"],f);const p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);const h=a(t,["responseLogprobs"]);h!=null&&c(e,["responseLogprobs"],h);const m=a(t,["responseMimeType"]);m!=null&&c(e,["responseMimeType"],m);const _=a(t,["responseModalities"]);_!=null&&c(e,["responseModalities"],_);const y=a(t,["responseSchema"]);y!=null&&c(e,["responseSchema"],y);const x=a(t,["routingConfig"]);x!=null&&c(e,["routingConfig"],x);const g=a(t,["seed"]);g!=null&&c(e,["seed"],g);const v=a(t,["speechConfig"]);v!=null&&c(e,["speechConfig"],v);const S=a(t,["stopSequences"]);S!=null&&c(e,["stopSequences"],S);const T=a(t,["temperature"]);T!=null&&c(e,["temperature"],T);const I=a(t,["thinkingConfig"]);I!=null&&c(e,["thinkingConfig"],I);const b=a(t,["topK"]);b!=null&&c(e,["topK"],b);const N=a(t,["topP"]);if(N!=null&&c(e,["topP"],N),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function OS(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],Se(t,r)),n}function qS(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],Se(t,r)),n}function $S(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function WS(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function JS(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&c(e,["imageSize"],r),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function YS(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);r!=null&&c(e,["imageSize"],r);const o=a(t,["outputMimeType"]);o!=null&&c(e,["imageOutputOptions","mimeType"],o);const i=a(t,["outputCompressionQuality"]);return i!=null&&c(e,["imageOutputOptions","compressionQuality"],i),e}function KS(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&c(e,["imageBytes"],Mn(n));const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Fh(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["imageBytes"],Mn(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function vs(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&c(e,["bytesBase64Encoded"],Mn(n));const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Ot(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["imageBytes"]);r!=null&&c(e,["bytesBase64Encoded"],Mn(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function XS(t,e,n){const r={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);const i=a(e,["pageToken"]);n!==void 0&&i!=null&&c(n,["_query","pageToken"],i);const s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],Rh(t,l)),r}function QS(t,e,n){const r={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);const i=a(e,["pageToken"]);n!==void 0&&i!=null&&c(n,["_query","pageToken"],i);const s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],Rh(t,l)),r}function ZS(t,e){const n={},r=a(e,["config"]);return r!=null&&XS(t,r,n),n}function jS(t,e){const n={},r=a(e,["config"]);return r!=null&&QS(t,r,n),n}function ew(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["_self"]);if(o!=null){let i=Ph(o);Array.isArray(i)&&(i=i.map(s=>ea(s))),c(e,["models"],i)}return e}function tw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["_self"]);if(o!=null){let i=Ph(o);Array.isArray(i)&&(i=i.map(s=>ta(s))),c(e,["models"],i)}return e}function nw(t){const e={},n=a(t,["maskMode"]);n!=null&&c(e,["maskMode"],n);const r=a(t,["segmentationClasses"]);r!=null&&c(e,["maskClasses"],r);const o=a(t,["maskDilation"]);return o!=null&&c(e,["dilation"],o),e}function ea(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const o=a(t,["description"]);o!=null&&c(e,["description"],o);const i=a(t,["version"]);i!=null&&c(e,["version"],i);const s=a(t,["_self"]);s!=null&&c(e,["tunedModelInfo"],vw(s));const l=a(t,["inputTokenLimit"]);l!=null&&c(e,["inputTokenLimit"],l);const u=a(t,["outputTokenLimit"]);u!=null&&c(e,["outputTokenLimit"],u);const d=a(t,["supportedGenerationMethods"]);d!=null&&c(e,["supportedActions"],d);const f=a(t,["temperature"]);f!=null&&c(e,["temperature"],f);const p=a(t,["maxTemperature"]);p!=null&&c(e,["maxTemperature"],p);const h=a(t,["topP"]);h!=null&&c(e,["topP"],h);const m=a(t,["topK"]);m!=null&&c(e,["topK"],m);const _=a(t,["thinking"]);return _!=null&&c(e,["thinking"],_),e}function ta(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const o=a(t,["description"]);o!=null&&c(e,["description"],o);const i=a(t,["versionId"]);i!=null&&c(e,["version"],i);const s=a(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>mS(h))),c(e,["endpoints"],p)}const l=a(t,["labels"]);l!=null&&c(e,["labels"],l);const u=a(t,["_self"]);u!=null&&c(e,["tunedModelInfo"],_w(u));const d=a(t,["defaultCheckpointId"]);d!=null&&c(e,["defaultCheckpointId"],d);const f=a(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),c(e,["checkpoints"],p)}return e}function rw(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);const i=a(t,["fileData"]);i!=null&&c(e,["fileData"],gS(i));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],yS(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],H_(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const f=a(t,["thought"]);f!=null&&c(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&c(e,["videoMetadata"],h),e}function ow(t){const e={},n=a(t,["productImage"]);return n!=null&&c(e,["image"],Ot(n)),e}function iw(t,e){const n={},r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const o=a(t,["baseSteps"]);e!==void 0&&o!=null&&c(e,["parameters","baseSteps"],o);const i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=a(t,["seed"]);e!==void 0&&s!=null&&c(e,["parameters","seed"],s);const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&c(e,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&c(e,["parameters","personGeneration"],u);const d=a(t,["addWatermark"]);e!==void 0&&d!=null&&c(e,["parameters","addWatermark"],d);const f=a(t,["outputMimeType"]);e!==void 0&&f!=null&&c(e,["parameters","outputOptions","mimeType"],f);const p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","compressionQuality"],p);const h=a(t,["enhancePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","enhancePrompt"],h);const m=a(t,["labels"]);return e!==void 0&&m!=null&&c(e,["labels"],m),n}function sw(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["source"]);o!=null&&aw(o,n);const i=a(e,["config"]);return i!=null&&iw(i,n),n}function lw(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>ys(o))),c(e,["generatedImages"],r)}return e}function aw(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const o=a(t,["personImage"]);e!==void 0&&o!=null&&c(e,["instances[0]","personImage","image"],Ot(o));const i=a(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>ow(l))),c(e,["instances[0]","productImages"],s)}return n}function uw(t){const e={},n=a(t,["referenceImage"]);n!=null&&c(e,["referenceImage"],Ot(n));const r=a(t,["referenceId"]);r!=null&&c(e,["referenceId"],r);const o=a(t,["referenceType"]);o!=null&&c(e,["referenceType"],o);const i=a(t,["maskImageConfig"]);i!=null&&c(e,["maskImageConfig"],nw(i));const s=a(t,["controlImageConfig"]);s!=null&&c(e,["controlImageConfig"],K_(s));const l=a(t,["styleImageConfig"]);l!=null&&c(e,["styleImageConfig"],l);const u=a(t,["subjectImageConfig"]);return u!=null&&c(e,["subjectImageConfig"],u),e}function Bh(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&c(e,["scores"],r);const o=a(t,["contentType"]);return o!=null&&c(e,["contentType"],o),e}function zh(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&c(e,["scores"],r);const o=a(t,["contentType"]);return o!=null&&c(e,["contentType"],o),e}function cw(t){const e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function dw(t){const e={},n=a(t,["image"]);return n!=null&&c(e,["image"],Ot(n)),e}function fw(t,e){const n={},r=a(t,["mode"]);e!==void 0&&r!=null&&c(e,["parameters","mode"],r);const o=a(t,["maxPredictions"]);e!==void 0&&o!=null&&c(e,["parameters","maxPredictions"],o);const i=a(t,["confidenceThreshold"]);e!==void 0&&i!=null&&c(e,["parameters","confidenceThreshold"],i);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&c(e,["parameters","maskDilation"],s);const l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&c(e,["parameters","binaryColorThreshold"],l);const u=a(t,["labels"]);return e!==void 0&&u!=null&&c(e,["labels"],u),n}function pw(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["source"]);o!=null&&mw(o,n);const i=a(e,["config"]);return i!=null&&fw(i,n),n}function hw(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>zS(o))),c(e,["generatedMasks"],r)}return e}function mw(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],Ot(o));const i=a(t,["scribbleImage"]);return e!==void 0&&i!=null&&c(e,["instances[0]","scribble"],dw(i)),n}function gw(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],vS(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function yw(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],$S(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],WS(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function Vh(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>_S(h))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],d);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function vw(t){const e={},n=a(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&c(e,["createTime"],r);const o=a(t,["updateTime"]);return o!=null&&c(e,["updateTime"],o),e}function _w(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&c(e,["createTime"],r);const o=a(t,["updateTime"]);return o!=null&&c(e,["updateTime"],o),e}function Sw(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);const i=a(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&c(e,["defaultCheckpointId"],i),n}function ww(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);const i=a(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&c(e,["defaultCheckpointId"],i),n}function xw(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","name"],Se(t,r));const o=a(e,["config"]);return o!=null&&Sw(o,n),n}function Ew(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["config"]);return o!=null&&ww(o,n),n}function Cw(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const o=a(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&c(e,["parameters","safetySetting"],o);const i=a(t,["personGeneration"]);e!==void 0&&i!=null&&c(e,["parameters","personGeneration"],i);const s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","mimeType"],l);const u=a(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&c(e,["parameters","outputOptions","compressionQuality"],u);const d=a(t,["enhanceInputImage"]);e!==void 0&&d!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=a(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);const h=a(t,["numberOfImages"]);e!==void 0&&h!=null&&c(e,["parameters","sampleCount"],h);const m=a(t,["mode"]);return e!==void 0&&m!=null&&c(e,["parameters","mode"],m),n}function Tw(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["image"]);o!=null&&c(n,["instances[0]","image"],Ot(o));const i=a(e,["upscaleFactor"]);i!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=a(e,["config"]);return s!=null&&Cw(s,n),n}function Iw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>ys(i))),c(e,["generatedImages"],o)}return e}function kw(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&c(e,["videoBytes"],Mn(r));const o=a(t,["encoding"]);return o!=null&&c(e,["mimeType"],o),e}function Aw(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["videoBytes"],Mn(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function Nw(t){const e={},n=a(t,["image"]);n!=null&&c(e,["_self"],Ot(n));const r=a(t,["maskMode"]);return r!=null&&c(e,["maskMode"],r),e}function Rw(t){const e={},n=a(t,["image"]);n!=null&&c(e,["image"],vs(n));const r=a(t,["referenceType"]);return r!=null&&c(e,["referenceType"],r),e}function Pw(t){const e={},n=a(t,["image"]);n!=null&&c(e,["image"],Ot(n));const r=a(t,["referenceType"]);return r!=null&&c(e,["referenceType"],r),e}function Gh(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["videoBytes"]);r!=null&&c(e,["encodedVideo"],Mn(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["encoding"],o),e}function Hh(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["videoBytes"]);r!=null&&c(e,["bytesBase64Encoded"],Mn(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mw(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["displayName"],r),n}function bw(t){const e={},n=a(t,["config"]);return n!=null&&Mw(n,e),e}function Dw(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function Lw(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&Dw(r,e),e}function Uw(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function Fw(t,e){const n={},r=a(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["customMetadata"],i)}const o=a(t,["chunkingConfig"]);return e!==void 0&&o!=null&&c(e,["chunkingConfig"],o),n}function Bw(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response"]);return s!=null&&c(e,["response"],Vw(s)),e}function zw(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["fileName"]);r!=null&&c(e,["fileName"],r);const o=a(t,["config"]);return o!=null&&Fw(o,e),e}function Vw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function Gw(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function Hw(t){const e={},n=a(t,["config"]);return n!=null&&Gw(n,e),e}function Ow(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["fileSearchStores"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["fileSearchStores"],i)}return e}function Oh(t,e){const n={},r=a(t,["mimeType"]);e!==void 0&&r!=null&&c(e,["mimeType"],r);const o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),c(e,["customMetadata"],l)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&c(e,["chunkingConfig"],s),n}function qw(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["config"]);return r!=null&&Oh(r,e),e}function $w(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ww="Content-Type",Jw="X-Server-Timeout",Yw="User-Agent",na="x-goog-api-client",Kw="1.34.0",Xw=`google-genai-sdk/${Kw}`,Qw="v1beta1",Zw="v1beta";class jw{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Qw,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Zw,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))o.searchParams.append(s,String(l));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[o,i]of Object.entries(n))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,o){if(n&&n.timeout||o){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}o&&o.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&ex(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Hd(o),new Ql(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Hd(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Vt(this,arguments,function*(){var r;const o=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="";const l="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield de(o.read());if(d){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=i.decode(f,{stream:!0});try{const _=JSON.parse(p);if("error"in _){const y=JSON.parse(JSON.stringify(_.error)),x=y.status,g=y.code,v=`got status: ${x}. ${JSON.stringify(_)}`;if(g>=400&&g<600)throw new ms({message:v,status:g})}}catch(_){if(_.name==="ApiError")throw _}s+=p;let h=-1,m=0;for(;;){h=-1,m=0;for(const x of u){const g=s.indexOf(x);g!==-1&&(h===-1||g<h)&&(h=g,m=x.length)}if(h===-1)break;const _=s.substring(0,h);s=s.substring(h+m);const y=_.trim();if(y.startsWith(l)){const x=y.substring(l.length).trim();try{const g=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield de(new Ql(g))}catch(g){throw new Error(`exception parsing stream chunk ${x}. ${g}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Xw+" "+this.clientOptions.userAgentExtra;return e[Yw]=n,e[na]=n,e[Ww]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[o,i]of Object.entries(e.headers))r.append(o,i);e.timeout&&e.timeout>0&&r.append(Jw,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);o.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=l;const u={file:o},d=this.getFileName(e),f=se("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,d,u,n==null?void 0:n.httpOptions);return i.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var o;const i=this.clientOptions.uploader,s=await i.stat(n),l=String(s.size),u=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};r!=null&&Oh(r,p);const h=await this.fetchUploadUrl(d,l,u,f,p,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,o,i,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:u});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(l=d==null?void 0:d.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Hd(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new ms({message:o,status:n}):new Error(o)}}function ex(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,s){const l=Object.assign({},i);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const d=s[u],f=l[u];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?l[u]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),l[u]=d)}return l}const o=r(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tx="mcp_used/unknown";let nx=!1;function qh(t){for(const e of t)if(rx(e)||typeof e=="object"&&"inputSchema"in e)return!0;return nx}function $h(t){var e;const n=(e=t[na])!==null&&e!==void 0?e:"";t[na]=(n+` ${tx}`).trimStart()}function rx(t){return t!==null&&typeof t=="object"&&t instanceof cu}function ox(t){return Vt(this,arguments,function*(n,r=100){let o,i=0;for(;i<r;){const s=yield de(n.listTools({cursor:o}));for(const l of s.tools)yield yield de(l),i++;if(!s.nextCursor)break;o=s.nextCursor}})}class cu{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new cu(e,n)}async initialize(){var e,n,r,o;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var l=!0,u=(n=void 0,Gt(ox(f))),d;d=await u.next(),e=d.done,!e;l=!0){o=d.value,l=!1;const p=o;s.push(p);const h=p.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=f}}catch(p){n={error:p}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),Uy(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await o.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ix(t,e,n){const r=new Ay;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),e(r)}class sx{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=ux(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const f=new Promise(S=>{d=S}),p=e.callbacks,h=function(){d({})},m=this.apiClient,_={onopen:h,onmessage:S=>{ix(m,p.onmessage,S)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(S){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(S){}},y=this.webSocketFactory.create(u,ax(s),_);y.connect(),await f;const v={setup:{model:Se(this.apiClient,e.model)}};return y.send(JSON.stringify(v)),new lx(y,this.apiClient)}}class lx{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=b_(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=M_(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(vr.PLAY)}pause(){this.sendPlaybackControl(vr.PAUSE)}stop(){this.sendPlaybackControl(vr.STOP)}resetContext(){this.sendPlaybackControl(vr.RESET_CONTEXT)}close(){this.conn.close()}}function ax(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function ux(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cx="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function dx(t,e,n){const r=new ky;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const i=JSON.parse(o);if(t.isVertexAI()){const s=U_(i);Object.assign(r,s)}else Object.assign(r,i);e(r)}class fx{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new sx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,o,i,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&qh(e.config.tools)&&$h(p);const h=gx(p);if(this.apiClient.isVertexAI())f=`${u}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{const D=this.apiClient.getApiKey();let V="BidiGenerateContent",Z="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",Z="access_token"),f=`${u}/ws/google.ai.generativelanguage.${d}.GenerativeService.${V}?${Z}=${D}`}let m=()=>{};const _=new Promise(D=>{m=D}),y=e.callbacks,x=function(){var D;(D=y==null?void 0:y.onopen)===null||D===void 0||D.call(y),m({})},g=this.apiClient,v={onopen:x,onmessage:D=>{dx(g,y.onmessage,D)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(D){}},S=this.webSocketFactory.create(f,mx(h),v);S.connect(),await _;let T=Se(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const D=this.apiClient.getProject(),V=this.apiClient.getLocation();T=`projects/${D}/locations/${V}/`+T}let I={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ji.AUDIO]}:e.config.responseModalities=[Ji.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],N=[];for(const D of b)if(this.isCallableTool(D)){const V=D;N.push(await V.tool())}else N.push(D);N.length>0&&(e.config.tools=N);const F={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=P_(this.apiClient,F):I=R_(this.apiClient,F),delete I.config,S.send(JSON.stringify(I)),new hx(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const px={turnComplete:!0};class hx{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Rt(n.turns),e.isVertexAI()||(r=r.map(o=>gs(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(cx)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},px),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:L_(e)}:n={realtimeInput:D_(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function mx(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function gx(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Od=10;function qd(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(kr(s)){o=!0;break}if(!o)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function kr(t){return"callTool"in t&&typeof t.callTool=="function"}function yx(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>kr(o)))!==null&&r!==void 0?r:!1}function $d(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,o)=>{if(kr(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(o)}),n}function Wd(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vx extends an{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,o,i,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!yx(n)||qd(n.config))return await this.generateContentInternal(u);const d=$d(n);if(d.length>0){const y=d.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let f,p;const h=Rt(u.contents),m=(i=(o=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Od;let _=0;for(;_<m&&(f=await this.generateContentInternal(u),!(!f.functionCalls||f.functionCalls.length===0));){const y=f.candidates[0].content,x=[];for(const g of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(kr(g)){const S=await g.callTool(f.functionCalls);x.push(...S)}_++,p={role:"user",parts:x},u.contents=Rt(u.contents),u.contents.push(y),u.contents.push(p),Wd(u.config)&&(h.push(y),h.push(p))}return Wd(u.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var r,o,i,s,l;if(this.maybeMoveToResponseJsonSchem(n),qd(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const u=$d(n);if(u.length>0){const p=u.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let i;const s=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((o=u==null?void 0:u.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=u==null?void 0:u.safetyAttributes:s.push(u);let l;return i?l={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new er(sn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,i,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,o;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const s=await Promise.all(i.map(async u=>kr(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&qh(e.config.tools)){const u=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},u);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),$h(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,r,o;const i=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(kr(s)){const l=s,u=await l.tool();for(const d of(o=u.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,l)}}return i}async processAfcStream(e){var n,r,o;const i=(o=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Od;let s=!1,l=0;const u=await this.initAfcToolsMap(e);return function(d,f,p){return Vt(this,arguments,function*(){for(var h,m,_,y,x,g;l<i;){s&&(l++,s=!1);const I=yield de(d.processParamsMaybeAddMcpUsage(p)),b=yield de(d.generateContentStreamInternal(I)),N=[],F=[];try{for(var v=!0,S=(m=void 0,Gt(b)),T;T=yield de(S.next()),h=T.done,!h;v=!0){y=T.value,v=!1;const D=y;if(yield yield de(D),D.candidates&&(!((x=D.candidates[0])===null||x===void 0)&&x.content)){F.push(D.candidates[0].content);for(const V of(g=D.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(l<i&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(V.functionCall.name)){const Z=yield de(f.get(V.functionCall.name).callTool([V.functionCall]));N.push(...Z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(D){m={error:D}}finally{try{!v&&!h&&(_=S.return)&&(yield de(_.call(S)))}finally{if(m)throw m.error}}if(N.length>0){s=!0;const D=new Qr;D.candidates=[{content:{role:"user",parts:N}}],yield yield de(D);const V=[];V.push(...F),V.push({role:"user",parts:N});const Z=Rt(p.contents).concat(V);p.contents=Z}else break}})}(this,u,e)}async generateContentInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=zd(this.apiClient,e);return l=se("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Gd(f),h=new Qr;return Object.assign(h,p),h})}else{const d=Bd(this.apiClient,e);return l=se("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Vd(f),h=new Qr;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=zd(this.apiClient,e);return l=se("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Vt(this,arguments,function*(){var h,m,_,y;try{for(var x=!0,g=Gt(p),v;v=yield de(g.next()),h=v.done,!h;x=!0){y=v.value,x=!1;const S=y,T=Gd(yield de(S.json()));T.sdkHttpResponse={headers:S.headers};const I=new Qr;Object.assign(I,T),yield yield de(I)}}catch(S){m={error:S}}finally{try{!x&&!h&&(_=g.return)&&(yield de(_.call(g)))}finally{if(m)throw m.error}}})})}else{const d=Bd(this.apiClient,e);return l=se("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return Vt(this,arguments,function*(){var h,m,_,y;try{for(var x=!0,g=Gt(p),v;v=yield de(g.next()),h=v.done,!h;x=!0){y=v.value,x=!1;const S=y,T=Vd(yield de(S.json()));T.sdkHttpResponse={headers:S.headers};const I=new Qr;Object.assign(I,T),yield yield de(I)}}catch(S){m={error:S}}finally{try{!x&&!h&&(_=g.return)&&(yield de(_.call(g)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=fS(this.apiClient,e);return l=se("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=hS(f),h=new wd;return Object.assign(h,p),h})}else{const d=dS(this.apiClient,e);return l=se("{model}:batchEmbedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=pS(f),h=new wd;return Object.assign(h,p),h})}}async generateImagesInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=TS(this.apiClient,e);return l=se("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=kS(f),h=new xd;return Object.assign(h,p),h})}else{const d=CS(this.apiClient,e);return l=se("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=IS(f),h=new xd;return Object.assign(h,p),h})}}async editImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=lS(this.apiClient,e);return i=se("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>{const d=aS(u),f=new gy;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=Tw(this.apiClient,e);return i=se("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>{const d=Iw(u),f=new yy;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=sw(this.apiClient,e);return i=se("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=lw(u),f=new vy;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=pw(this.apiClient,e);return i=se("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=hw(u),f=new _y;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=qS(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>ta(f))}else{const d=OS(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ea(f))}}async listInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=jS(this.apiClient,e);return l=se("{models_url}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=tw(f),h=new Ed;return Object.assign(h,p),h})}else{const d=ZS(this.apiClient,e);return l=se("{models_url}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=ew(f),h=new Ed;return Object.assign(h,p),h})}}async update(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Ew(this.apiClient,e);return l=se("{model}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>ta(f))}else{const d=xw(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ea(f))}}async delete(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=rS(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=iS(f),h=new Cd;return Object.assign(h,p),h})}else{const d=nS(this.apiClient,e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=oS(f),h=new Cd;return Object.assign(h,p),h})}}async countTokens(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=j_(this.apiClient,e);return l=se("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=tS(f),h=new Td;return Object.assign(h,p),h})}else{const d=Z_(this.apiClient,e);return l=se("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=eS(f),h=new Td;return Object.assign(h,p),h})}}async computeTokens(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=$_(this.apiClient,e);return i=se("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>{const d=W_(u),f=new Sy;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=bS(this.apiClient,e);return l=se("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=PS(f),h=new Yi;return Object.assign(h,p),h})}else{const d=MS(this.apiClient,e);return l=se("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const p=RS(f),h=new Yi;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _x extends an{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=cy(e);return l=se("{operationName}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const d=uy(e);return l=se("{operationName}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=ny(e);return i=se("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sx(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function wx(t){const e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Rx(i))),c(e,["parts"],o)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function xx(t,e,n){const r={},o=a(e,["expireTime"]);n!==void 0&&o!=null&&c(n,["expireTime"],o);const i=a(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&c(n,["newSessionExpireTime"],i);const s=a(e,["uses"]);n!==void 0&&s!=null&&c(n,["uses"],s);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&c(n,["bidiGenerateContentSetup"],Nx(t,l));const u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&c(n,["fieldMask"],u),r}function Ex(t,e){const n={},r=a(e,["config"]);return r!=null&&c(n,["config"],xx(t,r,n)),n}function Cx(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Tx(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ix(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function kx(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function Ax(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);const i=a(t,["temperature"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","temperature"],i);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","seed"],f);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],uu(p));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","thinkingConfig"],h);const m=a(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=a(t,["systemInstruction"]);e!==void 0&&_!=null&&c(e,["setup","systemInstruction"],wx(tt(_)));const y=a(t,["tools"]);if(e!==void 0&&y!=null){let b=zr(y);Array.isArray(b)&&(b=b.map(N=>Mx(Br(N)))),c(e,["setup","tools"],b)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&c(e,["setup","sessionResumption"],Px(x));const g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);const v=a(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&c(e,["setup","outputAudioTranscription"],v);const S=a(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&c(e,["setup","realtimeInputConfig"],S);const T=a(t,["contextWindowCompression"]);e!==void 0&&T!=null&&c(e,["setup","contextWindowCompression"],T);const I=a(t,["proactivity"]);if(e!==void 0&&I!=null&&c(e,["setup","proactivity"],I),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Nx(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],Se(t,r));const o=a(e,["config"]);return o!=null&&c(n,["config"],Ax(o,n)),n}function Rx(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);const i=a(t,["fileData"]);i!=null&&c(e,["fileData"],Cx(i));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],Tx(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Sx(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const f=a(t,["thought"]);f!=null&&c(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&c(e,["videoMetadata"],h),e}function Px(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Mx(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],Ix(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],kx(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bx(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(i=>`${n}.${i}`);e.push(...o)}else e.push(n)}return e.join(",")}function Dx(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const i=bx(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];o.length>0&&(l=o.map(d=>s.includes(d)?`generationConfig.${d}`:d));const u=[];i&&u.push(i),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class Lx extends an{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=Ex(this.apiClient,e);i=se("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=Dx(l,e.config);return o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ux(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function Fx(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&Ux(r,e),e}function Bx(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function zx(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function Vx(t){const e={},n=a(t,["parent"]);n!=null&&c(e,["_url","parent"],n);const r=a(t,["config"]);return r!=null&&zx(r,e),e}function Gx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["documents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hx extends an{constructor(e){super(),this.apiClient=e,this.list=async n=>new er(sn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Bx(e);return i=se("{name}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Fx(e);o=se("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Vx(e);return i=se("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=Gx(u),f=new wy;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ox extends an{constructor(e,n=new Hx(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new er(sn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=bw(e);return i=se("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Uw(e);return i=se("{name}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Lw(e);o=se("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Hw(e);return i=se("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=Ow(u),f=new xy;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=qw(e);return i=se("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=$w(u),f=new Ey;return Object.assign(f,d),f})}}async importFile(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=zw(e);return i=se("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=Bw(u),f=new ou;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Wh=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Wh=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const qx=()=>Wh();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ra(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const oa=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bt extends Error{}class at extends bt{constructor(e,n,r,o){super(`${at.makeMessage(e,n,r)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,r){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,r,o){if(!e||!o)return new _s({message:r,cause:oa(n)});const i=n;return e===400?new Yh(e,i,r,o):e===401?new Kh(e,i,r,o):e===403?new Xh(e,i,r,o):e===404?new Qh(e,i,r,o):e===409?new Zh(e,i,r,o):e===422?new jh(e,i,r,o):e===429?new em(e,i,r,o):e>=500?new tm(e,i,r,o):new at(e,i,r,o)}}class ia extends at{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class _s extends at{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Jh extends _s{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Yh extends at{}class Kh extends at{}class Xh extends at{}class Qh extends at{}class Zh extends at{}class jh extends at{}class em extends at{}class tm extends at{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $x=/^[a-z][a-z0-9+.-]*:/i,Wx=t=>$x.test(t);let sa=t=>(sa=Array.isArray,sa(t));const Jx=sa;let Yx=Jx;const Jd=Yx;function Kx(t){if(!t)return!0;for(const e in t)return!1;return!0}function Xx(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Qx=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new bt(`${t} must be an integer`);if(e<0)throw new bt(`${t} must be a positive integer`);return e},Zx=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jx=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eE(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const tE=()=>{var t,e,n,r,o;const i=eE();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rr,"X-Stainless-OS":Kd(Deno.build.os),"X-Stainless-Arch":Yd(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rr,"X-Stainless-OS":Kd((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Yd((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const s=nE();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function nE(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const o=r[1]||0,i=r[2]||0,s=r[3]||0;return{browser:e,version:`${o}.${i}.${s}`}}}return null}const Yd=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Kd=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ri;const rE=()=>ri??(ri=tE());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oE(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function nm(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function iE(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return nm({start(){},async pull(n){const{done:r,value:o}=await e.next();r?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function rm(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function sE(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),o=r.cancel();r.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lE=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const om=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Qs(t,e,n){return om(),new File(t,e??"unknown_file",n)}function aE(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const uE=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const im=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",cE=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&im(t),dE=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function fE(t,e,n){if(om(),t=await t,cE(t))return t instanceof File?t:Qs([await t.arrayBuffer()],t.name);if(dE(t)){const o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Qs(await la(o),e,n)}const r=await la(t);if(e||(e=aE(t)),!(n!=null&&n.type)){const o=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return Qs(r,e,n)}async function la(t){var e,n,r,o,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(im(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(uE(t))try{for(var l=!0,u=Gt(t),d;d=await u.next(),e=d.done,!e;l=!0){o=d.value,l=!1;const f=o;s.push(...await la(f))}}catch(f){n={error:f}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}else{const f=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${pE(t)}`)}return s}function pE(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sm{constructor(e){this._client=e}}sm._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lm(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Xd=Object.freeze(Object.create(null)),hE=(t=lm)=>function(n,...r){if(n.length===1)return n[0];let o=!1;const i=[],s=n.reduce((f,p,h)=>{var m,_,y;/[?#]/.test(p)&&(o=!0);const x=r[h];let g=(o?encodeURIComponent:t)(""+x);return h!==r.length&&(x==null||typeof x=="object"&&x.toString===((y=Object.getPrototypeOf((_=Object.getPrototypeOf((m=x.hasOwnProperty)!==null&&m!==void 0?m:Xd))!==null&&_!==void 0?_:Xd))===null||y===void 0?void 0:y.toString))&&(g=x+"",i.push({start:f.length+p.length,length:g.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),f+p+(h===r.length?"":g)},""),l=s.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=u.exec(l))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,p)=>f.start-p.start),i.length>0){let f=0;const p=i.reduce((h,m)=>{const _=" ".repeat(m.start-f),y="^".repeat(m.length);return f=m.start+m.length,h+_+y},"");throw new bt(`Path parameters result in path with invalid segments:
${i.map(h=>h.error).join(`
`)}
${s}
${p}`)}return s},oi=hE(lm);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class am extends sm{create(e,n){var r;const{api_version:o=this._client.apiVersion}=e,i=Xi(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new bt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new bt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(oi`/${o}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(oi`/${o}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(oi`/${o}/interactions/${e}/cancel`,r)}get(e,n={},r){var o;const i=n??{},{api_version:s=this._client.apiVersion}=i,l=Xi(i,["api_version"]);return this._client.get(oi`/${s}/interactions/${e}`,Object.assign(Object.assign({query:l},r),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}am._key=Object.freeze(["interactions"]);class um extends am{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mE(t){let e=0;for(const o of t)e+=o.length;const n=new Uint8Array(e);let r=0;for(const o of t)n.set(o,r),r+=o.length;return n}let ii;function du(t){let e;return(ii??(e=new globalThis.TextEncoder,ii=e.encode.bind(e)))(t)}let si;function Qd(t){let e;return(si??(e=new globalThis.TextDecoder,si=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ss{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?du(e):e;this.buffer=mE([this.buffer,n]);const r=[];let o;for(;(o=gE(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){r.push(Qd(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=Qd(this.buffer.subarray(0,i));r.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Ss.NEWLINE_CHARS=new Set([`
`,"\r"]);Ss.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function gE(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function yE(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qi={off:0,error:200,warn:300,info:400,debug:500},Zd=(t,e,n)=>{if(t){if(Xx(Qi,t))return t;it(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Qi))}`)}};function ro(){}function li(t,e,n){return!e||Qi[t]>Qi[n]?ro:e[t].bind(e)}const vE={error:ro,warn:ro,info:ro,debug:ro};let jd=new WeakMap;function it(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return vE;const o=jd.get(n);if(o&&o[0]===r)return o[1];const i={error:li("error",n,r),warn:li("warn",n,r),info:li("info",n,r),debug:li("debug",n,r)};return jd.set(n,[r,i]),i}const Gn=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _r{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let o=!1;const i=r?it(r):console;function s(){return Vt(this,arguments,function*(){var u,d,f,p;if(o)throw new bt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var m=!0,_=Gt(_E(e,n)),y;y=yield de(_.next()),u=y.done,!u;m=!0){p=y.value,m=!1;const x=p;if(!h)if(x.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield de(JSON.parse(x.data))}catch(g){throw i.error("Could not parse message into JSON:",x.data),i.error("From chunk:",x.raw),g}}}catch(x){d={error:x}}finally{try{!m&&!u&&(f=_.return)&&(yield de(f.call(_)))}finally{if(d)throw d.error}}h=!0}catch(x){if(ra(x))return yield de(void 0);throw x}finally{h||n.abort()}})}return new _r(s,n,r)}static fromReadableStream(e,n,r){let o=!1;function i(){return Vt(this,arguments,function*(){var u,d,f,p;const h=new Ss,m=rm(e);try{for(var _=!0,y=Gt(m),x;x=yield de(y.next()),u=x.done,!u;_=!0){p=x.value,_=!1;const g=p;for(const v of h.decode(g))yield yield de(v)}}catch(g){d={error:g}}finally{try{!_&&!u&&(f=y.return)&&(yield de(f.call(y)))}finally{if(d)throw d.error}}for(const g of h.flush())yield yield de(g)})}function s(){return Vt(this,arguments,function*(){var u,d,f,p;if(o)throw new bt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var m=!0,_=Gt(i()),y;y=yield de(_.next()),u=y.done,!u;m=!0){p=y.value,m=!1;const x=p;h||x&&(yield yield de(JSON.parse(x)))}}catch(x){d={error:x}}finally{try{!m&&!u&&(f=_.return)&&(yield de(f.call(_)))}finally{if(d)throw d.error}}h=!0}catch(x){if(ra(x))return yield de(void 0);throw x}finally{h||n.abort()}})}return new _r(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),o=i=>({next:()=>{if(i.length===0){const s=r.next();e.push(s),n.push(s)}return i.shift()}});return[new _r(()=>o(e),this.controller,this.client),new _r(()=>o(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return nm({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:o,done:i}=await n.next();if(i)return r.close();const s=du(JSON.stringify(o)+`
`);r.enqueue(s)}catch(o){r.error(o)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function _E(t,e){return Vt(this,arguments,function*(){var r,o,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bt("Attempted to iterate over a response with no body");const l=new wE,u=new Ss,d=rm(t.body);try{for(var f=!0,p=Gt(SE(d)),h;h=yield de(p.next()),r=h.done,!r;f=!0){s=h.value,f=!1;const m=s;for(const _ of u.decode(m)){const y=l.decode(_);y&&(yield yield de(y))}}}catch(m){o={error:m}}finally{try{!f&&!r&&(i=p.return)&&(yield de(i.call(p)))}finally{if(o)throw o.error}}for(const m of u.flush()){const _=l.decode(m);_&&(yield yield de(_))}})}function SE(t){return Vt(this,arguments,function*(){var n,r,o,i;let s=new Uint8Array;try{for(var l=!0,u=Gt(t),d;d=yield de(u.next()),n=d.done,!n;l=!0){i=d.value,l=!1;const f=i;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?du(f):f;let h=new Uint8Array(s.length+p.length);h.set(s),h.set(p,s.length),s=h;let m;for(;(m=yE(s))!==-1;)yield yield de(s.slice(0,m)),s=s.slice(m)}}catch(f){r={error:f}}finally{try{!l&&!n&&(o=u.return)&&(yield de(o.call(u)))}finally{if(r)throw r.error}}s.length>0&&(yield yield de(s))})}class wE{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,o]=xE(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function xE(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function EE(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:o,startTime:i}=e,s=await(async()=>{var l;if(e.options.stream)return it(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):_r.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),d=(l=u==null?void 0:u.split(";")[0])===null||l===void 0?void 0:l.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return it(t).debug(`[${r}] response parsed`,Gn({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fu extends Promise{constructor(e,n,r=EE){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new fu(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cm=Symbol("brand.privateNullableHeaders");function*CE(t){if(!t)return;if(cm in t){const{values:r,nulls:o}=t;yield*r.entries();for(const i of o)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Jd(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const o=r[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const i=Jd(r[1])?r[1]:[r[1]];let s=!1;for(const l of i)l!==void 0&&(e&&!s&&(s=!0,yield[o,null]),yield[o,l])}}const Zr=t=>{const e=new Headers,n=new Set;for(const r of t){const o=new Set;for(const[i,s]of CE(r)){const l=i.toLowerCase();o.has(l)||(e.delete(i),o.add(l)),s===null?(e.delete(i),n.add(l)):(e.append(i,s),n.delete(l))}}return{[cm]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zs=t=>{var e,n,r,o,i,s;if(typeof globalThis.process<"u")return(r=(n=(e=X0)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||i===void 0?void 0:i.call(o,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dm;class ws{constructor(e){var n,r,o,i,s,l,u,{baseURL:d=Zs("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Zs("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,h=Xi(e,["baseURL","apiKey","apiVersion"]);const m=Object.assign(Object.assign({apiKey:f,apiVersion:p},h),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(r=m.timeout)!==null&&r!==void 0?r:ws.DEFAULT_TIMEOUT,this.logger=(o=m.logger)!==null&&o!==void 0?o:console;const _="warn";this.logLevel=_,this.logLevel=(s=(i=Zd(m.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:Zd(Zs("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:_,this.fetchOptions=m.fetchOptions,this.maxRetries=(l=m.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(u=m.fetch)!==null&&u!==void 0?u:oE(),this.encoder=lE,this._options=m,this.apiKey=f,this.apiVersion=p,this.clientAdapter=m.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Zr([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Zr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Zr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new bt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${rr}`}defaultIdempotencyKey(){return`stainless-node-retry-${qx()}`}makeStatusError(e,n,r,o){return at.generate(e,n,r,o)}buildURL(e,n,r){const o=!this.baseURLOverridden()&&r||this.baseURL,i=Wx(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Kx(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new fu(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var o,i,s;const l=await e,u=(o=l.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=u),await this.prepareOptions(l);const{req:d,url:f,timeout:p}=await this.buildRequest(l,{retryCount:u-n});await this.prepareRequest(d,{url:f,options:l});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,_=Date.now();if(it(this).debug(`[${h}] sending request`,Gn({retryOfRequestLogID:r,method:l.method,url:f,options:l,headers:d.headers})),!((i=l.signal)===null||i===void 0)&&i.aborted)throw new ia;const y=new AbortController,x=await this.fetchWithTimeout(f,d,p,y).catch(oa),g=Date.now();if(x instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(!((s=l.signal)===null||s===void 0)&&s.aborted)throw new ia;const T=ra(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return it(this).info(`[${h}] connection ${T?"timed out":"failed"} - ${S}`),it(this).debug(`[${h}] connection ${T?"timed out":"failed"} (${S})`,Gn({retryOfRequestLogID:r,url:f,durationMs:g-_,message:x.message})),this.retryRequest(l,n,r??h);throw it(this).info(`[${h}] connection ${T?"timed out":"failed"} - error; no more retries left`),it(this).debug(`[${h}] connection ${T?"timed out":"failed"} (error; no more retries left)`,Gn({retryOfRequestLogID:r,url:f,durationMs:g-_,message:x.message})),T?new Jh:new _s({cause:x})}const v=`[${h}${m}] ${d.method} ${f} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${g-_}ms`;if(!x.ok){const S=await this.shouldRetry(x);if(n&&S){const D=`retrying, ${n} attempts remaining`;return await sE(x.body),it(this).info(`${v} - ${D}`),it(this).debug(`[${h}] response error (${D})`,Gn({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,durationMs:g-_})),this.retryRequest(l,n,r??h,x.headers)}const T=S?"error; no more retries left":"error; not retryable";it(this).info(`${v} - ${T}`);const I=await x.text().catch(D=>oa(D).message),b=Zx(I),N=b?void 0:I;throw it(this).debug(`[${h}] response error (${T})`,Gn({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,message:N,durationMs:Date.now()-_})),this.makeStatusError(x.status,b,N,x.headers)}return it(this).info(v),it(this).debug(`[${h}] response start`,Gn({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,durationMs:g-_})),{response:x,options:l,controller:y,requestLogID:h,retryOfRequestLogID:r,startTime:_}}async fetchWithTimeout(e,n,r,o){const i=n||{},{signal:s,method:l}=i,u=Xi(i,["signal","method"]);s&&s.addEventListener("abort",()=>o.abort());const d=setTimeout(()=>o.abort(),r),f=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},f?{duplex:"half"}:{}),{method:"GET"}),u);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,o){var i;let s;const l=o==null?void 0:o.get("retry-after-ms");if(l){const d=parseFloat(l);Number.isNaN(d)||(s=d)}const u=o==null?void 0:o.get("retry-after");if(u&&!s){const d=parseFloat(u);Number.isNaN(d)?s=Date.parse(u)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,d)}return await jx(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,s=Math.min(.5*Math.pow(2,i),8),l=1-Math.random()*.25;return s*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,o,i;const s=Object.assign({},e),{method:l,path:u,query:d,defaultBaseURL:f}=s,p=this.buildURL(u,d,f);"timeout"in s&&Qx("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:s}),_=await this.buildHeaders({options:e,method:l,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:_},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:p,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:o}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let l=Zr([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),rE()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Zr([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:iE(e)}:this.encoder({body:e,headers:r})}}ws.DEFAULT_TIMEOUT=6e4;class $e extends ws{constructor(){super(...arguments),this.interactions=new um(this)}}dm=$e;$e.GeminiNextGenAPIClient=dm;$e.GeminiNextGenAPIClientError=bt;$e.APIError=at;$e.APIConnectionError=_s;$e.APIConnectionTimeoutError=Jh;$e.APIUserAbortError=ia;$e.NotFoundError=Qh;$e.ConflictError=Zh;$e.RateLimitError=em;$e.BadRequestError=Yh;$e.AuthenticationError=Kh;$e.InternalServerError=tm;$e.PermissionDeniedError=Xh;$e.UnprocessableEntityError=jh;$e.toFile=fE;$e.Interactions=um;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TE(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function IE(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function kE(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function AE(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function NE(t,e,n){const r={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=a(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&c(e,["displayName"],o),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=a(t,["epochCount"]);e!==void 0&&i!=null&&c(e,["tuningTask","hyperparameters","epochCount"],i);const s=a(t,["learningRateMultiplier"]);if(s!=null&&c(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=a(t,["batchSize"]);e!==void 0&&l!=null&&c(e,["tuningTask","hyperparameters","batchSize"],l);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&c(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function RE(t,e,n){const r={};let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const m=a(t,["validationDataset"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec"],ef(m))}else if(o==="PREFERENCE_TUNING"){const m=a(t,["validationDataset"]);e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec"],ef(m))}const i=a(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&c(e,["tunedModelDisplayName"],i);const s=a(t,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const m=a(t,["epochCount"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],m)}else if(l==="PREFERENCE_TUNING"){const m=a(t,["epochCount"]);e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],m)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const m=a(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m)}else if(u==="PREFERENCE_TUNING"){const m=a(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],m)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const m=a(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m)}else if(d==="PREFERENCE_TUNING"){const m=a(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],m)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const m=a(t,["adapterSize"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m)}else if(f==="PREFERENCE_TUNING"){const m=a(t,["adapterSize"]);e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],m)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);const h=a(t,["beta"]);return e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function PE(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const o=a(t,["preTunedModel"]);o!=null&&c(n,["preTunedModel"],o);const i=a(t,["trainingDataset"]);i!=null&&HE(i);const s=a(t,["config"]);return s!=null&&NE(s,n),n}function ME(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const o=a(t,["preTunedModel"]);o!=null&&c(n,["preTunedModel"],o);const i=a(t,["trainingDataset"]);i!=null&&OE(i,n,e);const s=a(t,["config"]);return s!=null&&RE(s,n,e),n}function bE(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function DE(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function LE(t,e,n){const r={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&c(e,["_query","pageToken"],i);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function UE(t,e,n){const r={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&c(e,["_query","pageToken"],i);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function FE(t,e){const n={},r=a(t,["config"]);return r!=null&&LE(r,n),n}function BE(t,e){const n={},r=a(t,["config"]);return r!=null&&UE(r,n),n}function zE(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const o=a(t,["nextPageToken"]);o!=null&&c(n,["nextPageToken"],o);const i=a(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>fm(l))),c(n,["tuningJobs"],s)}return n}function VE(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const o=a(t,["nextPageToken"]);o!=null&&c(n,["nextPageToken"],o);const i=a(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>aa(l))),c(n,["tuningJobs"],s)}return n}function GE(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["model"],r);const o=a(t,["name"]);return o!=null&&c(n,["endpoint"],o),n}function HE(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=a(t,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),c(n,["examples","examples"],o)}return n}function OE(t,e,n){const r={};let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function fm(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const o=a(t,["name"]);o!=null&&c(n,["name"],o);const i=a(t,["state"]);i!=null&&c(n,["state"],Ah(i));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);u!=null&&c(n,["endTime"],u);const d=a(t,["updateTime"]);d!=null&&c(n,["updateTime"],d);const f=a(t,["description"]);f!=null&&c(n,["description"],f);const p=a(t,["baseModel"]);p!=null&&c(n,["baseModel"],p);const h=a(t,["_self"]);return h!=null&&c(n,["tunedModel"],GE(h)),n}function aa(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const o=a(t,["name"]);o!=null&&c(n,["name"],o);const i=a(t,["state"]);i!=null&&c(n,["state"],Ah(i));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(n,["endTime"],u);const d=a(t,["updateTime"]);d!=null&&c(n,["updateTime"],d);const f=a(t,["error"]);f!=null&&c(n,["error"],f);const p=a(t,["description"]);p!=null&&c(n,["description"],p);const h=a(t,["baseModel"]);h!=null&&c(n,["baseModel"],h);const m=a(t,["tunedModel"]);m!=null&&c(n,["tunedModel"],m);const _=a(t,["preTunedModel"]);_!=null&&c(n,["preTunedModel"],_);const y=a(t,["supervisedTuningSpec"]);y!=null&&c(n,["supervisedTuningSpec"],y);const x=a(t,["preferenceOptimizationSpec"]);x!=null&&c(n,["preferenceOptimizationSpec"],x);const g=a(t,["tuningDataStats"]);g!=null&&c(n,["tuningDataStats"],g);const v=a(t,["encryptionSpec"]);v!=null&&c(n,["encryptionSpec"],v);const S=a(t,["partnerModelTuningSpec"]);S!=null&&c(n,["partnerModelTuningSpec"],S);const T=a(t,["customBaseModel"]);T!=null&&c(n,["customBaseModel"],T);const I=a(t,["experiment"]);I!=null&&c(n,["experiment"],I);const b=a(t,["labels"]);b!=null&&c(n,["labels"],b);const N=a(t,["outputUri"]);N!=null&&c(n,["outputUri"],N);const F=a(t,["pipelineJob"]);F!=null&&c(n,["pipelineJob"],F);const D=a(t,["serviceAccount"]);D!=null&&c(n,["serviceAccount"],D);const V=a(t,["tunedModelDisplayName"]);V!=null&&c(n,["tunedModelDisplayName"],V);const Z=a(t,["veoTuningSpec"]);return Z!=null&&c(n,["veoTuningSpec"],Z),n}function qE(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const o=a(t,["name"]);o!=null&&c(n,["name"],o);const i=a(t,["metadata"]);i!=null&&c(n,["metadata"],i);const s=a(t,["done"]);s!=null&&c(n,["done"],s);const l=a(t,["error"]);return l!=null&&c(n,["error"],l),n}function ef(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["validationDatasetUri"],r);const o=a(t,["vertexDatasetResource"]);return o!=null&&c(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $E extends an{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new er(sn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),i=await this.tuneMldevInternal(o);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Xl.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=DE(e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>aa(f))}else{const d=bE(e);return l=se("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>fm(f))}}async listInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=BE(e);return l=se("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=VE(f),h=new Id;return Object.assign(h,p),h})}else{const d=FE(e);return l=se("tunedModels",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=zE(f),h=new Id;return Object.assign(h,p),h})}}async cancel(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=IE(e);return l=se("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=AE(f),h=new kd;return Object.assign(h,p),h})}else{const d=TE(e);return l=se("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=kE(f),h=new kd;return Object.assign(h,p),h})}}async tuneInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=ME(e,e);return i=se("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>aa(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=PE(e);return i=se("tunedModels",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>qE(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WE{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const JE=1024*1024*8,YE=3,KE=1e3,XE=2,Zi="x-goog-upload-status";async function QE(t,e,n){var r;const o=await pm(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Zi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function ZE(t,e,n){var r;const o=await pm(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Zi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=xh(i),l=new iu;return Object.assign(l,s),l}async function pm(t,e,n){var r,o;let i=0,s=0,l=new Ql(new Response),u="upload";for(i=t.size;s<i;){const d=Math.min(JE,i-s),f=t.slice(s,s+d);s+d>=i&&(u+=", finalize");let p=0,h=KE;for(;p<YE&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[Zi]));)p++,await eC(h),h=h*XE;if(s+=d,((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[Zi])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function jE(t){return{size:t.size,type:t.type}}function eC(t){return new Promise(e=>setTimeout(e,t))}class tC{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QE(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ZE(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jE(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nC{create(e,n,r){return new rC(e,n,r)}}class rC{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tf="x-goog-api-key";class oC{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(tf)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(tf,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iC="gl-node/";class sC{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new $e({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=ey(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new oC(this.apiKey);this.apiClient=new jw({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:iC+"web",uploader:new tC,downloader:new WE}),this.models=new vx(this.apiClient),this.live=new fx(this.apiClient,o,new nC),this.batches=new Nv(this.apiClient),this.chats=new c_(this.models,this.apiClient),this.caches=new l_(this.apiClient),this.files=new S_(this.apiClient),this.operations=new _x(this.apiClient),this.authTokens=new Lx(this.apiClient),this.tunings=new $E(this.apiClient),this.fileSearchStores=new Ox(this.apiClient)}}const lC=`
You are an expert curriculum analyzer. Your goal is to determine if a user's request is a complex, abstract topic that requires breaking down into smaller sub-concepts for effective teaching, or if it is a specific, singular query.

Input: User learning request.
Output: JSON object with the following structure:
{
  "isAbstract": boolean, // true if topic is broad (e.g., "Quantum Physics", "History of Rome"), false if specific (e.g., "What is a quark?", "Date of Julius Caesar's death")
  "topics": string[] // If isAbstract is true, list 3-5 sub-topics to explain the concept step-by-step. If false, return an array with the single refined topic.
}
Do not include any markdown formatting in the response, just the raw JSON string.
`,aC=`
You are an advanced AI Teacher Environment.
Your goal is to explain concepts visually using SVG whiteboards and clear, structured text for a list of topics provided.

the whiteboard should contain, concept, visuals, step by step solution or example depending case, little quiz, and bottom reference guide ofr symbols and abbreviations etc. make sure text does not overlaps.

### STRICT GUIDELINES


1. **Visual Aids (SVG)**:
   For each topic, provide a visual aid via an SVG image styled as a whiteboard.
   The SVG should be clean, use a hand-drawn or schematic style.
   Return the RAW SVG code in the 'svg' field (do NOT use markdown backticks inside the JSON field).
2. **Size hierarchy (INSIDE SVG)**
   Canvas (preserveAspectRatio default 1920x1080 horizontal orientation) will be as big as the amount of zones in canvas range of zones 2 - 4.

   something like

   <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" width="1920" height="1080" viewBox="0 0 3400 2100"><rect x="0" y="0" width="3400" height="2100" fill="generally white"/>
   biggest font size 80
   smallest font 24
   rule for widgets and graphs the more words the wider. for that avoid using more than 8-10 words per line depending on font size.
   canvas will be spacious, but still to have it organize ALWAYS divide in zones with scissor like separator line or any other type of line/separator width each the most 8 to 10
   something that could mess up a lot is using title like font size for paragraphs. have a paragraph limit of say fontt size 34
   As mentioned whiteboard canvas will be divided in zones if invisible better.
   Use colors and graphs constantly
3. **Tone**:
   Educational, clear, and structured.
   Use Permanent marker font with curv-ish style.
4. **Text**
   text will have size hierarchy. Tille, sub-title, content etc.
   keep it simple. do not overuse it.
`,uC=`
You are a creative coding assistant. Your task is to generate a self-contained HTML/JS/CSS snippet that serves as an interactive "Practice Playground" for a student.

Input: A topic or concept (e.g., "Binary Search", "Solar System", "French Conjugation").
Output: A complete, single-file HTML string containing CSS and JavaScript.
- The code should be safe to run in an iframe.
- It should be interactive (a quiz, a simulation, a visualizer, or a 3D scene using Three.js via CDN if needed).
- Use Tailwind CSS via CDN for styling if needed: <script src="https://cdn.tailwindcss.com"><\/script>
- If 3D is requested or appropriate, use <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"><\/script>.

Return ONLY the HTML code wrapped in \`\`\`html\`\`\`. Do not add explanations.
`,cC=`
You are Bruno a helpful AI teaching assistant. You answer specific questions the user has about the current lesson.
You have access to the context of what the user is currently looking at (Whiteboards, Playgrounds). Use this context to answer accurately.
Respect the word counting rules (System Prompt 3) in your responses.
`,dC=`
You are a curriculum architect. Create a focused syllabus for the requested topic at the SPECIFIC level requested.

Input: Topic and Level (Intro, Beginner, Intermediate, Advanced, Master).
Output JSON format:
{
  "level": "String (as requested)",
  "topic": "String",
  "description": "Brief description of what this level covers.",
  "concepts": ["concept 1", "concept 2", "concept 3", "concept 4", "concept 5"]
}
Return only valid JSON. The 'concepts' array should contain 4-10 key learnable units.
`,fC=`
You are an AI Teacher looking at a student's whiteboard. 
The image provided is a screenshot of a whiteboard concept with user annotations (drawings, arrows, boxes, text) on top of it.
Analyze the user's annotations and their specific question to provide a helpful, educational response.
If they circled something, explain it. If they crossed something out, correct it.
`,pC=`
You are an expert exam creator. Your task is to generate a comprehensive JSON database of questions based on a provided set of syllabi ranging from Introduction to Master levels.

Input: A list of Syllabi contexts.
Output: A JSON Object containing an array of questions.

Rules:
1. **Introduction/Beginner**: Generate purely Multiple Choice Questions (MCQ).
2. **Intermediate/Advanced/Master**: Generate a mix of MCQ and "Problem Solving" scenarios (text-based logic puzzles), also can include some suitable topic specific exercise.
3. The output must be strictly JSON.
4. 8-12 exercises per level.

Structure:
{
  "topic": "Main Topic Name",
  "questions": [
    {
       "id": "q1",
       "level": "Beginner",
       "type": "MCQ",
       "question": "Question text...",
       "options": ["A", "B", "C", "D"],
       "correctAnswer": "A",
       "explanation": "Why A is correct."
    },
    ...
  ]
}
`,hC=`
You are a specialized coding assistant for creating assessment tools.
Your task is to generate a **Level Test Application** as a single HTML/JS file.

Input: A JSON Database of questions.
Goal: Create a clean, modern, interactive Quiz App that administers these questions to the user.

Features required in the HTML/JS:
1. **Welcome Screen**: Explain the test covers levels Intro to Master.
2. **Progressive Logic**: introduction to beginner level: you would do multiple choice. Intermediate/Advanced/Master: you would play around with multiple choice and topic specific kind of exercise.
3. **UI**: Use Tailwind CSS for a professional "Exam" look (different from the standard playful playground). Also display wrong or correct answer after user completes exercise.
4. **Results**: At the end, calculate a Score and assign a "Competency Level" (e.g., "Novice", "Expert").
5. **No External Logic**: Embed the provided JSON question database directly into the JavaScript variable inside the HTML.

**CRITICAL REQUIREMENT - SCORE COMMUNICATION**:
When the test finishes (at the results screen), you **MUST** execute the following JavaScript code to inform the parent app of the results:

\`\`\`javascript
try {
  window.parent.postMessage({
    type: 'FATY_TEST_COMPLETE',
    payload: {
      score: YOUR_CALCULATED_SCORE_VARIABLE,
      maxScore: TOTAL_QUESTIONS_VARIABLE,
      level: ASSIGNED_LEVEL_STRING_VARIABLE,
      topic: "TOPIC_NAME"
    }
  }, '*');
} catch (e) { console.error("Could not send results", e); }
\`\`\`

Return ONLY the HTML code wrapped in \`\`\`html\`\`\`.
`,bn=t=>new sC({apiKey:t}),mC=async(t,e,n,r)=>{r&&r({type:"info",source:"analyzeTopic",summary:`Starting analysis for: "${e}"`});const o=bn(t);try{const i={systemInstruction:lC,responseMimeType:"application/json",responseSchema:{type:Ye.OBJECT,properties:{isAbstract:{type:Ye.BOOLEAN},topics:{type:Ye.ARRAY,items:{type:Ye.STRING}}},required:["isAbstract","topics"]}};r&&r({type:"request",source:"analyzeTopic",summary:"Sending generation request",details:{model:n,contents:e,config:i}});const s=await o.models.generateContent({model:n,contents:e,config:i}),l=s.text;if(r&&r({type:"response",source:"analyzeTopic",summary:"Received response",details:{text:l,candidates:s.candidates}}),!l)throw new Error("No response from analysis model");return JSON.parse(l)}catch(i){return r&&r({type:"error",source:"analyzeTopic",summary:"Analysis failed",details:i}),console.error("Analysis failed:",i),{isAbstract:!1,topics:[e]}}},gC=async(t,e,n,r,o,i)=>{const s=bn(t),l=`
    Context: The main subject the user is studying is "${o}".
    
    Please generate teaching materials for the following specific sub-topics: ${JSON.stringify(e)}.
    
    ${n?`
CONTEXT FROM PREVIOUS RELATED TOPICS:
${n}
`:""}

    Ensure each topic has a unique SVG whiteboard and a detailed explanation following the word counting rules.
    Ensure the visuals and explanation are deeply grounded in the main context of "${o}".
  `;i&&i({type:"request",source:"generateWhiteboardBatch",summary:`Generating batch for ${e.length} topics`,details:{model:r,mainTopic:o,topics:e,promptContent:l}});try{const d=(await s.models.generateContent({model:r,contents:l,config:{systemInstruction:aC,responseMimeType:"application/json",responseSchema:{type:Ye.ARRAY,items:{type:Ye.OBJECT,properties:{topic:{type:Ye.STRING},svg:{type:Ye.STRING,description:"Raw SVG code for the whiteboard. Do not use markdown."},explanation:{type:Ye.STRING,description:"Detailed explanation with word counts per line."}},required:["topic","svg","explanation"]}}}})).text||"[]";return i&&i({type:"response",source:"generateWhiteboardBatch",summary:"Received batch response",details:{fullText:d.substring(0,500)+"... (truncated)",itemsCount:JSON.parse(d).length}}),JSON.parse(d)}catch(u){throw i&&i({type:"error",source:"generateWhiteboardBatch",summary:"Batch generation failed",details:u}),u}},nf=async(t,e,n,r)=>{const o=bn(t),i=`Create a practice playground for: ${e}`;r&&r({type:"request",source:"generatePlayground",summary:"Generating interactive playground",details:{model:n,prompt:i}});try{const l=(await o.models.generateContent({model:n,contents:i,config:{systemInstruction:uC}})).text||"";r&&r({type:"response",source:"generatePlayground",summary:"Received playground code",details:{fullText:l}});const u=l.match(/```html\n([\s\S]*?)\n```/),d=u?u[1]:"<h1>Error generating playground</h1>";return{id:Date.now().toString(),html:d,description:`Playground: ${e}`,timestamp:Date.now(),type:"practice"}}catch(s){throw r&&r({type:"error",source:"generatePlayground",summary:"Playground generation failed",details:s}),s}},rf=async(t,e,n,r,o,i)=>{const s=bn(t);o&&o({type:"request",source:"generateSyllabus",summary:`Generating syllabus for ${e} at ${n}`,details:{context:i}});try{const l=`Create a syllabus for: ${e}. Level: ${n}.${i?`

CONTEXT FROM OTHER LEVELS:
${i}`:""}`,d=(await s.models.generateContent({model:r,contents:l,config:{systemInstruction:dC,responseMimeType:"application/json"}})).text||"{}";return o&&o({type:"response",source:"generateSyllabus",summary:"Syllabus generated",details:{text:d}}),JSON.parse(d)}catch(l){throw console.error("Syllabus generation failed",l),l}},yC=async(t,e,n,r,o)=>{const i=bn(t);o&&o({type:"request",source:"generateQuizDatabase",summary:`Generating comprehensive quiz DB for ${e}`,details:{syllabiContextLength:n.length}});try{const l=(await i.models.generateContent({model:r,contents:`Generate a quiz database for topic: ${e}. 

SYLLABI CONTEXT:
${n}`,config:{systemInstruction:pC,responseMimeType:"application/json"}})).text||"{}";return o&&o({type:"response",source:"generateQuizDatabase",summary:"Quiz DB generated",details:{text:l}}),l}catch(s){throw o&&o({type:"error",source:"generateQuizDatabase",summary:"Quiz DB gen failed",details:s}),s}},vC=async(t,e,n,r,o)=>{const i=bn(t);o&&o({type:"request",source:"generateLevelTestPlayground",summary:"Generating Level Test App",details:{quizJsonLength:n.length}});try{const l=(await i.models.generateContent({model:r,contents:`Create a Level Test App for ${e}. 

Here is the question database to embed:
${n}`,config:{systemInstruction:hC}})).text||"",u=l.match(/```html\n([\s\S]*?)\n```/),d=u?u[1]:"<h1>Error generating test</h1>";return o&&o({type:"response",source:"generateLevelTestPlayground",summary:"Test Playground generated",details:{fullText:l}}),{id:Date.now().toString(),html:d,description:`Level Test: ${e}`,timestamp:Date.now(),type:"test"}}catch(s){throw o&&o({type:"error",source:"generateLevelTestPlayground",summary:"Test Playground gen failed",details:s}),s}},_C=async(t,e,n,r,o)=>{const i=bn(t),s=r.includes("flash")?"gemini-2.5-flash":"gemini-3-flash-preview";o&&o({type:"request",source:"analyzeImageWithContext",summary:"Sending visual analysis request"});try{const u=(await i.models.generateContent({model:s,contents:{parts:[{inlineData:{mimeType:"image/png",data:e}},{text:n}]},config:{systemInstruction:fC}})).text||"I couldn't analyze the image.";return o&&o({type:"response",source:"analyzeImageWithContext",summary:"Received analysis",details:{text:u}}),u}catch(l){throw console.error("Image analysis failed",l),l}},SC=async(t,e,n,r,o,i)=>{const s=bn(t),l=`${cC}

CURRENT APP CONTEXT:
${r}`;i&&i({type:"request",source:"sendChatMessage",summary:"Sending chat message with context",details:{model:o,message:n,contextLength:r.length}});try{const f=(await s.chats.create({model:o,history:e.map(p=>({role:p.role,parts:[{text:p.content}]})),config:{systemInstruction:l}}).sendMessage({message:n})).text||"";return i&&i({type:"response",source:"sendChatMessage",summary:"Received chat response",details:{text:f}}),f}catch(u){throw i&&i({type:"error",source:"sendChatMessage",summary:"Chat failed",details:u}),u}},wC=({apiKey:t,model:e,history:n,setHistory:r,logger:o,context:i="",isOpen:s,toggleOpen:l})=>{const[u,d]=el.useState(""),[f,p]=el.useState(!1),h=te.useRef(null),m=()=>{var y;(y=h.current)==null||y.scrollIntoView({behavior:"smooth"})};te.useEffect(()=>{m()},[n,s]);const _=async y=>{if(y==null||y.preventDefault(),!u.trim()||!t)return;const x={id:Date.now().toString(),role:"user",content:u,timestamp:Date.now()},g=[...n,x];r(g),d(""),p(!0);try{const v=g.map(I=>({role:I.role,content:I.content})),S=await SC(t,v.slice(0,-1),x.content,i,e,o),T={id:(Date.now()+1).toString(),role:"model",content:S,timestamp:Date.now()};r([...g,T])}catch(v){console.error(v);const S={id:(Date.now()+1).toString(),role:"model",content:"Error: Could not connect to AI. Please check your API Key.",timestamp:Date.now()};r([...g,S])}finally{p(!1)}};return E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:l,className:`fixed bottom-6 right-6 z-50 p-4 rounded-full bg-blue-600 text-white shadow-lg hover:bg-blue-700 transition-all transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-300 ${s?"hidden sm:flex":"flex"}`,"aria-label":"Open Chat Assistant",children:s?E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),E.jsxs("div",{className:`fixed z-50 bg-white dark:bg-gray-800 shadow-2xl flex flex-col transition-all duration-300 transform border border-gray-200 dark:border-gray-700 
          ${s?"scale-100 opacity-100 pointer-events-auto":"scale-0 opacity-0 pointer-events-none origin-bottom-right"}
          sm:bottom-24 sm:right-6 sm:w-96 sm:rounded-2xl sm:h-[500px]
          inset-0 w-full h-full rounded-none bottom-0 right-0
        `,children:[E.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 rounded-t-none sm:rounded-t-2xl flex justify-between items-center",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100",children:"Bruno"}),E.jsx("p",{className:"text-xs text-gray-500",children:"I see your whiteboard & playground."})]}),E.jsx("button",{onClick:l,className:"sm:hidden p-2 text-gray-500",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900",children:[n.length===0&&E.jsx("div",{className:"text-center text-gray-400 text-sm mt-10",children:"No messages yet. Ask me anything!"}),n.map(y=>E.jsx("div",{className:`flex ${y.role==="user"?"justify-end":"justify-start"}`,children:E.jsx("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 text-sm ${y.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-700 rounded-bl-none"}`,children:E.jsx("div",{className:"whitespace-pre-wrap",children:y.content})})},y.id)),f&&E.jsx("div",{className:"flex justify-start",children:E.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl rounded-bl-none px-4 py-3 border border-gray-200 dark:border-gray-700",children:E.jsxs("div",{className:"flex space-x-1",children:[E.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),E.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),E.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),E.jsx("div",{ref:h})]}),E.jsx("form",{onSubmit:_,className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 rounded-b-none sm:rounded-b-2xl",children:E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"text",value:u,onChange:y=>d(y.target.value),placeholder:"Type your question...",className:"flex-1 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),E.jsx(Ae,{type:"submit",size:"sm",disabled:f||!u.trim(),className:"rounded-full w-10 h-10 p-0 flex items-center justify-center",children:E.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})},xC=({code:t,onClose:e,onRetry:n,onTestComplete:r})=>{const o=te.useRef(null);te.useEffect(()=>{if(t.status==="ready"&&o.current){const s=o.current.contentDocument;s&&(s.open(),s.write(t.html),s.close())}},[t]),te.useEffect(()=>{const s=l=>{l.data&&l.data.type==="FATY_TEST_COMPLETE"&&r&&r({...l.data.payload,testId:t.id})};return window.addEventListener("message",s),()=>window.removeEventListener("message",s)},[r,t.id]);const i=()=>{const s=new Blob([t.html],{type:"text/html"}),l=URL.createObjectURL(s),u=document.createElement("a");u.href=l,u.download=`${t.description.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.html`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(l)};return E.jsxs("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-800",children:[E.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 select-none",children:[E.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[t.type==="test"?E.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}):E.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),E.jsx("span",{className:"text-xs font-mono font-semibold text-gray-600 dark:text-gray-300 truncate uppercase tracking-wider",children:t.description}),t.status==="loading"&&E.jsx("span",{className:"text-xs text-blue-500 animate-pulse",children:"(Building...)"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[n&&E.jsx("button",{onClick:n,className:"text-gray-500 hover:text-orange-500 transition-colors p-1",title:"Retry Generation",disabled:t.status==="loading",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),t.status==="ready"&&E.jsx("button",{onClick:i,className:"text-gray-500 hover:text-blue-500 transition-colors p-1",title:"Download HTML App",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),E.jsx("button",{onClick:e,className:"text-gray-400 hover:text-red-500 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none",title:"Close Panel",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),E.jsx("div",{className:"flex-1 relative bg-white",children:t.status==="loading"?E.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900",children:[E.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-4"}),E.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Designing interactive environment..."})]}):t.status==="error"?E.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center",children:[E.jsx("p",{className:"text-red-500",children:"Failed to load playground."}),n&&E.jsx("button",{onClick:n,className:"mt-4 text-blue-500 hover:underline",children:"Try Again"})]}):E.jsx("iframe",{ref:o,className:"absolute inset-0 w-full h-full border-none",title:"Interactive Playground",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-same-origin"})})]})},EC=({entry:t})=>{const[e,n]=te.useState(!1),r=o=>{switch(o){case"request":return"text-blue-600 dark:text-blue-400";case"response":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";default:return"text-gray-500"}};return E.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 text-sm",children:[E.jsxs("div",{className:"flex items-start gap-2 p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",onClick:()=>n(!e),children:[E.jsx("span",{className:"font-mono text-xs text-gray-400 min-w-[60px]",children:new Date(t.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),E.jsxs("div",{className:"flex-1 overflow-hidden",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:`uppercase text-[10px] font-bold tracking-wider ${r(t.type)}`,children:t.type}),E.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:t.source})]}),E.jsx("p",{className:"text-gray-600 dark:text-gray-400 truncate mt-1",children:t.summary})]}),E.jsx("div",{className:"text-gray-400",children:e?"":"+"})]}),e&&t.details&&E.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-900 overflow-x-auto",children:E.jsx("pre",{className:"text-xs font-mono text-gray-700 dark:text-gray-300 whitespace-pre-wrap break-all",children:JSON.stringify(t.details,null,2)})})]})},CC=({logs:t,isOpen:e,onClose:n,onClear:r})=>{const o=te.useRef(null);return te.useEffect(()=>{var i;e&&((i=o.current)==null||i.scrollIntoView({behavior:"smooth"}))},[t,e]),E.jsxs("div",{className:`fixed top-0 right-0 h-full w-full sm:w-[450px] bg-white dark:bg-[#1a1a1a] shadow-2xl z-50 transform transition-transform duration-300 ease-in-out flex flex-col border-l border-gray-200 dark:border-gray-700 ${e?"translate-x-0":"translate-x-full"}`,children:[E.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-[#2b2b2b]",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("svg",{className:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),E.jsx("h2",{className:"font-bold text-gray-900 dark:text-white",children:"API Advanced Mode"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:r,className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded text-gray-700 dark:text-gray-300 transition-colors",children:"Clear"}),E.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto bg-white dark:bg-[#1a1a1a]",children:[t.length===0?E.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 p-8 text-center",children:[E.jsx("svg",{className:"w-12 h-12 mb-2 opacity-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),E.jsx("p",{className:"text-sm",children:"No API activity yet."}),E.jsx("p",{className:"text-xs mt-1",children:"Requests and responses will appear here."})]}):t.map(i=>E.jsx(EC,{entry:i},i.id)),E.jsx("div",{ref:o})]}),E.jsxs("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 text-center bg-gray-50 dark:bg-[#2b2b2b]",children:[t.length," events logged"]})]})},TC=({isOpen:t,onClose:e,title:n,children:r})=>{const o=te.useRef(null);return te.useEffect(()=>{const i=s=>{s.key==="Escape"&&e()};return t&&document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t,e]),t?E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:E.jsxs("div",{ref:o,className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden",children:[E.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[E.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n}),E.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsx("div",{className:"flex-1 overflow-auto p-4",children:r})]})}):null};function ai(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hm={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,o,i){function s(d,f){if(!o[d]){if(!r[d]){var p=typeof ai=="function"&&ai;if(!f&&p)return p(d,!0);if(l)return l(d,!0);var h=new Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h}var m=o[d]={exports:{}};r[d][0].call(m.exports,function(_){var y=r[d][1][_];return s(y||_)},m,m.exports,n,r,o,i)}return o[d].exports}for(var l=typeof ai=="function"&&ai,u=0;u<i.length;u++)s(i[u]);return s}({1:[function(n,r,o){var i=n("./utils"),s=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(u){for(var d,f,p,h,m,_,y,x=[],g=0,v=u.length,S=v,T=i.getTypeOf(u)!=="string";g<u.length;)S=v-g,p=T?(d=u[g++],f=g<v?u[g++]:0,g<v?u[g++]:0):(d=u.charCodeAt(g++),f=g<v?u.charCodeAt(g++):0,g<v?u.charCodeAt(g++):0),h=d>>2,m=(3&d)<<4|f>>4,_=1<S?(15&f)<<2|p>>6:64,y=2<S?63&p:64,x.push(l.charAt(h)+l.charAt(m)+l.charAt(_)+l.charAt(y));return x.join("")},o.decode=function(u){var d,f,p,h,m,_,y=0,x=0,g="data:";if(u.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var v,S=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&S--,u.charAt(u.length-2)===l.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=s.uint8array?new Uint8Array(0|S):new Array(0|S);y<u.length;)d=l.indexOf(u.charAt(y++))<<2|(h=l.indexOf(u.charAt(y++)))>>4,f=(15&h)<<4|(m=l.indexOf(u.charAt(y++)))>>2,p=(3&m)<<6|(_=l.indexOf(u.charAt(y++))),v[x++]=d,m!==64&&(v[x++]=f),_!==64&&(v[x++]=p);return v}},{"./support":30,"./utils":32}],2:[function(n,r,o){var i=n("./external"),s=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function d(f,p,h,m,_){this.compressedSize=f,this.uncompressedSize=p,this.crc32=h,this.compression=m,this.compressedContent=_}d.prototype={getContentWorker:function(){var f=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),p=this;return f.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(f,p,h){return f.pipe(new l).pipe(new u("uncompressedSize")).pipe(p.compressWorker(h)).pipe(new u("compressedSize")).withStreamInfo("compression",p)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,o){var i=n("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},o.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,o){var i=n("./utils"),s=function(){for(var l,u=[],d=0;d<256;d++){l=d;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;u[d]=l}return u}();r.exports=function(l,u){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?function(d,f,p,h){var m=s,_=h+p;d^=-1;for(var y=h;y<_;y++)d=d>>>8^m[255&(d^f[y])];return-1^d}(0|u,l,l.length,0):function(d,f,p,h){var m=s,_=h+p;d^=-1;for(var y=h;y<_;y++)d=d>>>8^m[255&(d^f.charCodeAt(y))];return-1^d}(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(n,r,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(n,r,o){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,o){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),l=n("./utils"),u=n("./stream/GenericWorker"),d=i?"uint8array":"array";function f(p,h){u.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=h,this.meta={}}o.magic="\b\0",l.inherits(f,u),f.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,p.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(h){p.push({data:h,meta:p.meta})}},o.compressWorker=function(p){return new f("Deflate",p)},o.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,o){function i(m,_){var y,x="";for(y=0;y<_;y++)x+=String.fromCharCode(255&m),m>>>=8;return x}function s(m,_,y,x,g,v){var S,T,I=m.file,b=m.compression,N=v!==d.utf8encode,F=l.transformTo("string",v(I.name)),D=l.transformTo("string",d.utf8encode(I.name)),V=I.comment,Z=l.transformTo("string",v(V)),P=l.transformTo("string",d.utf8encode(V)),B=D.length!==I.name.length,C=P.length!==V.length,H="",ie="",X="",Y=I.dir,O=I.date,J={crc32:0,compressedSize:0,uncompressedSize:0};_&&!y||(J.crc32=m.crc32,J.compressedSize=m.compressedSize,J.uncompressedSize=m.uncompressedSize);var z=0;_&&(z|=8),N||!B&&!C||(z|=2048);var M=0,ee=0;Y&&(M|=16),g==="UNIX"?(ee=798,M|=function(ne,pe){var ve=ne;return ne||(ve=pe?16893:33204),(65535&ve)<<16}(I.unixPermissions,Y)):(ee=20,M|=function(ne){return 63&(ne||0)}(I.dosPermissions)),S=O.getUTCHours(),S<<=6,S|=O.getUTCMinutes(),S<<=5,S|=O.getUTCSeconds()/2,T=O.getUTCFullYear()-1980,T<<=4,T|=O.getUTCMonth()+1,T<<=5,T|=O.getUTCDate(),B&&(ie=i(1,1)+i(f(F),4)+D,H+="up"+i(ie.length,2)+ie),C&&(X=i(1,1)+i(f(Z),4)+P,H+="uc"+i(X.length,2)+X);var j="";return j+=`
\0`,j+=i(z,2),j+=b.magic,j+=i(S,2),j+=i(T,2),j+=i(J.crc32,4),j+=i(J.compressedSize,4),j+=i(J.uncompressedSize,4),j+=i(F.length,2),j+=i(H.length,2),{fileRecord:p.LOCAL_FILE_HEADER+j+F+H,dirRecord:p.CENTRAL_FILE_HEADER+i(ee,2)+j+i(Z.length,2)+"\0\0\0\0"+i(M,4)+i(x,4)+F+H+Z}}var l=n("../utils"),u=n("../stream/GenericWorker"),d=n("../utf8"),f=n("../crc32"),p=n("../signature");function h(m,_,y,x){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=y,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(h,u),h.prototype.push=function(m){var _=m.meta.percent||0,y=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,u.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:y?(_+100*(y-x-1))/y:100}}))},h.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var _=this.streamFiles&&!m.file.dir;if(_){var y=s(m,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(m){this.accumulate=!1;var _=this.streamFiles&&!m.file.dir,y=s(m,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),_)this.push({data:function(x){return p.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var m=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var y=this.bytesWritten-m,x=function(g,v,S,T,I){var b=l.transformTo("string",I(T));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(v,4)+i(S,4)+i(b.length,2)+b}(this.dirRecords.length,y,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(m){this._sources.push(m);var _=this;return m.on("data",function(y){_.processChunk(y)}),m.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),m.on("error",function(y){_.error(y)}),this},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(m){var _=this._sources;if(!u.prototype.error.call(this,m))return!1;for(var y=0;y<_.length;y++)try{_[y].error(m)}catch{}return!0},h.prototype.lock=function(){u.prototype.lock.call(this);for(var m=this._sources,_=0;_<m.length;_++)m[_].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,o){var i=n("../compressions"),s=n("./ZipFileWorker");o.generateWorker=function(l,u,d){var f=new s(u.streamFiles,d,u.platform,u.encodeFileName),p=0;try{l.forEach(function(h,m){p++;var _=function(v,S){var T=v||S,I=i[T];if(!I)throw new Error(T+" is not a valid compression method !");return I}(m.options.compression,u.compression),y=m.options.compressionOptions||u.compressionOptions||{},x=m.dir,g=m.date;m._compressWorker(_,y).withStreamInfo("file",{name:h,dir:x,date:g,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(f)}),f.entriesCount=p}catch(h){f.error(h)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,o){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var l in this)typeof this[l]!="function"&&(s[l]=this[l]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,l){return new i().loadAsync(s,l)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,o){var i=n("./utils"),s=n("./external"),l=n("./utf8"),u=n("./zipEntries"),d=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function p(h){return new s.Promise(function(m,_){var y=h.decompressed.getContentWorker().pipe(new d);y.on("error",function(x){_(x)}).on("end",function(){y.streamInfo.crc32!==h.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(h,m){var _=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),f.isNode&&f.isStream(h)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",h,!0,m.optimizedBinaryString,m.base64).then(function(y){var x=new u(m);return x.load(y),x}).then(function(y){var x=[s.Promise.resolve(y)],g=y.files;if(m.checkCRC32)for(var v=0;v<g.length;v++)x.push(p(g[v]));return s.Promise.all(x)}).then(function(y){for(var x=y.shift(),g=x.files,v=0;v<g.length;v++){var S=g[v],T=S.fileNameStr,I=i.resolve(S.fileNameStr);_.file(I,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:m.createFolders}),S.dir||(_.file(I).unsafeOriginalName=T)}return x.zipComment.length&&(_.comment=x.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,o){var i=n("../utils"),s=n("../stream/GenericWorker");function l(u,d){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(l,s),l.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(f){d.push({data:f,meta:{percent:0}})}).on("error",function(f){d.isPaused?this.generatedError=f:d.error(f)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,o){var i=n("readable-stream").Readable;function s(l,u,d){i.call(this,u),this._helper=l;var f=this;l.on("data",function(p,h){f.push(p)||f._helper.pause(),d&&d(h)}).on("error",function(p){f.emit("error",p)}).on("end",function(){f.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,o){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,s)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var s=new Buffer(i);return s.fill(0),s},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,o){function i(I,b,N){var F,D=l.getTypeOf(b),V=l.extend(N||{},f);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(I=g(I)),V.createFolders&&(F=x(I))&&v.call(this,F,!0);var Z=D==="string"&&V.binary===!1&&V.base64===!1;N&&N.binary!==void 0||(V.binary=!Z),(b instanceof p&&b.uncompressedSize===0||V.dir||!b||b.length===0)&&(V.base64=!1,V.binary=!0,b="",V.compression="STORE",D="string");var P=null;P=b instanceof p||b instanceof u?b:_.isNode&&_.isStream(b)?new y(I,b):l.prepareContent(I,b,V.binary,V.optimizedBinaryString,V.base64);var B=new h(I,P,V);this.files[I]=B}var s=n("./utf8"),l=n("./utils"),u=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),f=n("./defaults"),p=n("./compressedObject"),h=n("./zipObject"),m=n("./generate"),_=n("./nodejsUtils"),y=n("./nodejs/NodejsStreamInputAdapter"),x=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var b=I.lastIndexOf("/");return 0<b?I.substring(0,b):""},g=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},v=function(I,b){return b=b!==void 0?b:f.createFolders,I=g(I),this.files[I]||i.call(this,I,null,{dir:!0,createFolders:b}),this.files[I]};function S(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var b,N,F;for(b in this.files)F=this.files[b],(N=b.slice(this.root.length,b.length))&&b.slice(0,this.root.length)===this.root&&I(N,F)},filter:function(I){var b=[];return this.forEach(function(N,F){I(N,F)&&b.push(F)}),b},file:function(I,b,N){if(arguments.length!==1)return I=this.root+I,i.call(this,I,b,N),this;if(S(I)){var F=I;return this.filter(function(V,Z){return!Z.dir&&F.test(V)})}var D=this.files[this.root+I];return D&&!D.dir?D:null},folder:function(I){if(!I)return this;if(S(I))return this.filter(function(D,V){return V.dir&&I.test(D)});var b=this.root+I,N=v.call(this,b),F=this.clone();return F.root=N.name,F},remove:function(I){I=this.root+I;var b=this.files[I];if(b||(I.slice(-1)!=="/"&&(I+="/"),b=this.files[I]),b&&!b.dir)delete this.files[I];else for(var N=this.filter(function(D,V){return V.name.slice(0,I.length)===I}),F=0;F<N.length;F++)delete this.files[N[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var b,N={};try{if((N=l.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");l.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var F=N.comment||this.comment||"";b=m.generateWorker(this,N,F)}catch(D){(b=new u("error")).error(D)}return new d(b,N.type||"string",N.mimeType)},generateAsync:function(I,b){return this.generateInternalStream(I).accumulate(b)},generateNodeStream:function(I,b){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(b)}};r.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,o){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,o){var i=n("./DataReader");function s(l){i.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}n("../utils").inherits(s,i),s.prototype.byteAt=function(l){return this.data[this.zero+l]},s.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),d=l.charCodeAt(1),f=l.charCodeAt(2),p=l.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===u&&this.data[h+1]===d&&this.data[h+2]===f&&this.data[h+3]===p)return h-this.zero;return-1},s.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),d=l.charCodeAt(1),f=l.charCodeAt(2),p=l.charCodeAt(3),h=this.readData(4);return u===h[0]&&d===h[1]&&f===h[2]&&p===h[3]},s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,o){var i=n("../utils");function s(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,d=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=l,d},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,o){var i=n("./Uint8ArrayReader");function s(l){i.call(this,l)}n("../utils").inherits(s,i),s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,o){var i=n("./DataReader");function s(l){i.call(this,l)}n("../utils").inherits(s,i),s.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},s.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},s.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,o){var i=n("./ArrayReader");function s(l){i.call(this,l)}n("../utils").inherits(s,i),s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,o){var i=n("../utils"),s=n("../support"),l=n("./ArrayReader"),u=n("./StringReader"),d=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(p){var h=i.getTypeOf(p);return i.checkSupport(h),h!=="string"||s.uint8array?h==="nodebuffer"?new d(p):s.uint8array?new f(i.transformTo("uint8array",p)):new l(i.transformTo("array",p)):new u(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,o){var i=n("./GenericWorker"),s=n("../utils");function l(u){i.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(l,i),l.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,o){var i=n("./GenericWorker"),s=n("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,i),l.prototype.processChunk=function(u){this.streamInfo.crc32=s(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,o){var i=n("../utils"),s=n("./GenericWorker");function l(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(l,s),l.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}s.prototype.processChunk.call(this,u)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,o){var i=n("../utils"),s=n("./GenericWorker");function l(u){s.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){d.dataIsReady=!0,d.data=f,d.max=f&&f.length||0,d.type=i.getTypeOf(f),d.isPaused||d._tickAndRepeat()},function(f){d.error(f)})}i.inherits(l,s),l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,o){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,l){return this._listeners[s].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,l){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,l)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var l=this;return s.on("data",function(u){l.processChunk(u)}),s.on("end",function(){l.end()}),s.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,l){return this.extraStreamInfo[s]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(n,r,o){var i=n("../utils"),s=n("./ConvertWorker"),l=n("./GenericWorker"),u=n("../base64"),d=n("../support"),f=n("../external"),p=null;if(d.nodestream)try{p=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(_,y){return new f.Promise(function(x,g){var v=[],S=_._internalType,T=_._outputType,I=_._mimeType;_.on("data",function(b,N){v.push(b),y&&y(N)}).on("error",function(b){v=[],g(b)}).on("end",function(){try{var b=function(N,F,D){switch(N){case"blob":return i.newBlob(i.transformTo("arraybuffer",F),D);case"base64":return u.encode(F);default:return i.transformTo(N,F)}}(T,function(N,F){var D,V=0,Z=null,P=0;for(D=0;D<F.length;D++)P+=F[D].length;switch(N){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(Z=new Uint8Array(P),D=0;D<F.length;D++)Z.set(F[D],V),V+=F[D].length;return Z;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+N+"'")}}(S,v),I);x(b)}catch(N){g(N)}v=[]}).resume()})}function m(_,y,x){var g=y;switch(y){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=y,this._mimeType=x,i.checkSupport(g),this._worker=_.pipe(new s(g)),_.lock()}catch(v){this._worker=new l("error"),this._worker.error(v)}}m.prototype={accumulate:function(_){return h(this,_)},on:function(_,y){var x=this;return _==="data"?this._worker.on(_,function(g){y.call(x,g.data,g.meta)}):this._worker.on(_,function(){i.delay(y,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var i=new ArrayBuffer(0);try{o.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),o.blob=s.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!n("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,o){for(var i=n("./utils"),s=n("./support"),l=n("./nodejsUtils"),u=n("./stream/GenericWorker"),d=new Array(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;d[254]=d[254]=1;function p(){u.call(this,"utf-8 decode"),this.leftOver=null}function h(){u.call(this,"utf-8 encode")}o.utf8encode=function(m){return s.nodebuffer?l.newBufferFrom(m,"utf-8"):function(_){var y,x,g,v,S,T=_.length,I=0;for(v=0;v<T;v++)(64512&(x=_.charCodeAt(v)))==55296&&v+1<T&&(64512&(g=_.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),v++),I+=x<128?1:x<2048?2:x<65536?3:4;for(y=s.uint8array?new Uint8Array(I):new Array(I),v=S=0;S<I;v++)(64512&(x=_.charCodeAt(v)))==55296&&v+1<T&&(64512&(g=_.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),v++),x<128?y[S++]=x:(x<2048?y[S++]=192|x>>>6:(x<65536?y[S++]=224|x>>>12:(y[S++]=240|x>>>18,y[S++]=128|x>>>12&63),y[S++]=128|x>>>6&63),y[S++]=128|63&x);return y}(m)},o.utf8decode=function(m){return s.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):function(_){var y,x,g,v,S=_.length,T=new Array(2*S);for(y=x=0;y<S;)if((g=_[y++])<128)T[x++]=g;else if(4<(v=d[g]))T[x++]=65533,y+=v-1;else{for(g&=v===2?31:v===3?15:7;1<v&&y<S;)g=g<<6|63&_[y++],v--;1<v?T[x++]=65533:g<65536?T[x++]=g:(g-=65536,T[x++]=55296|g>>10&1023,T[x++]=56320|1023&g)}return T.length!==x&&(T.subarray?T=T.subarray(0,x):T.length=x),i.applyFromCharCode(T)}(m=i.transformTo(s.uint8array?"uint8array":"array",m))},i.inherits(p,u),p.prototype.processChunk=function(m){var _=i.transformTo(s.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var y=_;(_=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),_.set(y,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var x=function(v,S){var T;for((S=S||v.length)>v.length&&(S=v.length),T=S-1;0<=T&&(192&v[T])==128;)T--;return T<0||T===0?S:T+d[v[T]]>S?T:S}(_),g=_;x!==_.length&&(s.uint8array?(g=_.subarray(0,x),this.leftOver=_.subarray(x,_.length)):(g=_.slice(0,x),this.leftOver=_.slice(x,_.length))),this.push({data:o.utf8decode(g),meta:m.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=p,i.inherits(h,u),h.prototype.processChunk=function(m){this.push({data:o.utf8encode(m.data),meta:m.meta})},o.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,o){var i=n("./support"),s=n("./base64"),l=n("./nodejsUtils"),u=n("./external");function d(y){return y}function f(y,x){for(var g=0;g<y.length;++g)x[g]=255&y.charCodeAt(g);return x}n("setimmediate"),o.newBlob=function(y,x){o.checkSupport("blob");try{return new Blob([y],{type:x})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(y),g.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(y,x,g){var v=[],S=0,T=y.length;if(T<=g)return String.fromCharCode.apply(null,y);for(;S<T;)x==="array"||x==="nodebuffer"?v.push(String.fromCharCode.apply(null,y.slice(S,Math.min(S+g,T)))):v.push(String.fromCharCode.apply(null,y.subarray(S,Math.min(S+g,T)))),S+=g;return v.join("")},stringifyByChar:function(y){for(var x="",g=0;g<y.length;g++)x+=String.fromCharCode(y[g]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function h(y){var x=65536,g=o.getTypeOf(y),v=!0;if(g==="uint8array"?v=p.applyCanBeUsed.uint8array:g==="nodebuffer"&&(v=p.applyCanBeUsed.nodebuffer),v)for(;1<x;)try{return p.stringifyByChunk(y,g,x)}catch{x=Math.floor(x/2)}return p.stringifyByChar(y)}function m(y,x){for(var g=0;g<y.length;g++)x[g]=y[g];return x}o.applyFromCharCode=h;var _={};_.string={string:d,array:function(y){return f(y,new Array(y.length))},arraybuffer:function(y){return _.string.uint8array(y).buffer},uint8array:function(y){return f(y,new Uint8Array(y.length))},nodebuffer:function(y){return f(y,l.allocBuffer(y.length))}},_.array={string:h,array:d,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return l.newBufferFrom(y)}},_.arraybuffer={string:function(y){return h(new Uint8Array(y))},array:function(y){return m(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:d,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return l.newBufferFrom(new Uint8Array(y))}},_.uint8array={string:h,array:function(y){return m(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:d,nodebuffer:function(y){return l.newBufferFrom(y)}},_.nodebuffer={string:h,array:function(y){return m(y,new Array(y.length))},arraybuffer:function(y){return _.nodebuffer.uint8array(y).buffer},uint8array:function(y){return m(y,new Uint8Array(y.length))},nodebuffer:d},o.transformTo=function(y,x){if(x=x||"",!y)return x;o.checkSupport(y);var g=o.getTypeOf(x);return _[g][y](x)},o.resolve=function(y){for(var x=y.split("/"),g=[],v=0;v<x.length;v++){var S=x[v];S==="."||S===""&&v!==0&&v!==x.length-1||(S===".."?g.pop():g.push(S))}return g.join("/")},o.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(y)?"nodebuffer":i.uint8array&&y instanceof Uint8Array?"uint8array":i.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(y){if(!i[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(y){var x,g,v="";for(g=0;g<(y||"").length;g++)v+="\\x"+((x=y.charCodeAt(g))<16?"0":"")+x.toString(16).toUpperCase();return v},o.delay=function(y,x,g){setImmediate(function(){y.apply(g||null,x||[])})},o.inherits=function(y,x){function g(){}g.prototype=x.prototype,y.prototype=new g},o.extend=function(){var y,x,g={};for(y=0;y<arguments.length;y++)for(x in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],x)&&g[x]===void 0&&(g[x]=arguments[y][x]);return g},o.prepareContent=function(y,x,g,v,S){return u.Promise.resolve(x).then(function(T){return i.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new u.Promise(function(I,b){var N=new FileReader;N.onload=function(F){I(F.target.result)},N.onerror=function(F){b(F.target.error)},N.readAsArrayBuffer(T)}):T}).then(function(T){var I=o.getTypeOf(T);return I?(I==="arraybuffer"?T=o.transformTo("uint8array",T):I==="string"&&(S?T=s.decode(T):g&&v!==!0&&(T=function(b){return f(b,i.uint8array?new Uint8Array(b.length):new Array(b.length))}(T))),T):u.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,o){var i=n("./reader/readerFor"),s=n("./utils"),l=n("./signature"),u=n("./zipEntry"),d=n("./support");function f(p){this.files=[],this.loadOptions=p}f.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(h)+", expected "+s.pretty(p)+")")}},isSignature:function(p,h){var m=this.reader.index;this.reader.setIndex(p);var _=this.reader.readString(4)===h;return this.reader.setIndex(m),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),h=d.uint8array?"uint8array":"array",m=s.transformTo(h,p);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,h,m,_=this.zip64EndOfCentralSize-44;0<_;)p=this.reader.readInt(2),h=this.reader.readInt(4),m=this.reader.readData(h),this.zip64ExtensibleData[p]={id:p,length:h,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,h;for(p=0;p<this.files.length;p++)h=this.files[p],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(p=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var h=p;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var _=h-m;if(0<_)this.isSignature(h,l.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(p){this.reader=i(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,o){var i=n("./reader/readerFor"),s=n("./utils"),l=n("./compressedObject"),u=n("./crc32"),d=n("./utf8"),f=n("./compressions"),p=n("./support");function h(m,_){this.options=m,this.loadOptions=_}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var _,y;if(m.skip(22),this.fileNameLength=m.readInt(2),y=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(x){for(var g in f)if(Object.prototype.hasOwnProperty.call(f,g)&&f[g].magic===x)return f[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,_,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var _=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(_),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var _,y,x,g=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<g;)_=m.readInt(2),y=m.readInt(2),x=m.readData(y),this.extraFields[_]={id:_,length:y,value:x};m.setIndex(g)},handleUTF8:function(){var m=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var y=s.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var g=s.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var _=i(m.value);return _.readInt(1)!==1||u(this.fileName)!==_.readInt(4)?null:d.utf8decode(_.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var _=i(m.value);return _.readInt(1)!==1||u(this.fileComment)!==_.readInt(4)?null:d.utf8decode(_.readData(m.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,o){function i(_,y,x){this.name=_,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=y,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),u=n("./utf8"),d=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(_){var y=null,x="string";try{if(!_)throw new Error("No output type specified.");var g=(x=_.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),y=this._decompressWorker();var v=!this._dataBinary;v&&!g&&(y=y.pipe(new u.Utf8EncodeWorker)),!v&&g&&(y=y.pipe(new u.Utf8DecodeWorker))}catch(S){(y=new f("error")).error(S)}return new s(y,x,"")},async:function(_,y){return this.internalStream(_).accumulate(y)},nodeStream:function(_,y){return this.internalStream(_||"nodebuffer").toNodejsStream(y)},_compressWorker:function(_,y){if(this._data instanceof d&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(x,_,y)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof f?this._data:new l(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<p.length;m++)i.prototype[p[m]]=h;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,o){(function(i){var s,l,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var d=0,f=new u(_),p=i.document.createTextNode("");f.observe(p,{characterData:!0}),s=function(){p.data=d=++d%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var y=i.document.createElement("script");y.onreadystatechange=function(){_(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},i.document.documentElement.appendChild(y)}:function(){setTimeout(_,0)};else{var h=new i.MessageChannel;h.port1.onmessage=_,s=function(){h.port2.postMessage(0)}}var m=[];function _(){var y,x;l=!0;for(var g=m.length;g;){for(x=m,m=[],y=-1;++y<g;)x[y]();g=m.length}l=!1}r.exports=function(y){m.push(y)!==1||l||s()}}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,o){var i=n("immediate");function s(){}var l={},u=["REJECTED"],d=["FULFILLED"],f=["PENDING"];function p(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,g!==s&&y(this,g)}function h(g,v,S){this.promise=g,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function m(g,v,S){i(function(){var T;try{T=v(S)}catch(I){return l.reject(g,I)}T===g?l.reject(g,new TypeError("Cannot resolve promise with itself")):l.resolve(g,T)})}function _(g){var v=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof v=="function")return function(){v.apply(g,arguments)}}function y(g,v){var S=!1;function T(N){S||(S=!0,l.reject(g,N))}function I(N){S||(S=!0,l.resolve(g,N))}var b=x(function(){v(I,T)});b.status==="error"&&T(b.value)}function x(g,v){var S={};try{S.value=g(v),S.status="success"}catch(T){S.status="error",S.value=T}return S}(r.exports=p).prototype.finally=function(g){if(typeof g!="function")return this;var v=this.constructor;return this.then(function(S){return v.resolve(g()).then(function(){return S})},function(S){return v.resolve(g()).then(function(){throw S})})},p.prototype.catch=function(g){return this.then(null,g)},p.prototype.then=function(g,v){if(typeof g!="function"&&this.state===d||typeof v!="function"&&this.state===u)return this;var S=new this.constructor(s);return this.state!==f?m(S,this.state===d?g:v,this.outcome):this.queue.push(new h(S,g,v)),S},h.prototype.callFulfilled=function(g){l.resolve(this.promise,g)},h.prototype.otherCallFulfilled=function(g){m(this.promise,this.onFulfilled,g)},h.prototype.callRejected=function(g){l.reject(this.promise,g)},h.prototype.otherCallRejected=function(g){m(this.promise,this.onRejected,g)},l.resolve=function(g,v){var S=x(_,v);if(S.status==="error")return l.reject(g,S.value);var T=S.value;if(T)y(g,T);else{g.state=d,g.outcome=v;for(var I=-1,b=g.queue.length;++I<b;)g.queue[I].callFulfilled(v)}return g},l.reject=function(g,v){g.state=u,g.outcome=v;for(var S=-1,T=g.queue.length;++S<T;)g.queue[S].callRejected(v);return g},p.resolve=function(g){return g instanceof this?g:l.resolve(new this(s),g)},p.reject=function(g){var v=new this(s);return l.reject(v,g)},p.all=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=g.length,T=!1;if(!S)return this.resolve([]);for(var I=new Array(S),b=0,N=-1,F=new this(s);++N<S;)D(g[N],N);return F;function D(V,Z){v.resolve(V).then(function(P){I[Z]=P,++b!==S||T||(T=!0,l.resolve(F,I))},function(P){T||(T=!0,l.reject(F,P))})}},p.race=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=g.length,T=!1;if(!S)return this.resolve([]);for(var I=-1,b=new this(s);++I<S;)N=g[I],v.resolve(N).then(function(F){T||(T=!0,l.resolve(b,F))},function(F){T||(T=!0,l.reject(b,F))});var N;return b}},{immediate:36}],38:[function(n,r,o){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,o){var i=n("./zlib/deflate"),s=n("./utils/common"),l=n("./utils/strings"),u=n("./zlib/messages"),d=n("./zlib/zstream"),f=Object.prototype.toString,p=0,h=-1,m=0,_=8;function y(g){if(!(this instanceof y))return new y(g);this.options=s.assign({level:h,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},g||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var S=i.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(S!==p)throw new Error(u[S]);if(v.header&&i.deflateSetHeader(this.strm,v.header),v.dictionary){var T;if(T=typeof v.dictionary=="string"?l.string2buf(v.dictionary):f.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(S=i.deflateSetDictionary(this.strm,T))!==p)throw new Error(u[S]);this._dict_set=!0}}function x(g,v){var S=new y(v);if(S.push(g,!0),S.err)throw S.msg||u[S.err];return S.result}y.prototype.push=function(g,v){var S,T,I=this.strm,b=this.options.chunkSize;if(this.ended)return!1;T=v===~~v?v:v===!0?4:0,typeof g=="string"?I.input=l.string2buf(g):f.call(g)==="[object ArrayBuffer]"?I.input=new Uint8Array(g):I.input=g,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new s.Buf8(b),I.next_out=0,I.avail_out=b),(S=i.deflate(I,T))!==1&&S!==p)return this.onEnd(S),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(s.shrinkBuf(I.output,I.next_out))):this.onData(s.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&S!==1);return T===4?(S=i.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===p):T!==2||(this.onEnd(p),!(I.avail_out=0))},y.prototype.onData=function(g){this.chunks.push(g)},y.prototype.onEnd=function(g){g===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},o.Deflate=y,o.deflate=x,o.deflateRaw=function(g,v){return(v=v||{}).raw=!0,x(g,v)},o.gzip=function(g,v){return(v=v||{}).gzip=!0,x(g,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,o){var i=n("./zlib/inflate"),s=n("./utils/common"),l=n("./utils/strings"),u=n("./zlib/constants"),d=n("./zlib/messages"),f=n("./zlib/zstream"),p=n("./zlib/gzheader"),h=Object.prototype.toString;function m(y){if(!(this instanceof m))return new m(y);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},y||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||y&&y.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,x.windowBits);if(g!==u.Z_OK)throw new Error(d[g]);this.header=new p,i.inflateGetHeader(this.strm,this.header)}function _(y,x){var g=new m(x);if(g.push(y,!0),g.err)throw g.msg||d[g.err];return g.result}m.prototype.push=function(y,x){var g,v,S,T,I,b,N=this.strm,F=this.options.chunkSize,D=this.options.dictionary,V=!1;if(this.ended)return!1;v=x===~~x?x:x===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof y=="string"?N.input=l.binstring2buf(y):h.call(y)==="[object ArrayBuffer]"?N.input=new Uint8Array(y):N.input=y,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new s.Buf8(F),N.next_out=0,N.avail_out=F),(g=i.inflate(N,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&D&&(b=typeof D=="string"?l.string2buf(D):h.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,g=i.inflateSetDictionary(this.strm,b)),g===u.Z_BUF_ERROR&&V===!0&&(g=u.Z_OK,V=!1),g!==u.Z_STREAM_END&&g!==u.Z_OK)return this.onEnd(g),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&g!==u.Z_STREAM_END&&(N.avail_in!==0||v!==u.Z_FINISH&&v!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=l.utf8border(N.output,N.next_out),T=N.next_out-S,I=l.buf2string(N.output,S),N.next_out=T,N.avail_out=F-T,T&&s.arraySet(N.output,N.output,S,T,0),this.onData(I)):this.onData(s.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(V=!0)}while((0<N.avail_in||N.avail_out===0)&&g!==u.Z_STREAM_END);return g===u.Z_STREAM_END&&(v=u.Z_FINISH),v===u.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===u.Z_OK):v!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(N.avail_out=0))},m.prototype.onData=function(y){this.chunks.push(y)},m.prototype.onEnd=function(y){y===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},o.Inflate=m,o.inflate=_,o.inflateRaw=function(y,x){return(x=x||{}).raw=!0,_(y,x)},o.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,o){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var f=d.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])}}return u},o.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var s={arraySet:function(u,d,f,p,h){if(d.subarray&&u.subarray)u.set(d.subarray(f,f+p),h);else for(var m=0;m<p;m++)u[h+m]=d[f+m]},flattenChunks:function(u){var d,f,p,h,m,_;for(d=p=0,f=u.length;d<f;d++)p+=u[d].length;for(_=new Uint8Array(p),d=h=0,f=u.length;d<f;d++)m=u[d],_.set(m,h),h+=m.length;return _}},l={arraySet:function(u,d,f,p,h){for(var m=0;m<p;m++)u[h+m]=d[f+m]},flattenChunks:function(u){return[].concat.apply([],u)}};o.setTyped=function(u){u?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,s)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,l))},o.setTyped(i)},{}],42:[function(n,r,o){var i=n("./common"),s=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new i.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function f(p,h){if(h<65537&&(p.subarray&&l||!p.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(p,h));for(var m="",_=0;_<h;_++)m+=String.fromCharCode(p[_]);return m}u[254]=u[254]=1,o.string2buf=function(p){var h,m,_,y,x,g=p.length,v=0;for(y=0;y<g;y++)(64512&(m=p.charCodeAt(y)))==55296&&y+1<g&&(64512&(_=p.charCodeAt(y+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),y++),v+=m<128?1:m<2048?2:m<65536?3:4;for(h=new i.Buf8(v),y=x=0;x<v;y++)(64512&(m=p.charCodeAt(y)))==55296&&y+1<g&&(64512&(_=p.charCodeAt(y+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),y++),m<128?h[x++]=m:(m<2048?h[x++]=192|m>>>6:(m<65536?h[x++]=224|m>>>12:(h[x++]=240|m>>>18,h[x++]=128|m>>>12&63),h[x++]=128|m>>>6&63),h[x++]=128|63&m);return h},o.buf2binstring=function(p){return f(p,p.length)},o.binstring2buf=function(p){for(var h=new i.Buf8(p.length),m=0,_=h.length;m<_;m++)h[m]=p.charCodeAt(m);return h},o.buf2string=function(p,h){var m,_,y,x,g=h||p.length,v=new Array(2*g);for(m=_=0;m<g;)if((y=p[m++])<128)v[_++]=y;else if(4<(x=u[y]))v[_++]=65533,m+=x-1;else{for(y&=x===2?31:x===3?15:7;1<x&&m<g;)y=y<<6|63&p[m++],x--;1<x?v[_++]=65533:y<65536?v[_++]=y:(y-=65536,v[_++]=55296|y>>10&1023,v[_++]=56320|1023&y)}return f(v,_)},o.utf8border=function(p,h){var m;for((h=h||p.length)>p.length&&(h=p.length),m=h-1;0<=m&&(192&p[m])==128;)m--;return m<0||m===0?h:m+u[p[m]]>h?m:h}},{"./common":41}],43:[function(n,r,o){r.exports=function(i,s,l,u){for(var d=65535&i|0,f=i>>>16&65535|0,p=0;l!==0;){for(l-=p=2e3<l?2e3:l;f=f+(d=d+s[u++]|0)|0,--p;);d%=65521,f%=65521}return d|f<<16|0}},{}],44:[function(n,r,o){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,o){var i=function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l}();r.exports=function(s,l,u,d){var f=i,p=d+u;s^=-1;for(var h=d;h<p;h++)s=s>>>8^f[255&(s^l[h])];return-1^s}},{}],46:[function(n,r,o){var i,s=n("../utils/common"),l=n("./trees"),u=n("./adler32"),d=n("./crc32"),f=n("./messages"),p=0,h=4,m=0,_=-2,y=-1,x=4,g=2,v=8,S=9,T=286,I=30,b=19,N=2*T+1,F=15,D=3,V=258,Z=V+D+1,P=42,B=113,C=1,H=2,ie=3,X=4;function Y(w,$){return w.msg=f[$],$}function O(w){return(w<<1)-(4<w?9:0)}function J(w){for(var $=w.length;0<=--$;)w[$]=0}function z(w){var $=w.state,G=$.pending;G>w.avail_out&&(G=w.avail_out),G!==0&&(s.arraySet(w.output,$.pending_buf,$.pending_out,G,w.next_out),w.next_out+=G,$.pending_out+=G,w.total_out+=G,w.avail_out-=G,$.pending-=G,$.pending===0&&($.pending_out=0))}function M(w,$){l._tr_flush_block(w,0<=w.block_start?w.block_start:-1,w.strstart-w.block_start,$),w.block_start=w.strstart,z(w.strm)}function ee(w,$){w.pending_buf[w.pending++]=$}function j(w,$){w.pending_buf[w.pending++]=$>>>8&255,w.pending_buf[w.pending++]=255&$}function ne(w,$){var G,A,k=w.max_chain_length,U=w.strstart,Q=w.prev_length,L=w.nice_match,R=w.strstart>w.w_size-Z?w.strstart-(w.w_size-Z):0,q=w.window,re=w.w_mask,W=w.prev,le=w.strstart+V,ge=q[U+Q-1],me=q[U+Q];w.prev_length>=w.good_match&&(k>>=2),L>w.lookahead&&(L=w.lookahead);do if(q[(G=$)+Q]===me&&q[G+Q-1]===ge&&q[G]===q[U]&&q[++G]===q[U+1]){U+=2,G++;do;while(q[++U]===q[++G]&&q[++U]===q[++G]&&q[++U]===q[++G]&&q[++U]===q[++G]&&q[++U]===q[++G]&&q[++U]===q[++G]&&q[++U]===q[++G]&&q[++U]===q[++G]&&U<le);if(A=V-(le-U),U=le-V,Q<A){if(w.match_start=$,L<=(Q=A))break;ge=q[U+Q-1],me=q[U+Q]}}while(($=W[$&re])>R&&--k!=0);return Q<=w.lookahead?Q:w.lookahead}function pe(w){var $,G,A,k,U,Q,L,R,q,re,W=w.w_size;do{if(k=w.window_size-w.lookahead-w.strstart,w.strstart>=W+(W-Z)){for(s.arraySet(w.window,w.window,W,W,0),w.match_start-=W,w.strstart-=W,w.block_start-=W,$=G=w.hash_size;A=w.head[--$],w.head[$]=W<=A?A-W:0,--G;);for($=G=W;A=w.prev[--$],w.prev[$]=W<=A?A-W:0,--G;);k+=W}if(w.strm.avail_in===0)break;if(Q=w.strm,L=w.window,R=w.strstart+w.lookahead,q=k,re=void 0,re=Q.avail_in,q<re&&(re=q),G=re===0?0:(Q.avail_in-=re,s.arraySet(L,Q.input,Q.next_in,re,R),Q.state.wrap===1?Q.adler=u(Q.adler,L,re,R):Q.state.wrap===2&&(Q.adler=d(Q.adler,L,re,R)),Q.next_in+=re,Q.total_in+=re,re),w.lookahead+=G,w.lookahead+w.insert>=D)for(U=w.strstart-w.insert,w.ins_h=w.window[U],w.ins_h=(w.ins_h<<w.hash_shift^w.window[U+1])&w.hash_mask;w.insert&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[U+D-1])&w.hash_mask,w.prev[U&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=U,U++,w.insert--,!(w.lookahead+w.insert<D)););}while(w.lookahead<Z&&w.strm.avail_in!==0)}function ve(w,$){for(var G,A;;){if(w.lookahead<Z){if(pe(w),w.lookahead<Z&&$===p)return C;if(w.lookahead===0)break}if(G=0,w.lookahead>=D&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+D-1])&w.hash_mask,G=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),G!==0&&w.strstart-G<=w.w_size-Z&&(w.match_length=ne(w,G)),w.match_length>=D)if(A=l._tr_tally(w,w.strstart-w.match_start,w.match_length-D),w.lookahead-=w.match_length,w.match_length<=w.max_lazy_match&&w.lookahead>=D){for(w.match_length--;w.strstart++,w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+D-1])&w.hash_mask,G=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart,--w.match_length!=0;);w.strstart++}else w.strstart+=w.match_length,w.match_length=0,w.ins_h=w.window[w.strstart],w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+1])&w.hash_mask;else A=l._tr_tally(w,0,w.window[w.strstart]),w.lookahead--,w.strstart++;if(A&&(M(w,!1),w.strm.avail_out===0))return C}return w.insert=w.strstart<D-1?w.strstart:D-1,$===h?(M(w,!0),w.strm.avail_out===0?ie:X):w.last_lit&&(M(w,!1),w.strm.avail_out===0)?C:H}function fe(w,$){for(var G,A,k;;){if(w.lookahead<Z){if(pe(w),w.lookahead<Z&&$===p)return C;if(w.lookahead===0)break}if(G=0,w.lookahead>=D&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+D-1])&w.hash_mask,G=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),w.prev_length=w.match_length,w.prev_match=w.match_start,w.match_length=D-1,G!==0&&w.prev_length<w.max_lazy_match&&w.strstart-G<=w.w_size-Z&&(w.match_length=ne(w,G),w.match_length<=5&&(w.strategy===1||w.match_length===D&&4096<w.strstart-w.match_start)&&(w.match_length=D-1)),w.prev_length>=D&&w.match_length<=w.prev_length){for(k=w.strstart+w.lookahead-D,A=l._tr_tally(w,w.strstart-1-w.prev_match,w.prev_length-D),w.lookahead-=w.prev_length-1,w.prev_length-=2;++w.strstart<=k&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+D-1])&w.hash_mask,G=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),--w.prev_length!=0;);if(w.match_available=0,w.match_length=D-1,w.strstart++,A&&(M(w,!1),w.strm.avail_out===0))return C}else if(w.match_available){if((A=l._tr_tally(w,0,w.window[w.strstart-1]))&&M(w,!1),w.strstart++,w.lookahead--,w.strm.avail_out===0)return C}else w.match_available=1,w.strstart++,w.lookahead--}return w.match_available&&(A=l._tr_tally(w,0,w.window[w.strstart-1]),w.match_available=0),w.insert=w.strstart<D-1?w.strstart:D-1,$===h?(M(w,!0),w.strm.avail_out===0?ie:X):w.last_lit&&(M(w,!1),w.strm.avail_out===0)?C:H}function he(w,$,G,A,k){this.good_length=w,this.max_lazy=$,this.nice_length=G,this.max_chain=A,this.func=k}function Re(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*N),this.dyn_dtree=new s.Buf16(2*(2*I+1)),this.bl_tree=new s.Buf16(2*(2*b+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(F+1),this.heap=new s.Buf16(2*T+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*T+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xe(w){var $;return w&&w.state?(w.total_in=w.total_out=0,w.data_type=g,($=w.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?P:B,w.adler=$.wrap===2?0:1,$.last_flush=p,l._tr_init($),m):Y(w,_)}function rt(w){var $=xe(w);return $===m&&function(G){G.window_size=2*G.w_size,J(G.head),G.max_lazy_match=i[G.level].max_lazy,G.good_match=i[G.level].good_length,G.nice_match=i[G.level].nice_length,G.max_chain_length=i[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=D-1,G.match_available=0,G.ins_h=0}(w.state),$}function ot(w,$,G,A,k,U){if(!w)return _;var Q=1;if($===y&&($=6),A<0?(Q=0,A=-A):15<A&&(Q=2,A-=16),k<1||S<k||G!==v||A<8||15<A||$<0||9<$||U<0||x<U)return Y(w,_);A===8&&(A=9);var L=new Re;return(w.state=L).strm=w,L.wrap=Q,L.gzhead=null,L.w_bits=A,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=k+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+D-1)/D),L.window=new s.Buf8(2*L.w_size),L.head=new s.Buf16(L.hash_size),L.prev=new s.Buf16(L.w_size),L.lit_bufsize=1<<k+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new s.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=$,L.strategy=U,L.method=G,rt(w)}i=[new he(0,0,0,0,function(w,$){var G=65535;for(G>w.pending_buf_size-5&&(G=w.pending_buf_size-5);;){if(w.lookahead<=1){if(pe(w),w.lookahead===0&&$===p)return C;if(w.lookahead===0)break}w.strstart+=w.lookahead,w.lookahead=0;var A=w.block_start+G;if((w.strstart===0||w.strstart>=A)&&(w.lookahead=w.strstart-A,w.strstart=A,M(w,!1),w.strm.avail_out===0)||w.strstart-w.block_start>=w.w_size-Z&&(M(w,!1),w.strm.avail_out===0))return C}return w.insert=0,$===h?(M(w,!0),w.strm.avail_out===0?ie:X):(w.strstart>w.block_start&&(M(w,!1),w.strm.avail_out),C)}),new he(4,4,8,4,ve),new he(4,5,16,8,ve),new he(4,6,32,32,ve),new he(4,4,16,16,fe),new he(8,16,32,32,fe),new he(8,16,128,128,fe),new he(8,32,128,256,fe),new he(32,128,258,1024,fe),new he(32,258,258,4096,fe)],o.deflateInit=function(w,$){return ot(w,$,v,15,8,0)},o.deflateInit2=ot,o.deflateReset=rt,o.deflateResetKeep=xe,o.deflateSetHeader=function(w,$){return w&&w.state?w.state.wrap!==2?_:(w.state.gzhead=$,m):_},o.deflate=function(w,$){var G,A,k,U;if(!w||!w.state||5<$||$<0)return w?Y(w,_):_;if(A=w.state,!w.output||!w.input&&w.avail_in!==0||A.status===666&&$!==h)return Y(w,w.avail_out===0?-5:_);if(A.strm=w,G=A.last_flush,A.last_flush=$,A.status===P)if(A.wrap===2)w.adler=0,ee(A,31),ee(A,139),ee(A,8),A.gzhead?(ee(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),ee(A,255&A.gzhead.time),ee(A,A.gzhead.time>>8&255),ee(A,A.gzhead.time>>16&255),ee(A,A.gzhead.time>>24&255),ee(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),ee(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(ee(A,255&A.gzhead.extra.length),ee(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(w.adler=d(w.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(ee(A,0),ee(A,0),ee(A,0),ee(A,0),ee(A,0),ee(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),ee(A,3),A.status=B);else{var Q=v+(A.w_bits-8<<4)<<8;Q|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(Q|=32),Q+=31-Q%31,A.status=B,j(A,Q),A.strstart!==0&&(j(A,w.adler>>>16),j(A,65535&w.adler)),w.adler=1}if(A.status===69)if(A.gzhead.extra){for(k=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>k&&(w.adler=d(w.adler,A.pending_buf,A.pending-k,k)),z(w),k=A.pending,A.pending!==A.pending_buf_size));)ee(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>k&&(w.adler=d(w.adler,A.pending_buf,A.pending-k,k)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){k=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>k&&(w.adler=d(w.adler,A.pending_buf,A.pending-k,k)),z(w),k=A.pending,A.pending===A.pending_buf_size)){U=1;break}U=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,ee(A,U)}while(U!==0);A.gzhead.hcrc&&A.pending>k&&(w.adler=d(w.adler,A.pending_buf,A.pending-k,k)),U===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){k=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>k&&(w.adler=d(w.adler,A.pending_buf,A.pending-k,k)),z(w),k=A.pending,A.pending===A.pending_buf_size)){U=1;break}U=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,ee(A,U)}while(U!==0);A.gzhead.hcrc&&A.pending>k&&(w.adler=d(w.adler,A.pending_buf,A.pending-k,k)),U===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&z(w),A.pending+2<=A.pending_buf_size&&(ee(A,255&w.adler),ee(A,w.adler>>8&255),w.adler=0,A.status=B)):A.status=B),A.pending!==0){if(z(w),w.avail_out===0)return A.last_flush=-1,m}else if(w.avail_in===0&&O($)<=O(G)&&$!==h)return Y(w,-5);if(A.status===666&&w.avail_in!==0)return Y(w,-5);if(w.avail_in!==0||A.lookahead!==0||$!==p&&A.status!==666){var L=A.strategy===2?function(R,q){for(var re;;){if(R.lookahead===0&&(pe(R),R.lookahead===0)){if(q===p)return C;break}if(R.match_length=0,re=l._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,re&&(M(R,!1),R.strm.avail_out===0))return C}return R.insert=0,q===h?(M(R,!0),R.strm.avail_out===0?ie:X):R.last_lit&&(M(R,!1),R.strm.avail_out===0)?C:H}(A,$):A.strategy===3?function(R,q){for(var re,W,le,ge,me=R.window;;){if(R.lookahead<=V){if(pe(R),R.lookahead<=V&&q===p)return C;if(R.lookahead===0)break}if(R.match_length=0,R.lookahead>=D&&0<R.strstart&&(W=me[le=R.strstart-1])===me[++le]&&W===me[++le]&&W===me[++le]){ge=R.strstart+V;do;while(W===me[++le]&&W===me[++le]&&W===me[++le]&&W===me[++le]&&W===me[++le]&&W===me[++le]&&W===me[++le]&&W===me[++le]&&le<ge);R.match_length=V-(ge-le),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=D?(re=l._tr_tally(R,1,R.match_length-D),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(re=l._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),re&&(M(R,!1),R.strm.avail_out===0))return C}return R.insert=0,q===h?(M(R,!0),R.strm.avail_out===0?ie:X):R.last_lit&&(M(R,!1),R.strm.avail_out===0)?C:H}(A,$):i[A.level].func(A,$);if(L!==ie&&L!==X||(A.status=666),L===C||L===ie)return w.avail_out===0&&(A.last_flush=-1),m;if(L===H&&($===1?l._tr_align(A):$!==5&&(l._tr_stored_block(A,0,0,!1),$===3&&(J(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),z(w),w.avail_out===0))return A.last_flush=-1,m}return $!==h?m:A.wrap<=0?1:(A.wrap===2?(ee(A,255&w.adler),ee(A,w.adler>>8&255),ee(A,w.adler>>16&255),ee(A,w.adler>>24&255),ee(A,255&w.total_in),ee(A,w.total_in>>8&255),ee(A,w.total_in>>16&255),ee(A,w.total_in>>24&255)):(j(A,w.adler>>>16),j(A,65535&w.adler)),z(w),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?m:1)},o.deflateEnd=function(w){var $;return w&&w.state?($=w.state.status)!==P&&$!==69&&$!==73&&$!==91&&$!==103&&$!==B&&$!==666?Y(w,_):(w.state=null,$===B?Y(w,-3):m):_},o.deflateSetDictionary=function(w,$){var G,A,k,U,Q,L,R,q,re=$.length;if(!w||!w.state||(U=(G=w.state).wrap)===2||U===1&&G.status!==P||G.lookahead)return _;for(U===1&&(w.adler=u(w.adler,$,re,0)),G.wrap=0,re>=G.w_size&&(U===0&&(J(G.head),G.strstart=0,G.block_start=0,G.insert=0),q=new s.Buf8(G.w_size),s.arraySet(q,$,re-G.w_size,G.w_size,0),$=q,re=G.w_size),Q=w.avail_in,L=w.next_in,R=w.input,w.avail_in=re,w.next_in=0,w.input=$,pe(G);G.lookahead>=D;){for(A=G.strstart,k=G.lookahead-(D-1);G.ins_h=(G.ins_h<<G.hash_shift^G.window[A+D-1])&G.hash_mask,G.prev[A&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=A,A++,--k;);G.strstart=A,G.lookahead=D-1,pe(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=D-1,G.match_available=0,w.next_in=L,w.input=R,w.avail_in=Q,G.wrap=U,m},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,o){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,o){r.exports=function(i,s){var l,u,d,f,p,h,m,_,y,x,g,v,S,T,I,b,N,F,D,V,Z,P,B,C,H;l=i.state,u=i.next_in,C=i.input,d=u+(i.avail_in-5),f=i.next_out,H=i.output,p=f-(s-i.avail_out),h=f+(i.avail_out-257),m=l.dmax,_=l.wsize,y=l.whave,x=l.wnext,g=l.window,v=l.hold,S=l.bits,T=l.lencode,I=l.distcode,b=(1<<l.lenbits)-1,N=(1<<l.distbits)-1;e:do{S<15&&(v+=C[u++]<<S,S+=8,v+=C[u++]<<S,S+=8),F=T[v&b];t:for(;;){if(v>>>=D=F>>>24,S-=D,(D=F>>>16&255)===0)H[f++]=65535&F;else{if(!(16&D)){if(!(64&D)){F=T[(65535&F)+(v&(1<<D)-1)];continue t}if(32&D){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}V=65535&F,(D&=15)&&(S<D&&(v+=C[u++]<<S,S+=8),V+=v&(1<<D)-1,v>>>=D,S-=D),S<15&&(v+=C[u++]<<S,S+=8,v+=C[u++]<<S,S+=8),F=I[v&N];n:for(;;){if(v>>>=D=F>>>24,S-=D,!(16&(D=F>>>16&255))){if(!(64&D)){F=I[(65535&F)+(v&(1<<D)-1)];continue n}i.msg="invalid distance code",l.mode=30;break e}if(Z=65535&F,S<(D&=15)&&(v+=C[u++]<<S,(S+=8)<D&&(v+=C[u++]<<S,S+=8)),m<(Z+=v&(1<<D)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(v>>>=D,S-=D,(D=f-p)<Z){if(y<(D=Z-D)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(B=g,(P=0)===x){if(P+=_-D,D<V){for(V-=D;H[f++]=g[P++],--D;);P=f-Z,B=H}}else if(x<D){if(P+=_+x-D,(D-=x)<V){for(V-=D;H[f++]=g[P++],--D;);if(P=0,x<V){for(V-=D=x;H[f++]=g[P++],--D;);P=f-Z,B=H}}}else if(P+=x-D,D<V){for(V-=D;H[f++]=g[P++],--D;);P=f-Z,B=H}for(;2<V;)H[f++]=B[P++],H[f++]=B[P++],H[f++]=B[P++],V-=3;V&&(H[f++]=B[P++],1<V&&(H[f++]=B[P++]))}else{for(P=f-Z;H[f++]=H[P++],H[f++]=H[P++],H[f++]=H[P++],2<(V-=3););V&&(H[f++]=H[P++],1<V&&(H[f++]=H[P++]))}break}}break}}while(u<d&&f<h);u-=V=S>>3,v&=(1<<(S-=V<<3))-1,i.next_in=u,i.next_out=f,i.avail_in=u<d?d-u+5:5-(u-d),i.avail_out=f<h?h-f+257:257-(f-h),l.hold=v,l.bits=S}},{}],49:[function(n,r,o){var i=n("../utils/common"),s=n("./adler32"),l=n("./crc32"),u=n("./inffast"),d=n("./inftrees"),f=1,p=2,h=0,m=-2,_=1,y=852,x=592;function g(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(P){var B;return P&&P.state?(B=P.state,P.total_in=P.total_out=B.total=0,P.msg="",B.wrap&&(P.adler=1&B.wrap),B.mode=_,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new i.Buf32(y),B.distcode=B.distdyn=new i.Buf32(x),B.sane=1,B.back=-1,h):m}function T(P){var B;return P&&P.state?((B=P.state).wsize=0,B.whave=0,B.wnext=0,S(P)):m}function I(P,B){var C,H;return P&&P.state?(H=P.state,B<0?(C=0,B=-B):(C=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?m:(H.window!==null&&H.wbits!==B&&(H.window=null),H.wrap=C,H.wbits=B,T(P))):m}function b(P,B){var C,H;return P?(H=new v,(P.state=H).window=null,(C=I(P,B))!==h&&(P.state=null),C):m}var N,F,D=!0;function V(P){if(D){var B;for(N=new i.Buf32(512),F=new i.Buf32(32),B=0;B<144;)P.lens[B++]=8;for(;B<256;)P.lens[B++]=9;for(;B<280;)P.lens[B++]=7;for(;B<288;)P.lens[B++]=8;for(d(f,P.lens,0,288,N,0,P.work,{bits:9}),B=0;B<32;)P.lens[B++]=5;d(p,P.lens,0,32,F,0,P.work,{bits:5}),D=!1}P.lencode=N,P.lenbits=9,P.distcode=F,P.distbits=5}function Z(P,B,C,H){var ie,X=P.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new i.Buf8(X.wsize)),H>=X.wsize?(i.arraySet(X.window,B,C-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(H<(ie=X.wsize-X.wnext)&&(ie=H),i.arraySet(X.window,B,C-H,ie,X.wnext),(H-=ie)?(i.arraySet(X.window,B,C-H,H,0),X.wnext=H,X.whave=X.wsize):(X.wnext+=ie,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=ie))),0}o.inflateReset=T,o.inflateReset2=I,o.inflateResetKeep=S,o.inflateInit=function(P){return b(P,15)},o.inflateInit2=b,o.inflate=function(P,B){var C,H,ie,X,Y,O,J,z,M,ee,j,ne,pe,ve,fe,he,Re,xe,rt,ot,w,$,G,A,k=0,U=new i.Buf8(4),Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return m;(C=P.state).mode===12&&(C.mode=13),Y=P.next_out,ie=P.output,J=P.avail_out,X=P.next_in,H=P.input,O=P.avail_in,z=C.hold,M=C.bits,ee=O,j=J,$=h;e:for(;;)switch(C.mode){case _:if(C.wrap===0){C.mode=13;break}for(;M<16;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}if(2&C.wrap&&z===35615){U[C.check=0]=255&z,U[1]=z>>>8&255,C.check=l(C.check,U,2,0),M=z=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&z)<<8)+(z>>8))%31){P.msg="incorrect header check",C.mode=30;break}if((15&z)!=8){P.msg="unknown compression method",C.mode=30;break}if(M-=4,w=8+(15&(z>>>=4)),C.wbits===0)C.wbits=w;else if(w>C.wbits){P.msg="invalid window size",C.mode=30;break}C.dmax=1<<w,P.adler=C.check=1,C.mode=512&z?10:12,M=z=0;break;case 2:for(;M<16;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}if(C.flags=z,(255&C.flags)!=8){P.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){P.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=z>>8&1),512&C.flags&&(U[0]=255&z,U[1]=z>>>8&255,C.check=l(C.check,U,2,0)),M=z=0,C.mode=3;case 3:for(;M<32;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}C.head&&(C.head.time=z),512&C.flags&&(U[0]=255&z,U[1]=z>>>8&255,U[2]=z>>>16&255,U[3]=z>>>24&255,C.check=l(C.check,U,4,0)),M=z=0,C.mode=4;case 4:for(;M<16;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}C.head&&(C.head.xflags=255&z,C.head.os=z>>8),512&C.flags&&(U[0]=255&z,U[1]=z>>>8&255,C.check=l(C.check,U,2,0)),M=z=0,C.mode=5;case 5:if(1024&C.flags){for(;M<16;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}C.length=z,C.head&&(C.head.extra_len=z),512&C.flags&&(U[0]=255&z,U[1]=z>>>8&255,C.check=l(C.check,U,2,0)),M=z=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&(O<(ne=C.length)&&(ne=O),ne&&(C.head&&(w=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),i.arraySet(C.head.extra,H,X,ne,w)),512&C.flags&&(C.check=l(C.check,H,ne,X)),O-=ne,X+=ne,C.length-=ne),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(O===0)break e;for(ne=0;w=H[X+ne++],C.head&&w&&C.length<65536&&(C.head.name+=String.fromCharCode(w)),w&&ne<O;);if(512&C.flags&&(C.check=l(C.check,H,ne,X)),O-=ne,X+=ne,w)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(O===0)break e;for(ne=0;w=H[X+ne++],C.head&&w&&C.length<65536&&(C.head.comment+=String.fromCharCode(w)),w&&ne<O;);if(512&C.flags&&(C.check=l(C.check,H,ne,X)),O-=ne,X+=ne,w)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;M<16;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}if(z!==(65535&C.check)){P.msg="header crc mismatch",C.mode=30;break}M=z=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),P.adler=C.check=0,C.mode=12;break;case 10:for(;M<32;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}P.adler=C.check=g(z),M=z=0,C.mode=11;case 11:if(C.havedict===0)return P.next_out=Y,P.avail_out=J,P.next_in=X,P.avail_in=O,C.hold=z,C.bits=M,2;P.adler=C.check=1,C.mode=12;case 12:if(B===5||B===6)break e;case 13:if(C.last){z>>>=7&M,M-=7&M,C.mode=27;break}for(;M<3;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}switch(C.last=1&z,M-=1,3&(z>>>=1)){case 0:C.mode=14;break;case 1:if(V(C),C.mode=20,B!==6)break;z>>>=2,M-=2;break e;case 2:C.mode=17;break;case 3:P.msg="invalid block type",C.mode=30}z>>>=2,M-=2;break;case 14:for(z>>>=7&M,M-=7&M;M<32;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}if((65535&z)!=(z>>>16^65535)){P.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&z,M=z=0,C.mode=15,B===6)break e;case 15:C.mode=16;case 16:if(ne=C.length){if(O<ne&&(ne=O),J<ne&&(ne=J),ne===0)break e;i.arraySet(ie,H,X,ne,Y),O-=ne,X+=ne,J-=ne,Y+=ne,C.length-=ne;break}C.mode=12;break;case 17:for(;M<14;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}if(C.nlen=257+(31&z),z>>>=5,M-=5,C.ndist=1+(31&z),z>>>=5,M-=5,C.ncode=4+(15&z),z>>>=4,M-=4,286<C.nlen||30<C.ndist){P.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;M<3;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}C.lens[Q[C.have++]]=7&z,z>>>=3,M-=3}for(;C.have<19;)C.lens[Q[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,G={bits:C.lenbits},$=d(0,C.lens,0,19,C.lencode,0,C.work,G),C.lenbits=G.bits,$){P.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;he=(k=C.lencode[z&(1<<C.lenbits)-1])>>>16&255,Re=65535&k,!((fe=k>>>24)<=M);){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}if(Re<16)z>>>=fe,M-=fe,C.lens[C.have++]=Re;else{if(Re===16){for(A=fe+2;M<A;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}if(z>>>=fe,M-=fe,C.have===0){P.msg="invalid bit length repeat",C.mode=30;break}w=C.lens[C.have-1],ne=3+(3&z),z>>>=2,M-=2}else if(Re===17){for(A=fe+3;M<A;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}M-=fe,w=0,ne=3+(7&(z>>>=fe)),z>>>=3,M-=3}else{for(A=fe+7;M<A;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}M-=fe,w=0,ne=11+(127&(z>>>=fe)),z>>>=7,M-=7}if(C.have+ne>C.nlen+C.ndist){P.msg="invalid bit length repeat",C.mode=30;break}for(;ne--;)C.lens[C.have++]=w}}if(C.mode===30)break;if(C.lens[256]===0){P.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,G={bits:C.lenbits},$=d(f,C.lens,0,C.nlen,C.lencode,0,C.work,G),C.lenbits=G.bits,$){P.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,G={bits:C.distbits},$=d(p,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,G),C.distbits=G.bits,$){P.msg="invalid distances set",C.mode=30;break}if(C.mode=20,B===6)break e;case 20:C.mode=21;case 21:if(6<=O&&258<=J){P.next_out=Y,P.avail_out=J,P.next_in=X,P.avail_in=O,C.hold=z,C.bits=M,u(P,j),Y=P.next_out,ie=P.output,J=P.avail_out,X=P.next_in,H=P.input,O=P.avail_in,z=C.hold,M=C.bits,C.mode===12&&(C.back=-1);break}for(C.back=0;he=(k=C.lencode[z&(1<<C.lenbits)-1])>>>16&255,Re=65535&k,!((fe=k>>>24)<=M);){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}if(he&&!(240&he)){for(xe=fe,rt=he,ot=Re;he=(k=C.lencode[ot+((z&(1<<xe+rt)-1)>>xe)])>>>16&255,Re=65535&k,!(xe+(fe=k>>>24)<=M);){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}z>>>=xe,M-=xe,C.back+=xe}if(z>>>=fe,M-=fe,C.back+=fe,C.length=Re,he===0){C.mode=26;break}if(32&he){C.back=-1,C.mode=12;break}if(64&he){P.msg="invalid literal/length code",C.mode=30;break}C.extra=15&he,C.mode=22;case 22:if(C.extra){for(A=C.extra;M<A;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}C.length+=z&(1<<C.extra)-1,z>>>=C.extra,M-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;he=(k=C.distcode[z&(1<<C.distbits)-1])>>>16&255,Re=65535&k,!((fe=k>>>24)<=M);){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}if(!(240&he)){for(xe=fe,rt=he,ot=Re;he=(k=C.distcode[ot+((z&(1<<xe+rt)-1)>>xe)])>>>16&255,Re=65535&k,!(xe+(fe=k>>>24)<=M);){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}z>>>=xe,M-=xe,C.back+=xe}if(z>>>=fe,M-=fe,C.back+=fe,64&he){P.msg="invalid distance code",C.mode=30;break}C.offset=Re,C.extra=15&he,C.mode=24;case 24:if(C.extra){for(A=C.extra;M<A;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}C.offset+=z&(1<<C.extra)-1,z>>>=C.extra,M-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){P.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(J===0)break e;if(ne=j-J,C.offset>ne){if((ne=C.offset-ne)>C.whave&&C.sane){P.msg="invalid distance too far back",C.mode=30;break}pe=ne>C.wnext?(ne-=C.wnext,C.wsize-ne):C.wnext-ne,ne>C.length&&(ne=C.length),ve=C.window}else ve=ie,pe=Y-C.offset,ne=C.length;for(J<ne&&(ne=J),J-=ne,C.length-=ne;ie[Y++]=ve[pe++],--ne;);C.length===0&&(C.mode=21);break;case 26:if(J===0)break e;ie[Y++]=C.length,J--,C.mode=21;break;case 27:if(C.wrap){for(;M<32;){if(O===0)break e;O--,z|=H[X++]<<M,M+=8}if(j-=J,P.total_out+=j,C.total+=j,j&&(P.adler=C.check=C.flags?l(C.check,ie,j,Y-j):s(C.check,ie,j,Y-j)),j=J,(C.flags?z:g(z))!==C.check){P.msg="incorrect data check",C.mode=30;break}M=z=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;M<32;){if(O===0)break e;O--,z+=H[X++]<<M,M+=8}if(z!==(4294967295&C.total)){P.msg="incorrect length check",C.mode=30;break}M=z=0}C.mode=29;case 29:$=1;break e;case 30:$=-3;break e;case 31:return-4;case 32:default:return m}return P.next_out=Y,P.avail_out=J,P.next_in=X,P.avail_in=O,C.hold=z,C.bits=M,(C.wsize||j!==P.avail_out&&C.mode<30&&(C.mode<27||B!==4))&&Z(P,P.output,P.next_out,j-P.avail_out)?(C.mode=31,-4):(ee-=P.avail_in,j-=P.avail_out,P.total_in+=ee,P.total_out+=j,C.total+=j,C.wrap&&j&&(P.adler=C.check=C.flags?l(C.check,ie,j,P.next_out-j):s(C.check,ie,j,P.next_out-j)),P.data_type=C.bits+(C.last?64:0)+(C.mode===12?128:0)+(C.mode===20||C.mode===15?256:0),(ee==0&&j===0||B===4)&&$===h&&($=-5),$)},o.inflateEnd=function(P){if(!P||!P.state)return m;var B=P.state;return B.window&&(B.window=null),P.state=null,h},o.inflateGetHeader=function(P,B){var C;return P&&P.state&&2&(C=P.state).wrap?((C.head=B).done=!1,h):m},o.inflateSetDictionary=function(P,B){var C,H=B.length;return P&&P.state?(C=P.state).wrap!==0&&C.mode!==11?m:C.mode===11&&s(1,B,H,0)!==C.check?-3:Z(P,B,H,H)?(C.mode=31,-4):(C.havedict=1,h):m},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,o){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,p,h,m,_,y,x,g){var v,S,T,I,b,N,F,D,V,Z=g.bits,P=0,B=0,C=0,H=0,ie=0,X=0,Y=0,O=0,J=0,z=0,M=null,ee=0,j=new i.Buf16(16),ne=new i.Buf16(16),pe=null,ve=0;for(P=0;P<=15;P++)j[P]=0;for(B=0;B<m;B++)j[p[h+B]]++;for(ie=Z,H=15;1<=H&&j[H]===0;H--);if(H<ie&&(ie=H),H===0)return _[y++]=20971520,_[y++]=20971520,g.bits=1,0;for(C=1;C<H&&j[C]===0;C++);for(ie<C&&(ie=C),P=O=1;P<=15;P++)if(O<<=1,(O-=j[P])<0)return-1;if(0<O&&(f===0||H!==1))return-1;for(ne[1]=0,P=1;P<15;P++)ne[P+1]=ne[P]+j[P];for(B=0;B<m;B++)p[h+B]!==0&&(x[ne[p[h+B]]++]=B);if(N=f===0?(M=pe=x,19):f===1?(M=s,ee-=257,pe=l,ve-=257,256):(M=u,pe=d,-1),P=C,b=y,Y=B=z=0,T=-1,I=(J=1<<(X=ie))-1,f===1&&852<J||f===2&&592<J)return 1;for(;;){for(F=P-Y,V=x[B]<N?(D=0,x[B]):x[B]>N?(D=pe[ve+x[B]],M[ee+x[B]]):(D=96,0),v=1<<P-Y,C=S=1<<X;_[b+(z>>Y)+(S-=v)]=F<<24|D<<16|V|0,S!==0;);for(v=1<<P-1;z&v;)v>>=1;if(v!==0?(z&=v-1,z+=v):z=0,B++,--j[P]==0){if(P===H)break;P=p[h+x[B]]}if(ie<P&&(z&I)!==T){for(Y===0&&(Y=ie),b+=C,O=1<<(X=P-Y);X+Y<H&&!((O-=j[X+Y])<=0);)X++,O<<=1;if(J+=1<<X,f===1&&852<J||f===2&&592<J)return 1;_[T=z&I]=ie<<24|X<<16|b-y|0}}return z!==0&&(_[b+z]=P-Y<<24|64<<16|0),g.bits=ie,0}},{"../utils/common":41}],51:[function(n,r,o){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,o){var i=n("../utils/common"),s=0,l=1;function u(k){for(var U=k.length;0<=--U;)k[U]=0}var d=0,f=29,p=256,h=p+1+f,m=30,_=19,y=2*h+1,x=15,g=16,v=7,S=256,T=16,I=17,b=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(h+2));u(Z);var P=new Array(2*m);u(P);var B=new Array(512);u(B);var C=new Array(256);u(C);var H=new Array(f);u(H);var ie,X,Y,O=new Array(m);function J(k,U,Q,L,R){this.static_tree=k,this.extra_bits=U,this.extra_base=Q,this.elems=L,this.max_length=R,this.has_stree=k&&k.length}function z(k,U){this.dyn_tree=k,this.max_code=0,this.stat_desc=U}function M(k){return k<256?B[k]:B[256+(k>>>7)]}function ee(k,U){k.pending_buf[k.pending++]=255&U,k.pending_buf[k.pending++]=U>>>8&255}function j(k,U,Q){k.bi_valid>g-Q?(k.bi_buf|=U<<k.bi_valid&65535,ee(k,k.bi_buf),k.bi_buf=U>>g-k.bi_valid,k.bi_valid+=Q-g):(k.bi_buf|=U<<k.bi_valid&65535,k.bi_valid+=Q)}function ne(k,U,Q){j(k,Q[2*U],Q[2*U+1])}function pe(k,U){for(var Q=0;Q|=1&k,k>>>=1,Q<<=1,0<--U;);return Q>>>1}function ve(k,U,Q){var L,R,q=new Array(x+1),re=0;for(L=1;L<=x;L++)q[L]=re=re+Q[L-1]<<1;for(R=0;R<=U;R++){var W=k[2*R+1];W!==0&&(k[2*R]=pe(q[W]++,W))}}function fe(k){var U;for(U=0;U<h;U++)k.dyn_ltree[2*U]=0;for(U=0;U<m;U++)k.dyn_dtree[2*U]=0;for(U=0;U<_;U++)k.bl_tree[2*U]=0;k.dyn_ltree[2*S]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function he(k){8<k.bi_valid?ee(k,k.bi_buf):0<k.bi_valid&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function Re(k,U,Q,L){var R=2*U,q=2*Q;return k[R]<k[q]||k[R]===k[q]&&L[U]<=L[Q]}function xe(k,U,Q){for(var L=k.heap[Q],R=Q<<1;R<=k.heap_len&&(R<k.heap_len&&Re(U,k.heap[R+1],k.heap[R],k.depth)&&R++,!Re(U,L,k.heap[R],k.depth));)k.heap[Q]=k.heap[R],Q=R,R<<=1;k.heap[Q]=L}function rt(k,U,Q){var L,R,q,re,W=0;if(k.last_lit!==0)for(;L=k.pending_buf[k.d_buf+2*W]<<8|k.pending_buf[k.d_buf+2*W+1],R=k.pending_buf[k.l_buf+W],W++,L===0?ne(k,R,U):(ne(k,(q=C[R])+p+1,U),(re=N[q])!==0&&j(k,R-=H[q],re),ne(k,q=M(--L),Q),(re=F[q])!==0&&j(k,L-=O[q],re)),W<k.last_lit;);ne(k,S,U)}function ot(k,U){var Q,L,R,q=U.dyn_tree,re=U.stat_desc.static_tree,W=U.stat_desc.has_stree,le=U.stat_desc.elems,ge=-1;for(k.heap_len=0,k.heap_max=y,Q=0;Q<le;Q++)q[2*Q]!==0?(k.heap[++k.heap_len]=ge=Q,k.depth[Q]=0):q[2*Q+1]=0;for(;k.heap_len<2;)q[2*(R=k.heap[++k.heap_len]=ge<2?++ge:0)]=1,k.depth[R]=0,k.opt_len--,W&&(k.static_len-=re[2*R+1]);for(U.max_code=ge,Q=k.heap_len>>1;1<=Q;Q--)xe(k,q,Q);for(R=le;Q=k.heap[1],k.heap[1]=k.heap[k.heap_len--],xe(k,q,1),L=k.heap[1],k.heap[--k.heap_max]=Q,k.heap[--k.heap_max]=L,q[2*R]=q[2*Q]+q[2*L],k.depth[R]=(k.depth[Q]>=k.depth[L]?k.depth[Q]:k.depth[L])+1,q[2*Q+1]=q[2*L+1]=R,k.heap[1]=R++,xe(k,q,1),2<=k.heap_len;);k.heap[--k.heap_max]=k.heap[1],function(me,We){var Et,Qe,Dn,Me,Ln,Gr,Ct=We.dyn_tree,Hr=We.max_code,Bo=We.stat_desc.static_tree,xs=We.stat_desc.has_stree,Es=We.stat_desc.extra_bits,tr=We.stat_desc.extra_base,Un=We.stat_desc.max_length,Fn=0;for(Me=0;Me<=x;Me++)me.bl_count[Me]=0;for(Ct[2*me.heap[me.heap_max]+1]=0,Et=me.heap_max+1;Et<y;Et++)Un<(Me=Ct[2*Ct[2*(Qe=me.heap[Et])+1]+1]+1)&&(Me=Un,Fn++),Ct[2*Qe+1]=Me,Hr<Qe||(me.bl_count[Me]++,Ln=0,tr<=Qe&&(Ln=Es[Qe-tr]),Gr=Ct[2*Qe],me.opt_len+=Gr*(Me+Ln),xs&&(me.static_len+=Gr*(Bo[2*Qe+1]+Ln)));if(Fn!==0){do{for(Me=Un-1;me.bl_count[Me]===0;)Me--;me.bl_count[Me]--,me.bl_count[Me+1]+=2,me.bl_count[Un]--,Fn-=2}while(0<Fn);for(Me=Un;Me!==0;Me--)for(Qe=me.bl_count[Me];Qe!==0;)Hr<(Dn=me.heap[--Et])||(Ct[2*Dn+1]!==Me&&(me.opt_len+=(Me-Ct[2*Dn+1])*Ct[2*Dn],Ct[2*Dn+1]=Me),Qe--)}}(k,U),ve(q,ge,k.bl_count)}function w(k,U,Q){var L,R,q=-1,re=U[1],W=0,le=7,ge=4;for(re===0&&(le=138,ge=3),U[2*(Q+1)+1]=65535,L=0;L<=Q;L++)R=re,re=U[2*(L+1)+1],++W<le&&R===re||(W<ge?k.bl_tree[2*R]+=W:R!==0?(R!==q&&k.bl_tree[2*R]++,k.bl_tree[2*T]++):W<=10?k.bl_tree[2*I]++:k.bl_tree[2*b]++,q=R,ge=(W=0)===re?(le=138,3):R===re?(le=6,3):(le=7,4))}function $(k,U,Q){var L,R,q=-1,re=U[1],W=0,le=7,ge=4;for(re===0&&(le=138,ge=3),L=0;L<=Q;L++)if(R=re,re=U[2*(L+1)+1],!(++W<le&&R===re)){if(W<ge)for(;ne(k,R,k.bl_tree),--W!=0;);else R!==0?(R!==q&&(ne(k,R,k.bl_tree),W--),ne(k,T,k.bl_tree),j(k,W-3,2)):W<=10?(ne(k,I,k.bl_tree),j(k,W-3,3)):(ne(k,b,k.bl_tree),j(k,W-11,7));q=R,ge=(W=0)===re?(le=138,3):R===re?(le=6,3):(le=7,4)}}u(O);var G=!1;function A(k,U,Q,L){j(k,(d<<1)+(L?1:0),3),function(R,q,re,W){he(R),ee(R,re),ee(R,~re),i.arraySet(R.pending_buf,R.window,q,re,R.pending),R.pending+=re}(k,U,Q)}o._tr_init=function(k){G||(function(){var U,Q,L,R,q,re=new Array(x+1);for(R=L=0;R<f-1;R++)for(H[R]=L,U=0;U<1<<N[R];U++)C[L++]=R;for(C[L-1]=R,R=q=0;R<16;R++)for(O[R]=q,U=0;U<1<<F[R];U++)B[q++]=R;for(q>>=7;R<m;R++)for(O[R]=q<<7,U=0;U<1<<F[R]-7;U++)B[256+q++]=R;for(Q=0;Q<=x;Q++)re[Q]=0;for(U=0;U<=143;)Z[2*U+1]=8,U++,re[8]++;for(;U<=255;)Z[2*U+1]=9,U++,re[9]++;for(;U<=279;)Z[2*U+1]=7,U++,re[7]++;for(;U<=287;)Z[2*U+1]=8,U++,re[8]++;for(ve(Z,h+1,re),U=0;U<m;U++)P[2*U+1]=5,P[2*U]=pe(U,5);ie=new J(Z,N,p+1,h,x),X=new J(P,F,0,m,x),Y=new J(new Array(0),D,0,_,v)}(),G=!0),k.l_desc=new z(k.dyn_ltree,ie),k.d_desc=new z(k.dyn_dtree,X),k.bl_desc=new z(k.bl_tree,Y),k.bi_buf=0,k.bi_valid=0,fe(k)},o._tr_stored_block=A,o._tr_flush_block=function(k,U,Q,L){var R,q,re=0;0<k.level?(k.strm.data_type===2&&(k.strm.data_type=function(W){var le,ge=4093624447;for(le=0;le<=31;le++,ge>>>=1)if(1&ge&&W.dyn_ltree[2*le]!==0)return s;if(W.dyn_ltree[18]!==0||W.dyn_ltree[20]!==0||W.dyn_ltree[26]!==0)return l;for(le=32;le<p;le++)if(W.dyn_ltree[2*le]!==0)return l;return s}(k)),ot(k,k.l_desc),ot(k,k.d_desc),re=function(W){var le;for(w(W,W.dyn_ltree,W.l_desc.max_code),w(W,W.dyn_dtree,W.d_desc.max_code),ot(W,W.bl_desc),le=_-1;3<=le&&W.bl_tree[2*V[le]+1]===0;le--);return W.opt_len+=3*(le+1)+5+5+4,le}(k),R=k.opt_len+3+7>>>3,(q=k.static_len+3+7>>>3)<=R&&(R=q)):R=q=Q+5,Q+4<=R&&U!==-1?A(k,U,Q,L):k.strategy===4||q===R?(j(k,2+(L?1:0),3),rt(k,Z,P)):(j(k,4+(L?1:0),3),function(W,le,ge,me){var We;for(j(W,le-257,5),j(W,ge-1,5),j(W,me-4,4),We=0;We<me;We++)j(W,W.bl_tree[2*V[We]+1],3);$(W,W.dyn_ltree,le-1),$(W,W.dyn_dtree,ge-1)}(k,k.l_desc.max_code+1,k.d_desc.max_code+1,re+1),rt(k,k.dyn_ltree,k.dyn_dtree)),fe(k),L&&he(k)},o._tr_tally=function(k,U,Q){return k.pending_buf[k.d_buf+2*k.last_lit]=U>>>8&255,k.pending_buf[k.d_buf+2*k.last_lit+1]=255&U,k.pending_buf[k.l_buf+k.last_lit]=255&Q,k.last_lit++,U===0?k.dyn_ltree[2*Q]++:(k.matches++,U--,k.dyn_ltree[2*(C[Q]+p+1)]++,k.dyn_dtree[2*M(U)]++),k.last_lit===k.lit_bufsize-1},o._tr_align=function(k){j(k,2,3),ne(k,S,Z),function(U){U.bi_valid===16?(ee(U,U.bi_buf),U.bi_buf=0,U.bi_valid=0):8<=U.bi_valid&&(U.pending_buf[U.pending++]=255&U.bi_buf,U.bi_buf>>=8,U.bi_valid-=8)}(k)}},{"../utils/common":41}],53:[function(n,r,o){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,o){(function(i){(function(s,l){if(!s.setImmediate){var u,d,f,p,h=1,m={},_=!1,y=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,u={}.toString.call(s.process)==="[object process]"?function(T){process.nextTick(function(){v(T)})}:function(){if(s.postMessage&&!s.importScripts){var T=!0,I=s.onmessage;return s.onmessage=function(){T=!1},s.postMessage("","*"),s.onmessage=I,T}}()?(p="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",S,!1):s.attachEvent("onmessage",S),function(T){s.postMessage(p+T,"*")}):s.MessageChannel?((f=new MessageChannel).port1.onmessage=function(T){v(T.data)},function(T){f.port2.postMessage(T)}):y&&"onreadystatechange"in y.createElement("script")?(d=y.documentElement,function(T){var I=y.createElement("script");I.onreadystatechange=function(){v(T),I.onreadystatechange=null,d.removeChild(I),I=null},d.appendChild(I)}):function(T){setTimeout(v,0,T)},x.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var I=new Array(arguments.length-1),b=0;b<I.length;b++)I[b]=arguments[b+1];var N={callback:T,args:I};return m[h]=N,u(h),h++},x.clearImmediate=g}function g(T){delete m[T]}function v(T){if(_)setTimeout(v,0,T);else{var I=m[T];if(I){_=!0;try{(function(b){var N=b.callback,F=b.args;switch(F.length){case 0:N();break;case 1:N(F[0]);break;case 2:N(F[0],F[1]);break;case 3:N(F[0],F[1],F[2]);break;default:N.apply(l,F)}})(I)}finally{g(T),_=!1}}}}function S(T){T.source===s&&typeof T.data=="string"&&T.data.indexOf(p)===0&&v(+T.data.slice(p.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(hm);var IC=hm.exports;const mm=lf(IC),ho=t=>t.replace(/[^a-z0-9]/gi,"_").toLowerCase(),kC=(t,e,n,r,o,i)=>{const s=t.folder("whiteboards"),l=t.folder("playgrounds"),u=e.map(p=>{const h=`${ho(p.topic)}_${p.id.substring(0,6)}.svg`;return s==null||s.file(h,p.svgContent),{id:p.id,topic:p.topic,explanation:p.explanation,timestamp:p.timestamp,filePath:`whiteboards/${h}`}}),d=r.map(p=>{const h=`${ho(p.description)}_${p.id}.html`;return l==null||l.file(h,p.html),{id:p.id,description:p.description,timestamp:p.timestamp,filePath:`playgrounds/${h}`}}),f={version:"1.1",createdAt:Date.now(),theme:o,model:i,chatHistory:n,whiteboards:u,playgrounds:d};t.file("session_manifest.json",JSON.stringify(f,null,2))},AC=async t=>{const e=new mm;return t.forEach(n=>{const r=n.group?`${ho(n.group)}/${ho(n.name)}`:ho(n.name),o=e.folder(r);o&&kC(o,n.whiteboards,n.chatHistory,n.playgrounds,n.theme,n.model)}),await e.generateAsync({type:"blob"})},NC=async(t,e)=>{const n=t.file(e+"session_manifest.json");if(!n)throw new Error(`Manifest not found in ${e}`);const r=JSON.parse(await n.async("string")),o=await Promise.all(r.whiteboards.map(async s=>{const l=e+s.filePath,u=t.file(l);return{id:s.id,topic:s.topic,explanation:s.explanation,timestamp:s.timestamp,svgContent:u?await u.async("string"):""}}));let i=[];if(r.playgrounds)i=await Promise.all(r.playgrounds.map(async s=>{const l=e+s.filePath,u=t.file(l),d=s.description.toLowerCase().includes("level test")||s.description.toLowerCase().startsWith("test:");return{id:s.id,description:s.description,timestamp:s.timestamp||Date.now(),html:u?await u.async("string"):"",status:"ready",type:d?"test":"practice"}}));else if(r.playground){const s=r.playground,l=e+s.filePath,u=t.file(l);u&&i.push({id:"legacy",description:s.description,timestamp:Date.now(),html:await u.async("string"),status:"ready",type:"practice"})}return{whiteboards:o,chatHistory:r.chatHistory,playgrounds:i,theme:r.theme,model:r.model}},RC=async t=>{const e=await mm.loadAsync(t),n=[],r=[];if(e.forEach(o=>{o.endsWith("session_manifest.json")&&r.push(o)}),r.length===0)throw new Error("No valid session manifests found in ZIP.");for(const o of r){const i=o.replace("session_manifest.json","");try{const s=await NC(e,i),l=i.split("/").filter(u=>u.length>0);l.length===0?(s.name=t.name.replace(".zip",""),s.group=void 0):l.length===1?(s.name=l[0],s.group=void 0):(s.name=l[l.length-1],s.group=l.slice(0,l.length-1).join("/")),n.push(s)}catch(s){console.warn(`Failed to import session at ${o}`,s)}}return n},js=(t,e)=>{const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},PC="FatygorasDB",Mo="settings",gm=()=>new Promise((t,e)=>{const n=indexedDB.open(PC,1);n.onupgradeneeded=r=>{r.target.result.createObjectStore(Mo)},n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)}),MC=async t=>{try{const e=await gm();return new Promise((n,r)=>{const o=e.transaction(Mo,"readwrite");o.objectStore(Mo).put(t,"autosave_handle"),o.oncomplete=()=>n(!0),o.onerror=()=>r(o.error)})}catch(e){console.error("Failed to store handle in DB",e)}},bC=async()=>{try{const t=await gm();return new Promise((e,n)=>{const o=t.transaction(Mo,"readonly").objectStore(Mo).get("autosave_handle");o.onsuccess=()=>e(o.result),o.onerror=()=>n(o.error)})}catch(t){return console.error("Failed to retrieve handle from DB",t),null}},DC=()=>`
const fs = require('fs');
const path = require('path');

// CONFIGURATION
// Use the current directory where this script runs as the target
const TARGET_DIR = __dirname;
const CRYPTO_TAG = '${wh}';
const KEEP_COUNT = 2; // Keep last 2 instances

console.log(\`Starting Session Cleanup for tag: \${CRYPTO_TAG} in \${TARGET_DIR}\`);

try {
    const files = fs.readdirSync(TARGET_DIR);
    
    // Group files by Session Name
    // Expected format: Name_Date_CRYPTO_TAG.json
    const sessions = {};

    files.forEach(file => {
        if (!file.endsWith('.json') || !file.includes(CRYPTO_TAG)) return;

        // Simple parsing logic
        // Assuming: SessionName_YYYY-MM-DDTHH-mm-ss_FATY_V4_AUTO.json
        // We split by the crypto tag to isolate the unique name+date part
        const parts = file.split('_' + CRYPTO_TAG);
        if (parts.length < 1) return;

        // To group effectively, we need the "Base Name" (Session Name).
        // This is tricky if the session name has underscores.
        // Strategy: Use the Date regex to find the split point.
        // ISO Date usually contains colons or dashes. 
        // Our App saves as: Name_Timestamp_Tag.json
        
        // Let's rely on the file stats for sorting, grouping by name is the challenge.
        // Let's assume the name is everything before the last 2 underscores if we use a strict format.
        // Format: Name_TIMESTAMP_TAG.json
        
        const nameParts = file.replace('.json', '').split('_');
        // Remove Tag
        nameParts.pop(); // Remove Tag
        const timestamp = nameParts.pop(); // Remove Timestamp
        const sessionName = nameParts.join('_'); // Reconstruct Name

        if (!sessions[sessionName]) {
            sessions[sessionName] = [];
        }
        
        sessions[sessionName].push({
            filename: file,
            time: parseInt(timestamp) || 0
        });
    });

    // Process Deletion
    Object.keys(sessions).forEach(name => {
        const filesList = sessions[name];
        
        // Sort descending by time (newest first)
        filesList.sort((a, b) => b.time - a.time);

        if (filesList.length > KEEP_COUNT) {
            console.log(\`Cleaning session: \${name} (Found \${filesList.length}, keeping \${KEEP_COUNT})\`);
            
            // Files to delete
            const toDelete = filesList.slice(KEEP_COUNT);
            
            toDelete.forEach(f => {
                const fullPath = path.join(TARGET_DIR, f.filename);
                try {
                    fs.unlinkSync(fullPath);
                    console.log(\`  Deleted: \${f.filename}\`);
                } catch (err) {
                    console.error(\`  Error deleting \${f.filename}: \${err.message}\`);
                }
            });
        }
    });

    console.log("Cleanup Complete.");

} catch (err) {
    console.error("Critical Error:", err);
}

// Keep terminal open briefly
setTimeout(() => {}, 2000);
`,LC=()=>`# Fatygoras Auto-Save Cleanup Script

This script automatically cleans up old session files generated by Fatygoras Auto-Save.
It keeps the last 2 instances of every unique session and deletes older ones to save space.

## Prerequisites
1. You must have **Node.js** installed on your system.
   - Download: https://nodejs.org/

## Setup
1. Place the \`cleanup_sessions.js\` file inside the folder where you are Auto-Saving your sessions.

## Usage

### Windows (Easy)
1. Create a file named \`run_cleanup.bat\` in the same folder.
2. Edit it and paste the following code:
   \`\`\`batch
   @echo off
   node cleanup_sessions.js
   timeout /t 5
   \`\`\`
3. Double click \`run_cleanup.bat\` to run.
4. **To run on boot**: Press \`Win + R\`, type \`shell:startup\`, and paste a **Shortcut** to this .bat file inside that folder.

### Windows (Manual)
1. Right-click the folder and "Open Terminal".
2. Type: \`node cleanup_sessions.js\`

### Mac / Linux
1. Open Terminal.
2. Navigate to the folder: \`cd /path/to/your/save/folder\`
3. Run: \`node cleanup_sessions.js\`
4. **To run automatically:** Add a cron job (\`crontab -e\`) to run this script periodically.
   Example: \`*/10 * * * * /usr/bin/node /path/to/cleanup_sessions.js\` (Runs every 10 mins).
`,UC=async(t,e,n)=>{try{const o=await(await t.getFileHandle(e,{create:!0})).createWritable();return await o.write(n),await o.close(),!0}catch(r){throw console.error("Auto-save write error:",r),r}},FC=({isOpen:t,onClose:e,whiteboards:n,chatHistory:r,playgrounds:o,theme:i,model:s,onImport:l,onConfigureAutoSave:u,onUpdateAutoSaveSettings:d,autoSaveActive:f,initialAutoSaveName:p,initialAutoSaveInterval:h})=>{const[m,_]=te.useState(!1),[y,x]=te.useState(null),g=te.useRef(null),[v,S]=te.useState([]),[T,I]=te.useState(""),[b,N]=te.useState(""),[F,D]=te.useState(p),[V,Z]=te.useState(h);te.useEffect(()=>{D(p),Z(h)},[p,h]),te.useEffect(()=>{t&&P()},[t]);const P=()=>{try{const M=localStorage.getItem(ze.LIBRARY_INDEX),ee=M?JSON.parse(M):[];S(ee)}catch(M){console.error("Failed to load library index",M),S([])}},B=()=>{if(!T.trim())return;const M=Date.now().toString(36)+Math.random().toString(36).substr(2),ee={id:M,name:T.trim(),group:b.trim()||void 0,timestamp:Date.now(),topicCount:n.length},j={whiteboards:n,chatHistory:r,playgrounds:o,theme:i,model:s};try{localStorage.setItem(`${ze.LIBRARY_DATA_PREFIX}${M}`,JSON.stringify(j));const ne=[...v,ee];localStorage.setItem(ze.LIBRARY_INDEX,JSON.stringify(ne)),S(ne),I(""),N("")}catch{x("Storage full. Cannot save session locally.")}},C=M=>{const ee=localStorage.getItem(`${ze.LIBRARY_DATA_PREFIX}${M}`);if(ee){const j=JSON.parse(ee);l({whiteboards:j.whiteboards||[],chatHistory:j.chatHistory||[],playgrounds:j.playgrounds||[],theme:j.theme||i,model:j.model||s}),e()}else x("Session data not found.")},H=M=>{if(!confirm("Are you sure you want to delete this session?"))return;localStorage.removeItem(`${ze.LIBRARY_DATA_PREFIX}${M}`);const ee=v.filter(j=>j.id!==M);localStorage.setItem(ze.LIBRARY_INDEX,JSON.stringify(ee)),S(ee)},ie=async()=>{_(!0);try{const M=[];for(const j of v){const ne=localStorage.getItem(`${ze.LIBRARY_DATA_PREFIX}${j.id}`);if(ne){const pe=JSON.parse(ne);M.push({name:j.name,group:j.group,...pe})}}const ee=await AC(M);js(ee,`AI_Teacher_Library_${new Date().toISOString().slice(0,10)}.zip`)}catch(M){console.error(M),x("Export failed.")}finally{_(!1)}},X=async M=>{var j;const ee=(j=M.target.files)==null?void 0:j[0];if(ee){_(!0),x(null);try{const ne=await RC(ee),pe=[...v];ne.forEach(ve=>{const fe=Date.now().toString(36)+Math.random().toString(36).substr(2),he={id:fe,name:ve.name||`Imported ${new Date().toLocaleTimeString()}`,group:ve.group,timestamp:Date.now(),topicCount:ve.whiteboards.length};localStorage.setItem(`${ze.LIBRARY_DATA_PREFIX}${fe}`,JSON.stringify({whiteboards:ve.whiteboards,chatHistory:ve.chatHistory,playgrounds:ve.playgrounds,theme:ve.theme,model:ve.model})),pe.push(he)}),localStorage.setItem(ze.LIBRARY_INDEX,JSON.stringify(pe)),S(pe)}catch(ne){console.error(ne),x("Failed to import. Ensure file is a valid ZIP archive.")}finally{_(!1),g.current&&(g.current.value="")}}},Y=async()=>{try{if(!("showDirectoryPicker"in window)){alert("Your browser does not support the File System Access API. Please use Chrome, Edge, or Opera.");return}const M=await window.showDirectoryPicker();M&&u(M,V,F)}catch(M){console.error("Directory picker cancelled or failed",M)}},O=()=>{const M=DC(),ee=LC();js(new Blob([M],{type:"text/javascript"}),"cleanup_sessions.js"),js(new Blob([ee],{type:"text/markdown"}),"README_CLEANUP.md")},J=te.useMemo(()=>{const M={Ungrouped:[]};return v.forEach(ee=>{const j=ee.group||"Ungrouped";M[j]||(M[j]=[]),M[j].push(ee)}),M},[v]),z=Object.keys(J).sort((M,ee)=>M==="Ungrouped"?1:ee==="Ungrouped"?-1:M.localeCompare(ee));return E.jsx(TC,{isOpen:t,onClose:e,title:"Session Library",children:E.jsxs("div",{className:"flex flex-col h-[70vh]",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[E.jsxs("div",{children:[E.jsx("h4",{className:"font-bold text-sm mb-2 text-blue-800 dark:text-blue-300",children:"Browser Storage"}),E.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[E.jsx("input",{type:"text",placeholder:"Session Name...",value:T,onChange:M=>I(M.target.value),className:"flex-1 text-sm px-2 py-1.5 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-800"}),E.jsx(Ae,{size:"sm",onClick:B,disabled:!T||n.length===0,children:"Save"})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"file",accept:".zip",ref:g,onChange:X,className:"hidden"}),E.jsx(Ae,{size:"sm",variant:"secondary",onClick:()=>{var M;return(M=g.current)==null?void 0:M.click()},disabled:m,children:m?"Importing...":"Import ZIP"}),E.jsx(Ae,{size:"sm",variant:"ghost",onClick:ie,disabled:v.length===0||m,children:"Export All"})]})]}),E.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("h4",{className:"font-bold text-sm text-orange-800 dark:text-orange-300",children:"Auto-Save to Disk"}),f&&E.jsx("span",{className:"text-xs font-bold text-green-600 animate-pulse",children:" Active"})]}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Automatically saves session snapshots to a folder on your computer."}),E.jsxs("div",{className:"flex gap-2 mb-2",children:[E.jsx("input",{type:"text",value:F,onChange:M=>{const ee=M.target.value;D(ee),d(V,ee)},placeholder:"Base Filename",className:"flex-1 text-sm px-2 py-1.5 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-800"}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("input",{type:"number",value:V,onChange:M=>{const ee=Math.max(1,parseInt(M.target.value)||1);Z(ee),d(ee,F)},className:"w-12 text-sm px-1 py-1.5 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-800 text-center"}),E.jsx("span",{className:"text-xs text-gray-500",children:"min"})]})]}),E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx(Ae,{size:"sm",onClick:Y,variant:f?"secondary":"primary",children:f?"Change Folder":"Select Folder & Start"}),E.jsx("button",{onClick:O,className:"text-xs underline text-gray-500 hover:text-orange-500",children:"Get Cleanup Script"})]})]})]}),E.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:v.length===0?E.jsx("div",{className:"text-center py-12 text-gray-400",children:E.jsx("p",{children:"Browser Library is empty."})}):E.jsx("div",{className:"space-y-4",children:z.map(M=>E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[M!=="Ungrouped"&&E.jsxs("details",{className:"group",open:!0,children:[E.jsxs("summary",{className:"bg-gray-100 dark:bg-gray-700 px-4 py-2 font-bold text-sm cursor-pointer select-none flex items-center gap-2",children:[E.jsx("svg",{className:"w-4 h-4 transform group-open:rotate-90 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),E.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),M,E.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-auto",children:[J[M].length," items"]})]}),E.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:J[M].map(ee=>E.jsx(of,{session:ee,onLoad:C,onDelete:H},ee.id))})]}),M==="Ungrouped"&&J[M].length>0&&E.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[z.length>1&&E.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 px-4 py-2 text-xs font-bold text-gray-500 uppercase",children:"Unsorted"}),J[M].map(ee=>E.jsx(of,{session:ee,onLoad:C,onDelete:H},ee.id))]})]},M))})}),y&&E.jsx("div",{className:"mt-4 text-red-500 text-sm text-center font-medium",children:y})]})})},of=({session:t,onLoad:e,onDelete:n})=>E.jsxs("div",{className:"p-3 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:t.name}),E.jsxs("div",{className:"text-xs text-gray-400 flex gap-3",children:[E.jsx("span",{children:new Date(t.timestamp).toLocaleDateString()}),E.jsx("span",{children:""}),E.jsxs("span",{children:[t.topicCount," Topics"]})]})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx(Ae,{size:"sm",onClick:()=>e(t.id),children:"Load"}),E.jsx("button",{onClick:()=>n(t.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Delete",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),BC=({data:t,gallery:e,onGenerate:n,onImportLevel:r,onDelete:o,onSelect:i,isLoading:s})=>{const[l,u]=te.useState(""),[d,f]=te.useState("Introduction"),[p,h]=te.useState(!0),m=[{label:"Introduction",value:"Introduction"},{label:"Beginner",value:"Beginner"},{label:"Intermediate",value:"Intermediate"},{label:"Advanced",value:"Advanced"},{label:"Master",value:"Master"}],_=()=>{l.trim()&&n(l,d)};return E.jsxs("div",{className:"max-w-4xl mx-auto p-2 sm:p-6 pb-20",children:[E.jsxs("div",{className:"text-center py-8",children:[E.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-600",children:"Course Architect"}),E.jsx("div",{className:"max-w-2xl mx-auto bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[E.jsx("input",{type:"text",value:l,onChange:y=>u(y.target.value),placeholder:"Enter a topic (e.g., Python, History, Baking)",className:"flex-[2] px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:ring-2 focus:ring-purple-500 outline-none"}),E.jsx("div",{className:"flex-1 min-w-[150px]",children:E.jsx(yr,{options:m,value:d,onChange:y=>f(y.target.value),className:"h-full py-3"})})]}),E.jsx(Ae,{onClick:_,disabled:s||!l.trim(),className:"w-full sm:w-auto self-end",children:s?"Designing Curriculum...":"Create Syllabus"})]})})]}),t&&E.jsx("div",{className:"animate-fade-in mt-8 mb-16",children:E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-8 shadow-sm border border-gray-200 dark:border-gray-700 ring-2 ring-purple-500/20",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-xs font-bold text-purple-500 uppercase tracking-widest mb-1 block",children:"Active Design"}),E.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:t.topic}),E.jsxs("div",{className:"inline-block px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-full text-sm font-semibold",children:[t.level," Level"]})]}),E.jsx(Ae,{size:"lg",onClick:()=>r(t.concepts,t.topic),children:"Send All to Classroom"})]}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8 text-lg leading-relaxed",children:t.description}),E.jsxs("div",{children:[E.jsx("h4",{className:"font-bold text-gray-500 uppercase tracking-wide text-sm mb-4",children:"Key Concepts"}),E.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.concepts.map((y,x)=>E.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-100 dark:border-gray-700/50 group hover:border-blue-200 dark:hover:border-blue-800 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3 w-full",children:[E.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 flex items-center justify-center font-bold text-sm shrink-0",children:x+1}),E.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:y})]}),E.jsx(Ae,{size:"sm",variant:"ghost",className:"shrink-0 opacity-100 sm:opacity-0 group-hover:opacity-100 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20",onClick:()=>r([y],t.topic),children:"Teach this"})]},x))})]})]})}),E.jsxs("div",{className:"mt-12",children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsxs("h3",{className:"text-xl font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[E.jsx("svg",{className:"w-6 h-6 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"My Course Gallery"]}),E.jsx("button",{onClick:()=>h(!p),className:"text-sm text-gray-500 hover:text-purple-600 underline",children:p?"Hide Gallery":"Show Gallery"})]}),p&&E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.length===0?E.jsx("div",{className:"col-span-full py-12 text-center border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl",children:E.jsx("p",{className:"text-gray-400",children:"No courses saved yet. Generate one above!"})}):e.map(y=>E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow flex flex-col h-full",children:[E.jsxs("div",{className:"p-5 flex-1",children:[E.jsxs("div",{className:"flex justify-between items-start mb-2",children:[E.jsx("div",{className:"inline-block px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded text-xs font-semibold uppercase tracking-wide",children:y.level}),E.jsx("span",{className:"text-xs text-gray-400",children:y.timestamp?new Date(y.timestamp).toLocaleDateString():"Saved"})]}),E.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white mb-2 line-clamp-1",children:y.topic}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 line-clamp-2",children:y.description}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Contents Preview:"}),E.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-300 pl-4 list-disc marker:text-purple-400",children:[y.concepts.slice(0,3).map((x,g)=>E.jsx("li",{className:"truncate",children:x},g)),y.concepts.length>3&&E.jsxs("li",{className:"list-none text-xs text-gray-400 mt-1 italic",children:["+",y.concepts.length-3," more concepts"]})]})]})]}),E.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center gap-2",children:[E.jsxs("div",{className:"flex gap-2",children:[E.jsx(Ae,{size:"sm",variant:"secondary",onClick:()=>i(y),children:"View"}),E.jsx(Ae,{size:"sm",onClick:()=>r(y.concepts,y.topic),children:"Teach This"})]}),E.jsx("button",{onClick:()=>y.id&&o(y.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Delete Course",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},y.id||y.timestamp))})]})]})},zC=({onStartTest:t,isGenerating:e,results:n})=>{const[r,o]=te.useState(""),[i,s]=te.useState(Sh),l=n.reduce((u,d)=>(u[d.topic]||(u[d.topic]=[]),u[d.topic].push(d),u),{});return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 pb-20",children:[E.jsxs("div",{className:"text-center py-8",children:[E.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-orange-500 to-red-600",children:"Competency Level Test"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-2xl mx-auto mb-8",children:"Challenge yourself! The AI will generate a complete curriculum (Intro to Master) and create a personalized exam to determine your proficiency level."}),E.jsx("div",{className:"max-w-xl mx-auto bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[E.jsx("div",{className:"flex-[2]",children:E.jsx("input",{type:"text",value:r,onChange:u=>o(u.target.value),placeholder:"Enter topic (e.g. Biology, Java)...",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:ring-2 focus:ring-orange-500 outline-none",disabled:e})}),E.jsx("div",{className:"flex-1 min-w-[160px]",children:E.jsx(yr,{options:Yl,value:i,onChange:u=>s(u.target.value),className:"h-full py-3",disabled:e})})]}),E.jsx(Ae,{onClick:()=>t(r,i),disabled:e||!r.trim(),className:"w-full bg-orange-600 hover:bg-orange-700 focus:ring-orange-500",children:e?"Analyzing & Building Exam...":"Start Level Test"}),e&&E.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"This may take a minute. We are generating 5 syllabi and a quiz database."})]})})]}),n.length>0&&E.jsxs("div",{className:"mt-12 animate-fade-in",children:[E.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center gap-2",children:[E.jsx("svg",{className:"w-6 h-6 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Student Record"]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[E.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 font-semibold text-sm",children:"Recent Attempts"}),E.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700 max-h-[300px] overflow-y-auto",children:n.slice().reverse().map(u=>E.jsxs("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[E.jsxs("div",{className:"flex justify-between items-center mb-1",children:[E.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200",children:u.topic}),E.jsx("span",{className:"text-xs text-gray-400",children:new Date(u.timestamp).toLocaleDateString()})]}),E.jsxs("div",{className:"flex justify-between items-center text-sm",children:[E.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Level: ",E.jsx("span",{className:"text-orange-500 font-semibold",children:u.levelAssigned})]}),E.jsx("span",{className:"text-gray-500",children:"Completed"})]})]},u.id))})]}),E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 flex flex-col justify-center",children:[E.jsx("h4",{className:"font-bold text-sm text-gray-500 uppercase tracking-wide mb-4",children:"Topic Mastery Frequency"}),E.jsxs("div",{className:"flex items-end gap-4 h-[200px] w-full overflow-x-auto",children:[Object.entries(l).map(([u,d])=>{const f=Math.min(100,d.length*20);return E.jsxs("div",{className:"flex flex-col items-center gap-2 group min-w-[60px]",children:[E.jsx("div",{className:"text-xs font-bold text-orange-500 opacity-0 group-hover:opacity-100 transition-opacity",children:d.length}),E.jsx("div",{className:"w-12 bg-gradient-to-t from-orange-500 to-yellow-400 rounded-t-md transition-all duration-500",style:{height:`${f}%`}}),E.jsx("div",{className:"text-[10px] text-gray-500 text-center truncate w-16",title:u,children:u})]},u)}),Object.keys(l).length===0&&E.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:"No data to chart yet."})]})]})]})]})]})},VC=()=>{const e=(()=>{try{const K=localStorage.getItem(ze.SETTINGS);return K?JSON.parse(K):{}}catch{return{}}})(),[n,r]=te.useState(()=>e.theme||q0),[o,i]=te.useState(()=>e.model||Sh),[s,l]=te.useState(()=>localStorage.getItem(ze.API_KEY)||""),[u,d]=te.useState(()=>e.saveToLocal||!1),[f,p]=te.useState(()=>e.autoSaveName||"MySession"),[h,m]=te.useState(()=>e.autoSaveInterval||5),[_,y]=te.useState(null),[x,g]=te.useState(null),v=te.useRef(null),[S,T]=te.useState("classroom"),[I,b]=te.useState(""),[N,F]=te.useState([]),[D,V]=te.useState([]),[Z,P]=te.useState(!1),[B,C]=te.useState([]),[H,ie]=te.useState(null),[X,Y]=te.useState(!1),[O,J]=te.useState(500),[z,M]=te.useState("practice"),[ee,j]=te.useState(()=>{try{const K=localStorage.getItem(ze.TEST_RESULTS);return K?JSON.parse(K):[]}catch{return[]}}),[ne,pe]=te.useState(!1),[ve,fe]=te.useState(null),[he,Re]=te.useState(()=>{try{const K=localStorage.getItem(ze.SYLLABUS_GALLERY);return K?JSON.parse(K):[]}catch{return[]}}),[xe,rt]=te.useState(!1),[ot,w]=te.useState(!1),[$,G]=te.useState(!1),[A,k]=te.useState(!1),[U,Q]=te.useState(!1),[L,R]=te.useState([]),[q,re]=te.useState(!1),W=te.useCallback(K=>{const ue={...K,id:Math.random().toString(36).substr(2,9),timestamp:Date.now()};R(ce=>[...ce,ue])},[]),le=te.useMemo(()=>{const K=B.find(Ie=>Ie.id===H);let ue="[No Active Playground]";K&&(ue=`[Active ${K.type==="test"?"Level Test":"Playground"}]: ${K.description} (${K.status})`);const ce=N.slice(0,3).map(Ie=>`[Whiteboard - ${Ie.topic}]: ${Ie.explanation.substring(0,150)}...`).join(`
`);return`USER SCREEN CONTEXT:
${ue}

${ce||"[No Whiteboards Visible]"}`},[N,B,H]),ge=te.useRef({whiteboards:N,chatHistory:D,playgrounds:B,theme:n,model:o,testResults:ee});te.useEffect(()=>{ge.current={whiteboards:N,chatHistory:D,playgrounds:B,theme:n,model:o,testResults:ee}},[N,D,B,n,o,ee]);const me=async()=>{if(!_)return;const K=new Date,ue=K.getTime(),ce=qt=>qt.toString().padStart(2,"0"),Ie=`${K.getFullYear()}-${ce(K.getMonth()+1)}-${ce(K.getDate())}-${ce(K.getHours())}-${ce(K.getMinutes())}-${ce(K.getSeconds())}`,we=`${f}_${Ie}_${wh}.json`,Ce=ge.current,Be=JSON.stringify({...Ce,timestamp:ue},null,2);try{await UC(_,we,Be),W({type:"info",source:"AutoSave",summary:`Saved session to ${we}`})}catch(qt){console.error("Auto save failed",qt),W({type:"error",source:"AutoSave",summary:"Failed to write file"})}};te.useEffect(()=>(_&&(v.current&&window.clearInterval(v.current),W({type:"info",source:"AutoSave",summary:`Timer started: ${h} mins`}),v.current=window.setInterval(()=>{me()},h*60*1e3)),()=>{v.current&&window.clearInterval(v.current)}),[_,h]),te.useEffect(()=>{(async()=>{try{const ue=await bC();ue&&(await ue.queryPermission({mode:"readwrite"})==="granted"?(y(ue),W({type:"info",source:"AutoSave",summary:"Restored previous folder connection automatically"})):(g(ue),W({type:"info",source:"AutoSave",summary:"Previous folder found. Waiting for resume permission."})))}catch(ue){console.error("Error restoring handle",ue)}})()},[]);const We=async()=>{if(x)try{await x.requestPermission({mode:"readwrite"})==="granted"&&(y(x),g(null),W({type:"info",source:"AutoSave",summary:"Auto-save resumed successfully"}))}catch(K){console.error("Permission request failed",K)}};te.useEffect(()=>{if(u)try{const K=localStorage.getItem(ze.SESSION);if(K){const ue=JSON.parse(K);ue.whiteboards&&F(ue.whiteboards),ue.chatHistory&&V(ue.chatHistory),ue.playgrounds&&C(ue.playgrounds)}}catch(K){console.error("Failed to load session",K)}},[]),te.useEffect(()=>{s&&localStorage.setItem(ze.API_KEY,s)},[s]),te.useEffect(()=>{localStorage.setItem(ze.SYLLABUS_GALLERY,JSON.stringify(he))},[he]),te.useEffect(()=>{localStorage.setItem(ze.TEST_RESULTS,JSON.stringify(ee))},[ee]),te.useEffect(()=>{const K={saveToLocal:u,theme:n,model:o,autoSaveName:f,autoSaveInterval:h};localStorage.setItem(ze.SETTINGS,JSON.stringify(K))},[u,n,o,f,h]),te.useEffect(()=>{u?localStorage.setItem(ze.SESSION,JSON.stringify({whiteboards:N,chatHistory:D,playgrounds:B})):localStorage.removeItem(ze.SESSION)},[u,N,D,B]),te.useEffect(()=>{const K=window.document.documentElement;K.classList.remove("light","dark","chalkboard","blueprint"),n===kt.DARK?K.classList.add("dark"):n===kt.CHALKBOARD?K.classList.add("dark","chalkboard"):n===kt.BLUEPRINT?K.classList.add("blueprint","dark"):K.classList.add("light")},[n]);const Et=te.useCallback(K=>{if(A){const ue=document.body.clientWidth-K.clientX;ue>300&&ue<document.body.clientWidth-100&&J(ue)}},[A]),Qe=te.useCallback(()=>k(!1),[]);te.useEffect(()=>(A&&(window.addEventListener("mousemove",Et),window.addEventListener("mouseup",Qe)),()=>{window.removeEventListener("mousemove",Et),window.removeEventListener("mouseup",Qe)}),[A,Et,Qe]);const Dn=(K,ue)=>{m(K),p(ue)},Me=()=>{F([]),V([]),C([]),ie(null),fe(null),b(""),R([]),Y(!1)},Ln=async(K,ue)=>{const ce=K||I,Ie=ue||ce;if(!ce.trim()||!s){s||alert("Please enter a Gemini API Key.");return}rt(!0),T("classroom");try{const we=await mC(s,ce,o,W),Ce=we.isAbstract?we.topics:[ce],Be=4;let qt=N.slice(0,2).map(dt=>dt.topic).join(", ");for(let dt=0;dt<Ce.length;dt+=Be){const cn=Ce.slice(dt,dt+Be),dn=await gC(s,cn,qt,o,Ie,W);qt=dn.map(Bn=>Bn.topic).join(", ");const Cs=dn.map(Bn=>({id:Date.now().toString()+Math.random(),topic:Bn.topic,svgContent:Bn.svg,explanation:Bn.explanation,timestamp:Date.now()}));F(Bn=>[...Cs.reverse(),...Bn])}K||b("")}catch(we){console.error(we),alert("Generation failed.")}finally{rt(!1)}},Gr=async K=>{if(!s){alert("Please enter API Key");return}Y(!0),M("practice");const ue=B.find(we=>we.description.includes(K)&&we.type==="practice");if(ue){ie(ue.id);return}const ce=Date.now().toString(),Ie={id:ce,html:"",description:K,timestamp:Date.now(),status:"loading",type:"practice",model:o};C(we=>[...we,Ie]),ie(ce);try{const we=await nf(s,K,o,W);C(Ce=>Ce.map(Be=>Be.id===ce?{...we,status:"ready",id:ce,type:"practice",model:o}:Be))}catch{C(Ce=>Ce.map(Be=>Be.id===ce?{...Be,status:"error"}:Be))}},Ct=async(K,ue)=>{if(!s){alert("Please enter API Key");return}pe(!0),Y(!0),M("test");const ce=Date.now().toString(),Ie={id:ce,html:"",description:`Test: ${K}`,timestamp:Date.now(),status:"loading",type:"test",relatedTopic:K,model:ue};C(we=>[...we,Ie]),ie(ce);try{const we=["Introduction","Beginner","Intermediate","Advanced","Master"];let Ce="";for(const dt of we){const cn=he.find(dn=>dn.topic.trim().toLowerCase()===K.trim().toLowerCase()&&dn.level===dt);if(cn)Ce+=JSON.stringify(cn)+`
`,W({type:"info",source:"LevelTest",summary:`Using existing syllabus for ${dt}`,details:cn});else{const dn=await rf(s,K,dt,ue,W,Ce);Ce+=JSON.stringify(dn)+`
`,Re(Cs=>[{...dn,id:Date.now().toString()+Math.random()},...Cs])}}const Be=await yC(s,K,Ce,ue,W),qt=await vC(s,K,Be,ue,W);C(dt=>dt.map(cn=>cn.id===ce?{...qt,status:"ready",id:ce,type:"test",relatedTopic:K,model:ue}:cn)),j(dt=>[...dt,{id:ce,topic:K,levelAssigned:"Pending",score:0,maxScore:0,timestamp:Date.now()}])}catch(we){console.error(we),C(Ce=>Ce.map(Be=>Be.id===ce?{...Be,status:"error"}:Be)),alert("Failed to generate level test. Please try again.")}finally{pe(!1)}},Hr=K=>{j(ue=>ue.map(ce=>ce.id===K.testId?{...ce,levelAssigned:K.level||"Unknown",score:K.score||0,maxScore:K.maxScore||0}:ce)),W({type:"info",source:"LevelTest",summary:"Received test results",details:K})},Bo=async()=>{if(!H||!s)return;const K=B.find(ce=>ce.id===H);if(!K)return;const ue=K.model||o;if(K.type==="test"){const ce=K.relatedTopic||K.description.replace("Test: ","");tr(K.id),Ct(ce,ue);return}C(ce=>ce.map(Ie=>Ie.id===K.id?{...Ie,status:"loading"}:Ie));try{const ce=K.description.replace("Playground: ",""),Ie=await nf(s,ce,ue,W);C(we=>we.map(Ce=>Ce.id===K.id?{...Ie,status:"ready",id:K.id,type:"practice",model:ue}:Ce))}catch{C(Ie=>Ie.map(we=>we.id===K.id?{...we,status:"error"}:we))}},xs=async(K,ue)=>{if(!s){alert("Please enter API Key");return}w(!0);const ce=K.trim().toLowerCase(),Ie=he.filter(Ce=>Ce.topic.toLowerCase().includes(ce));let we="";Ie.length>0&&(we=`Existing courses:
`+Ie.map(Ce=>`- ${Ce.level} (${Ce.topic})`).join(`
`));try{const Be={...await rf(s,K,ue,o,W,we),id:Date.now().toString(),timestamp:Date.now()};fe(Be),Re(qt=>[Be,...qt])}catch(Ce){console.error(Ce)}finally{w(!1)}},Es=async(K,ue)=>{G(!0),P(!0);try{const ce=await _C(s,K,ue,o,W);V(Ie=>[...Ie,{id:Date.now().toString(),role:"user",content:`[Image Analysis]: ${ue}`,timestamp:Date.now()},{id:(Date.now()+1).toString(),role:"model",content:ce,timestamp:Date.now()}])}catch(ce){console.error(ce)}finally{G(!1)}},tr=K=>{C(ue=>ue.filter(ce=>ce.id!==K)),H===K&&ie(null)},Un=()=>{switch(n){case kt.CHALKBOARD:return"bg-[#2b2b2b] text-gray-100";case kt.BLUEPRINT:return"bg-[#1e3a8a] text-blue-100";case kt.DARK:return"bg-gray-900 text-gray-100";default:return"bg-[#fdfbf7] text-gray-900"}},Fn=B.find(K=>K.id===H);return E.jsxs("div",{className:`h-[100dvh] flex flex-col font-sans transition-colors duration-300 overflow-hidden ${Un()}`,children:[E.jsx(W0,{theme:n,setTheme:r,model:o,setModel:i,apiKey:s,setApiKey:l,onClearSession:Me,saveToLocal:u,setSaveToLocal:d,toggleAdvancedMode:()=>Q(!U),onOpenSessionManager:()=>re(!0),playgroundOpen:X,togglePlayground:()=>Y(!X),hasPlaygroundCode:B.length>0,onResumeAutoSave:x?We:void 0}),E.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[E.jsxs("main",{className:`flex-1 overflow-y-auto w-full scroll-smooth flex flex-col ${X?"hidden md:flex":"flex"}`,children:[E.jsxs("div",{className:"flex-shrink-0 flex w-full border-b border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-900/50 backdrop-blur sticky top-0 z-10 overflow-x-auto no-scrollbar",children:[E.jsx("button",{onClick:()=>T("classroom"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors ${S==="classroom"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-500 hover:text-gray-700"}`,children:"Classroom"}),E.jsx("button",{onClick:()=>T("syllabus"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors ${S==="syllabus"?"border-b-2 border-purple-500 text-purple-600 dark:text-purple-400":"text-gray-500 hover:text-gray-700"}`,children:"Syllabus Architect"}),E.jsx("button",{onClick:()=>T("level_test"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors ${S==="level_test"?"border-b-2 border-orange-500 text-orange-600 dark:text-orange-400":"text-gray-500 hover:text-gray-700"}`,children:"Level Test"})]}),E.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 pb-32 w-full flex-grow",children:[S==="classroom"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"mb-12",children:[E.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:"What would you like to learn today?"}),E.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:E.jsxs("div",{className:"flex flex-col relative bg-white dark:bg-gray-900 transition-shadow shadow-inner",children:[E.jsx("textarea",{value:I,onChange:K=>b(K.target.value),placeholder:"Explain Quantum Physics...",className:"w-full h-32 p-4 bg-transparent border-none focus:ring-0 resize-none text-base sm:text-lg outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400",disabled:xe}),E.jsx("div",{className:"flex justify-end p-3 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-100 dark:border-gray-700",children:E.jsx(Ae,{onClick:()=>Ln(),disabled:xe||!I.trim(),size:"md",children:xe?"Thinking...":"Create Lesson"})})]})})]}),E.jsxs("div",{className:"space-y-16",children:[N.length===0&&!xe&&E.jsx("div",{className:"text-center py-20 opacity-50",children:E.jsx("p",{className:"text-xl font-medium",children:"Classroom is empty."})}),N.map(K=>E.jsxs("div",{className:"relative",children:[E.jsx(K0,{topic:K.topic,svgContent:K.svgContent,explanation:K.explanation,onRefine:Es,isRefining:$}),E.jsx("div",{className:"mt-4 flex justify-end",children:E.jsx(Ae,{variant:"secondary",onClick:()=>Gr(K.topic),children:"Practice this Topic"})})]},K.id))]})]}),S==="syllabus"&&E.jsx(BC,{data:ve,gallery:he,onGenerate:xs,isLoading:ot,onImportLevel:(K,ue)=>Ln(K.join(", "),ue),onDelete:K=>Re(ue=>ue.filter(ce=>ce.id!==K)),onSelect:fe}),S==="level_test"&&E.jsx(zC,{onStartTest:Ct,isGenerating:ne,results:ee})]})]}),X&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:`hidden md:flex flex-shrink-0 border-l border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 relative transition-[width] ease-in-out flex-col shadow-2xl z-20 ${A?"duration-0 select-none":"duration-300"}`,style:{width:O},children:[E.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 -ml-0.5 cursor-ew-resize hover:bg-blue-500/50 active:bg-blue-600 transition-colors z-30",onMouseDown:K=>{K.preventDefault(),k(!0)}}),E.jsx(sf,{playgrounds:B,activePlaygroundId:H,setActivePlaygroundId:ie,activePlaygroundTab:z,setActivePlaygroundTab:M,activePlayground:Fn,onClose:()=>Y(!1),onCloseItem:tr,onRetry:Bo,onTestComplete:Hr})]}),E.jsx("div",{className:"md:hidden fixed inset-0 z-40 bg-white dark:bg-gray-900 flex flex-col",children:E.jsx(sf,{playgrounds:B,activePlaygroundId:H,setActivePlaygroundId:ie,activePlaygroundTab:z,setActivePlaygroundTab:M,activePlayground:Fn,onClose:()=>Y(!1),onCloseItem:tr,onRetry:Bo,onTestComplete:Hr})})]})]}),E.jsx(wC,{isOpen:Z,toggleOpen:()=>P(!Z),apiKey:s,model:o,history:D,setHistory:V,logger:W,context:le}),E.jsx(CC,{logs:L,isOpen:U,onClose:()=>Q(!1),onClear:()=>R([])}),E.jsx(FC,{isOpen:q,onClose:()=>re(!1),whiteboards:N,chatHistory:D,playgrounds:B,theme:n,model:o,onImport:K=>{F(K.whiteboards),V(K.chatHistory),C(K.playgrounds),r(K.theme),i(K.model)},autoSaveActive:!!_,onConfigureAutoSave:async(K,ue,ce)=>{await MC(K),y(K),m(ue),p(ce)},onUpdateAutoSaveSettings:Dn,initialAutoSaveName:f,initialAutoSaveInterval:h})]})},sf=({playgrounds:t,activePlaygroundId:e,setActivePlaygroundId:n,activePlaygroundTab:r,setActivePlaygroundTab:o,activePlayground:i,onClose:s,onCloseItem:l,onRetry:u,onTestComplete:d})=>{const f=t.filter(p=>p.type===r);return E.jsxs("div",{className:"flex-1 overflow-hidden min-w-[300px] h-full flex flex-col",children:[E.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[E.jsx("button",{onClick:()=>o("practice"),className:`flex-1 px-4 py-2 text-xs font-bold uppercase tracking-wider ${r==="practice"?"bg-white dark:bg-gray-900 border-t-2 border-blue-500 text-blue-600":"text-gray-500"}`,children:"Practice Apps"}),E.jsx("button",{onClick:()=>o("test"),className:`flex-1 px-4 py-2 text-xs font-bold uppercase tracking-wider ${r==="test"?"bg-white dark:bg-gray-900 border-t-2 border-orange-500 text-orange-600":"text-gray-500"}`,children:"Level Tests"})]}),f.length>0&&E.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 no-scrollbar",children:f.map(p=>E.jsxs("div",{className:`flex items-center group max-w-[160px] border-r border-gray-200 dark:border-gray-700 ${e===p.id?"bg-white dark:bg-gray-900":"opacity-80 hover:opacity-100"}`,children:[E.jsxs("button",{onClick:()=>n(p.id),className:`px-3 py-2 text-xs truncate flex-1 text-left flex items-center gap-2 ${e===p.id?"text-blue-600 dark:text-blue-400 font-semibold":""}`,children:[p.status==="loading"&&E.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),p.description]}),E.jsx("button",{onClick:h=>{h.stopPropagation(),l(p.id)},className:"p-1 mx-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},p.id))}),i?E.jsx(xC,{code:i,onClose:s,onRetry:u,onTestComplete:d}):E.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[E.jsx("p",{className:"text-gray-400 mb-4",children:"No active app selected."}),E.jsx(Ae,{variant:"ghost",size:"sm",onClick:s,children:"Close Panel"})]})]})},ym=document.getElementById("root");if(!ym)throw new Error("Could not find root element to mount to");const GC=tl.createRoot(ym);GC.render(E.jsx(el.StrictMode,{children:E.jsx(VC,{})}));
