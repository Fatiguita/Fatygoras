(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ef(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tf={exports:{}},Ki={},nf={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ao=Symbol.for("react.element"),fm=Symbol.for("react.portal"),pm=Symbol.for("react.fragment"),hm=Symbol.for("react.strict_mode"),mm=Symbol.for("react.profiler"),gm=Symbol.for("react.provider"),ym=Symbol.for("react.context"),vm=Symbol.for("react.forward_ref"),_m=Symbol.for("react.suspense"),Sm=Symbol.for("react.memo"),wm=Symbol.for("react.lazy"),lu=Symbol.iterator;function xm(t){return t===null||typeof t!="object"?null:(t=lu&&t[lu]||t["@@iterator"],typeof t=="function"?t:null)}var rf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},of=Object.assign,sf={};function Pr(t,e,n){this.props=t,this.context=e,this.refs=sf,this.updater=n||rf}Pr.prototype.isReactComponent={};Pr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lf(){}lf.prototype=Pr.prototype;function ra(t,e,n){this.props=t,this.context=e,this.refs=sf,this.updater=n||rf}var oa=ra.prototype=new lf;oa.constructor=ra;of(oa,Pr.prototype);oa.isPureReactComponent=!0;var au=Array.isArray,af=Object.prototype.hasOwnProperty,ia={current:null},uf={key:!0,ref:!0,__self:!0,__source:!0};function cf(t,e,n){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)af.call(e,r)&&!uf.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];o.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:Ao,type:t,key:i,ref:s,props:o,_owner:ia.current}}function Em(t,e){return{$$typeof:Ao,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sa(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ao}function Cm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var uu=/\/+/g;function _s(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cm(""+t.key):e.toString(36)}function ii(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ao:case fm:s=!0}}if(s)return s=t,o=o(s),t=r===""?"."+_s(s,0):r,au(o)?(n="",t!=null&&(n=t.replace(uu,"$&/")+"/"),ii(o,e,n,"",function(d){return d})):o!=null&&(sa(o)&&(o=Em(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(uu,"$&/")+"/")+t)),e.push(o)),1;if(s=0,r=r===""?".":r+":",au(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+_s(i,l);s+=ii(i,e,n,u,o)}else if(u=xm(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+_s(i,l++),s+=ii(i,e,n,u,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Uo(t,e,n){if(t==null)return t;var r=[],o=0;return ii(t,r,"","",function(i){return e.call(n,i,o++)}),r}function Tm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ut={current:null},si={transition:null},Im={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:si,ReactCurrentOwner:ia};function df(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Uo,forEach:function(t,e,n){Uo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Uo(t,function(){e++}),e},toArray:function(t){return Uo(t,function(e){return e})||[]},only:function(t){if(!sa(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Pr;ve.Fragment=pm;ve.Profiler=mm;ve.PureComponent=ra;ve.StrictMode=hm;ve.Suspense=_m;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Im;ve.act=df;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=of({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=ia.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)af.call(e,u)&&!uf.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ao,type:t.type,key:o,ref:i,props:r,_owner:s}};ve.createContext=function(t){return t={$$typeof:ym,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gm,_context:t},t.Consumer=t};ve.createElement=cf;ve.createFactory=function(t){var e=cf.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:vm,render:t}};ve.isValidElement=sa;ve.lazy=function(t){return{$$typeof:wm,_payload:{_status:-1,_result:t},_init:Tm}};ve.memo=function(t,e){return{$$typeof:Sm,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=si.transition;si.transition={};try{t()}finally{si.transition=e}};ve.unstable_act=df;ve.useCallback=function(t,e){return ut.current.useCallback(t,e)};ve.useContext=function(t){return ut.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return ut.current.useDeferredValue(t)};ve.useEffect=function(t,e){return ut.current.useEffect(t,e)};ve.useId=function(){return ut.current.useId()};ve.useImperativeHandle=function(t,e,n){return ut.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return ut.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return ut.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return ut.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return ut.current.useReducer(t,e,n)};ve.useRef=function(t){return ut.current.useRef(t)};ve.useState=function(t){return ut.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return ut.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return ut.current.useTransition()};ve.version="18.3.1";nf.exports=ve;var te=nf.exports;const Ys=ef(te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km=te,Am=Symbol.for("react.element"),Nm=Symbol.for("react.fragment"),Rm=Object.prototype.hasOwnProperty,Pm=km.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mm={key:!0,ref:!0,__self:!0,__source:!0};function ff(t,e,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Rm.call(e,r)&&!Mm.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:Am,type:t,key:i,ref:s,props:o,_owner:Pm.current}}Ki.Fragment=Nm;Ki.jsx=ff;Ki.jsxs=ff;tf.exports=Ki;var E=tf.exports,Ks={},pf={exports:{}},wt={},hf={exports:{}},mf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,O){var W=Y.length;Y.push(O);e:for(;0<W;){var B=W-1>>>1,M=Y[B];if(0<o(M,O))Y[B]=O,Y[W]=M,W=B;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var O=Y[0],W=Y.pop();if(W!==O){Y[0]=W;e:for(var B=0,M=Y.length,ne=M>>>1;B<ne;){var j=2*(B+1)-1,ee=Y[j],pe=j+1,ye=Y[pe];if(0>o(ee,W))pe<M&&0>o(ye,ee)?(Y[B]=ye,Y[pe]=W,B=pe):(Y[B]=ee,Y[j]=W,B=j);else if(pe<M&&0>o(ye,W))Y[B]=ye,Y[pe]=W,B=pe;else break e}}return O}function o(Y,O){var W=Y.sortIndex-O.sortIndex;return W!==0?W:Y.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],d=[],f=1,p=null,h=3,m=!1,_=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Y){for(var O=n(d);O!==null;){if(O.callback===null)r(d);else if(O.startTime<=Y)r(d),O.sortIndex=O.expirationTime,e(u,O);else break;O=n(d)}}function T(Y){if(y=!1,w(Y),!_)if(n(u)!==null)_=!0,se(I);else{var O=n(d);O!==null&&X(T,O.startTime-Y)}}function I(Y,O){_=!1,y&&(y=!1,g(F),F=-1),m=!0;var W=h;try{for(w(O),p=n(u);p!==null&&(!(p.expirationTime>O)||Y&&!J());){var B=p.callback;if(typeof B=="function"){p.callback=null,h=p.priorityLevel;var M=B(p.expirationTime<=O);O=t.unstable_now(),typeof M=="function"?p.callback=M:p===n(u)&&r(u),w(O)}else r(u);p=n(u)}if(p!==null)var ne=!0;else{var j=n(d);j!==null&&X(T,j.startTime-O),ne=!1}return ne}finally{p=null,h=W,m=!1}}var D=!1,R=null,F=-1,b=5,V=-1;function J(){return!(t.unstable_now()-V<b)}function N(){if(R!==null){var Y=t.unstable_now();V=Y;var O=!0;try{O=R(!0,Y)}finally{O?z():(D=!1,R=null)}}else D=!1}var z;if(typeof v=="function")z=function(){v(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,q=C.port2;C.port1.onmessage=N,z=function(){q.postMessage(null)}}else z=function(){x(N,0)};function se(Y){R=Y,D||(D=!0,z())}function X(Y,O){F=x(function(){Y(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,se(I))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var W=h;h=O;try{return Y()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,O){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var W=h;h=Y;try{return O()}finally{h=W}},t.unstable_scheduleCallback=function(Y,O,W){var B=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?B+W:B):W=B,Y){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=W+M,Y={id:f++,callback:O,priorityLevel:Y,startTime:W,expirationTime:M,sortIndex:-1},W>B?(Y.sortIndex=W,e(d,Y),n(u)===null&&Y===n(d)&&(y?(g(F),F=-1):y=!0,X(T,W-B))):(Y.sortIndex=M,e(u,Y),_||m||(_=!0,se(I))),Y},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(Y){var O=h;return function(){var W=h;h=O;try{return Y.apply(this,arguments)}finally{h=W}}}})(mf);hf.exports=mf;var Dm=hf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm=te,St=Dm;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gf=new Set,co={};function Yn(t,e){Cr(t,e),Cr(t+"Capture",e)}function Cr(t,e){for(co[t]=e,t=0;t<e.length;t++)gf.add(e[t])}var tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xs=Object.prototype.hasOwnProperty,Lm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cu={},du={};function Um(t){return Xs.call(du,t)?!0:Xs.call(cu,t)?!1:Lm.test(t)?du[t]=!0:(cu[t]=!0,!1)}function Fm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Bm(t,e,n,r){if(e===null||typeof e>"u"||Fm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ct(t,e,n,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var la=/[\-:]([a-z])/g;function aa(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(la,aa);Xe[e]=new ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(la,aa);Xe[e]=new ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(la,aa);Xe[e]=new ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new ct(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function ua(t,e,n,r){var o=Xe.hasOwnProperty(e)?Xe[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bm(e,n,o,r)&&(n=null),r||o===null?Um(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ln=bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fo=Symbol.for("react.element"),er=Symbol.for("react.portal"),tr=Symbol.for("react.fragment"),ca=Symbol.for("react.strict_mode"),Qs=Symbol.for("react.profiler"),yf=Symbol.for("react.provider"),vf=Symbol.for("react.context"),da=Symbol.for("react.forward_ref"),Zs=Symbol.for("react.suspense"),js=Symbol.for("react.suspense_list"),fa=Symbol.for("react.memo"),fn=Symbol.for("react.lazy"),_f=Symbol.for("react.offscreen"),fu=Symbol.iterator;function zr(t){return t===null||typeof t!="object"?null:(t=fu&&t[fu]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Ss;function Kr(t){if(Ss===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ss=e&&e[1]||""}return`
`+Ss+t}var ws=!1;function xs(t,e){if(!t||ws)return"";ws=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,l=i.length-1;1<=s&&0<=l&&o[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(o[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||o[s]!==i[l]){var u=`
`+o[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{ws=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Kr(t):""}function zm(t){switch(t.tag){case 5:return Kr(t.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 2:case 15:return t=xs(t.type,!1),t;case 11:return t=xs(t.type.render,!1),t;case 1:return t=xs(t.type,!0),t;default:return""}}function el(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case tr:return"Fragment";case er:return"Portal";case Qs:return"Profiler";case ca:return"StrictMode";case Zs:return"Suspense";case js:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vf:return(t.displayName||"Context")+".Consumer";case yf:return(t._context.displayName||"Context")+".Provider";case da:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fa:return e=t.displayName||null,e!==null?e:el(t.type)||"Memo";case fn:e=t._payload,t=t._init;try{return el(t(e))}catch{}}return null}function Vm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return el(e);case 8:return e===ca?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function In(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Gm(t){var e=Sf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bo(t){t._valueTracker||(t._valueTracker=Gm(t))}function wf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _i(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tl(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pu(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=In(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xf(t,e){e=e.checked,e!=null&&ua(t,"checked",e,!1)}function nl(t,e){xf(t,e);var n=In(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rl(t,e.type,n):e.hasOwnProperty("defaultValue")&&rl(t,e.type,In(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rl(t,e,n){(e!=="number"||_i(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xr=Array.isArray;function gr(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+In(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function ol(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Xr(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:In(n)}}function Ef(t,e){var n=In(e.value),r=In(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function il(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zo,Tf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zo=zo||document.createElement("div"),zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hm=["Webkit","ms","Moz","O"];Object.keys(eo).forEach(function(t){Hm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eo[e]=eo[t]})});function If(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eo.hasOwnProperty(t)&&eo[t]?(""+e).trim():e+"px"}function kf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=If(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Om=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sl(t,e){if(e){if(Om[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function ll(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var al=null;function pa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ul=null,yr=null,vr=null;function yu(t){if(t=Po(t)){if(typeof ul!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=es(e),ul(t.stateNode,t.type,e))}}function Af(t){yr?vr?vr.push(t):vr=[t]:yr=t}function Nf(){if(yr){var t=yr,e=vr;if(vr=yr=null,yu(t),e)for(t=0;t<e.length;t++)yu(e[t])}}function Rf(t,e){return t(e)}function Pf(){}var Es=!1;function Mf(t,e,n){if(Es)return t(e,n);Es=!0;try{return Rf(t,e,n)}finally{Es=!1,(yr!==null||vr!==null)&&(Pf(),Nf())}}function po(t,e){var n=t.stateNode;if(n===null)return null;var r=es(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var cl=!1;if(tn)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){cl=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{cl=!1}function qm(t,e,n,r,o,i,s,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var to=!1,Si=null,wi=!1,dl=null,$m={onError:function(t){to=!0,Si=t}};function Wm(t,e,n,r,o,i,s,l,u){to=!1,Si=null,qm.apply($m,arguments)}function Jm(t,e,n,r,o,i,s,l,u){if(Wm.apply(this,arguments),to){if(to){var d=Si;to=!1,Si=null}else throw Error(oe(198));wi||(wi=!0,dl=d)}}function Kn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Df(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vu(t){if(Kn(t)!==t)throw Error(oe(188))}function Ym(t){var e=t.alternate;if(!e){if(e=Kn(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return vu(o),t;if(i===r)return vu(o),e;i=i.sibling}throw Error(oe(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function bf(t){return t=Ym(t),t!==null?Lf(t):null}function Lf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lf(t);if(e!==null)return e;t=t.sibling}return null}var Uf=St.unstable_scheduleCallback,_u=St.unstable_cancelCallback,Km=St.unstable_shouldYield,Xm=St.unstable_requestPaint,Be=St.unstable_now,Qm=St.unstable_getCurrentPriorityLevel,ha=St.unstable_ImmediatePriority,Ff=St.unstable_UserBlockingPriority,xi=St.unstable_NormalPriority,Zm=St.unstable_LowPriority,Bf=St.unstable_IdlePriority,Xi=null,Yt=null;function jm(t){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Xi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:ng,eg=Math.log,tg=Math.LN2;function ng(t){return t>>>=0,t===0?32:31-(eg(t)/tg|0)|0}var Vo=64,Go=4194304;function Qr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ei(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~o;l!==0?r=Qr(l):(i&=s,i!==0&&(r=Qr(i)))}else s=n&~o,s!==0?r=Qr(s):i!==0&&(r=Qr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ft(e),o=1<<n,r|=t[n],e&=~o;return r}function rg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function og(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Ft(i),l=1<<s,u=o[s];u===-1?(!(l&n)||l&r)&&(o[s]=rg(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function fl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zf(){var t=Vo;return Vo<<=1,!(Vo&4194240)&&(Vo=64),t}function Cs(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function No(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ft(e),t[e]=n}function ig(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Ft(n),i=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~i}}function ma(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ft(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var we=0;function Vf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gf,ga,Hf,Of,qf,pl=!1,Ho=[],vn=null,_n=null,Sn=null,ho=new Map,mo=new Map,hn=[],sg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Su(t,e){switch(t){case"focusin":case"focusout":vn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(e.pointerId)}}function Gr(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=Po(e),e!==null&&ga(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function lg(t,e,n,r,o){switch(e){case"focusin":return vn=Gr(vn,t,e,n,r,o),!0;case"dragenter":return _n=Gr(_n,t,e,n,r,o),!0;case"mouseover":return Sn=Gr(Sn,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return ho.set(i,Gr(ho.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,mo.set(i,Gr(mo.get(i)||null,t,e,n,r,o)),!0}return!1}function $f(t){var e=Bn(t.target);if(e!==null){var n=Kn(e);if(n!==null){if(e=n.tag,e===13){if(e=Df(n),e!==null){t.blockedOn=e,qf(t.priority,function(){Hf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function li(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);al=r,n.target.dispatchEvent(r),al=null}else return e=Po(n),e!==null&&ga(e),t.blockedOn=n,!1;e.shift()}return!0}function wu(t,e,n){li(t)&&n.delete(e)}function ag(){pl=!1,vn!==null&&li(vn)&&(vn=null),_n!==null&&li(_n)&&(_n=null),Sn!==null&&li(Sn)&&(Sn=null),ho.forEach(wu),mo.forEach(wu)}function Hr(t,e){t.blockedOn===e&&(t.blockedOn=null,pl||(pl=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,ag)))}function go(t){function e(o){return Hr(o,t)}if(0<Ho.length){Hr(Ho[0],t);for(var n=1;n<Ho.length;n++){var r=Ho[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vn!==null&&Hr(vn,t),_n!==null&&Hr(_n,t),Sn!==null&&Hr(Sn,t),ho.forEach(e),mo.forEach(e),n=0;n<hn.length;n++)r=hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hn.length&&(n=hn[0],n.blockedOn===null);)$f(n),n.blockedOn===null&&hn.shift()}var _r=ln.ReactCurrentBatchConfig,Ci=!0;function ug(t,e,n,r){var o=we,i=_r.transition;_r.transition=null;try{we=1,ya(t,e,n,r)}finally{we=o,_r.transition=i}}function cg(t,e,n,r){var o=we,i=_r.transition;_r.transition=null;try{we=4,ya(t,e,n,r)}finally{we=o,_r.transition=i}}function ya(t,e,n,r){if(Ci){var o=hl(t,e,n,r);if(o===null)bs(t,e,r,Ti,n),Su(t,r);else if(lg(o,t,e,n,r))r.stopPropagation();else if(Su(t,r),e&4&&-1<sg.indexOf(t)){for(;o!==null;){var i=Po(o);if(i!==null&&Gf(i),i=hl(t,e,n,r),i===null&&bs(t,e,r,Ti,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else bs(t,e,r,null,n)}}var Ti=null;function hl(t,e,n,r){if(Ti=null,t=pa(r),t=Bn(t),t!==null)if(e=Kn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Df(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ti=t,null}function Wf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qm()){case ha:return 1;case Ff:return 4;case xi:case Zm:return 16;case Bf:return 536870912;default:return 16}default:return 16}}var gn=null,va=null,ai=null;function Jf(){if(ai)return ai;var t,e=va,n=e.length,r,o="value"in gn?gn.value:gn.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===o[i-r];r++);return ai=o.slice(t,1<r?1-r:void 0)}function ui(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oo(){return!0}function xu(){return!1}function xt(t){function e(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oo:xu,this.isPropagationStopped=xu,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),e}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_a=xt(Mr),Ro=Le({},Mr,{view:0,detail:0}),dg=xt(Ro),Ts,Is,Or,Qi=Le({},Ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Or&&(Or&&t.type==="mousemove"?(Ts=t.screenX-Or.screenX,Is=t.screenY-Or.screenY):Is=Ts=0,Or=t),Ts)},movementY:function(t){return"movementY"in t?t.movementY:Is}}),Eu=xt(Qi),fg=Le({},Qi,{dataTransfer:0}),pg=xt(fg),hg=Le({},Ro,{relatedTarget:0}),ks=xt(hg),mg=Le({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),gg=xt(mg),yg=Le({},Mr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vg=xt(yg),_g=Le({},Mr,{data:0}),Cu=xt(_g),Sg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xg[t])?!!e[t]:!1}function Sa(){return Eg}var Cg=Le({},Ro,{key:function(t){if(t.key){var e=Sg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ui(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sa,charCode:function(t){return t.type==="keypress"?ui(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ui(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tg=xt(Cg),Ig=Le({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tu=xt(Ig),kg=Le({},Ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sa}),Ag=xt(kg),Ng=Le({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rg=xt(Ng),Pg=Le({},Qi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mg=xt(Pg),Dg=[9,13,27,32],wa=tn&&"CompositionEvent"in window,no=null;tn&&"documentMode"in document&&(no=document.documentMode);var bg=tn&&"TextEvent"in window&&!no,Yf=tn&&(!wa||no&&8<no&&11>=no),Iu=" ",ku=!1;function Kf(t,e){switch(t){case"keyup":return Dg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var nr=!1;function Lg(t,e){switch(t){case"compositionend":return Xf(e);case"keypress":return e.which!==32?null:(ku=!0,Iu);case"textInput":return t=e.data,t===Iu&&ku?null:t;default:return null}}function Ug(t,e){if(nr)return t==="compositionend"||!wa&&Kf(t,e)?(t=Jf(),ai=va=gn=null,nr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yf&&e.locale!=="ko"?null:e.data;default:return null}}var Fg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Au(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Fg[t.type]:e==="textarea"}function Qf(t,e,n,r){Af(r),e=Ii(e,"onChange"),0<e.length&&(n=new _a("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ro=null,yo=null;function Bg(t){ap(t,0)}function Zi(t){var e=ir(t);if(wf(e))return t}function zg(t,e){if(t==="change")return e}var Zf=!1;if(tn){var As;if(tn){var Ns="oninput"in document;if(!Ns){var Nu=document.createElement("div");Nu.setAttribute("oninput","return;"),Ns=typeof Nu.oninput=="function"}As=Ns}else As=!1;Zf=As&&(!document.documentMode||9<document.documentMode)}function Ru(){ro&&(ro.detachEvent("onpropertychange",jf),yo=ro=null)}function jf(t){if(t.propertyName==="value"&&Zi(yo)){var e=[];Qf(e,yo,t,pa(t)),Mf(Bg,e)}}function Vg(t,e,n){t==="focusin"?(Ru(),ro=e,yo=n,ro.attachEvent("onpropertychange",jf)):t==="focusout"&&Ru()}function Gg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zi(yo)}function Hg(t,e){if(t==="click")return Zi(e)}function Og(t,e){if(t==="input"||t==="change")return Zi(e)}function qg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gt=typeof Object.is=="function"?Object.is:qg;function vo(t,e){if(Gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Xs.call(e,o)||!Gt(t[o],e[o]))return!1}return!0}function Pu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mu(t,e){var n=Pu(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pu(n)}}function ep(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ep(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tp(){for(var t=window,e=_i();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_i(t.document)}return e}function xa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $g(t){var e=tp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ep(n.ownerDocument.documentElement,n)){if(r!==null&&xa(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!t.extend&&i>r&&(o=r,r=i,i=o),o=Mu(n,i);var s=Mu(n,r);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Wg=tn&&"documentMode"in document&&11>=document.documentMode,rr=null,ml=null,oo=null,gl=!1;function Du(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gl||rr==null||rr!==_i(r)||(r=rr,"selectionStart"in r&&xa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oo&&vo(oo,r)||(oo=r,r=Ii(ml,"onSelect"),0<r.length&&(e=new _a("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rr)))}function qo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var or={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionend:qo("Transition","TransitionEnd")},Rs={},np={};tn&&(np=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function ji(t){if(Rs[t])return Rs[t];if(!or[t])return t;var e=or[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in np)return Rs[t]=e[n];return t}var rp=ji("animationend"),op=ji("animationiteration"),ip=ji("animationstart"),sp=ji("transitionend"),lp=new Map,bu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(t,e){lp.set(t,e),Yn(e,[t])}for(var Ps=0;Ps<bu.length;Ps++){var Ms=bu[Ps],Jg=Ms.toLowerCase(),Yg=Ms[0].toUpperCase()+Ms.slice(1);An(Jg,"on"+Yg)}An(rp,"onAnimationEnd");An(op,"onAnimationIteration");An(ip,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(sp,"onTransitionEnd");Cr("onMouseEnter",["mouseout","mouseover"]);Cr("onMouseLeave",["mouseout","mouseover"]);Cr("onPointerEnter",["pointerout","pointerover"]);Cr("onPointerLeave",["pointerout","pointerover"]);Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zr));function Lu(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Jm(r,e,void 0,t),t.currentTarget=null}function ap(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&o.isPropagationStopped())break e;Lu(o,l,d),i=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&o.isPropagationStopped())break e;Lu(o,l,d),i=u}}}if(wi)throw t=dl,wi=!1,dl=null,t}function Ie(t,e){var n=e[wl];n===void 0&&(n=e[wl]=new Set);var r=t+"__bubble";n.has(r)||(up(e,t,2,!1),n.add(r))}function Ds(t,e,n){var r=0;e&&(r|=4),up(n,t,r,e)}var $o="_reactListening"+Math.random().toString(36).slice(2);function _o(t){if(!t[$o]){t[$o]=!0,gf.forEach(function(n){n!=="selectionchange"&&(Kg.has(n)||Ds(n,!1,t),Ds(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$o]||(e[$o]=!0,Ds("selectionchange",!1,e))}}function up(t,e,n,r){switch(Wf(e)){case 1:var o=ug;break;case 4:o=cg;break;default:o=ya}n=o.bind(null,e,n,t),o=void 0,!cl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function bs(t,e,n,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;s=s.return}for(;l!==null;){if(s=Bn(l),s===null)return;if(u=s.tag,u===5||u===6){r=i=s;continue e}l=l.parentNode}}r=r.return}Mf(function(){var d=i,f=pa(n),p=[];e:{var h=lp.get(t);if(h!==void 0){var m=_a,_=t;switch(t){case"keypress":if(ui(n)===0)break e;case"keydown":case"keyup":m=Tg;break;case"focusin":_="focus",m=ks;break;case"focusout":_="blur",m=ks;break;case"beforeblur":case"afterblur":m=ks;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=pg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Ag;break;case rp:case op:case ip:m=gg;break;case sp:m=Rg;break;case"scroll":m=dg;break;case"wheel":m=Mg;break;case"copy":case"cut":case"paste":m=vg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Tu}var y=(e&4)!==0,x=!y&&t==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var v=d,w;v!==null;){w=v;var T=w.stateNode;if(w.tag===5&&T!==null&&(w=T,g!==null&&(T=po(v,g),T!=null&&y.push(So(v,T,w)))),x)break;v=v.return}0<y.length&&(h=new m(h,_,null,n,f),p.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==al&&(_=n.relatedTarget||n.fromElement)&&(Bn(_)||_[nn]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=d,_=_?Bn(_):null,_!==null&&(x=Kn(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=d),m!==_)){if(y=Eu,T="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=Tu,T="onPointerLeave",g="onPointerEnter",v="pointer"),x=m==null?h:ir(m),w=_==null?h:ir(_),h=new y(T,v+"leave",m,n,f),h.target=x,h.relatedTarget=w,T=null,Bn(f)===d&&(y=new y(g,v+"enter",_,n,f),y.target=w,y.relatedTarget=x,T=y),x=T,m&&_)t:{for(y=m,g=_,v=0,w=y;w;w=Zn(w))v++;for(w=0,T=g;T;T=Zn(T))w++;for(;0<v-w;)y=Zn(y),v--;for(;0<w-v;)g=Zn(g),w--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=Zn(y),g=Zn(g)}y=null}else y=null;m!==null&&Uu(p,h,m,y,!1),_!==null&&x!==null&&Uu(p,x,_,y,!0)}}e:{if(h=d?ir(d):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var I=zg;else if(Au(h))if(Zf)I=Og;else{I=Gg;var D=Vg}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=Hg);if(I&&(I=I(t,d))){Qf(p,I,n,f);break e}D&&D(t,h,d),t==="focusout"&&(D=h._wrapperState)&&D.controlled&&h.type==="number"&&rl(h,"number",h.value)}switch(D=d?ir(d):window,t){case"focusin":(Au(D)||D.contentEditable==="true")&&(rr=D,ml=d,oo=null);break;case"focusout":oo=ml=rr=null;break;case"mousedown":gl=!0;break;case"contextmenu":case"mouseup":case"dragend":gl=!1,Du(p,n,f);break;case"selectionchange":if(Wg)break;case"keydown":case"keyup":Du(p,n,f)}var R;if(wa)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else nr?Kf(t,n)&&(F="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(Yf&&n.locale!=="ko"&&(nr||F!=="onCompositionStart"?F==="onCompositionEnd"&&nr&&(R=Jf()):(gn=f,va="value"in gn?gn.value:gn.textContent,nr=!0)),D=Ii(d,F),0<D.length&&(F=new Cu(F,t,null,n,f),p.push({event:F,listeners:D}),R?F.data=R:(R=Xf(n),R!==null&&(F.data=R)))),(R=bg?Lg(t,n):Ug(t,n))&&(d=Ii(d,"onBeforeInput"),0<d.length&&(f=new Cu("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=R))}ap(p,e)})}function So(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ii(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=po(t,n),i!=null&&r.unshift(So(t,i,o)),i=po(t,e),i!=null&&r.push(So(t,i,o))),t=t.return}return r}function Zn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Uu(t,e,n,r,o){for(var i=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,o?(u=po(n,i),u!=null&&s.unshift(So(n,u,l))):o||(u=po(n,i),u!=null&&s.push(So(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Xg=/\r\n?/g,Qg=/\u0000|\uFFFD/g;function Fu(t){return(typeof t=="string"?t:""+t).replace(Xg,`
`).replace(Qg,"")}function Wo(t,e,n){if(e=Fu(e),Fu(t)!==e&&n)throw Error(oe(425))}function ki(){}var yl=null,vl=null;function _l(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sl=typeof setTimeout=="function"?setTimeout:void 0,Zg=typeof clearTimeout=="function"?clearTimeout:void 0,Bu=typeof Promise=="function"?Promise:void 0,jg=typeof queueMicrotask=="function"?queueMicrotask:typeof Bu<"u"?function(t){return Bu.resolve(null).then(t).catch(e0)}:Sl;function e0(t){setTimeout(function(){throw t})}function Ls(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),go(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);go(e)}function wn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Dr=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Dr,wo="__reactProps$"+Dr,nn="__reactContainer$"+Dr,wl="__reactEvents$"+Dr,t0="__reactListeners$"+Dr,n0="__reactHandles$"+Dr;function Bn(t){var e=t[Jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nn]||n[Jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zu(t);t!==null;){if(n=t[Jt])return n;t=zu(t)}return e}t=n,n=t.parentNode}return null}function Po(t){return t=t[Jt]||t[nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ir(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function es(t){return t[wo]||null}var xl=[],sr=-1;function Nn(t){return{current:t}}function ke(t){0>sr||(t.current=xl[sr],xl[sr]=null,sr--)}function Te(t,e){sr++,xl[sr]=t.current,t.current=e}var kn={},tt=Nn(kn),pt=Nn(!1),On=kn;function Tr(t,e){var n=t.type.contextTypes;if(!n)return kn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function ht(t){return t=t.childContextTypes,t!=null}function Ai(){ke(pt),ke(tt)}function Vu(t,e,n){if(tt.current!==kn)throw Error(oe(168));Te(tt,e),Te(pt,n)}function cp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(oe(108,Vm(t)||"Unknown",o));return Le({},n,r)}function Ni(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kn,On=tt.current,Te(tt,t),Te(pt,pt.current),!0}function Gu(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=cp(t,e,On),r.__reactInternalMemoizedMergedChildContext=t,ke(pt),ke(tt),Te(tt,t)):ke(pt),Te(pt,n)}var Qt=null,ts=!1,Us=!1;function dp(t){Qt===null?Qt=[t]:Qt.push(t)}function r0(t){ts=!0,dp(t)}function Rn(){if(!Us&&Qt!==null){Us=!0;var t=0,e=we;try{var n=Qt;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qt=null,ts=!1}catch(o){throw Qt!==null&&(Qt=Qt.slice(t+1)),Uf(ha,Rn),o}finally{we=e,Us=!1}}return null}var lr=[],ar=0,Ri=null,Pi=0,Et=[],Ct=0,qn=null,Zt=1,jt="";function Ln(t,e){lr[ar++]=Pi,lr[ar++]=Ri,Ri=t,Pi=e}function fp(t,e,n){Et[Ct++]=Zt,Et[Ct++]=jt,Et[Ct++]=qn,qn=t;var r=Zt;t=jt;var o=32-Ft(r)-1;r&=~(1<<o),n+=1;var i=32-Ft(e)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Zt=1<<32-Ft(e)+o|n<<o|r,jt=i+t}else Zt=1<<i|n<<o|r,jt=t}function Ea(t){t.return!==null&&(Ln(t,1),fp(t,1,0))}function Ca(t){for(;t===Ri;)Ri=lr[--ar],lr[ar]=null,Pi=lr[--ar],lr[ar]=null;for(;t===qn;)qn=Et[--Ct],Et[Ct]=null,jt=Et[--Ct],Et[Ct]=null,Zt=Et[--Ct],Et[Ct]=null}var _t=null,vt=null,Re=!1,Ut=null;function pp(t,e){var n=It(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_t=t,vt=wn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_t=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qn!==null?{id:Zt,overflow:jt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=It(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_t=t,vt=null,!0):!1;default:return!1}}function El(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cl(t){if(Re){var e=vt;if(e){var n=e;if(!Hu(t,e)){if(El(t))throw Error(oe(418));e=wn(n.nextSibling);var r=_t;e&&Hu(t,e)?pp(r,n):(t.flags=t.flags&-4097|2,Re=!1,_t=t)}}else{if(El(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Re=!1,_t=t}}}function Ou(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_t=t}function Jo(t){if(t!==_t)return!1;if(!Re)return Ou(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_l(t.type,t.memoizedProps)),e&&(e=vt)){if(El(t))throw hp(),Error(oe(418));for(;e;)pp(t,e),e=wn(e.nextSibling)}if(Ou(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=wn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=_t?wn(t.stateNode.nextSibling):null;return!0}function hp(){for(var t=vt;t;)t=wn(t.nextSibling)}function Ir(){vt=_t=null,Re=!1}function Ta(t){Ut===null?Ut=[t]:Ut.push(t)}var o0=ln.ReactCurrentBatchConfig;function qr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var o=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var l=o.refs;s===null?delete l[i]:l[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Yo(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qu(t){var e=t._init;return e(t._payload)}function mp(t){function e(g,v){if(t){var w=g.deletions;w===null?(g.deletions=[v],g.flags|=16):w.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function o(g,v){return g=Tn(g,v),g.index=0,g.sibling=null,g}function i(g,v,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<v?(g.flags|=2,v):w):(g.flags|=2,v)):(g.flags|=1048576,v)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,v,w,T){return v===null||v.tag!==6?(v=Os(w,g.mode,T),v.return=g,v):(v=o(v,w),v.return=g,v)}function u(g,v,w,T){var I=w.type;return I===tr?f(g,v,w.props.children,T,w.key):v!==null&&(v.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===fn&&qu(I)===v.type)?(T=o(v,w.props),T.ref=qr(g,v,w),T.return=g,T):(T=gi(w.type,w.key,w.props,null,g.mode,T),T.ref=qr(g,v,w),T.return=g,T)}function d(g,v,w,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=qs(w,g.mode,T),v.return=g,v):(v=o(v,w.children||[]),v.return=g,v)}function f(g,v,w,T,I){return v===null||v.tag!==7?(v=Hn(w,g.mode,T,I),v.return=g,v):(v=o(v,w),v.return=g,v)}function p(g,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Os(""+v,g.mode,w),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fo:return w=gi(v.type,v.key,v.props,null,g.mode,w),w.ref=qr(g,null,v),w.return=g,w;case er:return v=qs(v,g.mode,w),v.return=g,v;case fn:var T=v._init;return p(g,T(v._payload),w)}if(Xr(v)||zr(v))return v=Hn(v,g.mode,w,null),v.return=g,v;Yo(g,v)}return null}function h(g,v,w,T){var I=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return I!==null?null:l(g,v,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fo:return w.key===I?u(g,v,w,T):null;case er:return w.key===I?d(g,v,w,T):null;case fn:return I=w._init,h(g,v,I(w._payload),T)}if(Xr(w)||zr(w))return I!==null?null:f(g,v,w,T,null);Yo(g,w)}return null}function m(g,v,w,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(w)||null,l(v,g,""+T,I);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Fo:return g=g.get(T.key===null?w:T.key)||null,u(v,g,T,I);case er:return g=g.get(T.key===null?w:T.key)||null,d(v,g,T,I);case fn:var D=T._init;return m(g,v,w,D(T._payload),I)}if(Xr(T)||zr(T))return g=g.get(w)||null,f(v,g,T,I,null);Yo(v,T)}return null}function _(g,v,w,T){for(var I=null,D=null,R=v,F=v=0,b=null;R!==null&&F<w.length;F++){R.index>F?(b=R,R=null):b=R.sibling;var V=h(g,R,w[F],T);if(V===null){R===null&&(R=b);break}t&&R&&V.alternate===null&&e(g,R),v=i(V,v,F),D===null?I=V:D.sibling=V,D=V,R=b}if(F===w.length)return n(g,R),Re&&Ln(g,F),I;if(R===null){for(;F<w.length;F++)R=p(g,w[F],T),R!==null&&(v=i(R,v,F),D===null?I=R:D.sibling=R,D=R);return Re&&Ln(g,F),I}for(R=r(g,R);F<w.length;F++)b=m(R,g,F,w[F],T),b!==null&&(t&&b.alternate!==null&&R.delete(b.key===null?F:b.key),v=i(b,v,F),D===null?I=b:D.sibling=b,D=b);return t&&R.forEach(function(J){return e(g,J)}),Re&&Ln(g,F),I}function y(g,v,w,T){var I=zr(w);if(typeof I!="function")throw Error(oe(150));if(w=I.call(w),w==null)throw Error(oe(151));for(var D=I=null,R=v,F=v=0,b=null,V=w.next();R!==null&&!V.done;F++,V=w.next()){R.index>F?(b=R,R=null):b=R.sibling;var J=h(g,R,V.value,T);if(J===null){R===null&&(R=b);break}t&&R&&J.alternate===null&&e(g,R),v=i(J,v,F),D===null?I=J:D.sibling=J,D=J,R=b}if(V.done)return n(g,R),Re&&Ln(g,F),I;if(R===null){for(;!V.done;F++,V=w.next())V=p(g,V.value,T),V!==null&&(v=i(V,v,F),D===null?I=V:D.sibling=V,D=V);return Re&&Ln(g,F),I}for(R=r(g,R);!V.done;F++,V=w.next())V=m(R,g,F,V.value,T),V!==null&&(t&&V.alternate!==null&&R.delete(V.key===null?F:V.key),v=i(V,v,F),D===null?I=V:D.sibling=V,D=V);return t&&R.forEach(function(N){return e(g,N)}),Re&&Ln(g,F),I}function x(g,v,w,T){if(typeof w=="object"&&w!==null&&w.type===tr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Fo:e:{for(var I=w.key,D=v;D!==null;){if(D.key===I){if(I=w.type,I===tr){if(D.tag===7){n(g,D.sibling),v=o(D,w.props.children),v.return=g,g=v;break e}}else if(D.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===fn&&qu(I)===D.type){n(g,D.sibling),v=o(D,w.props),v.ref=qr(g,D,w),v.return=g,g=v;break e}n(g,D);break}else e(g,D);D=D.sibling}w.type===tr?(v=Hn(w.props.children,g.mode,T,w.key),v.return=g,g=v):(T=gi(w.type,w.key,w.props,null,g.mode,T),T.ref=qr(g,v,w),T.return=g,g=T)}return s(g);case er:e:{for(D=w.key;v!==null;){if(v.key===D)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(g,v.sibling),v=o(v,w.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=qs(w,g.mode,T),v.return=g,g=v}return s(g);case fn:return D=w._init,x(g,v,D(w._payload),T)}if(Xr(w))return _(g,v,w,T);if(zr(w))return y(g,v,w,T);Yo(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(g,v.sibling),v=o(v,w),v.return=g,g=v):(n(g,v),v=Os(w,g.mode,T),v.return=g,g=v),s(g)):n(g,v)}return x}var kr=mp(!0),gp=mp(!1),Mi=Nn(null),Di=null,ur=null,Ia=null;function ka(){Ia=ur=Di=null}function Aa(t){var e=Mi.current;ke(Mi),t._currentValue=e}function Tl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Sr(t,e){Di=t,Ia=ur=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ft=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(Ia!==t)if(t={context:t,memoizedValue:e,next:null},ur===null){if(Di===null)throw Error(oe(308));ur=t,Di.dependencies={lanes:0,firstContext:t}}else ur=ur.next=t;return e}var zn=null;function Na(t){zn===null?zn=[t]:zn.push(t)}function yp(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,Na(e)):(n.next=o.next,o.next=n),e.interleaved=n,rn(t,r)}function rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pn=!1;function Ra(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function en(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,rn(t,n)}return o=r.interleaved,o===null?(e.next=e,Na(r)):(e.next=o.next,o.next=e),r.interleaved=e,rn(t,n)}function ci(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ma(t,n)}}function $u(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bi(t,e,n,r){var o=t.updateQueue;pn=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var u=l,d=u.next;u.next=null,s===null?i=d:s.next=d,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=o.baseState;s=0,f=d=u=null,l=i;do{var h=l.lane,m=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,y=l;switch(h=e,m=n,y.tag){case 1:if(_=y.payload,typeof _=="function"){p=_.call(m,p,h);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,h=typeof _=="function"?_.call(m,p,h):_,h==null)break e;p=Le({},p,h);break e;case 2:pn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=m,u=p):f=f.next=m,s|=h;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(f===null&&(u=p),o.baseState=u,o.firstBaseUpdate=d,o.lastBaseUpdate=f,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);Wn|=s,t.lanes=s,t.memoizedState=p}}function Wu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(oe(191,o));o.call(r)}}}var Mo={},Kt=Nn(Mo),xo=Nn(Mo),Eo=Nn(Mo);function Vn(t){if(t===Mo)throw Error(oe(174));return t}function Pa(t,e){switch(Te(Eo,e),Te(xo,t),Te(Kt,Mo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:il(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=il(e,t)}ke(Kt),Te(Kt,e)}function Ar(){ke(Kt),ke(xo),ke(Eo)}function _p(t){Vn(Eo.current);var e=Vn(Kt.current),n=il(e,t.type);e!==n&&(Te(xo,t),Te(Kt,n))}function Ma(t){xo.current===t&&(ke(Kt),ke(xo))}var Me=Nn(0);function Li(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fs=[];function Da(){for(var t=0;t<Fs.length;t++)Fs[t]._workInProgressVersionPrimary=null;Fs.length=0}var di=ln.ReactCurrentDispatcher,Bs=ln.ReactCurrentBatchConfig,$n=0,be=null,Ge=null,Oe=null,Ui=!1,io=!1,Co=0,i0=0;function Qe(){throw Error(oe(321))}function ba(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gt(t[n],e[n]))return!1;return!0}function La(t,e,n,r,o,i){if($n=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,di.current=t===null||t.memoizedState===null?u0:c0,t=n(r,o),io){i=0;do{if(io=!1,Co=0,25<=i)throw Error(oe(301));i+=1,Oe=Ge=null,e.updateQueue=null,di.current=d0,t=n(r,o)}while(io)}if(di.current=Fi,e=Ge!==null&&Ge.next!==null,$n=0,Oe=Ge=be=null,Ui=!1,e)throw Error(oe(300));return t}function Ua(){var t=Co!==0;return Co=0,t}function Wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?be.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function Rt(){if(Ge===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Oe===null?be.memoizedState:Oe.next;if(e!==null)Oe=e,Ge=t;else{if(t===null)throw Error(oe(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Oe===null?be.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function To(t,e){return typeof e=="function"?e(t):e}function zs(t){var e=Rt(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=Ge,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var l=s=null,u=null,d=i;do{var f=d.lane;if(($n&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,be.lanes|=f,Wn|=f}d=d.next}while(d!==null&&d!==i);u===null?s=r:u.next=l,Gt(r,e.memoizedState)||(ft=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do i=o.lane,be.lanes|=i,Wn|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vs(t){var e=Rt(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);Gt(i,e.memoizedState)||(ft=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Sp(){}function wp(t,e){var n=be,r=Rt(),o=e(),i=!Gt(r.memoizedState,o);if(i&&(r.memoizedState=o,ft=!0),r=r.queue,Fa(Cp.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,Io(9,Ep.bind(null,n,r,o,e),void 0,null),qe===null)throw Error(oe(349));$n&30||xp(n,e,o)}return o}function xp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ep(t,e,n,r){e.value=n,e.getSnapshot=r,Tp(e)&&Ip(t)}function Cp(t,e,n){return n(function(){Tp(e)&&Ip(t)})}function Tp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gt(t,n)}catch{return!0}}function Ip(t){var e=rn(t,1);e!==null&&Bt(e,t,1,-1)}function Ju(t){var e=Wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:t},e.queue=t,t=t.dispatch=a0.bind(null,be,t),[e.memoizedState,t]}function Io(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kp(){return Rt().memoizedState}function fi(t,e,n,r){var o=Wt();be.flags|=t,o.memoizedState=Io(1|e,n,void 0,r===void 0?null:r)}function ns(t,e,n,r){var o=Rt();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var s=Ge.memoizedState;if(i=s.destroy,r!==null&&ba(r,s.deps)){o.memoizedState=Io(e,n,i,r);return}}be.flags|=t,o.memoizedState=Io(1|e,n,i,r)}function Yu(t,e){return fi(8390656,8,t,e)}function Fa(t,e){return ns(2048,8,t,e)}function Ap(t,e){return ns(4,2,t,e)}function Np(t,e){return ns(4,4,t,e)}function Rp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pp(t,e,n){return n=n!=null?n.concat([t]):null,ns(4,4,Rp.bind(null,e,t),n)}function Ba(){}function Mp(t,e){var n=Rt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ba(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Dp(t,e){var n=Rt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ba(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bp(t,e,n){return $n&21?(Gt(n,e)||(n=zf(),be.lanes|=n,Wn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ft=!0),t.memoizedState=n)}function s0(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Bs.transition;Bs.transition={};try{t(!1),e()}finally{we=n,Bs.transition=r}}function Lp(){return Rt().memoizedState}function l0(t,e,n){var r=Cn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Up(t))Fp(e,n);else if(n=yp(t,e,n,r),n!==null){var o=lt();Bt(n,t,r,o),Bp(n,e,r)}}function a0(t,e,n){var r=Cn(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Up(t))Fp(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,l=i(s,n);if(o.hasEagerState=!0,o.eagerState=l,Gt(l,s)){var u=e.interleaved;u===null?(o.next=o,Na(e)):(o.next=u.next,u.next=o),e.interleaved=o;return}}catch{}finally{}n=yp(t,e,o,r),n!==null&&(o=lt(),Bt(n,t,r,o),Bp(n,e,r))}}function Up(t){var e=t.alternate;return t===be||e!==null&&e===be}function Fp(t,e){io=Ui=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ma(t,n)}}var Fi={readContext:Nt,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},u0={readContext:Nt,useCallback:function(t,e){return Wt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:Yu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fi(4194308,4,Rp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fi(4194308,4,t,e)},useInsertionEffect:function(t,e){return fi(4,2,t,e)},useMemo:function(t,e){var n=Wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=l0.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=Wt();return t={current:t},e.memoizedState=t},useState:Ju,useDebugValue:Ba,useDeferredValue:function(t){return Wt().memoizedState=t},useTransition:function(){var t=Ju(!1),e=t[0];return t=s0.bind(null,t[1]),Wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,o=Wt();if(Re){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),qe===null)throw Error(oe(349));$n&30||xp(r,e,n)}o.memoizedState=n;var i={value:n,getSnapshot:e};return o.queue=i,Yu(Cp.bind(null,r,i,t),[t]),r.flags|=2048,Io(9,Ep.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wt(),e=qe.identifierPrefix;if(Re){var n=jt,r=Zt;n=(r&~(1<<32-Ft(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Co++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=i0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},c0={readContext:Nt,useCallback:Mp,useContext:Nt,useEffect:Fa,useImperativeHandle:Pp,useInsertionEffect:Ap,useLayoutEffect:Np,useMemo:Dp,useReducer:zs,useRef:kp,useState:function(){return zs(To)},useDebugValue:Ba,useDeferredValue:function(t){var e=Rt();return bp(e,Ge.memoizedState,t)},useTransition:function(){var t=zs(To)[0],e=Rt().memoizedState;return[t,e]},useMutableSource:Sp,useSyncExternalStore:wp,useId:Lp,unstable_isNewReconciler:!1},d0={readContext:Nt,useCallback:Mp,useContext:Nt,useEffect:Fa,useImperativeHandle:Pp,useInsertionEffect:Ap,useLayoutEffect:Np,useMemo:Dp,useReducer:Vs,useRef:kp,useState:function(){return Vs(To)},useDebugValue:Ba,useDeferredValue:function(t){var e=Rt();return Ge===null?e.memoizedState=t:bp(e,Ge.memoizedState,t)},useTransition:function(){var t=Vs(To)[0],e=Rt().memoizedState;return[t,e]},useMutableSource:Sp,useSyncExternalStore:wp,useId:Lp,unstable_isNewReconciler:!1};function bt(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Il(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rs={isMounted:function(t){return(t=t._reactInternals)?Kn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lt(),o=Cn(t),i=en(r,o);i.payload=e,n!=null&&(i.callback=n),e=xn(t,i,o),e!==null&&(Bt(e,t,o,r),ci(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lt(),o=Cn(t),i=en(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=xn(t,i,o),e!==null&&(Bt(e,t,o,r),ci(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),r=Cn(t),o=en(n,r);o.tag=2,e!=null&&(o.callback=e),e=xn(t,o,r),e!==null&&(Bt(e,t,r,n),ci(e,t,r))}};function Ku(t,e,n,r,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!vo(n,r)||!vo(o,i):!0}function zp(t,e,n){var r=!1,o=kn,i=e.contextType;return typeof i=="object"&&i!==null?i=Nt(i):(o=ht(e)?On:tt.current,r=e.contextTypes,i=(r=r!=null)?Tr(t,o):kn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rs,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function Xu(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rs.enqueueReplaceState(e,e.state,null)}function kl(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Ra(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=Nt(i):(i=ht(e)?On:tt.current,o.context=Tr(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Il(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&rs.enqueueReplaceState(o,o.state,null),bi(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Nr(t,e){try{var n="",r=e;do n+=zm(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function Gs(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Al(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var f0=typeof WeakMap=="function"?WeakMap:Map;function Vp(t,e,n){n=en(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zi||(zi=!0,Bl=r),Al(t,e)},n}function Gp(t,e,n){n=en(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){Al(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Al(t,e),typeof r!="function"&&(En===null?En=new Set([this]):En.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Qu(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new f0;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=I0.bind(null,t,e,n),e.then(t,t))}function Zu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ju(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=en(-1,1),e.tag=2,xn(n,e,1))),n.lanes|=1),t)}var p0=ln.ReactCurrentOwner,ft=!1;function st(t,e,n,r){e.child=t===null?gp(e,null,n,r):kr(e,t.child,n,r)}function ec(t,e,n,r,o){n=n.render;var i=e.ref;return Sr(e,o),r=La(t,e,n,r,i,o),n=Ua(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,on(t,e,o)):(Re&&n&&Ea(e),e.flags|=1,st(t,e,r,o),e.child)}function tc(t,e,n,r,o){if(t===null){var i=n.type;return typeof i=="function"&&!Wa(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Hp(t,e,i,r,o)):(t=gi(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:vo,n(s,r)&&t.ref===e.ref)return on(t,e,o)}return e.flags|=1,t=Tn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Hp(t,e,n,r,o){if(t!==null){var i=t.memoizedProps;if(vo(i,r)&&t.ref===e.ref)if(ft=!1,e.pendingProps=r=i,(t.lanes&o)!==0)t.flags&131072&&(ft=!0);else return e.lanes=t.lanes,on(t,e,o)}return Nl(t,e,n,r,o)}function Op(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(dr,yt),yt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(dr,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(dr,yt),yt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(dr,yt),yt|=r;return st(t,e,o,n),e.child}function qp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Nl(t,e,n,r,o){var i=ht(n)?On:tt.current;return i=Tr(e,i),Sr(e,o),n=La(t,e,n,r,i,o),r=Ua(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,on(t,e,o)):(Re&&r&&Ea(e),e.flags|=1,st(t,e,n,o),e.child)}function nc(t,e,n,r,o){if(ht(n)){var i=!0;Ni(e)}else i=!1;if(Sr(e,o),e.stateNode===null)pi(t,e),zp(e,n,r),kl(e,n,r,o),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Nt(d):(d=ht(n)?On:tt.current,d=Tr(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Xu(e,s,r,d),pn=!1;var h=e.memoizedState;s.state=h,bi(e,r,s,o),u=e.memoizedState,l!==r||h!==u||pt.current||pn?(typeof f=="function"&&(Il(e,n,f,r),u=e.memoizedState),(l=pn||Ku(e,n,l,r,h,u,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=d,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,vp(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:bt(e.type,l),s.props=d,p=e.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nt(u):(u=ht(n)?On:tt.current,u=Tr(e,u));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||h!==u)&&Xu(e,s,r,u),pn=!1,h=e.memoizedState,s.state=h,bi(e,r,s,o);var _=e.memoizedState;l!==p||h!==_||pt.current||pn?(typeof m=="function"&&(Il(e,n,m,r),_=e.memoizedState),(d=pn||Ku(e,n,d,r,h,_,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=u,r=d):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Rl(t,e,n,r,i,o)}function Rl(t,e,n,r,o,i){qp(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return o&&Gu(e,n,!1),on(t,e,i);r=e.stateNode,p0.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=kr(e,t.child,null,i),e.child=kr(e,null,l,i)):st(t,e,l,i),e.memoizedState=r.state,o&&Gu(e,n,!0),e.child}function $p(t){var e=t.stateNode;e.pendingContext?Vu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vu(t,e.context,!1),Pa(t,e.containerInfo)}function rc(t,e,n,r,o){return Ir(),Ta(o),e.flags|=256,st(t,e,n,r),e.child}var Pl={dehydrated:null,treeContext:null,retryLane:0};function Ml(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wp(t,e,n){var r=e.pendingProps,o=Me.current,i=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(o&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Te(Me,o&1),t===null)return Cl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=ss(s,r,0,null),t=Hn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ml(n),e.memoizedState=Pl,t):za(e,s));if(o=t.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return h0(t,e,s,r,l,o,n);if(i){i=r.fallback,s=e.mode,o=t.child,l=o.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Tn(o,u),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?i=Tn(l,i):(i=Hn(i,s,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=t.child.memoizedState,s=s===null?Ml(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Pl,r}return i=t.child,t=i.sibling,r=Tn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function za(t,e){return e=ss({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ko(t,e,n,r){return r!==null&&Ta(r),kr(e,t.child,null,n),t=za(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function h0(t,e,n,r,o,i,s){if(n)return e.flags&256?(e.flags&=-257,r=Gs(Error(oe(422))),Ko(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=ss({mode:"visible",children:r.children},o,0,null),i=Hn(i,o,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&kr(e,t.child,null,s),e.child.memoizedState=Ml(s),e.memoizedState=Pl,i);if(!(e.mode&1))return Ko(t,e,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(oe(419)),r=Gs(i,r,void 0),Ko(t,e,s,r)}if(l=(s&t.childLanes)!==0,ft||l){if(r=qe,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,rn(t,o),Bt(r,t,o,-1))}return $a(),r=Gs(Error(oe(421))),Ko(t,e,s,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=k0.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,vt=wn(o.nextSibling),_t=e,Re=!0,Ut=null,t!==null&&(Et[Ct++]=Zt,Et[Ct++]=jt,Et[Ct++]=qn,Zt=t.id,jt=t.overflow,qn=e),e=za(e,r.children),e.flags|=4096,e)}function oc(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tl(t.return,e,n)}function Hs(t,e,n,r,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Jp(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(st(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oc(t,n,e);else if(t.tag===19)oc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Me,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Li(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Hs(e,!1,o,n,i);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Li(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Hs(e,!0,n,null,i);break;case"together":Hs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function on(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Tn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function m0(t,e,n){switch(e.tag){case 3:$p(e),Ir();break;case 5:_p(e);break;case 1:ht(e.type)&&Ni(e);break;case 4:Pa(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Te(Mi,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?Wp(t,e,n):(Te(Me,Me.current&1),t=on(t,e,n),t!==null?t.sibling:null);Te(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Jp(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Te(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,Op(t,e,n)}return on(t,e,n)}var Yp,Dl,Kp,Xp;Yp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dl=function(){};Kp=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Vn(Kt.current);var i=null;switch(n){case"input":o=tl(t,o),r=tl(t,r),i=[];break;case"select":o=Le({},o,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":o=ol(t,o),r=ol(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ki)}sl(n,r);var s;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var l=o[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(co.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(co.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ie("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Xp=function(t,e,n,r){n!==r&&(e.flags|=4)};function $r(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function g0(t,e,n){var r=e.pendingProps;switch(Ca(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(e),null;case 1:return ht(e.type)&&Ai(),Ze(e),null;case 3:return r=e.stateNode,Ar(),ke(pt),ke(tt),Da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ut!==null&&(Gl(Ut),Ut=null))),Dl(t,e),Ze(e),null;case 5:Ma(e);var o=Vn(Eo.current);if(n=e.type,t!==null&&e.stateNode!=null)Kp(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return Ze(e),null}if(t=Vn(Kt.current),Jo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Jt]=e,r[wo]=i,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(o=0;o<Zr.length;o++)Ie(Zr[o],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":pu(r,i),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",r);break;case"textarea":mu(r,i),Ie("invalid",r)}sl(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Wo(r.textContent,l,t),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Wo(r.textContent,l,t),o=["children",""+l]):co.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Bo(r),hu(r,i,!0);break;case"textarea":Bo(r),gu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ki)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Jt]=e,t[wo]=r,Yp(t,e,!1,!1),e.stateNode=t;e:{switch(s=ll(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),o=r;break;case"iframe":case"object":case"embed":Ie("load",t),o=r;break;case"video":case"audio":for(o=0;o<Zr.length;o++)Ie(Zr[o],t);o=r;break;case"source":Ie("error",t),o=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),o=r;break;case"details":Ie("toggle",t),o=r;break;case"input":pu(t,r),o=tl(t,r),Ie("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Le({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":mu(t,r),o=ol(t,r),Ie("invalid",t);break;default:o=r}sl(n,o),l=o;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?kf(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Tf(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&fo(t,u):typeof u=="number"&&fo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(co.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ie("scroll",t):u!=null&&ua(t,i,u,s))}switch(n){case"input":Bo(t),hu(t,r,!1);break;case"textarea":Bo(t),gu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+In(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?gr(t,!!r.multiple,i,!1):r.defaultValue!=null&&gr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=ki)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ze(e),null;case 6:if(t&&e.stateNode!=null)Xp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=Vn(Eo.current),Vn(Kt.current),Jo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jt]=e,(i=r.nodeValue!==n)&&(t=_t,t!==null))switch(t.tag){case 3:Wo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jt]=e,e.stateNode=r}return Ze(e),null;case 13:if(ke(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&vt!==null&&e.mode&1&&!(e.flags&128))hp(),Ir(),e.flags|=98560,i=!1;else if(i=Jo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(oe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(oe(317));i[Jt]=e}else Ir(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ze(e),i=!1}else Ut!==null&&(Gl(Ut),Ut=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?He===0&&(He=3):$a())),e.updateQueue!==null&&(e.flags|=4),Ze(e),null);case 4:return Ar(),Dl(t,e),t===null&&_o(e.stateNode.containerInfo),Ze(e),null;case 10:return Aa(e.type._context),Ze(e),null;case 17:return ht(e.type)&&Ai(),Ze(e),null;case 19:if(ke(Me),i=e.memoizedState,i===null)return Ze(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)$r(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Li(t),s!==null){for(e.flags|=128,$r(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Me,Me.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>Rr&&(e.flags|=128,r=!0,$r(i,!1),e.lanes=4194304)}else{if(!r)if(t=Li(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$r(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Re)return Ze(e),null}else 2*Be()-i.renderingStartTime>Rr&&n!==1073741824&&(e.flags|=128,r=!0,$r(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=Me.current,Te(Me,r?n&1|2:n&1),e):(Ze(e),null);case 22:case 23:return qa(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yt&1073741824&&(Ze(e),e.subtreeFlags&6&&(e.flags|=8192)):Ze(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function y0(t,e){switch(Ca(e),e.tag){case 1:return ht(e.type)&&Ai(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ar(),ke(pt),ke(tt),Da(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ma(e),null;case 13:if(ke(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Ir()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Me),null;case 4:return Ar(),null;case 10:return Aa(e.type._context),null;case 22:case 23:return qa(),null;case 24:return null;default:return null}}var Xo=!1,je=!1,v0=typeof WeakSet=="function"?WeakSet:Set,ae=null;function cr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function bl(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var ic=!1;function _0(t,e){if(yl=Ci,t=tp(),xa(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,d=0,f=0,p=t,h=null;t:for(;;){for(var m;p!==n||o!==0&&p.nodeType!==3||(l=s+o),p!==i||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(m=p.firstChild)!==null;)h=p,p=m;for(;;){if(p===t)break t;if(h===n&&++d===o&&(l=s),h===i&&++f===r&&(u=s),(m=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=m}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(vl={focusedElem:t,selectionRange:n},Ci=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,x=_.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:bt(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(T){Fe(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return _=ic,ic=!1,_}function so(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&bl(e,n,i)}o=o.next}while(o!==r)}}function os(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ll(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qp(t){var e=t.alternate;e!==null&&(t.alternate=null,Qp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jt],delete e[wo],delete e[wl],delete e[t0],delete e[n0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zp(t){return t.tag===5||t.tag===3||t.tag===4}function sc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ul(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ki));else if(r!==4&&(t=t.child,t!==null))for(Ul(t,e,n),t=t.sibling;t!==null;)Ul(t,e,n),t=t.sibling}function Fl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fl(t,e,n),t=t.sibling;t!==null;)Fl(t,e,n),t=t.sibling}var Je=null,Lt=!1;function dn(t,e,n){for(n=n.child;n!==null;)jp(t,e,n),n=n.sibling}function jp(t,e,n){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Xi,n)}catch{}switch(n.tag){case 5:je||cr(n,e);case 6:var r=Je,o=Lt;Je=null,dn(t,e,n),Je=r,Lt=o,Je!==null&&(Lt?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(Lt?(t=Je,n=n.stateNode,t.nodeType===8?Ls(t.parentNode,n):t.nodeType===1&&Ls(t,n),go(t)):Ls(Je,n.stateNode));break;case 4:r=Je,o=Lt,Je=n.stateNode.containerInfo,Lt=!0,dn(t,e,n),Je=r,Lt=o;break;case 0:case 11:case 14:case 15:if(!je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&bl(n,e,s),o=o.next}while(o!==r)}dn(t,e,n);break;case 1:if(!je&&(cr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,e,l)}dn(t,e,n);break;case 21:dn(t,e,n);break;case 22:n.mode&1?(je=(r=je)||n.memoizedState!==null,dn(t,e,n),je=r):dn(t,e,n);break;default:dn(t,e,n)}}function lc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new v0),e.forEach(function(r){var o=A0.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Dt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Je=l.stateNode,Lt=!1;break e;case 3:Je=l.stateNode.containerInfo,Lt=!0;break e;case 4:Je=l.stateNode.containerInfo,Lt=!0;break e}l=l.return}if(Je===null)throw Error(oe(160));jp(i,s,o),Je=null,Lt=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(d){Fe(o,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eh(e,t),e=e.sibling}function eh(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dt(e,t),$t(t),r&4){try{so(3,t,t.return),os(3,t)}catch(y){Fe(t,t.return,y)}try{so(5,t,t.return)}catch(y){Fe(t,t.return,y)}}break;case 1:Dt(e,t),$t(t),r&512&&n!==null&&cr(n,n.return);break;case 5:if(Dt(e,t),$t(t),r&512&&n!==null&&cr(n,n.return),t.flags&32){var o=t.stateNode;try{fo(o,"")}catch(y){Fe(t,t.return,y)}}if(r&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&xf(o,i),ll(l,s);var d=ll(l,i);for(s=0;s<u.length;s+=2){var f=u[s],p=u[s+1];f==="style"?kf(o,p):f==="dangerouslySetInnerHTML"?Tf(o,p):f==="children"?fo(o,p):ua(o,f,p,d)}switch(l){case"input":nl(o,i);break;case"textarea":Ef(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?gr(o,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?gr(o,!!i.multiple,i.defaultValue,!0):gr(o,!!i.multiple,i.multiple?[]:"",!1))}o[wo]=i}catch(y){Fe(t,t.return,y)}}break;case 6:if(Dt(e,t),$t(t),r&4){if(t.stateNode===null)throw Error(oe(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(y){Fe(t,t.return,y)}}break;case 3:if(Dt(e,t),$t(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{go(e.containerInfo)}catch(y){Fe(t,t.return,y)}break;case 4:Dt(e,t),$t(t);break;case 13:Dt(e,t),$t(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Ha=Be())),r&4&&lc(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(je=(d=je)||f,Dt(e,t),je=d):Dt(e,t),$t(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(ae=t,f=t.child;f!==null;){for(p=ae=f;ae!==null;){switch(h=ae,m=h.child,h.tag){case 0:case 11:case 14:case 15:so(4,h,h.return);break;case 1:cr(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){Fe(r,n,y)}}break;case 5:cr(h,h.return);break;case 22:if(h.memoizedState!==null){uc(p);continue}}m!==null?(m.return=h,ae=m):uc(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{o=p.stateNode,d?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=If("display",s))}catch(y){Fe(t,t.return,y)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(y){Fe(t,t.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Dt(e,t),$t(t),r&4&&lc(t);break;case 21:break;default:Dt(e,t),$t(t)}}function $t(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zp(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(fo(o,""),r.flags&=-33);var i=sc(t);Fl(t,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,l=sc(t);Ul(t,l,s);break;default:throw Error(oe(161))}}catch(u){Fe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function S0(t,e,n){ae=t,th(t)}function th(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var o=ae,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Xo;if(!s){var l=o.alternate,u=l!==null&&l.memoizedState!==null||je;l=Xo;var d=je;if(Xo=s,(je=u)&&!d)for(ae=o;ae!==null;)s=ae,u=s.child,s.tag===22&&s.memoizedState!==null?cc(o):u!==null?(u.return=s,ae=u):cc(o);for(;i!==null;)ae=i,th(i),i=i.sibling;ae=o,Xo=l,je=d}ac(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ae=i):ac(t)}}function ac(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:je||os(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!je)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:bt(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wu(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wu(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&go(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}je||e.flags&512&&Ll(e)}catch(h){Fe(e,e.return,h)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function uc(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function cc(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{os(4,e)}catch(u){Fe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(u){Fe(e,o,u)}}var i=e.return;try{Ll(e)}catch(u){Fe(e,i,u)}break;case 5:var s=e.return;try{Ll(e)}catch(u){Fe(e,s,u)}}}catch(u){Fe(e,e.return,u)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var w0=Math.ceil,Bi=ln.ReactCurrentDispatcher,Va=ln.ReactCurrentOwner,kt=ln.ReactCurrentBatchConfig,_e=0,qe=null,Ve=null,Ke=0,yt=0,dr=Nn(0),He=0,ko=null,Wn=0,is=0,Ga=0,lo=null,dt=null,Ha=0,Rr=1/0,Xt=null,zi=!1,Bl=null,En=null,Qo=!1,yn=null,Vi=0,ao=0,zl=null,hi=-1,mi=0;function lt(){return _e&6?Be():hi!==-1?hi:hi=Be()}function Cn(t){return t.mode&1?_e&2&&Ke!==0?Ke&-Ke:o0.transition!==null?(mi===0&&(mi=zf()),mi):(t=we,t!==0||(t=window.event,t=t===void 0?16:Wf(t.type)),t):1}function Bt(t,e,n,r){if(50<ao)throw ao=0,zl=null,Error(oe(185));No(t,n,r),(!(_e&2)||t!==qe)&&(t===qe&&(!(_e&2)&&(is|=n),He===4&&mn(t,Ke)),mt(t,r),n===1&&_e===0&&!(e.mode&1)&&(Rr=Be()+500,ts&&Rn()))}function mt(t,e){var n=t.callbackNode;og(t,e);var r=Ei(t,t===qe?Ke:0);if(r===0)n!==null&&_u(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_u(n),e===1)t.tag===0?r0(dc.bind(null,t)):dp(dc.bind(null,t)),jg(function(){!(_e&6)&&Rn()}),n=null;else{switch(Vf(r)){case 1:n=ha;break;case 4:n=Ff;break;case 16:n=xi;break;case 536870912:n=Bf;break;default:n=xi}n=uh(n,nh.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nh(t,e){if(hi=-1,mi=0,_e&6)throw Error(oe(327));var n=t.callbackNode;if(wr()&&t.callbackNode!==n)return null;var r=Ei(t,t===qe?Ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gi(t,r);else{e=r;var o=_e;_e|=2;var i=oh();(qe!==t||Ke!==e)&&(Xt=null,Rr=Be()+500,Gn(t,e));do try{C0();break}catch(l){rh(t,l)}while(!0);ka(),Bi.current=i,_e=o,Ve!==null?e=0:(qe=null,Ke=0,e=He)}if(e!==0){if(e===2&&(o=fl(t),o!==0&&(r=o,e=Vl(t,o))),e===1)throw n=ko,Gn(t,0),mn(t,r),mt(t,Be()),n;if(e===6)mn(t,r);else{if(o=t.current.alternate,!(r&30)&&!x0(o)&&(e=Gi(t,r),e===2&&(i=fl(t),i!==0&&(r=i,e=Vl(t,i))),e===1))throw n=ko,Gn(t,0),mn(t,r),mt(t,Be()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:Un(t,dt,Xt);break;case 3:if(mn(t,r),(r&130023424)===r&&(e=Ha+500-Be(),10<e)){if(Ei(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){lt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Sl(Un.bind(null,t,dt,Xt),e);break}Un(t,dt,Xt);break;case 4:if(mn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var s=31-Ft(r);i=1<<s,s=e[s],s>o&&(o=s),r&=~i}if(r=o,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w0(r/1960))-r,10<r){t.timeoutHandle=Sl(Un.bind(null,t,dt,Xt),r);break}Un(t,dt,Xt);break;case 5:Un(t,dt,Xt);break;default:throw Error(oe(329))}}}return mt(t,Be()),t.callbackNode===n?nh.bind(null,t):null}function Vl(t,e){var n=lo;return t.current.memoizedState.isDehydrated&&(Gn(t,e).flags|=256),t=Gi(t,e),t!==2&&(e=dt,dt=n,e!==null&&Gl(e)),t}function Gl(t){dt===null?dt=t:dt.push.apply(dt,t)}function x0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Gt(i(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mn(t,e){for(e&=~Ga,e&=~is,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ft(e),r=1<<n;t[n]=-1,e&=~r}}function dc(t){if(_e&6)throw Error(oe(327));wr();var e=Ei(t,0);if(!(e&1))return mt(t,Be()),null;var n=Gi(t,e);if(t.tag!==0&&n===2){var r=fl(t);r!==0&&(e=r,n=Vl(t,r))}if(n===1)throw n=ko,Gn(t,0),mn(t,e),mt(t,Be()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Un(t,dt,Xt),mt(t,Be()),null}function Oa(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(Rr=Be()+500,ts&&Rn())}}function Jn(t){yn!==null&&yn.tag===0&&!(_e&6)&&wr();var e=_e;_e|=1;var n=kt.transition,r=we;try{if(kt.transition=null,we=1,t)return t()}finally{we=r,kt.transition=n,_e=e,!(_e&6)&&Rn()}}function qa(){yt=dr.current,ke(dr)}function Gn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Zg(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Ca(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ai();break;case 3:Ar(),ke(pt),ke(tt),Da();break;case 5:Ma(r);break;case 4:Ar();break;case 13:ke(Me);break;case 19:ke(Me);break;case 10:Aa(r.type._context);break;case 22:case 23:qa()}n=n.return}if(qe=t,Ve=t=Tn(t.current,null),Ke=yt=e,He=0,ko=null,Ga=is=Wn=0,dt=lo=null,zn!==null){for(e=0;e<zn.length;e++)if(n=zn[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}zn=null}return t}function rh(t,e){do{var n=Ve;try{if(ka(),di.current=Fi,Ui){for(var r=be.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ui=!1}if($n=0,Oe=Ge=be=null,io=!1,Co=0,Va.current=null,n===null||n.return===null){He=1,ko=e,Ve=null;break}e:{var i=t,s=n.return,l=n,u=e;if(e=Ke,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=Zu(s);if(m!==null){m.flags&=-257,ju(m,s,l,i,e),m.mode&1&&Qu(i,d,e),e=m,u=d;var _=e.updateQueue;if(_===null){var y=new Set;y.add(u),e.updateQueue=y}else _.add(u);break e}else{if(!(e&1)){Qu(i,d,e),$a();break e}u=Error(oe(426))}}else if(Re&&l.mode&1){var x=Zu(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ju(x,s,l,i,e),Ta(Nr(u,l));break e}}i=u=Nr(u,l),He!==4&&(He=2),lo===null?lo=[i]:lo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Vp(i,u,e);$u(i,g);break e;case 1:l=u;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(En===null||!En.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=Gp(i,l,e);$u(i,T);break e}}i=i.return}while(i!==null)}sh(n)}catch(I){e=I,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function oh(){var t=Bi.current;return Bi.current=Fi,t===null?Fi:t}function $a(){(He===0||He===3||He===2)&&(He=4),qe===null||!(Wn&268435455)&&!(is&268435455)||mn(qe,Ke)}function Gi(t,e){var n=_e;_e|=2;var r=oh();(qe!==t||Ke!==e)&&(Xt=null,Gn(t,e));do try{E0();break}catch(o){rh(t,o)}while(!0);if(ka(),_e=n,Bi.current=r,Ve!==null)throw Error(oe(261));return qe=null,Ke=0,He}function E0(){for(;Ve!==null;)ih(Ve)}function C0(){for(;Ve!==null&&!Km();)ih(Ve)}function ih(t){var e=ah(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?sh(t):Ve=e,Va.current=null}function sh(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=y0(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Ve=null;return}}else if(n=g0(n,e,yt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);He===0&&(He=5)}function Un(t,e,n){var r=we,o=kt.transition;try{kt.transition=null,we=1,T0(t,e,n,r)}finally{kt.transition=o,we=r}return null}function T0(t,e,n,r){do wr();while(yn!==null);if(_e&6)throw Error(oe(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ig(t,i),t===qe&&(Ve=qe=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qo||(Qo=!0,uh(xi,function(){return wr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=kt.transition,kt.transition=null;var s=we;we=1;var l=_e;_e|=4,Va.current=null,_0(t,n),eh(n,t),$g(vl),Ci=!!yl,vl=yl=null,t.current=n,S0(n),Xm(),_e=l,we=s,kt.transition=i}else t.current=n;if(Qo&&(Qo=!1,yn=t,Vi=o),i=t.pendingLanes,i===0&&(En=null),jm(n.stateNode),mt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(zi)throw zi=!1,t=Bl,Bl=null,t;return Vi&1&&t.tag!==0&&wr(),i=t.pendingLanes,i&1?t===zl?ao++:(ao=0,zl=t):ao=0,Rn(),null}function wr(){if(yn!==null){var t=Vf(Vi),e=kt.transition,n=we;try{if(kt.transition=null,we=16>t?16:t,yn===null)var r=!1;else{if(t=yn,yn=null,Vi=0,_e&6)throw Error(oe(331));var o=_e;for(_e|=4,ae=t.current;ae!==null;){var i=ae,s=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(ae=d;ae!==null;){var f=ae;switch(f.tag){case 0:case 11:case 15:so(8,f,i)}var p=f.child;if(p!==null)p.return=f,ae=p;else for(;ae!==null;){f=ae;var h=f.sibling,m=f.return;if(Qp(f),f===d){ae=null;break}if(h!==null){h.return=m,ae=h;break}ae=m}}}var _=i.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}ae=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,ae=s;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:so(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ae=g;break e}ae=i.return}}var v=t.current;for(ae=v;ae!==null;){s=ae;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,ae=w;else e:for(s=v;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:os(9,l)}}catch(I){Fe(l,l.return,I)}if(l===s){ae=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,ae=T;break e}ae=l.return}}if(_e=o,Rn(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Xi,t)}catch{}r=!0}return r}finally{we=n,kt.transition=e}}return!1}function fc(t,e,n){e=Nr(n,e),e=Vp(t,e,1),t=xn(t,e,1),e=lt(),t!==null&&(No(t,1,e),mt(t,e))}function Fe(t,e,n){if(t.tag===3)fc(t,t,n);else for(;e!==null;){if(e.tag===3){fc(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(En===null||!En.has(r))){t=Nr(n,t),t=Gp(e,t,1),e=xn(e,t,1),t=lt(),e!==null&&(No(e,1,t),mt(e,t));break}}e=e.return}}function I0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Ke&n)===n&&(He===4||He===3&&(Ke&130023424)===Ke&&500>Be()-Ha?Gn(t,0):Ga|=n),mt(t,e)}function lh(t,e){e===0&&(t.mode&1?(e=Go,Go<<=1,!(Go&130023424)&&(Go=4194304)):e=1);var n=lt();t=rn(t,e),t!==null&&(No(t,e,n),mt(t,n))}function k0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lh(t,n)}function A0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),lh(t,n)}var ah;ah=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ft=!1,m0(t,e,n);ft=!!(t.flags&131072)}else ft=!1,Re&&e.flags&1048576&&fp(e,Pi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pi(t,e),t=e.pendingProps;var o=Tr(e,tt.current);Sr(e,n),o=La(null,e,r,t,o,n);var i=Ua();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ht(r)?(i=!0,Ni(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ra(e),o.updater=rs,e.stateNode=o,o._reactInternals=e,kl(e,r,t,n),e=Rl(null,e,r,!0,i,n)):(e.tag=0,Re&&i&&Ea(e),st(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pi(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=R0(r),t=bt(r,t),o){case 0:e=Nl(null,e,r,t,n);break e;case 1:e=nc(null,e,r,t,n);break e;case 11:e=ec(null,e,r,t,n);break e;case 14:e=tc(null,e,r,bt(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bt(r,o),Nl(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bt(r,o),nc(t,e,r,o,n);case 3:e:{if($p(e),t===null)throw Error(oe(387));r=e.pendingProps,i=e.memoizedState,o=i.element,vp(t,e),bi(e,r,null,n);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=Nr(Error(oe(423)),e),e=rc(t,e,r,n,o);break e}else if(r!==o){o=Nr(Error(oe(424)),e),e=rc(t,e,r,n,o);break e}else for(vt=wn(e.stateNode.containerInfo.firstChild),_t=e,Re=!0,Ut=null,n=gp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ir(),r===o){e=on(t,e,n);break e}st(t,e,r,n)}e=e.child}return e;case 5:return _p(e),t===null&&Cl(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,_l(r,o)?s=null:i!==null&&_l(r,i)&&(e.flags|=32),qp(t,e),st(t,e,s,n),e.child;case 6:return t===null&&Cl(e),null;case 13:return Wp(t,e,n);case 4:return Pa(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=kr(e,null,r,n):st(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bt(r,o),ec(t,e,r,o,n);case 7:return st(t,e,e.pendingProps,n),e.child;case 8:return st(t,e,e.pendingProps.children,n),e.child;case 12:return st(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,Te(Mi,r._currentValue),r._currentValue=s,i!==null)if(Gt(i.value,s)){if(i.children===o.children&&!pt.current){e=on(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=en(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Tl(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(oe(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Tl(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}st(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Sr(e,n),o=Nt(o),r=r(o),e.flags|=1,st(t,e,r,n),e.child;case 14:return r=e.type,o=bt(r,e.pendingProps),o=bt(r.type,o),tc(t,e,r,o,n);case 15:return Hp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:bt(r,o),pi(t,e),e.tag=1,ht(r)?(t=!0,Ni(e)):t=!1,Sr(e,n),zp(e,r,o),kl(e,r,o,n),Rl(null,e,r,!0,t,n);case 19:return Jp(t,e,n);case 22:return Op(t,e,n)}throw Error(oe(156,e.tag))};function uh(t,e){return Uf(t,e)}function N0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,e,n,r){return new N0(t,e,n,r)}function Wa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R0(t){if(typeof t=="function")return Wa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===da)return 11;if(t===fa)return 14}return 2}function Tn(t,e){var n=t.alternate;return n===null?(n=It(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gi(t,e,n,r,o,i){var s=2;if(r=t,typeof t=="function")Wa(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case tr:return Hn(n.children,o,i,e);case ca:s=8,o|=8;break;case Qs:return t=It(12,n,e,o|2),t.elementType=Qs,t.lanes=i,t;case Zs:return t=It(13,n,e,o),t.elementType=Zs,t.lanes=i,t;case js:return t=It(19,n,e,o),t.elementType=js,t.lanes=i,t;case _f:return ss(n,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yf:s=10;break e;case vf:s=9;break e;case da:s=11;break e;case fa:s=14;break e;case fn:s=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=It(s,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function Hn(t,e,n,r){return t=It(7,t,r,e),t.lanes=n,t}function ss(t,e,n,r){return t=It(22,t,r,e),t.elementType=_f,t.lanes=n,t.stateNode={isHidden:!1},t}function Os(t,e,n){return t=It(6,t,null,e),t.lanes=n,t}function qs(t,e,n){return e=It(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function P0(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cs(0),this.expirationTimes=Cs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cs(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Ja(t,e,n,r,o,i,s,l,u){return t=new P0(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=It(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(i),t}function M0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:er,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ch(t){if(!t)return kn;t=t._reactInternals;e:{if(Kn(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(ht(n))return cp(t,n,e)}return e}function dh(t,e,n,r,o,i,s,l,u){return t=Ja(n,r,!0,t,o,i,s,l,u),t.context=ch(null),n=t.current,r=lt(),o=Cn(n),i=en(r,o),i.callback=e??null,xn(n,i,o),t.current.lanes=o,No(t,o,r),mt(t,r),t}function ls(t,e,n,r){var o=e.current,i=lt(),s=Cn(o);return n=ch(n),e.context===null?e.context=n:e.pendingContext=n,e=en(i,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xn(o,e,s),t!==null&&(Bt(t,o,s,i),ci(t,o,s)),s}function Hi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ya(t,e){pc(t,e),(t=t.alternate)&&pc(t,e)}function D0(){return null}var fh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ka(t){this._internalRoot=t}as.prototype.render=Ka.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));ls(t,e,null,null)};as.prototype.unmount=Ka.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jn(function(){ls(null,t,null,null)}),e[nn]=null}};function as(t){this._internalRoot=t}as.prototype.unstable_scheduleHydration=function(t){if(t){var e=Of();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hn.length&&e!==0&&e<hn[n].priority;n++);hn.splice(n,0,t),n===0&&$f(t)}};function Xa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function us(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hc(){}function b0(t,e,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var d=Hi(s);i.call(d)}}var s=dh(e,r,t,0,null,!1,!1,"",hc);return t._reactRootContainer=s,t[nn]=s.current,_o(t.nodeType===8?t.parentNode:t),Jn(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var d=Hi(u);l.call(d)}}var u=Ja(t,0,!1,null,null,!1,!1,"",hc);return t._reactRootContainer=u,t[nn]=u.current,_o(t.nodeType===8?t.parentNode:t),Jn(function(){ls(e,u,n,r)}),u}function cs(t,e,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var l=o;o=function(){var u=Hi(s);l.call(u)}}ls(e,s,t,o)}else s=b0(n,e,t,o,r);return Hi(s)}Gf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qr(e.pendingLanes);n!==0&&(ma(e,n|1),mt(e,Be()),!(_e&6)&&(Rr=Be()+500,Rn()))}break;case 13:Jn(function(){var r=rn(t,1);if(r!==null){var o=lt();Bt(r,t,1,o)}}),Ya(t,1)}};ga=function(t){if(t.tag===13){var e=rn(t,134217728);if(e!==null){var n=lt();Bt(e,t,134217728,n)}Ya(t,134217728)}};Hf=function(t){if(t.tag===13){var e=Cn(t),n=rn(t,e);if(n!==null){var r=lt();Bt(n,t,e,r)}Ya(t,e)}};Of=function(){return we};qf=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};ul=function(t,e,n){switch(e){case"input":if(nl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=es(r);if(!o)throw Error(oe(90));wf(r),nl(r,o)}}}break;case"textarea":Ef(t,n);break;case"select":e=n.value,e!=null&&gr(t,!!n.multiple,e,!1)}};Rf=Oa;Pf=Jn;var L0={usingClientEntryPoint:!1,Events:[Po,ir,es,Af,Nf,Oa]},Wr={findFiberByHostInstance:Bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U0={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bf(t),t===null?null:t.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||D0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zo.isDisabled&&Zo.supportsFiber)try{Xi=Zo.inject(U0),Yt=Zo}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L0;wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xa(e))throw Error(oe(200));return M0(t,e,null,n)};wt.createRoot=function(t,e){if(!Xa(t))throw Error(oe(299));var n=!1,r="",o=fh;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Ja(t,1,!1,null,null,n,!1,r,o),t[nn]=e.current,_o(t.nodeType===8?t.parentNode:t),new Ka(e)};wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=bf(e),t=t===null?null:t.stateNode,t};wt.flushSync=function(t){return Jn(t)};wt.hydrate=function(t,e,n){if(!us(e))throw Error(oe(200));return cs(null,t,e,!0,n)};wt.hydrateRoot=function(t,e,n){if(!Xa(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=fh;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=dh(e,null,t,1,n??null,o,!1,i,s),t[nn]=e.current,_o(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new as(e)};wt.render=function(t,e,n){if(!us(e))throw Error(oe(200));return cs(null,t,e,!1,n)};wt.unmountComponentAtNode=function(t){if(!us(t))throw Error(oe(40));return t._reactRootContainer?(Jn(function(){cs(null,null,t,!1,function(){t._reactRootContainer=null,t[nn]=null})}),!0):!1};wt.unstable_batchedUpdates=Oa;wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!us(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return cs(t,e,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function ph(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ph)}catch(t){console.error(t)}}ph(),pf.exports=wt;var F0=pf.exports,mc=F0;Ks.createRoot=mc.createRoot,Ks.hydrateRoot=mc.hydrateRoot;var Tt=(t=>(t.LIGHT="light",t.DARK="dark",t.CHALKBOARD="chalkboard",t.BLUEPRINT="blueprint",t))(Tt||{}),fr=(t=>(t.GEMINI_3_FLASH="gemini-3-flash-preview",t.GEMINI_3_PRO="gemini-3-pro-preview",t.GEMINI_2_5_FLASH="gemini-2.5-flash",t.GEMINI_2_5_PRO="gemini-2.5-pro",t))(fr||{});const B0=Tt.DARK,hh=fr.GEMINI_3_PRO,mh="FATY_V4_AUTO",Hl=[{label:"Gemini 3.0 Pro Preview",value:fr.GEMINI_3_PRO},{label:"Gemini 3.0 Flash Preview",value:fr.GEMINI_3_FLASH},{label:"Gemini 2.5 Flash",value:fr.GEMINI_2_5_FLASH},{label:"Gemini 2.5 Pro",value:fr.GEMINI_2_5_PRO}],gc=[{label:"Light Paper",value:Tt.LIGHT},{label:"Dark Mode",value:Tt.DARK},{label:"Chalkboard",value:Tt.CHALKBOARD},{label:"Blueprint",value:Tt.BLUEPRINT}],ze={SESSION:"ai_teacher_session",API_KEY:"ai_teacher_api_key",SETTINGS:"ai_teacher_settings",LIBRARY_INDEX:"ai_teacher_library_index",LIBRARY_DATA_PREFIX:"ai_teacher_lib_data_",SYLLABUS_GALLERY:"ai_teacher_syllabus_gallery",TEST_RESULTS:"ai_teacher_test_results",AUTO_SAVE_CONFIG:"ai_teacher_auto_save_config"},pr=({label:t,options:e,className:n="",...r})=>E.jsxs("div",{className:"flex flex-col gap-1",children:[t&&E.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),E.jsx("select",{className:`block w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 dark:text-gray-100 sm:text-sm ${n}`,...r,children:e.map(o=>E.jsx("option",{value:o.value,children:o.label},o.value))})]}),z0=({label:t,className:e="",...n})=>E.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[t&&E.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),E.jsx("input",{className:`w-full px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 dark:text-gray-100 placeholder-gray-400 ${e}`,...n})]}),De=({children:t,variant:e="primary",size:n="md",className:r="",...o})=>{const i="inline-flex items-center justify-center rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",s={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 dark:bg-blue-500 dark:hover:bg-blue-600",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-400 dark:text-gray-300 dark:hover:bg-gray-800",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},l={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return E.jsx("button",{className:`${i} ${s[e]} ${l[n]} ${r}`,...o,children:t})},V0=({theme:t,setTheme:e,model:n,setModel:r,apiKey:o,setApiKey:i,onClearSession:s,saveToLocal:l,setSaveToLocal:u,toggleAdvancedMode:d,onOpenSessionManager:f,playgroundOpen:p,togglePlayground:h,hasPlaygroundCode:m})=>{const[_,y]=te.useState(!1),[x,g]=te.useState(!o);return te.useEffect(()=>{},[o]),E.jsx("header",{className:"sticky top-0 z-30 w-full backdrop-blur-md bg-white/70 dark:bg-gray-900/70 border-b border-gray-200 dark:border-gray-800 shadow-sm transition-colors duration-300 flex-shrink-0",children:E.jsxs("div",{className:"max-w-[1920px] mx-auto px-4 py-3",children:[E.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),E.jsx("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400",children:"Fatygoras"})]}),E.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[m&&!p&&E.jsxs(De,{size:"sm",onClick:h,className:"animate-pulse bg-green-600 hover:bg-green-700 text-white border-none text-xs sm:text-sm",children:[E.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),E.jsx("span",{className:"hidden sm:inline",children:"Playground"})]}),E.jsx("button",{onClick:()=>g(!x),className:`p-2 rounded-lg transition-colors ${o?"text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800":"text-red-500 animate-pulse"}`,title:"API Key Settings",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),E.jsx("button",{className:"lg:hidden p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",onClick:()=>y(!_),children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:_?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),E.jsxs("div",{className:"hidden lg:flex flex-wrap items-center gap-3",children:[E.jsxs("div",{className:"flex items-center gap-2 mr-4 ml-2",children:[E.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Storage"}),E.jsx("button",{onClick:()=>u(!l),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${l?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:E.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})]}),E.jsx(pr,{options:Hl,value:n,onChange:v=>r(v.target.value),className:"w-48 text-sm py-1"}),E.jsx(pr,{options:gc,value:t,onChange:v=>e(v.target.value),className:"w-32 text-sm py-1"}),E.jsx(De,{variant:"ghost",size:"sm",onClick:f,title:"Sessions Import/Export",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})}),E.jsx(De,{variant:"ghost",size:"sm",onClick:s,title:"Clear Session",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),E.jsx(De,{variant:"ghost",size:"sm",onClick:d,title:"Advanced Mode (API Tracker)",children:E.jsx("svg",{className:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})})]})]})]}),_&&E.jsxs("div",{className:"lg:hidden mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 space-y-4 animate-fade-in",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:"Local Storage"}),E.jsx("button",{onClick:()=>u(!l),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${l?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:E.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l?"translate-x-6":"translate-x-1"}`})})]}),E.jsx(pr,{label:"AI Model",options:Hl,value:n,onChange:v=>r(v.target.value),className:"w-full text-sm py-1"}),E.jsx(pr,{label:"Theme",options:gc,value:t,onChange:v=>e(v.target.value),className:"w-full text-sm py-1"}),E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(De,{variant:"secondary",size:"sm",onClick:f,children:"Sessions"}),E.jsx(De,{variant:"secondary",size:"sm",onClick:d,children:"Debug"})]}),E.jsx(De,{variant:"danger",size:"sm",onClick:()=>{s(),y(!1)},className:"w-full",children:"Clear Session"})]}),x&&E.jsx("div",{className:"mt-2 bg-gray-50 dark:bg-gray-800 rounded-lg p-3 animate-fade-in",children:E.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[E.jsx(z0,{type:"password",placeholder:"Enter Google Gemini API Key",value:o,onChange:v=>i(v.target.value),className:"w-full",autoFocus:!o}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:"Auto-saves if Storage ON"}),E.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})]})})},G0=["#ef4444","#f97316","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#000000"],H0=t=>{let e=t;if(/preserveAspectRatio/i.test(e)||(e=e.replace(/<svg/i,'<svg preserveAspectRatio="xMidYMid meet"')),!/viewBox/i.test(e)){const n=e.match(/width=["']?(\d+(\.\d+)?)["']?/i),r=e.match(/height=["']?(\d+(\.\d+)?)["']?/i);if(n&&r){const o=n[1],i=r[1];e=e.replace(/<svg/i,`<svg viewBox="0 0 ${o} ${i}"`).replace(/width=["']?(\d+(\.\d+)?)["']?/i,"").replace(/height=["']?(\d+(\.\d+)?)["']?/i,"")}}return e},O0=({svgContent:t,explanation:e,topic:n,onRefine:r,isRefining:o})=>{const[i,s]=te.useState(!1),[l,u]=te.useState(1),[d,f]=te.useState({x:0,y:0}),[p,h]=te.useState(!1),[m,_]=te.useState(!1),[y,x]=te.useState({x:0,y:0}),[g,v]=te.useState(0),[w,T]=te.useState(1),[I,D]=te.useState("pen"),[R,F]=te.useState("#ef4444"),[b,V]=te.useState(!1),[J,N]=te.useState(null),[z,C]=te.useState([]),[q,se]=te.useState(-1),[X,Y]=te.useState(""),O=te.useRef(null),W=te.useRef(null),B=te.useRef(null),M=te.useMemo(()=>H0(t),[t]),ne=()=>{s(!i)},j=()=>{u(1),f({x:0,y:0})},ee=()=>{const L=new Blob([M],{type:"image/svg+xml"}),P=URL.createObjectURL(L),G=document.createElement("a");G.href=P,G.download=`${n.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.svg`,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(P)};te.useEffect(()=>{if(p&&W.current&&B.current){const L=W.current,P=L.getContext("2d"),G=B.current,re=G.clientWidth,Z=G.clientHeight;if(L.width!==re||L.height!==Z){let le=null;P&&L.width>0&&L.height>0&&(le=P.getImageData(0,0,L.width,L.height)),L.width=re,L.height=Z,P&&(P.lineCap="round",P.lineJoin="round",P.lineWidth=3,P.font="bold 20px sans-serif",P.textBaseline="middle",le&&!i&&P.putImageData(le,0,0))}}},[p,i]);const pe=()=>{if(!W.current)return;const L=W.current.getContext("2d");if(!L)return;const P=z.slice(0,q+1);P.push(L.getImageData(0,0,W.current.width,W.current.height)),C(P),se(P.length-1)},ye=()=>{var L;if(q>0){const P=q-1,G=z[P];se(P);const re=(L=W.current)==null?void 0:L.getContext("2d");re&&G&&re.putImageData(G,0,0)}else q===0&&(se(-1),U(!1))},fe=()=>{var L;if(q<z.length-1){const P=q+1,G=z[P];se(P);const re=(L=W.current)==null?void 0:L.getContext("2d");re&&G&&re.putImageData(G,0,0)}},me=L=>{p?H(L):(_(!0),x({x:L.clientX-d.x,y:L.clientY-d.y}))},Pe=L=>{p?A(L):m&&(L.preventDefault(),f({x:L.clientX-y.x,y:L.clientY-y.y}))},Ee=()=>{p?k():_(!1)},nt=L=>{if(p){H(L);return}if(L.touches.length===2){const P=Math.hypot(L.touches[0].clientX-L.touches[1].clientX,L.touches[0].clientY-L.touches[1].clientY);v(P),T(l),_(!1)}else L.touches.length===1&&(_(!0),x({x:L.touches[0].clientX-d.x,y:L.touches[0].clientY-d.y}))},rt=L=>{if(p){A(L);return}if(L.touches.length===2){const P=Math.hypot(L.touches[0].clientX-L.touches[1].clientX,L.touches[0].clientY-L.touches[1].clientY);if(g>0){const G=P/g,re=Math.min(Math.max(.5,w*G),5);u(re)}}else L.touches.length===1&&m&&(L.cancelable&&L.preventDefault(),f({x:L.touches[0].clientX-y.x,y:L.touches[0].clientY-y.y}))},S=()=>{p&&k(),_(!1),v(0)},$=L=>{if(!W.current)return{x:0,y:0};const P=W.current.getBoundingClientRect(),G="touches"in L?L.touches[0].clientX:L.clientX,re="touches"in L?L.touches[0].clientY:L.clientY;return{x:(G-P.left)/l,y:(re-P.top)/l}},H=L=>{if(!p||!W.current)return;const P=W.current.getContext("2d");if(!P)return;if(I==="text"){const re=$(L);setTimeout(()=>{const Z=prompt("Enter annotation text:");Z&&(P.fillStyle=R,P.font="bold 20px sans-serif",P.textBaseline="middle",P.fillText(Z,re.x,re.y),pe())},10);return}V(!0);const G=$(L);N(G),P.beginPath(),P.moveTo(G.x,G.y),I==="eraser"?(P.globalCompositeOperation="destination-out",P.lineWidth=20):(P.globalCompositeOperation="source-over",P.strokeStyle=R,P.lineWidth=3)},A=L=>{if(!p||!b||!W.current||!J)return;const P=W.current.getContext("2d");if(!P)return;const G=$(L);if(I==="pen"||I==="eraser")P.lineTo(G.x,G.y),P.stroke();else if(q>=0&&z[q]?P.putImageData(z[q],0,0):P.clearRect(0,0,W.current.width,W.current.height),P.beginPath(),P.strokeStyle=R,P.fillStyle=R,P.lineWidth=3,P.globalCompositeOperation="source-over",I==="box")P.strokeRect(J.x,J.y,G.x-J.x,G.y-J.y);else if(I==="circle"){const re=Math.sqrt(Math.pow(G.x-J.x,2)+Math.pow(G.y-J.y,2));P.arc(J.x,J.y,re,0,2*Math.PI),P.stroke()}else if(I==="arrow"){P.moveTo(J.x,J.y),P.lineTo(G.x,G.y),P.stroke();const re=10,Z=G.x-J.x,le=G.y-J.y,ge=Math.atan2(le,Z);P.beginPath(),P.moveTo(G.x,G.y),P.lineTo(G.x-re*Math.cos(ge-Math.PI/6),G.y-re*Math.sin(ge-Math.PI/6)),P.lineTo(G.x-re*Math.cos(ge+Math.PI/6),G.y-re*Math.sin(ge+Math.PI/6)),P.lineTo(G.x,G.y),P.fill()}},k=()=>{var L,P;b&&(V(!1),N(null),(P=(L=W.current)==null?void 0:L.getContext("2d"))==null||P.closePath(),pe())},U=(L=!0)=>{const P=W.current;if(P){const G=P.getContext("2d");G==null||G.clearRect(0,0,P.width,P.height),L&&(C([]),se(-1))}},K=async()=>{var he,We,Ot;if(!X.trim())return;const L=(he=B.current)==null?void 0:he.querySelector("svg");if(!L)return;const P=new XMLSerializer().serializeToString(L),re=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(P)))}`,Z=document.createElement("canvas");Z.width=((We=W.current)==null?void 0:We.width)||800,Z.height=((Ot=W.current)==null?void 0:Ot.height)||600;const le=Z.getContext("2d"),ge=new Image;ge.onload=()=>{if(!le)return;le.fillStyle="white",le.fillRect(0,0,Z.width,Z.height),le.drawImage(ge,0,0,Z.width,Z.height),W.current&&le.drawImage(W.current,0,0);const ot=Z.toDataURL("image/png").split(",")[1];r(ot,X),Y(""),h(!1)},ge.src=re};return E.jsxs("div",{ref:O,className:`flex flex-col gap-6 mb-12 ${i?"fixed inset-0 z-[100] bg-gray-900 p-0 sm:p-4 overflow-hidden h-[100dvh]":"animate-fade-in"}`,children:[E.jsxs("div",{className:"relative group w-full h-full flex flex-col",children:[!i&&E.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"}),E.jsxs("div",{className:`relative bg-white dark:bg-[#1e1e1e] ring-1 ring-gray-900/5 dark:ring-white/10 shadow-xl overflow-hidden ${i?"h-full flex flex-col rounded-none sm:rounded-lg":"rounded-lg"}`,children:[E.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex flex-wrap justify-between items-center z-10 gap-2 overflow-x-auto no-scrollbar shrink-0",children:[E.jsx("h3",{className:"font-hand font-bold text-lg text-gray-800 dark:text-gray-200 truncate max-w-[150px] sm:max-w-[200px] shrink-0",children:n}),E.jsxs("div",{className:"flex items-center gap-2 flex-nowrap shrink-0",children:[p&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"flex items-center bg-gray-200 dark:bg-gray-700 rounded-lg p-0.5 mr-2",children:["pen","eraser","box","circle","arrow","text"].map(L=>E.jsxs("button",{onClick:()=>D(L),className:`p-2 sm:p-1.5 rounded-md text-xs font-semibold capitalize ${I===L?"bg-white dark:bg-gray-600 shadow text-blue-600":"text-gray-500"}`,title:L,children:[L==="pen"&&"",L==="eraser"&&"",L==="box"&&"",L==="circle"&&"",L==="arrow"&&"",L==="text"&&"T"]},L))}),E.jsx("div",{className:"flex items-center gap-1 mr-2 bg-gray-200 dark:bg-gray-700 p-1 rounded-lg",children:G0.map(L=>E.jsx("button",{onClick:()=>F(L),className:`w-5 h-5 sm:w-4 sm:h-4 rounded-full border border-gray-300 dark:border-gray-600 ${R===L?"ring-2 ring-offset-1 ring-blue-500":""}`,style:{backgroundColor:L},title:L},L))}),E.jsxs("div",{className:"flex items-center mr-2 text-gray-500 border-l border-gray-300 dark:border-gray-600 pl-2",children:[E.jsx("button",{onClick:ye,disabled:q<0,className:"p-2 sm:p-1 hover:text-blue-500 disabled:opacity-30",title:"Undo",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),E.jsx("button",{onClick:fe,disabled:q>=z.length-1,className:"p-2 sm:p-1 hover:text-blue-500 disabled:opacity-30",title:"Redo",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})})})]})]}),E.jsx("button",{onClick:ee,className:"p-2 sm:p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded mr-1",title:"Download SVG",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),E.jsx("button",{onClick:j,className:"p-2 sm:p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:"Reset View",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),E.jsx("button",{onClick:()=>u(L=>Math.max(.5,L-.1)),className:"p-2 sm:p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:"Zoom Out",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),E.jsxs("span",{className:"text-xs font-mono min-w-[30px] text-center hidden sm:inline",children:[Math.round(l*100),"%"]}),E.jsx("button",{onClick:()=>u(L=>Math.min(3,L+.1)),className:"p-2 sm:p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:"Zoom In",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),E.jsx("div",{className:"h-4 w-px bg-gray-300 dark:bg-gray-600 mx-1"}),E.jsx("button",{onClick:()=>h(!p),className:`p-2 sm:p-1 rounded transition-colors ${p?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:p?"Exit Annotation Mode":"Annotate",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),E.jsx("button",{onClick:ne,className:"p-2 sm:p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",title:i?"Minimize":"Maximize",children:i?E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]}),E.jsx("div",{className:`relative overflow-hidden bg-paper dark:bg-chalkboard-800 ${i?"flex-1":"min-h-[400px] aspect-square sm:aspect-video"} ${p?"":"cursor-grab active:cursor-grabbing"}`,style:{touchAction:"none"},onMouseDown:me,onMouseMove:Pe,onMouseUp:Ee,onMouseLeave:Ee,onTouchStart:nt,onTouchMove:rt,onTouchEnd:S,children:E.jsxs("div",{ref:B,className:"absolute inset-0 transition-transform duration-75 origin-top-left flex items-center justify-center w-full h-full will-change-transform",style:{transform:`translate(${d.x}px, ${d.y}px) scale(${l})`},children:[E.jsx("div",{className:"pointer-events-none select-none w-full h-full flex items-center justify-center p-2 sm:p-8 [&>svg]:w-full [&>svg]:h-full",dangerouslySetInnerHTML:{__html:M}}),p&&E.jsx("canvas",{ref:W,className:"absolute inset-0 z-20 cursor-crosshair touch-none",onClick:L=>L.stopPropagation()})]})}),p&&E.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 p-3 flex flex-wrap gap-2 items-center justify-between shrink-0",children:[E.jsx("div",{className:"flex gap-2 text-xs",children:E.jsx("button",{onClick:()=>U(!0),className:"text-red-500 hover:underline",children:"Clear Drawings"})}),E.jsxs("div",{className:"flex gap-2 flex-1 max-w-md",children:[E.jsx("input",{type:"text",value:X,onChange:L=>Y(L.target.value),placeholder:"Circle something and ask...",className:"flex-1 px-3 py-1 text-sm rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"}),E.jsx(De,{size:"sm",onClick:K,disabled:o||!X,children:o?"Analyzing...":"Ask AI"})]})]})]})]}),E.jsx("div",{className:`prose dark:prose-invert max-w-none bg-white/50 dark:bg-gray-800/50 p-6 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm ${i?"hidden":""}`,children:E.jsx("div",{className:"markdown-body whitespace-pre-wrap font-mono text-sm leading-relaxed",children:e})})]})};var q0={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $0,W0;function J0(){return{geminiUrl:$0,vertexUrl:W0}}function Y0(t,e,n,r){var o,i;if(!(t!=null&&t.baseUrl)){const s=J0();return e?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(i=s.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class an{}function ie(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function c(t,e,n){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let d=0;d<u.length;d++){const f=u[d];c(f,e.slice(i+1),n[d])}else for(const d of u)c(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];c(u[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],o=t[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const o=e[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(l=>a(l,e.slice(r+1),n)):n}else return n}else t=t[o]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function K0(t,e){for(const[n,r]of Object.entries(e)){const o=n.split("."),i=r.split("."),s=new Set;let l=-1;for(let u=0;u<o.length;u++)if(o[u]==="*"){l=u;break}if(l!==-1&&i.length>l)for(let u=l;u<i.length;u++){const d=i[u];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Ol(t,o,i,0,s)}}function Ol(t,e,n,r,o){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const u of l[s])Ol(u,e,n,r+1,o)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(d=>!d.startsWith("_")&&!o.has(d)),u={};for(const d of l)u[d]=s[d];for(const[d,f]of Object.entries(u)){const p=[];for(const h of n.slice(r))h==="*"?p.push(d):p.push(h);c(s,p,f)}for(const d of l)delete s[d]}}else{const s=t;i in s&&Ol(s[i],e,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qa(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X0(t){const e={},n=a(t,["operationName"]);n!=null&&c(e,["operationName"],n);const r=a(t,["resourceName"]);return r!=null&&c(e,["_url","resourceName"],r),e}function Q0(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],j0(s)),e}function Z0(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response"]);return s!=null&&c(e,["response"],ey(s)),e}function j0(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ty(s))),c(e,["generatedVideos"],i)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function ey(t){const e={},n=a(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ny(s))),c(e,["generatedVideos"],i)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function ty(t){const e={},n=a(t,["video"]);return n!=null&&c(e,["video"],ay(n)),e}function ny(t){const e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],uy(n)),e}function ry(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function oy(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function iy(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response"]);return s!=null&&c(e,["response"],sy(s)),e}function sy(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function gh(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response"]);return s!=null&&c(e,["response"],ly(s)),e}function ly(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function ay(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&c(e,["videoBytes"],Qa(r));const o=a(t,["encoding"]);return o!=null&&c(e,["mimeType"],o),e}function uy(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["videoBytes"],Qa(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yc;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(yc||(yc={}));var vc;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(vc||(vc={}));var _c;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(_c||(_c={}));var Ye;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ye||(Ye={}));var Sc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Sc||(Sc={}));var wc;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(wc||(wc={}));var xc;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(xc||(xc={}));var Ec;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ec||(Ec={}));var Cc;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Cc||(Cc={}));var Tc;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Tc||(Tc={}));var Ic;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ic||(Ic={}));var kc;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(kc||(kc={}));var Ac;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ac||(Ac={}));var Nc;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Nc||(Nc={}));var Rc;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Rc||(Rc={}));var Pc;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Pc||(Pc={}));var Mc;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Mc||(Mc={}));var Dc;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Dc||(Dc={}));var bc;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(bc||(bc={}));var Oi;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Oi||(Oi={}));var Lc;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Lc||(Lc={}));var Uc;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Uc||(Uc={}));var Fc;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Fc||(Fc={}));var ql;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ql||(ql={}));var Bc;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Bc||(Bc={}));var zc;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(zc||(zc={}));var Vc;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Vc||(Vc={}));var Gc;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Gc||(Gc={}));var Hc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Hc||(Hc={}));var Oc;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Oc||(Oc={}));var qc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(qc||(qc={}));var $c;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})($c||($c={}));var Wc;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Wc||(Wc={}));var Jc;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Jc||(Jc={}));var Yc;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Yc||(Yc={}));var Kc;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Kc||(Kc={}));var Xc;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Xc||(Xc={}));var Qc;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Qc||(Qc={}));var Zc;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Zc||(Zc={}));var jc;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(jc||(jc={}));var ed;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ed||(ed={}));var td;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(td||(td={}));var nd;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(nd||(nd={}));var rd;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(rd||(rd={}));var od;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(od||(od={}));var id;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(id||(id={}));var sd;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(sd||(sd={}));var ld;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ld||(ld={}));var ad;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ad||(ad={}));var ud;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ud||(ud={}));var cd;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(cd||(cd={}));var dd;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(dd||(dd={}));var fd;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(fd||(fd={}));var pd;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(pd||(pd={}));var hd;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(hd||(hd={}));var hr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(hr||(hr={}));class $l{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Jr{get text(){var e,n,r,o,i,s,l,u;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const h of(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[m,_]of Object.entries(h))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(_!==null||_!==void 0)&&p.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,o,i,s,l,u;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[h,m]of Object.entries(p))h!=="inlineData"&&(m!==null||m!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,o,i,s,l,u;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,o,i,s,l,u,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,o,i,s,l,u,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(u=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class md{}class gd{}class cy{}class dy{}class fy{}class py{}class yd{}class vd{}class _d{}class hy{}class qi{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new qi;let o;const i=e;return n?o=Z0(i):o=Q0(i),Object.assign(r,o),r}}class Sd{}class wd{}class xd{}class Ed{}class my{}class gy{}class yy{}class Za{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Za,i=iy(e);return Object.assign(r,i),r}}class vy{}class _y{}class Sy{}class Cd{}class wy{get text(){var e,n,r;let o="",i=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,d]of Object.entries(l))u!=="text"&&u!=="thought"&&d!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,o+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,n,r;let o="";const i=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&i.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class xy{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ja{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ja,i=gh(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Se(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function yh(t,e){const n=Se(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function vh(t){return Array.isArray(t)?t.map(e=>$i(e)):[$i(t)]}function $i(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function _h(t){const e=$i(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Sh(t){const e=$i(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Td(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function wh(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Td(e)):[Td(t)]}function Wl(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Id(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function kd(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function et(t){if(t==null)throw new Error("ContentUnion is required");return Wl(t)?t:{role:"user",parts:wh(t)}}function eu(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=et(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=et(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>et(n)):[et(e)]}function At(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Id(t)||kd(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[et(t)]}const e=[],n=[],r=Wl(t[0]);for(const o of t){const i=Wl(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(o);else{if(Id(o)||kd(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||e.push({role:"user",parts:wh(n)}),e}function Ey(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Ye).includes(n[0].toUpperCase())?n[0].toUpperCase():Ye.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Ye).includes(r.toUpperCase())?r.toUpperCase():Ye.TYPE_UNSPECIFIED})}}function xr(t){const e={},n=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&Ey(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Ye).includes(l.toUpperCase())?l.toUpperCase():Ye.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=xr(l);else if(r.includes(s)){const u=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}u.push(xr(d))}e[s]=u}else if(o.includes(s)){const u={};for(const[d,f]of Object.entries(l))u[d]=xr(f);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=l}return e}function tu(t){return xr(t)}function nu(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ru(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function br(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=xr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=xr(e.response));return t}function Lr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Cy(t,e,n,r=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function un(t,e){if(typeof e!="string")throw new Error("name must be a string");return Cy(t,e,"cachedContents")}function xh(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Pn(t){return Qa(t)}function Ty(t){return t!=null&&typeof t=="object"&&"name"in t}function Iy(t){return t!=null&&typeof t=="object"&&"video"in t}function ky(t){return t!=null&&typeof t=="object"&&"uri"in t}function Eh(t){var e;let n;if(Ty(t)&&(n=t.name),!(ky(t)&&(n=t.uri,n===void 0))&&!(Iy(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Ch(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Th(t){for(const e of["models","tunedModels","publisherModels"])if(Ay(t,e))return t[e];return[]}function Ay(t,e){return t!==null&&typeof t=="object"&&e in t}function Ny(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Ry(t,e={}){const n=[],r=new Set;for(const o of t){const i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const s=Ny(o,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Ih(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Py(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function kh(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let i=!1;for(const s of o){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ur(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Ah(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function My(t){const e={},n=a(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);const r=a(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>fv(s))),c(e,["inlinedResponses"],i)}const o=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["inlinedEmbedContentResponses"],i)}return e}function Dy(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsDestination","outputUriPrefix"]);r!=null&&c(e,["gcsUri"],r);const o=a(t,["bigqueryDestination","outputUri"]);return o!=null&&c(e,["bigqueryUri"],o),e}function by(t){const e={},n=a(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsDestination","outputUriPrefix"],r);const o=a(t,["bigqueryUri"]);if(o!=null&&c(e,["bigqueryDestination","outputUri"],o),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function yi(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata","displayName"]);r!=null&&c(e,["displayName"],r);const o=a(t,["metadata","state"]);o!=null&&c(e,["state"],Ah(o));const i=a(t,["metadata","createTime"]);i!=null&&c(e,["createTime"],i);const s=a(t,["metadata","endTime"]);s!=null&&c(e,["endTime"],s);const l=a(t,["metadata","updateTime"]);l!=null&&c(e,["updateTime"],l);const u=a(t,["metadata","model"]);u!=null&&c(e,["model"],u);const d=a(t,["metadata","output"]);return d!=null&&c(e,["dest"],My(kh(d))),e}function Jl(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const o=a(t,["state"]);o!=null&&c(e,["state"],Ah(o));const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["createTime"]);s!=null&&c(e,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(e,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(e,["endTime"],u);const d=a(t,["updateTime"]);d!=null&&c(e,["updateTime"],d);const f=a(t,["model"]);f!=null&&c(e,["model"],f);const p=a(t,["inputConfig"]);p!=null&&c(e,["src"],Ly(p));const h=a(t,["outputConfig"]);h!=null&&c(e,["dest"],Dy(kh(h)));const m=a(t,["completionStats"]);return m!=null&&c(e,["completionStats"],m),e}function Ly(t){const e={},n=a(t,["instancesFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsSource","uris"]);r!=null&&c(e,["gcsUri"],r);const o=a(t,["bigquerySource","inputUri"]);return o!=null&&c(e,["bigqueryUri"],o),e}function Uy(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(e,["fileName"]);r!=null&&c(n,["fileName"],r);const o=a(e,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>dv(t,s))),c(n,["requests","requests"],i)}return n}function Fy(t){const e={},n=a(t,["format"]);n!=null&&c(e,["instancesFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsSource","uris"],r);const o=a(t,["bigqueryUri"]);if(o!=null&&c(e,["bigquerySource","inputUri"],o),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function By(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function zy(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Ur(t,r)),n}function Vy(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Ur(t,r)),n}function Gy(t){const e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&c(e,["citationMetadata"],Hy(r));const o=a(t,["tokenCount"]);o!=null&&c(e,["tokenCount"],o);const i=a(t,["finishReason"]);i!=null&&c(e,["finishReason"],i);const s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&c(e,["index"],u);const d=a(t,["logprobsResult"]);d!=null&&c(e,["logprobsResult"],d);const f=a(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),c(e,["safetyRatings"],h)}const p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function Hy(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),c(e,["citations"],r)}return e}function Nh(t){const e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>_v(i))),c(e,["parts"],o)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function Oy(t,e){const n={},r=a(t,["displayName"]);if(e!==void 0&&r!=null&&c(e,["batch","displayName"],r),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function qy(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const o=a(t,["dest"]);return e!==void 0&&o!=null&&c(e,["outputConfig"],by(Py(o))),n}function Ad(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["src"]);o!=null&&c(n,["batch","inputConfig"],Uy(t,Ih(t,o)));const i=a(e,["config"]);return i!=null&&Oy(i,n),n}function $y(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],Se(t,r));const o=a(e,["src"]);o!=null&&c(n,["inputConfig"],Fy(Ih(t,o)));const i=a(e,["config"]);return i!=null&&qy(i,n),n}function Wy(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["batch","displayName"],r),n}function Jy(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["src"]);o!=null&&c(n,["batch","inputConfig"],ev(t,o));const i=a(e,["config"]);return i!=null&&Wy(i,n),n}function Yy(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Ur(t,r)),n}function Ky(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Ur(t,r)),n}function Xy(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);return i!=null&&c(e,["error"],i),e}function Qy(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);return i!=null&&c(e,["error"],i),e}function Zy(t,e){const n={},r=a(e,["contents"]);if(r!=null){let i=eu(t,r);Array.isArray(i)&&(i=i.map(s=>s)),c(n,["requests[]","request","content"],i)}const o=a(e,["config"]);return o!=null&&(c(n,["_self"],jy(o,n)),K0(n,{"requests[].*":"requests[].request.*"})),n}function jy(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["requests[]","taskType"],r);const o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);const i=a(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&c(e,["requests[]","outputDimensionality"],i),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ev(t,e){const n={},r=a(e,["fileName"]);r!=null&&c(n,["file_name"],r);const o=a(e,["inlinedRequests"]);return o!=null&&c(n,["requests"],Zy(t,o)),n}function tv(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function nv(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rv(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ov(t,e,n){const r={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],Nh(et(o)));const i=a(e,["temperature"]);i!=null&&c(r,["temperature"],i);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(r,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&c(r,["stopSequences"],f);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const h=a(e,["logprobs"]);h!=null&&c(r,["logprobs"],h);const m=a(e,["presencePenalty"]);m!=null&&c(r,["presencePenalty"],m);const _=a(e,["frequencyPenalty"]);_!=null&&c(r,["frequencyPenalty"],_);const y=a(e,["seed"]);y!=null&&c(r,["seed"],y);const x=a(e,["responseMimeType"]);x!=null&&c(r,["responseMimeType"],x);const g=a(e,["responseSchema"]);g!=null&&c(r,["responseSchema"],tu(g));const v=a(e,["responseJsonSchema"]);if(v!=null&&c(r,["responseJsonSchema"],v),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=a(e,["safetySettings"]);if(n!==void 0&&w!=null){let z=w;Array.isArray(z)&&(z=z.map(C=>Sv(C))),c(n,["safetySettings"],z)}const T=a(e,["tools"]);if(n!==void 0&&T!=null){let z=Lr(T);Array.isArray(z)&&(z=z.map(C=>xv(br(C)))),c(n,["tools"],z)}const I=a(e,["toolConfig"]);if(n!==void 0&&I!=null&&c(n,["toolConfig"],wv(I)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=a(e,["cachedContent"]);n!==void 0&&D!=null&&c(n,["cachedContent"],un(t,D));const R=a(e,["responseModalities"]);R!=null&&c(r,["responseModalities"],R);const F=a(e,["mediaResolution"]);F!=null&&c(r,["mediaResolution"],F);const b=a(e,["speechConfig"]);if(b!=null&&c(r,["speechConfig"],nu(b)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=a(e,["thinkingConfig"]);V!=null&&c(r,["thinkingConfig"],V);const J=a(e,["imageConfig"]);J!=null&&c(r,["imageConfig"],cv(J));const N=a(e,["enableEnhancedCivicAnswers"]);return N!=null&&c(r,["enableEnhancedCivicAnswers"],N),r}function iv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Gy(d))),c(e,["candidates"],u)}const o=a(t,["modelVersion"]);o!=null&&c(e,["modelVersion"],o);const i=a(t,["promptFeedback"]);i!=null&&c(e,["promptFeedback"],i);const s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function sv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Ur(t,r)),n}function lv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Ur(t,r)),n}function av(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function uv(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function cv(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&c(e,["imageSize"],r),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function dv(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["request","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let l=At(o);Array.isArray(l)&&(l=l.map(u=>Nh(u))),c(n,["request","contents"],l)}const i=a(e,["metadata"]);i!=null&&c(n,["metadata"],i);const s=a(e,["config"]);return s!=null&&c(n,["request","generationConfig"],ov(t,s,a(n,["request"],{}))),n}function fv(t){const e={},n=a(t,["response"]);n!=null&&c(e,["response"],iv(n));const r=a(t,["error"]);return r!=null&&c(e,["error"],r),e}function pv(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);if(e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function hv(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const i=a(t,["filter"]);return e!==void 0&&i!=null&&c(e,["_query","filter"],i),n}function mv(t){const e={},n=a(t,["config"]);return n!=null&&pv(n,e),e}function gv(t){const e={},n=a(t,["config"]);return n!=null&&hv(n,e),e}function yv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>yi(s))),c(e,["batchJobs"],i)}return e}function vv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Jl(s))),c(e,["batchJobs"],i)}return e}function _v(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);const i=a(t,["fileData"]);i!=null&&c(e,["fileData"],tv(i));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],nv(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],By(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const f=a(t,["thought"]);f!=null&&c(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&c(e,["videoMetadata"],h),e}function Sv(t){const e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function wv(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],rv(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function xv(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],av(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],uv(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(sn||(sn={}));class Xn{constructor(e,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,o)}init(e,n,r){var o,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ev extends an{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Xn(sn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Ad(this.apiClient,e),r=n._url,o=ie("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,u=l.requests,d=[];for(const f of u){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const m=p.request;m.systemInstruction=h,p.request=m}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(s)r.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=$y(this.apiClient,e);return l=ie("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Jl(f))}else{const d=Ad(this.apiClient,e);return l=ie("{model}:batchGenerateContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>yi(f))}}async createEmbeddingsInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Jy(this.apiClient,e);return i=ie("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>yi(u))}}async get(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=lv(this.apiClient,e);return l=ie("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Jl(f))}else{const d=sv(this.apiClient,e);return l=ie("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>yi(f))}}async cancel(e){var n,r,o,i;let s="",l={};if(this.apiClient.isVertexAI()){const u=Vy(this.apiClient,e);s=ie("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=zy(this.apiClient,e);s=ie("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=gv(e);return l=ie("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=vv(f),h=new Cd;return Object.assign(h,p),h})}else{const d=mv(e);return l=ie("batches",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=yv(f),h=new Cd;return Object.assign(h,p),h})}}async delete(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Ky(this.apiClient,e);return l=ie("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Qy(f))}else{const d=Yy(this.apiClient,e);return l=ie("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Xy(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cv(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Nd(t){const e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Jv(i))),c(e,["parts"],o)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function Tv(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const o=a(t,["expireTime"]);e!==void 0&&o!=null&&c(e,["expireTime"],o);const i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let f=At(s);Array.isArray(f)&&(f=f.map(p=>Nd(p))),c(e,["contents"],f)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],Nd(et(l)));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(p=>Kv(p))),c(e,["tools"],f)}const d=a(t,["toolConfig"]);if(e!==void 0&&d!=null&&c(e,["toolConfig"],Yv(d)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Iv(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const o=a(t,["expireTime"]);e!==void 0&&o!=null&&c(e,["expireTime"],o);const i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=At(s);Array.isArray(p)&&(p=p.map(h=>h)),c(e,["contents"],p)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],et(l));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(h=>Xv(h))),c(e,["tools"],p)}const d=a(t,["toolConfig"]);e!==void 0&&d!=null&&c(e,["toolConfig"],d);const f=a(t,["kmsKeyName"]);return e!==void 0&&f!=null&&c(e,["encryption_spec","kmsKeyName"],f),n}function kv(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],yh(t,r));const o=a(e,["config"]);return o!=null&&Tv(o,n),n}function Av(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],yh(t,r));const o=a(e,["config"]);return o!=null&&Iv(o,n),n}function Nv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],un(t,r)),n}function Rv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],un(t,r)),n}function Pv(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function Mv(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function Dv(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function bv(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Lv(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Uv(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);const i=a(t,["parametersJsonSchema"]);i!=null&&c(e,["parametersJsonSchema"],i);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function Fv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],un(t,r)),n}function Bv(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],un(t,r)),n}function zv(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function Vv(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function Gv(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function Hv(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function Ov(t){const e={},n=a(t,["config"]);return n!=null&&Gv(n,e),e}function qv(t){const e={},n=a(t,["config"]);return n!=null&&Hv(n,e),e}function $v(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["cachedContents"],i)}return e}function Wv(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["cachedContents"],i)}return e}function Jv(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);const i=a(t,["fileData"]);i!=null&&c(e,["fileData"],Dv(i));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],bv(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Cv(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const f=a(t,["thought"]);f!=null&&c(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&c(e,["videoMetadata"],h),e}function Yv(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],Lv(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function Kv(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],zv(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],Vv(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function Xv(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>Uv(h))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],d);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function Qv(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const o=a(t,["expireTime"]);return e!==void 0&&o!=null&&c(e,["expireTime"],o),n}function Zv(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const o=a(t,["expireTime"]);return e!==void 0&&o!=null&&c(e,["expireTime"],o),n}function jv(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],un(t,r));const o=a(e,["config"]);return o!=null&&Qv(o,n),n}function e_(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],un(t,r));const o=a(e,["config"]);return o!=null&&Zv(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t_ extends an{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Xn(sn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Av(this.apiClient,e);return l=ie("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=kv(this.apiClient,e);return l=ie("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Bv(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=Fv(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Rv(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Mv(f),h=new xd;return Object.assign(h,p),h})}else{const d=Nv(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Pv(f),h=new xd;return Object.assign(h,p),h})}}async update(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=e_(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=jv(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=qv(e);return l=ie("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Wv(f),h=new Ed;return Object.assign(h,p),h})}else{const d=Ov(e);return l=ie("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=$v(f),h=new Ed;return Object.assign(h,p),h})}}}function Wi(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Rd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function de(t){return this instanceof de?(this.v=t,this):new de(t)}function zt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(_){return Promise.resolve(_).then(m,p)}}function l(m,_){r[m]&&(o[m]=function(y){return new Promise(function(x,g){i.push([m,y,x,g])>1||u(m,y)})},_&&(o[m]=_(o[m])))}function u(m,_){try{d(r[m](_))}catch(y){h(i[0][3],y)}}function d(m){m.value instanceof de?Promise.resolve(m.value.v).then(f,p):h(i[0][2],m)}function f(m){u("next",m)}function p(m){u("throw",m)}function h(m,_){m(_),i.shift(),i.length&&u(i[0][0],i[0][1])}}function Vt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Rd=="function"?Rd(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(l,u){s=t[i](s),o(l,u,s.done,s.value)})}}function o(i,s,l,u){Promise.resolve(u).then(function(d){i({value:d,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n_(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Rh(n)}function Rh(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function r_(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Pd(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const o=[];let i=!0;for(;r<n&&t[r].role==="model";)o.push(t[r]),i&&!Rh(t[r])&&(i=!1),r++;i?e.push(...o):e.pop()}return e}class o_{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new i_(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class i_{constructor(e,n,r,o={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),r_(i)}async sendMessage(e){var n;await this.sendPromise;const r=et(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,l;const u=await o,d=(s=(i=u.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(l=f.slice(p))!==null&&l!==void 0?l:[]);const m=d?[d]:[];this.recordHistory(r,m,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const r=et(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const i=await o;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?Pd(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return zt(this,arguments,function*(){var o,i,s,l,u,d;const f=[];try{for(var p=!0,h=Vt(e),m;m=yield de(h.next()),o=m.done,!o;p=!0){l=m.value,p=!1;const _=l;if(n_(_)){const y=(d=(u=_.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content;y!==void 0&&f.push(y)}yield yield de(_)}}catch(_){i={error:_}}finally{try{!p&&!o&&(s=h.return)&&(yield de(s.call(h)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let o=[];n.length>0&&n.every(i=>i.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Pd(r)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ds extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ds.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s_(t){const e={},n=a(t,["file"]);return n!=null&&c(e,["file"],n),e}function l_(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function a_(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],Eh(n)),e}function u_(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function c_(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],Eh(n)),e}function d_(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function f_(t){const e={},n=a(t,["config"]);return n!=null&&d_(n,e),e}function p_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h_ extends an{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Xn(sn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=f_(e);return i=ie("files",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>{const d=p_(u),f=new vy;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=s_(e);return i=ie("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=l_(u),f=new _y;return Object.assign(f,d),f})}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=c_(e);return i=ie("files/{file}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=a_(e);return i=ie("files/{file}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>{const d=u_(u),f=new Sy;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vi(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function m_(t){const e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>P_(i))),c(e,["parts"],o)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function g_(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function y_(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function v_(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);const i=a(t,["parametersJsonSchema"]);i!=null&&c(e,["parametersJsonSchema"],i);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function __(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&c(e,["responseJsonSchema"],r);const o=a(t,["audioTimestamp"]);o!=null&&c(e,["audioTimestamp"],o);const i=a(t,["candidateCount"]);i!=null&&c(e,["candidateCount"],i);const s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);const d=a(t,["maxOutputTokens"]);d!=null&&c(e,["maxOutputTokens"],d);const f=a(t,["mediaResolution"]);f!=null&&c(e,["mediaResolution"],f);const p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);const h=a(t,["responseLogprobs"]);h!=null&&c(e,["responseLogprobs"],h);const m=a(t,["responseMimeType"]);m!=null&&c(e,["responseMimeType"],m);const _=a(t,["responseModalities"]);_!=null&&c(e,["responseModalities"],_);const y=a(t,["responseSchema"]);y!=null&&c(e,["responseSchema"],y);const x=a(t,["routingConfig"]);x!=null&&c(e,["routingConfig"],x);const g=a(t,["seed"]);g!=null&&c(e,["seed"],g);const v=a(t,["speechConfig"]);v!=null&&c(e,["speechConfig"],v);const w=a(t,["stopSequences"]);w!=null&&c(e,["stopSequences"],w);const T=a(t,["temperature"]);T!=null&&c(e,["temperature"],T);const I=a(t,["thinkingConfig"]);I!=null&&c(e,["thinkingConfig"],I);const D=a(t,["topK"]);D!=null&&c(e,["topK"],D);const R=a(t,["topP"]);if(R!=null&&c(e,["topP"],R),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function S_(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function w_(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function x_(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);const i=a(t,["temperature"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","temperature"],i);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","seed"],f);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],ru(p));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","thinkingConfig"],h);const m=a(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=a(t,["systemInstruction"]);e!==void 0&&_!=null&&c(e,["setup","systemInstruction"],m_(et(_)));const y=a(t,["tools"]);if(e!==void 0&&y!=null){let D=Lr(y);Array.isArray(D)&&(D=D.map(R=>D_(br(R)))),c(e,["setup","tools"],D)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&c(e,["setup","sessionResumption"],M_(x));const g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);const v=a(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&c(e,["setup","outputAudioTranscription"],v);const w=a(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&c(e,["setup","realtimeInputConfig"],w);const T=a(t,["contextWindowCompression"]);e!==void 0&&T!=null&&c(e,["setup","contextWindowCompression"],T);const I=a(t,["proactivity"]);if(e!==void 0&&I!=null&&c(e,["setup","proactivity"],I),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function E_(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],__(r));const o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);const i=a(t,["temperature"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","temperature"],i);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","seed"],f);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],ru(p));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","thinkingConfig"],h);const m=a(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=a(t,["systemInstruction"]);e!==void 0&&_!=null&&c(e,["setup","systemInstruction"],et(_));const y=a(t,["tools"]);if(e!==void 0&&y!=null){let R=Lr(y);Array.isArray(R)&&(R=R.map(F=>b_(br(F)))),c(e,["setup","tools"],R)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&c(e,["setup","sessionResumption"],x);const g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);const v=a(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&c(e,["setup","outputAudioTranscription"],v);const w=a(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&c(e,["setup","realtimeInputConfig"],w);const T=a(t,["contextWindowCompression"]);e!==void 0&&T!=null&&c(e,["setup","contextWindowCompression"],T);const I=a(t,["proactivity"]);e!==void 0&&I!=null&&c(e,["setup","proactivity"],I);const D=a(t,["explicitVadSignal"]);return e!==void 0&&D!=null&&c(e,["setup","explicitVadSignal"],D),n}function C_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],Se(t,r));const o=a(e,["config"]);return o!=null&&c(n,["config"],x_(o,n)),n}function T_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],Se(t,r));const o=a(e,["config"]);return o!=null&&c(n,["config"],E_(o,n)),n}function I_(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],n),e}function k_(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),c(e,["weightedPrompts"],r)}return e}function A_(t){const e={},n=a(t,["media"]);if(n!=null){let d=vh(n);Array.isArray(d)&&(d=d.map(f=>vi(f))),c(e,["mediaChunks"],d)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],vi(Sh(r)));const o=a(t,["audioStreamEnd"]);o!=null&&c(e,["audioStreamEnd"],o);const i=a(t,["video"]);i!=null&&c(e,["video"],vi(_h(i)));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function N_(t){const e={},n=a(t,["media"]);if(n!=null){let d=vh(n);Array.isArray(d)&&(d=d.map(f=>f)),c(e,["mediaChunks"],d)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],Sh(r));const o=a(t,["audioStreamEnd"]);o!=null&&c(e,["audioStreamEnd"],o);const i=a(t,["video"]);i!=null&&c(e,["video"],_h(i));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function R_(t){const e={},n=a(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],n);const r=a(t,["serverContent"]);r!=null&&c(e,["serverContent"],r);const o=a(t,["toolCall"]);o!=null&&c(e,["toolCall"],o);const i=a(t,["toolCallCancellation"]);i!=null&&c(e,["toolCallCancellation"],i);const s=a(t,["usageMetadata"]);s!=null&&c(e,["usageMetadata"],L_(s));const l=a(t,["goAway"]);l!=null&&c(e,["goAway"],l);const u=a(t,["sessionResumptionUpdate"]);u!=null&&c(e,["sessionResumptionUpdate"],u);const d=a(t,["voiceActivityDetectionSignal"]);return d!=null&&c(e,["voiceActivityDetectionSignal"],d),e}function P_(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);const i=a(t,["fileData"]);i!=null&&c(e,["fileData"],g_(i));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],y_(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],vi(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const f=a(t,["thought"]);f!=null&&c(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&c(e,["videoMetadata"],h),e}function M_(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function D_(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],S_(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],w_(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function b_(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>v_(h))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],d);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function L_(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&c(e,["cachedContentTokenCount"],r);const o=a(t,["candidatesTokenCount"]);o!=null&&c(e,["responseTokenCount"],o);const i=a(t,["toolUsePromptTokenCount"]);i!=null&&c(e,["toolUsePromptTokenCount"],i);const s=a(t,["thoughtsTokenCount"]);s!=null&&c(e,["thoughtsTokenCount"],s);const l=a(t,["totalTokenCount"]);l!=null&&c(e,["totalTokenCount"],l);const u=a(t,["promptTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(_=>_)),c(e,["promptTokensDetails"],m)}const d=a(t,["cacheTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(_=>_)),c(e,["cacheTokensDetails"],m)}const f=a(t,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(_=>_)),c(e,["responseTokensDetails"],m)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>_)),c(e,["toolUsePromptTokensDetails"],m)}const h=a(t,["trafficType"]);return h!=null&&c(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U_(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function F_(t){const e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&c(e,["citationMetadata"],B_(r));const o=a(t,["tokenCount"]);o!=null&&c(e,["tokenCount"],o);const i=a(t,["finishReason"]);i!=null&&c(e,["finishReason"],i);const s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&c(e,["index"],u);const d=a(t,["logprobsResult"]);d!=null&&c(e,["logprobsResult"],d);const f=a(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),c(e,["safetyRatings"],h)}const p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function B_(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),c(e,["citations"],r)}return e}function z_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let i=At(o);Array.isArray(i)&&(i=i.map(s=>s)),c(n,["contents"],i)}return n}function V_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),c(e,["tokensInfo"],o)}return e}function G_(t){const e={},n=a(t,["values"]);n!=null&&c(e,["values"],n);const r=a(t,["statistics"]);return r!=null&&c(e,["statistics"],H_(r)),e}function H_(t){const e={},n=a(t,["truncated"]);n!=null&&c(e,["truncated"],n);const r=a(t,["token_count"]);return r!=null&&c(e,["tokenCount"],r),e}function fs(t){const e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>QS(i))),c(e,["parts"],o)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function O_(t){const e={},n=a(t,["controlType"]);n!=null&&c(e,["controlType"],n);const r=a(t,["enableControlImageComputation"]);return r!=null&&c(e,["computeControl"],r),e}function q_(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $_(t,e){const n={},r=a(t,["systemInstruction"]);e!==void 0&&r!=null&&c(e,["systemInstruction"],et(r));const o=a(t,["tools"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>bh(l))),c(e,["tools"],s)}const i=a(t,["generationConfig"]);return e!==void 0&&i!=null&&c(e,["generationConfig"],US(i)),n}function W_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let s=At(o);Array.isArray(s)&&(s=s.map(l=>fs(l))),c(n,["contents"],s)}const i=a(e,["config"]);return i!=null&&q_(i),n}function J_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let s=At(o);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["contents"],s)}const i=a(e,["config"]);return i!=null&&$_(i,n),n}function Y_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);r!=null&&c(e,["totalTokens"],r);const o=a(t,["cachedContentTokenCount"]);return o!=null&&c(e,["cachedContentTokenCount"],o),e}function K_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);return r!=null&&c(e,["totalTokens"],r),e}function X_(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],Se(t,r)),n}function Q_(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],Se(t,r)),n}function Z_(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function j_(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function eS(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&c(e,["parameters","includeRaiReason"],h);const m=a(t,["language"]);e!==void 0&&m!=null&&c(e,["parameters","language"],m);const _=a(t,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const y=a(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&c(e,["parameters","outputOptions","compressionQuality"],y);const x=a(t,["addWatermark"]);e!==void 0&&x!=null&&c(e,["parameters","addWatermark"],x);const g=a(t,["labels"]);e!==void 0&&g!=null&&c(e,["labels"],g);const v=a(t,["editMode"]);e!==void 0&&v!=null&&c(e,["parameters","editMode"],v);const w=a(t,["baseSteps"]);return e!==void 0&&w!=null&&c(e,["parameters","editConfig","baseSteps"],w),n}function tS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);const i=a(e,["referenceImages"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>rw(u))),c(n,["instances[0]","referenceImages"],l)}const s=a(e,["config"]);return s!=null&&eS(s,n),n}function nS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>ps(i))),c(e,["generatedImages"],o)}return e}function rS(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["requests[]","taskType"],r);const o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);const i=a(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&c(e,["requests[]","outputDimensionality"],i),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function oS(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["instances[]","task_type"],r);const o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["instances[]","title"],o);const i=a(t,["outputDimensionality"]);e!==void 0&&i!=null&&c(e,["parameters","outputDimensionality"],i);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&c(e,["instances[]","mimeType"],s);const l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&c(e,["parameters","autoTruncate"],l),n}function iS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let l=eu(t,o);Array.isArray(l)&&(l=l.map(u=>u)),c(n,["requests[]","content"],l)}const i=a(e,["config"]);i!=null&&rS(i,n);const s=a(e,["model"]);return s!==void 0&&c(n,["requests[]","model"],Se(t,s)),n}function sS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let s=eu(t,o);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["instances[]","content"],s)}const i=a(e,["config"]);return i!=null&&oS(i,n),n}function lS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["embeddings"],i)}const o=a(t,["metadata"]);return o!=null&&c(e,["metadata"],o),e}function aS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>G_(s))),c(e,["embeddings"],i)}const o=a(t,["metadata"]);return o!=null&&c(e,["metadata"],o),e}function uS(t){const e={},n=a(t,["endpoint"]);n!=null&&c(e,["name"],n);const r=a(t,["deployedModelId"]);return r!=null&&c(e,["deployedModelId"],r),e}function cS(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function dS(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fS(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pS(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);const i=a(t,["parametersJsonSchema"]);i!=null&&c(e,["parametersJsonSchema"],i);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function hS(t,e,n){const r={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],fs(et(o)));const i=a(e,["temperature"]);i!=null&&c(r,["temperature"],i);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(r,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&c(r,["stopSequences"],f);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const h=a(e,["logprobs"]);h!=null&&c(r,["logprobs"],h);const m=a(e,["presencePenalty"]);m!=null&&c(r,["presencePenalty"],m);const _=a(e,["frequencyPenalty"]);_!=null&&c(r,["frequencyPenalty"],_);const y=a(e,["seed"]);y!=null&&c(r,["seed"],y);const x=a(e,["responseMimeType"]);x!=null&&c(r,["responseMimeType"],x);const g=a(e,["responseSchema"]);g!=null&&c(r,["responseSchema"],tu(g));const v=a(e,["responseJsonSchema"]);if(v!=null&&c(r,["responseJsonSchema"],v),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=a(e,["safetySettings"]);if(n!==void 0&&w!=null){let z=w;Array.isArray(z)&&(z=z.map(C=>ow(C))),c(n,["safetySettings"],z)}const T=a(e,["tools"]);if(n!==void 0&&T!=null){let z=Lr(T);Array.isArray(z)&&(z=z.map(C=>dw(br(C)))),c(n,["tools"],z)}const I=a(e,["toolConfig"]);if(n!==void 0&&I!=null&&c(n,["toolConfig"],cw(I)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=a(e,["cachedContent"]);n!==void 0&&D!=null&&c(n,["cachedContent"],un(t,D));const R=a(e,["responseModalities"]);R!=null&&c(r,["responseModalities"],R);const F=a(e,["mediaResolution"]);F!=null&&c(r,["mediaResolution"],F);const b=a(e,["speechConfig"]);if(b!=null&&c(r,["speechConfig"],nu(b)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=a(e,["thinkingConfig"]);V!=null&&c(r,["thinkingConfig"],V);const J=a(e,["imageConfig"]);J!=null&&c(r,["imageConfig"],GS(J));const N=a(e,["enableEnhancedCivicAnswers"]);return N!=null&&c(r,["enableEnhancedCivicAnswers"],N),r}function mS(t,e,n){const r={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],et(o));const i=a(e,["temperature"]);i!=null&&c(r,["temperature"],i);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(r,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&c(r,["stopSequences"],f);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const h=a(e,["logprobs"]);h!=null&&c(r,["logprobs"],h);const m=a(e,["presencePenalty"]);m!=null&&c(r,["presencePenalty"],m);const _=a(e,["frequencyPenalty"]);_!=null&&c(r,["frequencyPenalty"],_);const y=a(e,["seed"]);y!=null&&c(r,["seed"],y);const x=a(e,["responseMimeType"]);x!=null&&c(r,["responseMimeType"],x);const g=a(e,["responseSchema"]);g!=null&&c(r,["responseSchema"],tu(g));const v=a(e,["responseJsonSchema"]);v!=null&&c(r,["responseJsonSchema"],v);const w=a(e,["routingConfig"]);w!=null&&c(r,["routingConfig"],w);const T=a(e,["modelSelectionConfig"]);T!=null&&c(r,["modelConfig"],T);const I=a(e,["safetySettings"]);if(n!==void 0&&I!=null){let se=I;Array.isArray(se)&&(se=se.map(X=>X)),c(n,["safetySettings"],se)}const D=a(e,["tools"]);if(n!==void 0&&D!=null){let se=Lr(D);Array.isArray(se)&&(se=se.map(X=>bh(br(X)))),c(n,["tools"],se)}const R=a(e,["toolConfig"]);n!==void 0&&R!=null&&c(n,["toolConfig"],R);const F=a(e,["labels"]);n!==void 0&&F!=null&&c(n,["labels"],F);const b=a(e,["cachedContent"]);n!==void 0&&b!=null&&c(n,["cachedContent"],un(t,b));const V=a(e,["responseModalities"]);V!=null&&c(r,["responseModalities"],V);const J=a(e,["mediaResolution"]);J!=null&&c(r,["mediaResolution"],J);const N=a(e,["speechConfig"]);N!=null&&c(r,["speechConfig"],nu(N));const z=a(e,["audioTimestamp"]);z!=null&&c(r,["audioTimestamp"],z);const C=a(e,["thinkingConfig"]);C!=null&&c(r,["thinkingConfig"],C);const q=a(e,["imageConfig"]);if(q!=null&&c(r,["imageConfig"],HS(q)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Md(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let s=At(o);Array.isArray(s)&&(s=s.map(l=>fs(l))),c(n,["contents"],s)}const i=a(e,["config"]);return i!=null&&c(n,["generationConfig"],hS(t,i,n)),n}function Dd(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["contents"]);if(o!=null){let s=At(o);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["contents"],s)}const i=a(e,["config"]);return i!=null&&c(n,["generationConfig"],mS(t,i,n)),n}function bd(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>F_(d))),c(e,["candidates"],u)}const o=a(t,["modelVersion"]);o!=null&&c(e,["modelVersion"],o);const i=a(t,["promptFeedback"]);i!=null&&c(e,["promptFeedback"],i);const s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function Ld(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),c(e,["candidates"],d)}const o=a(t,["createTime"]);o!=null&&c(e,["createTime"],o);const i=a(t,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);const s=a(t,["promptFeedback"]);s!=null&&c(e,["promptFeedback"],s);const l=a(t,["responseId"]);l!=null&&c(e,["responseId"],l);const u=a(t,["usageMetadata"]);return u!=null&&c(e,["usageMetadata"],u),e}function gS(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&c(e,["parameters","aspectRatio"],o);const i=a(t,["guidanceScale"]);if(e!==void 0&&i!=null&&c(e,["parameters","guidanceScale"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&c(e,["parameters","safetySetting"],s);const l=a(t,["personGeneration"]);e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l);const u=a(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&c(e,["parameters","includeSafetyAttributes"],u);const d=a(t,["includeRaiReason"]);e!==void 0&&d!=null&&c(e,["parameters","includeRaiReason"],d);const f=a(t,["language"]);e!==void 0&&f!=null&&c(e,["parameters","language"],f);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","mimeType"],p);const h=a(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&c(e,["parameters","outputOptions","compressionQuality"],h),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const m=a(t,["imageSize"]);if(e!==void 0&&m!=null&&c(e,["parameters","sampleImageSize"],m),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function yS(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&c(e,["parameters","includeRaiReason"],h);const m=a(t,["language"]);e!==void 0&&m!=null&&c(e,["parameters","language"],m);const _=a(t,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const y=a(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&c(e,["parameters","outputOptions","compressionQuality"],y);const x=a(t,["addWatermark"]);e!==void 0&&x!=null&&c(e,["parameters","addWatermark"],x);const g=a(t,["labels"]);e!==void 0&&g!=null&&c(e,["labels"],g);const v=a(t,["imageSize"]);e!==void 0&&v!=null&&c(e,["parameters","sampleImageSize"],v);const w=a(t,["enhancePrompt"]);return e!==void 0&&w!=null&&c(e,["parameters","enhancePrompt"],w),n}function vS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);const i=a(e,["config"]);return i!=null&&gS(i,n),n}function _S(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);const i=a(e,["config"]);return i!=null&&yS(i,n),n}function SS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>MS(s))),c(e,["generatedImages"],i)}const o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(e,["positivePromptSafetyAttributes"],Mh(o)),e}function wS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>ps(s))),c(e,["generatedImages"],i)}const o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(e,["positivePromptSafetyAttributes"],Dh(o)),e}function xS(t,e){const n={},r=a(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=a(t,["durationSeconds"]);if(e!==void 0&&o!=null&&c(e,["parameters","durationSeconds"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&c(e,["parameters","aspectRatio"],i);const s=a(t,["resolution"]);e!==void 0&&s!=null&&c(e,["parameters","resolution"],s);const l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&c(e,["parameters","negativePrompt"],u);const d=a(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&c(e,["parameters","enhancePrompt"],d),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=a(t,["lastFrame"]);e!==void 0&&f!=null&&c(e,["instances[0]","lastFrame"],hs(f));const p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>Cw(m))),c(e,["instances[0]","referenceImages"],h)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ES(t,e){const n={},r=a(t,["numberOfVideos"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);const i=a(t,["fps"]);e!==void 0&&i!=null&&c(e,["parameters","fps"],i);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&c(e,["parameters","durationSeconds"],s);const l=a(t,["seed"]);e!==void 0&&l!=null&&c(e,["parameters","seed"],l);const u=a(t,["aspectRatio"]);e!==void 0&&u!=null&&c(e,["parameters","aspectRatio"],u);const d=a(t,["resolution"]);e!==void 0&&d!=null&&c(e,["parameters","resolution"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);const p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&c(e,["parameters","pubsubTopic"],p);const h=a(t,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const m=a(t,["enhancePrompt"]);e!==void 0&&m!=null&&c(e,["parameters","enhancePrompt"],m);const _=a(t,["generateAudio"]);e!==void 0&&_!=null&&c(e,["parameters","generateAudio"],_);const y=a(t,["lastFrame"]);e!==void 0&&y!=null&&c(e,["instances[0]","lastFrame"],Ht(y));const x=a(t,["referenceImages"]);if(e!==void 0&&x!=null){let w=x;Array.isArray(w)&&(w=w.map(T=>Tw(T))),c(e,["instances[0]","referenceImages"],w)}const g=a(t,["mask"]);e!==void 0&&g!=null&&c(e,["instances[0]","mask"],Ew(g));const v=a(t,["compressionQuality"]);return e!==void 0&&v!=null&&c(e,["parameters","compressionQuality"],v),n}function CS(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],AS(s)),e}function TS(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response"]);return s!=null&&c(e,["response"],NS(s)),e}function IS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);const i=a(e,["image"]);i!=null&&c(n,["instances[0]","image"],hs(i));const s=a(e,["video"]);s!=null&&c(n,["instances[0]","video"],Lh(s));const l=a(e,["source"]);l!=null&&RS(l,n);const u=a(e,["config"]);return u!=null&&xS(u,n),n}function kS(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);const i=a(e,["image"]);i!=null&&c(n,["instances[0]","image"],Ht(i));const s=a(e,["video"]);s!=null&&c(n,["instances[0]","video"],Uh(s));const l=a(e,["source"]);l!=null&&PS(l,n);const u=a(e,["config"]);return u!=null&&ES(u,n),n}function AS(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>bS(s))),c(e,["generatedVideos"],i)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function NS(t){const e={},n=a(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>LS(s))),c(e,["generatedVideos"],i)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function RS(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],hs(o));const i=a(t,["video"]);return e!==void 0&&i!=null&&c(e,["instances[0]","video"],Lh(i)),n}function PS(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],Ht(o));const i=a(t,["video"]);return e!==void 0&&i!=null&&c(e,["instances[0]","video"],Uh(i)),n}function MS(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["image"],OS(n));const r=a(t,["raiFilteredReason"]);r!=null&&c(e,["raiFilteredReason"],r);const o=a(t,["_self"]);return o!=null&&c(e,["safetyAttributes"],Mh(o)),e}function ps(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["image"],Ph(n));const r=a(t,["raiFilteredReason"]);r!=null&&c(e,["raiFilteredReason"],r);const o=a(t,["_self"]);o!=null&&c(e,["safetyAttributes"],Dh(o));const i=a(t,["prompt"]);return i!=null&&c(e,["enhancedPrompt"],i),e}function DS(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["mask"],Ph(n));const r=a(t,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),c(e,["labels"],o)}return e}function bS(t){const e={},n=a(t,["video"]);return n!=null&&c(e,["video"],ww(n)),e}function LS(t){const e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],xw(n)),e}function US(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&c(e,["responseJsonSchema"],r);const o=a(t,["audioTimestamp"]);o!=null&&c(e,["audioTimestamp"],o);const i=a(t,["candidateCount"]);i!=null&&c(e,["candidateCount"],i);const s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);const d=a(t,["maxOutputTokens"]);d!=null&&c(e,["maxOutputTokens"],d);const f=a(t,["mediaResolution"]);f!=null&&c(e,["mediaResolution"],f);const p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);const h=a(t,["responseLogprobs"]);h!=null&&c(e,["responseLogprobs"],h);const m=a(t,["responseMimeType"]);m!=null&&c(e,["responseMimeType"],m);const _=a(t,["responseModalities"]);_!=null&&c(e,["responseModalities"],_);const y=a(t,["responseSchema"]);y!=null&&c(e,["responseSchema"],y);const x=a(t,["routingConfig"]);x!=null&&c(e,["routingConfig"],x);const g=a(t,["seed"]);g!=null&&c(e,["seed"],g);const v=a(t,["speechConfig"]);v!=null&&c(e,["speechConfig"],v);const w=a(t,["stopSequences"]);w!=null&&c(e,["stopSequences"],w);const T=a(t,["temperature"]);T!=null&&c(e,["temperature"],T);const I=a(t,["thinkingConfig"]);I!=null&&c(e,["thinkingConfig"],I);const D=a(t,["topK"]);D!=null&&c(e,["topK"],D);const R=a(t,["topP"]);if(R!=null&&c(e,["topP"],R),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function FS(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],Se(t,r)),n}function BS(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],Se(t,r)),n}function zS(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function VS(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function GS(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&c(e,["imageSize"],r),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function HS(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);r!=null&&c(e,["imageSize"],r);const o=a(t,["outputMimeType"]);o!=null&&c(e,["imageOutputOptions","mimeType"],o);const i=a(t,["outputCompressionQuality"]);return i!=null&&c(e,["imageOutputOptions","compressionQuality"],i),e}function OS(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&c(e,["imageBytes"],Pn(n));const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Ph(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["imageBytes"],Pn(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function hs(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&c(e,["bytesBase64Encoded"],Pn(n));const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Ht(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["imageBytes"]);r!=null&&c(e,["bytesBase64Encoded"],Pn(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function qS(t,e,n){const r={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);const i=a(e,["pageToken"]);n!==void 0&&i!=null&&c(n,["_query","pageToken"],i);const s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],Ch(t,l)),r}function $S(t,e,n){const r={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);const i=a(e,["pageToken"]);n!==void 0&&i!=null&&c(n,["_query","pageToken"],i);const s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],Ch(t,l)),r}function WS(t,e){const n={},r=a(e,["config"]);return r!=null&&qS(t,r,n),n}function JS(t,e){const n={},r=a(e,["config"]);return r!=null&&$S(t,r,n),n}function YS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["_self"]);if(o!=null){let i=Th(o);Array.isArray(i)&&(i=i.map(s=>Yl(s))),c(e,["models"],i)}return e}function KS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["_self"]);if(o!=null){let i=Th(o);Array.isArray(i)&&(i=i.map(s=>Kl(s))),c(e,["models"],i)}return e}function XS(t){const e={},n=a(t,["maskMode"]);n!=null&&c(e,["maskMode"],n);const r=a(t,["segmentationClasses"]);r!=null&&c(e,["maskClasses"],r);const o=a(t,["maskDilation"]);return o!=null&&c(e,["dilation"],o),e}function Yl(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const o=a(t,["description"]);o!=null&&c(e,["description"],o);const i=a(t,["version"]);i!=null&&c(e,["version"],i);const s=a(t,["_self"]);s!=null&&c(e,["tunedModelInfo"],fw(s));const l=a(t,["inputTokenLimit"]);l!=null&&c(e,["inputTokenLimit"],l);const u=a(t,["outputTokenLimit"]);u!=null&&c(e,["outputTokenLimit"],u);const d=a(t,["supportedGenerationMethods"]);d!=null&&c(e,["supportedActions"],d);const f=a(t,["temperature"]);f!=null&&c(e,["temperature"],f);const p=a(t,["maxTemperature"]);p!=null&&c(e,["maxTemperature"],p);const h=a(t,["topP"]);h!=null&&c(e,["topP"],h);const m=a(t,["topK"]);m!=null&&c(e,["topK"],m);const _=a(t,["thinking"]);return _!=null&&c(e,["thinking"],_),e}function Kl(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const o=a(t,["description"]);o!=null&&c(e,["description"],o);const i=a(t,["versionId"]);i!=null&&c(e,["version"],i);const s=a(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>uS(h))),c(e,["endpoints"],p)}const l=a(t,["labels"]);l!=null&&c(e,["labels"],l);const u=a(t,["_self"]);u!=null&&c(e,["tunedModelInfo"],pw(u));const d=a(t,["defaultCheckpointId"]);d!=null&&c(e,["defaultCheckpointId"],d);const f=a(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),c(e,["checkpoints"],p)}return e}function QS(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);const i=a(t,["fileData"]);i!=null&&c(e,["fileData"],cS(i));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],dS(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],U_(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const f=a(t,["thought"]);f!=null&&c(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&c(e,["videoMetadata"],h),e}function ZS(t){const e={},n=a(t,["productImage"]);return n!=null&&c(e,["image"],Ht(n)),e}function jS(t,e){const n={},r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const o=a(t,["baseSteps"]);e!==void 0&&o!=null&&c(e,["parameters","baseSteps"],o);const i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=a(t,["seed"]);e!==void 0&&s!=null&&c(e,["parameters","seed"],s);const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&c(e,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&c(e,["parameters","personGeneration"],u);const d=a(t,["addWatermark"]);e!==void 0&&d!=null&&c(e,["parameters","addWatermark"],d);const f=a(t,["outputMimeType"]);e!==void 0&&f!=null&&c(e,["parameters","outputOptions","mimeType"],f);const p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","compressionQuality"],p);const h=a(t,["enhancePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","enhancePrompt"],h);const m=a(t,["labels"]);return e!==void 0&&m!=null&&c(e,["labels"],m),n}function ew(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["source"]);o!=null&&nw(o,n);const i=a(e,["config"]);return i!=null&&jS(i,n),n}function tw(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>ps(o))),c(e,["generatedImages"],r)}return e}function nw(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const o=a(t,["personImage"]);e!==void 0&&o!=null&&c(e,["instances[0]","personImage","image"],Ht(o));const i=a(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>ZS(l))),c(e,["instances[0]","productImages"],s)}return n}function rw(t){const e={},n=a(t,["referenceImage"]);n!=null&&c(e,["referenceImage"],Ht(n));const r=a(t,["referenceId"]);r!=null&&c(e,["referenceId"],r);const o=a(t,["referenceType"]);o!=null&&c(e,["referenceType"],o);const i=a(t,["maskImageConfig"]);i!=null&&c(e,["maskImageConfig"],XS(i));const s=a(t,["controlImageConfig"]);s!=null&&c(e,["controlImageConfig"],O_(s));const l=a(t,["styleImageConfig"]);l!=null&&c(e,["styleImageConfig"],l);const u=a(t,["subjectImageConfig"]);return u!=null&&c(e,["subjectImageConfig"],u),e}function Mh(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&c(e,["scores"],r);const o=a(t,["contentType"]);return o!=null&&c(e,["contentType"],o),e}function Dh(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&c(e,["scores"],r);const o=a(t,["contentType"]);return o!=null&&c(e,["contentType"],o),e}function ow(t){const e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function iw(t){const e={},n=a(t,["image"]);return n!=null&&c(e,["image"],Ht(n)),e}function sw(t,e){const n={},r=a(t,["mode"]);e!==void 0&&r!=null&&c(e,["parameters","mode"],r);const o=a(t,["maxPredictions"]);e!==void 0&&o!=null&&c(e,["parameters","maxPredictions"],o);const i=a(t,["confidenceThreshold"]);e!==void 0&&i!=null&&c(e,["parameters","confidenceThreshold"],i);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&c(e,["parameters","maskDilation"],s);const l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&c(e,["parameters","binaryColorThreshold"],l);const u=a(t,["labels"]);return e!==void 0&&u!=null&&c(e,["labels"],u),n}function lw(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["source"]);o!=null&&uw(o,n);const i=a(e,["config"]);return i!=null&&sw(i,n),n}function aw(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>DS(o))),c(e,["generatedMasks"],r)}return e}function uw(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],Ht(o));const i=a(t,["scribbleImage"]);return e!==void 0&&i!=null&&c(e,["instances[0]","scribble"],iw(i)),n}function cw(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],fS(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function dw(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],zS(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],VS(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function bh(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>pS(h))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);const i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],d);const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function fw(t){const e={},n=a(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&c(e,["createTime"],r);const o=a(t,["updateTime"]);return o!=null&&c(e,["updateTime"],o),e}function pw(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&c(e,["createTime"],r);const o=a(t,["updateTime"]);return o!=null&&c(e,["updateTime"],o),e}function hw(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);const i=a(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&c(e,["defaultCheckpointId"],i),n}function mw(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);const i=a(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&c(e,["defaultCheckpointId"],i),n}function gw(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","name"],Se(t,r));const o=a(e,["config"]);return o!=null&&hw(o,n),n}function yw(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["config"]);return o!=null&&mw(o,n),n}function vw(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const o=a(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&c(e,["parameters","safetySetting"],o);const i=a(t,["personGeneration"]);e!==void 0&&i!=null&&c(e,["parameters","personGeneration"],i);const s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","mimeType"],l);const u=a(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&c(e,["parameters","outputOptions","compressionQuality"],u);const d=a(t,["enhanceInputImage"]);e!==void 0&&d!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=a(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);const h=a(t,["numberOfImages"]);e!==void 0&&h!=null&&c(e,["parameters","sampleCount"],h);const m=a(t,["mode"]);return e!==void 0&&m!=null&&c(e,["parameters","mode"],m),n}function _w(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],Se(t,r));const o=a(e,["image"]);o!=null&&c(n,["instances[0]","image"],Ht(o));const i=a(e,["upscaleFactor"]);i!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=a(e,["config"]);return s!=null&&vw(s,n),n}function Sw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>ps(i))),c(e,["generatedImages"],o)}return e}function ww(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&c(e,["videoBytes"],Pn(r));const o=a(t,["encoding"]);return o!=null&&c(e,["mimeType"],o),e}function xw(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["videoBytes"],Pn(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function Ew(t){const e={},n=a(t,["image"]);n!=null&&c(e,["_self"],Ht(n));const r=a(t,["maskMode"]);return r!=null&&c(e,["maskMode"],r),e}function Cw(t){const e={},n=a(t,["image"]);n!=null&&c(e,["image"],hs(n));const r=a(t,["referenceType"]);return r!=null&&c(e,["referenceType"],r),e}function Tw(t){const e={},n=a(t,["image"]);n!=null&&c(e,["image"],Ht(n));const r=a(t,["referenceType"]);return r!=null&&c(e,["referenceType"],r),e}function Lh(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["videoBytes"]);r!=null&&c(e,["encodedVideo"],Pn(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["encoding"],o),e}function Uh(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["videoBytes"]);r!=null&&c(e,["bytesBase64Encoded"],Pn(r));const o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iw(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["displayName"],r),n}function kw(t){const e={},n=a(t,["config"]);return n!=null&&Iw(n,e),e}function Aw(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function Nw(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&Aw(r,e),e}function Rw(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function Pw(t,e){const n={},r=a(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["customMetadata"],i)}const o=a(t,["chunkingConfig"]);return e!==void 0&&o!=null&&c(e,["chunkingConfig"],o),n}function Mw(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const o=a(t,["done"]);o!=null&&c(e,["done"],o);const i=a(t,["error"]);i!=null&&c(e,["error"],i);const s=a(t,["response"]);return s!=null&&c(e,["response"],bw(s)),e}function Dw(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["fileName"]);r!=null&&c(e,["fileName"],r);const o=a(t,["config"]);return o!=null&&Pw(o,e),e}function bw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function Lw(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function Uw(t){const e={},n=a(t,["config"]);return n!=null&&Lw(n,e),e}function Fw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["fileSearchStores"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["fileSearchStores"],i)}return e}function Fh(t,e){const n={},r=a(t,["mimeType"]);e!==void 0&&r!=null&&c(e,["mimeType"],r);const o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>u)),c(e,["customMetadata"],l)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&c(e,["chunkingConfig"],s),n}function Bw(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["config"]);return r!=null&&Fh(r,e),e}function zw(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vw="Content-Type",Gw="X-Server-Timeout",Hw="User-Agent",Xl="x-goog-api-client",Ow="1.34.0",qw=`google-genai-sdk/${Ow}`,$w="v1beta1",Ww="v1beta";class Jw{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:$w,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Ww,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))o.searchParams.append(s,String(l));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[o,i]of Object.entries(n))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,o){if(n&&n.timeout||o){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}o&&o.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&Yw(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Ud(o),new $l(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Ud(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return zt(this,arguments,function*(){var r;const o=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="";const l="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield de(o.read());if(d){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=i.decode(f,{stream:!0});try{const _=JSON.parse(p);if("error"in _){const y=JSON.parse(JSON.stringify(_.error)),x=y.status,g=y.code,v=`got status: ${x}. ${JSON.stringify(_)}`;if(g>=400&&g<600)throw new ds({message:v,status:g})}}catch(_){if(_.name==="ApiError")throw _}s+=p;let h=-1,m=0;for(;;){h=-1,m=0;for(const x of u){const g=s.indexOf(x);g!==-1&&(h===-1||g<h)&&(h=g,m=x.length)}if(h===-1)break;const _=s.substring(0,h);s=s.substring(h+m);const y=_.trim();if(y.startsWith(l)){const x=y.substring(l.length).trim();try{const g=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield de(new $l(g))}catch(g){throw new Error(`exception parsing stream chunk ${x}. ${g}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=qw+" "+this.clientOptions.userAgentExtra;return e[Hw]=n,e[Xl]=n,e[Vw]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[o,i]of Object.entries(e.headers))r.append(o,i);e.timeout&&e.timeout>0&&r.append(Gw,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);o.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=l;const u={file:o},d=this.getFileName(e),f=ie("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,d,u,n==null?void 0:n.httpOptions);return i.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var o;const i=this.clientOptions.uploader,s=await i.stat(n),l=String(s.size),u=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};r!=null&&Fh(r,p);const h=await this.fetchUploadUrl(d,l,u,f,p,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,o,i,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:u});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(l=d==null?void 0:d.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Ud(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new ds({message:o,status:n}):new Error(o)}}function Yw(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,s){const l=Object.assign({},i);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const d=s[u],f=l[u];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?l[u]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),l[u]=d)}return l}const o=r(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kw="mcp_used/unknown";let Xw=!1;function Bh(t){for(const e of t)if(Qw(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Xw}function zh(t){var e;const n=(e=t[Xl])!==null&&e!==void 0?e:"";t[Xl]=(n+` ${Kw}`).trimStart()}function Qw(t){return t!==null&&typeof t=="object"&&t instanceof ou}function Zw(t){return zt(this,arguments,function*(n,r=100){let o,i=0;for(;i<r;){const s=yield de(n.listTools({cursor:o}));for(const l of s.tools)yield yield de(l),i++;if(!s.nextCursor)break;o=s.nextCursor}})}class ou{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ou(e,n)}async initialize(){var e,n,r,o;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var l=!0,u=(n=void 0,Vt(Zw(f))),d;d=await u.next(),e=d.done,!e;l=!0){o=d.value,l=!1;const p=o;s.push(p);const h=p.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=f}}catch(p){n={error:p}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),Ry(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await o.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jw(t,e,n){const r=new xy;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),e(r)}class ex{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=rx(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const f=new Promise(w=>{d=w}),p=e.callbacks,h=function(){d({})},m=this.apiClient,_={onopen:h,onmessage:w=>{jw(m,p.onmessage,w)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(w){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(w){}},y=this.webSocketFactory.create(u,nx(s),_);y.connect(),await f;const v={setup:{model:Se(this.apiClient,e.model)}};return y.send(JSON.stringify(v)),new tx(y,this.apiClient)}}class tx{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=k_(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=I_(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(hr.PLAY)}pause(){this.sendPlaybackControl(hr.PAUSE)}stop(){this.sendPlaybackControl(hr.STOP)}resetContext(){this.sendPlaybackControl(hr.RESET_CONTEXT)}close(){this.conn.close()}}function nx(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function rx(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ox="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ix(t,e,n){const r=new wy;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const i=JSON.parse(o);if(t.isVertexAI()){const s=R_(i);Object.assign(r,s)}else Object.assign(r,i);e(r)}class sx{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new ex(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,o,i,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Bh(e.config.tools)&&zh(p);const h=cx(p);if(this.apiClient.isVertexAI())f=`${u}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{const b=this.apiClient.getApiKey();let V="BidiGenerateContent",J="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",J="access_token"),f=`${u}/ws/google.ai.generativelanguage.${d}.GenerativeService.${V}?${J}=${b}`}let m=()=>{};const _=new Promise(b=>{m=b}),y=e.callbacks,x=function(){var b;(b=y==null?void 0:y.onopen)===null||b===void 0||b.call(y),m({})},g=this.apiClient,v={onopen:x,onmessage:b=>{ix(g,y.onmessage,b)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(b){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(b){}},w=this.webSocketFactory.create(f,ux(h),v);w.connect(),await _;let T=Se(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const b=this.apiClient.getProject(),V=this.apiClient.getLocation();T=`projects/${b}/locations/${V}/`+T}let I={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Oi.AUDIO]}:e.config.responseModalities=[Oi.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],R=[];for(const b of D)if(this.isCallableTool(b)){const V=b;R.push(await V.tool())}else R.push(b);R.length>0&&(e.config.tools=R);const F={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=T_(this.apiClient,F):I=C_(this.apiClient,F),delete I.config,w.send(JSON.stringify(I)),new ax(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const lx={turnComplete:!0};class ax{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=At(n.turns),e.isVertexAI()||(r=r.map(o=>fs(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(ox)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},lx),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:N_(e)}:n={realtimeInput:A_(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ux(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function cx(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fd=10;function Bd(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Er(s)){o=!0;break}if(!o)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Er(t){return"callTool"in t&&typeof t.callTool=="function"}function dx(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Er(o)))!==null&&r!==void 0?r:!1}function zd(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,o)=>{if(Er(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(o)}),n}function Vd(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fx extends an{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,o,i,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!dx(n)||Bd(n.config))return await this.generateContentInternal(u);const d=zd(n);if(d.length>0){const y=d.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let f,p;const h=At(u.contents),m=(i=(o=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Fd;let _=0;for(;_<m&&(f=await this.generateContentInternal(u),!(!f.functionCalls||f.functionCalls.length===0));){const y=f.candidates[0].content,x=[];for(const g of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Er(g)){const w=await g.callTool(f.functionCalls);x.push(...w)}_++,p={role:"user",parts:x},u.contents=At(u.contents),u.contents.push(y),u.contents.push(p),Vd(u.config)&&(h.push(y),h.push(p))}return Vd(u.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var r,o,i,s,l;if(this.maybeMoveToResponseJsonSchem(n),Bd(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const u=zd(n);if(u.length>0){const p=u.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let i;const s=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((o=u==null?void 0:u.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=u==null?void 0:u.safetyAttributes:s.push(u);let l;return i?l={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Xn(sn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,i,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,o;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const s=await Promise.all(i.map(async u=>Er(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&Bh(e.config.tools)){const u=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},u);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),zh(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,r,o;const i=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Er(s)){const l=s,u=await l.tool();for(const d of(o=u.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,l)}}return i}async processAfcStream(e){var n,r,o;const i=(o=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Fd;let s=!1,l=0;const u=await this.initAfcToolsMap(e);return function(d,f,p){return zt(this,arguments,function*(){for(var h,m,_,y,x,g;l<i;){s&&(l++,s=!1);const I=yield de(d.processParamsMaybeAddMcpUsage(p)),D=yield de(d.generateContentStreamInternal(I)),R=[],F=[];try{for(var v=!0,w=(m=void 0,Vt(D)),T;T=yield de(w.next()),h=T.done,!h;v=!0){y=T.value,v=!1;const b=y;if(yield yield de(b),b.candidates&&(!((x=b.candidates[0])===null||x===void 0)&&x.content)){F.push(b.candidates[0].content);for(const V of(g=b.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(l<i&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(V.functionCall.name)){const J=yield de(f.get(V.functionCall.name).callTool([V.functionCall]));R.push(...J)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(b){m={error:b}}finally{try{!v&&!h&&(_=w.return)&&(yield de(_.call(w)))}finally{if(m)throw m.error}}if(R.length>0){s=!0;const b=new Jr;b.candidates=[{content:{role:"user",parts:R}}],yield yield de(b);const V=[];V.push(...F),V.push({role:"user",parts:R});const J=At(p.contents).concat(V);p.contents=J}else break}})}(this,u,e)}async generateContentInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Dd(this.apiClient,e);return l=ie("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Ld(f),h=new Jr;return Object.assign(h,p),h})}else{const d=Md(this.apiClient,e);return l=ie("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=bd(f),h=new Jr;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Dd(this.apiClient,e);return l=ie("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return zt(this,arguments,function*(){var h,m,_,y;try{for(var x=!0,g=Vt(p),v;v=yield de(g.next()),h=v.done,!h;x=!0){y=v.value,x=!1;const w=y,T=Ld(yield de(w.json()));T.sdkHttpResponse={headers:w.headers};const I=new Jr;Object.assign(I,T),yield yield de(I)}}catch(w){m={error:w}}finally{try{!x&&!h&&(_=g.return)&&(yield de(_.call(g)))}finally{if(m)throw m.error}}})})}else{const d=Md(this.apiClient,e);return l=ie("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return zt(this,arguments,function*(){var h,m,_,y;try{for(var x=!0,g=Vt(p),v;v=yield de(g.next()),h=v.done,!h;x=!0){y=v.value,x=!1;const w=y,T=bd(yield de(w.json()));T.sdkHttpResponse={headers:w.headers};const I=new Jr;Object.assign(I,T),yield yield de(I)}}catch(w){m={error:w}}finally{try{!x&&!h&&(_=g.return)&&(yield de(_.call(g)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=sS(this.apiClient,e);return l=ie("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=aS(f),h=new md;return Object.assign(h,p),h})}else{const d=iS(this.apiClient,e);return l=ie("{model}:batchEmbedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=lS(f),h=new md;return Object.assign(h,p),h})}}async generateImagesInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=_S(this.apiClient,e);return l=ie("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=wS(f),h=new gd;return Object.assign(h,p),h})}else{const d=vS(this.apiClient,e);return l=ie("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=SS(f),h=new gd;return Object.assign(h,p),h})}}async editImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=tS(this.apiClient,e);return i=ie("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>{const d=nS(u),f=new cy;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=_w(this.apiClient,e);return i=ie("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>{const d=Sw(u),f=new dy;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=ew(this.apiClient,e);return i=ie("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=tw(u),f=new fy;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=lw(this.apiClient,e);return i=ie("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=aw(u),f=new py;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=BS(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Kl(f))}else{const d=FS(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Yl(f))}}async listInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=JS(this.apiClient,e);return l=ie("{models_url}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=KS(f),h=new yd;return Object.assign(h,p),h})}else{const d=WS(this.apiClient,e);return l=ie("{models_url}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=YS(f),h=new yd;return Object.assign(h,p),h})}}async update(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=yw(this.apiClient,e);return l=ie("{model}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Kl(f))}else{const d=gw(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Yl(f))}}async delete(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Q_(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=j_(f),h=new vd;return Object.assign(h,p),h})}else{const d=X_(this.apiClient,e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Z_(f),h=new vd;return Object.assign(h,p),h})}}async countTokens(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=J_(this.apiClient,e);return l=ie("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=K_(f),h=new _d;return Object.assign(h,p),h})}else{const d=W_(this.apiClient,e);return l=ie("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Y_(f),h=new _d;return Object.assign(h,p),h})}}async computeTokens(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=z_(this.apiClient,e);return i=ie("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>{const d=V_(u),f=new hy;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=kS(this.apiClient,e);return l=ie("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=TS(f),h=new qi;return Object.assign(h,p),h})}else{const d=IS(this.apiClient,e);return l=ie("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const p=CS(f),h=new qi;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class px extends an{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=oy(e);return l=ie("{operationName}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const d=ry(e);return l=ie("{operationName}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=X0(e);return i=ie("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hx(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function mx(t){const e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Cx(i))),c(e,["parts"],o)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function gx(t,e,n){const r={},o=a(e,["expireTime"]);n!==void 0&&o!=null&&c(n,["expireTime"],o);const i=a(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&c(n,["newSessionExpireTime"],i);const s=a(e,["uses"]);n!==void 0&&s!=null&&c(n,["uses"],s);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&c(n,["bidiGenerateContentSetup"],Ex(t,l));const u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&c(n,["fieldMask"],u),r}function yx(t,e){const n={},r=a(e,["config"]);return r!=null&&c(n,["config"],gx(t,r,n)),n}function vx(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function _x(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Sx(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function wx(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function xx(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);const i=a(t,["temperature"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","temperature"],i);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","seed"],f);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],ru(p));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","thinkingConfig"],h);const m=a(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=a(t,["systemInstruction"]);e!==void 0&&_!=null&&c(e,["setup","systemInstruction"],mx(et(_)));const y=a(t,["tools"]);if(e!==void 0&&y!=null){let D=Lr(y);Array.isArray(D)&&(D=D.map(R=>Ix(br(R)))),c(e,["setup","tools"],D)}const x=a(t,["sessionResumption"]);e!==void 0&&x!=null&&c(e,["setup","sessionResumption"],Tx(x));const g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);const v=a(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&c(e,["setup","outputAudioTranscription"],v);const w=a(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&c(e,["setup","realtimeInputConfig"],w);const T=a(t,["contextWindowCompression"]);e!==void 0&&T!=null&&c(e,["setup","contextWindowCompression"],T);const I=a(t,["proactivity"]);if(e!==void 0&&I!=null&&c(e,["setup","proactivity"],I),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Ex(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],Se(t,r));const o=a(e,["config"]);return o!=null&&c(n,["config"],xx(o,n)),n}function Cx(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);const i=a(t,["fileData"]);i!=null&&c(e,["fileData"],vx(i));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],_x(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],hx(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const f=a(t,["thought"]);f!=null&&c(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&c(e,["videoMetadata"],h),e}function Tx(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ix(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);o!=null&&c(e,["computerUse"],o);const i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],Sx(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],wx(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kx(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(i=>`${n}.${i}`);e.push(...o)}else e.push(n)}return e.join(",")}function Ax(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const i=kx(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];o.length>0&&(l=o.map(d=>s.includes(d)?`generationConfig.${d}`:d));const u=[];i&&u.push(i),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class Nx extends an{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=yx(this.apiClient,e);i=ie("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=Ax(l,e.config);return o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rx(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function Px(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&Rx(r,e),e}function Mx(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function Dx(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function bx(t){const e={},n=a(t,["parent"]);n!=null&&c(e,["_url","parent"],n);const r=a(t,["config"]);return r!=null&&Dx(r,e),e}function Lx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const o=a(t,["documents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),c(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ux extends an{constructor(e){super(),this.apiClient=e,this.list=async n=>new Xn(sn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Mx(e);return i=ie("{name}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Px(e);o=ie("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=bx(e);return i=ie("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=Lx(u),f=new my;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fx extends an{constructor(e,n=new Ux(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Xn(sn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=kw(e);return i=ie("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Rw(e);return i=ie("{name}",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Nw(e);o=ie("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Uw(e);return i=ie("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=Fw(u),f=new gy;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Bw(e);return i=ie("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=zw(u),f=new yy;return Object.assign(f,d),f})}}async importFile(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Dw(e);return i=ie("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const d=Mw(u),f=new Za;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vh=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Vh=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const Bx=()=>Vh();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ql(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Zl=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pt extends Error{}class at extends Pt{constructor(e,n,r,o){super(`${at.makeMessage(e,n,r)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,r){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,r,o){if(!e||!o)return new ms({message:r,cause:Zl(n)});const i=n;return e===400?new Hh(e,i,r,o):e===401?new Oh(e,i,r,o):e===403?new qh(e,i,r,o):e===404?new $h(e,i,r,o):e===409?new Wh(e,i,r,o):e===422?new Jh(e,i,r,o):e===429?new Yh(e,i,r,o):e>=500?new Kh(e,i,r,o):new at(e,i,r,o)}}class jl extends at{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ms extends at{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Gh extends ms{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Hh extends at{}class Oh extends at{}class qh extends at{}class $h extends at{}class Wh extends at{}class Jh extends at{}class Yh extends at{}class Kh extends at{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zx=/^[a-z][a-z0-9+.-]*:/i,Vx=t=>zx.test(t);let ea=t=>(ea=Array.isArray,ea(t));const Gx=ea;let Hx=Gx;const Gd=Hx;function Ox(t){if(!t)return!0;for(const e in t)return!1;return!0}function qx(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const $x=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Pt(`${t} must be an integer`);if(e<0)throw new Pt(`${t} must be a positive integer`);return e},Wx=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jx=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jn="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yx(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Kx=()=>{var t,e,n,r,o;const i=Yx();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jn,"X-Stainless-OS":Od(Deno.build.os),"X-Stainless-Arch":Hd(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jn,"X-Stainless-OS":Od((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Hd((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const s=Xx();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Xx(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const o=r[1]||0,i=r[2]||0,s=r[3]||0;return{browser:e,version:`${o}.${i}.${s}`}}}return null}const Hd=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Od=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let jo;const Qx=()=>jo??(jo=Kx());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zx(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Xh(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function jx(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Xh({start(){},async pull(n){const{done:r,value:o}=await e.next();r?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Qh(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function eE(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),o=r.cancel();r.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tE=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zh=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function $s(t,e,n){return Zh(),new File(t,e??"unknown_file",n)}function nE(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const rE=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jh=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",oE=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&jh(t),iE=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function sE(t,e,n){if(Zh(),t=await t,oE(t))return t instanceof File?t:$s([await t.arrayBuffer()],t.name);if(iE(t)){const o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),$s(await ta(o),e,n)}const r=await ta(t);if(e||(e=nE(t)),!(n!=null&&n.type)){const o=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return $s(r,e,n)}async function ta(t){var e,n,r,o,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(jh(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(rE(t))try{for(var l=!0,u=Vt(t),d;d=await u.next(),e=d.done,!e;l=!0){o=d.value,l=!1;const f=o;s.push(...await ta(f))}}catch(f){n={error:f}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}else{const f=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${lE(t)}`)}return s}function lE(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class em{constructor(e){this._client=e}}em._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tm(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const qd=Object.freeze(Object.create(null)),aE=(t=tm)=>function(n,...r){if(n.length===1)return n[0];let o=!1;const i=[],s=n.reduce((f,p,h)=>{var m,_,y;/[?#]/.test(p)&&(o=!0);const x=r[h];let g=(o?encodeURIComponent:t)(""+x);return h!==r.length&&(x==null||typeof x=="object"&&x.toString===((y=Object.getPrototypeOf((_=Object.getPrototypeOf((m=x.hasOwnProperty)!==null&&m!==void 0?m:qd))!==null&&_!==void 0?_:qd))===null||y===void 0?void 0:y.toString))&&(g=x+"",i.push({start:f.length+p.length,length:g.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),f+p+(h===r.length?"":g)},""),l=s.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=u.exec(l))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,p)=>f.start-p.start),i.length>0){let f=0;const p=i.reduce((h,m)=>{const _=" ".repeat(m.start-f),y="^".repeat(m.length);return f=m.start+m.length,h+_+y},"");throw new Pt(`Path parameters result in path with invalid segments:
${i.map(h=>h.error).join(`
`)}
${s}
${p}`)}return s},ei=aE(tm);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nm extends em{create(e,n){var r;const{api_version:o=this._client.apiVersion}=e,i=Wi(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new Pt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new Pt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ei`/${o}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(ei`/${o}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(ei`/${o}/interactions/${e}/cancel`,r)}get(e,n={},r){var o;const i=n??{},{api_version:s=this._client.apiVersion}=i,l=Wi(i,["api_version"]);return this._client.get(ei`/${s}/interactions/${e}`,Object.assign(Object.assign({query:l},r),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}nm._key=Object.freeze(["interactions"]);class rm extends nm{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uE(t){let e=0;for(const o of t)e+=o.length;const n=new Uint8Array(e);let r=0;for(const o of t)n.set(o,r),r+=o.length;return n}let ti;function iu(t){let e;return(ti??(e=new globalThis.TextEncoder,ti=e.encode.bind(e)))(t)}let ni;function $d(t){let e;return(ni??(e=new globalThis.TextDecoder,ni=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gs{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?iu(e):e;this.buffer=uE([this.buffer,n]);const r=[];let o;for(;(o=cE(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){r.push($d(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=$d(this.buffer.subarray(0,i));r.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}gs.NEWLINE_CHARS=new Set([`
`,"\r"]);gs.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function cE(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function dE(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ji={off:0,error:200,warn:300,info:400,debug:500},Wd=(t,e,n)=>{if(t){if(qx(Ji,t))return t;it(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ji))}`)}};function jr(){}function ri(t,e,n){return!e||Ji[t]>Ji[n]?jr:e[t].bind(e)}const fE={error:jr,warn:jr,info:jr,debug:jr};let Jd=new WeakMap;function it(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return fE;const o=Jd.get(n);if(o&&o[0]===r)return o[1];const i={error:ri("error",n,r),warn:ri("warn",n,r),info:ri("info",n,r),debug:ri("debug",n,r)};return Jd.set(n,[r,i]),i}const Fn=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mr{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let o=!1;const i=r?it(r):console;function s(){return zt(this,arguments,function*(){var u,d,f,p;if(o)throw new Pt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var m=!0,_=Vt(pE(e,n)),y;y=yield de(_.next()),u=y.done,!u;m=!0){p=y.value,m=!1;const x=p;if(!h)if(x.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield de(JSON.parse(x.data))}catch(g){throw i.error("Could not parse message into JSON:",x.data),i.error("From chunk:",x.raw),g}}}catch(x){d={error:x}}finally{try{!m&&!u&&(f=_.return)&&(yield de(f.call(_)))}finally{if(d)throw d.error}}h=!0}catch(x){if(Ql(x))return yield de(void 0);throw x}finally{h||n.abort()}})}return new mr(s,n,r)}static fromReadableStream(e,n,r){let o=!1;function i(){return zt(this,arguments,function*(){var u,d,f,p;const h=new gs,m=Qh(e);try{for(var _=!0,y=Vt(m),x;x=yield de(y.next()),u=x.done,!u;_=!0){p=x.value,_=!1;const g=p;for(const v of h.decode(g))yield yield de(v)}}catch(g){d={error:g}}finally{try{!_&&!u&&(f=y.return)&&(yield de(f.call(y)))}finally{if(d)throw d.error}}for(const g of h.flush())yield yield de(g)})}function s(){return zt(this,arguments,function*(){var u,d,f,p;if(o)throw new Pt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var m=!0,_=Vt(i()),y;y=yield de(_.next()),u=y.done,!u;m=!0){p=y.value,m=!1;const x=p;h||x&&(yield yield de(JSON.parse(x)))}}catch(x){d={error:x}}finally{try{!m&&!u&&(f=_.return)&&(yield de(f.call(_)))}finally{if(d)throw d.error}}h=!0}catch(x){if(Ql(x))return yield de(void 0);throw x}finally{h||n.abort()}})}return new mr(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),o=i=>({next:()=>{if(i.length===0){const s=r.next();e.push(s),n.push(s)}return i.shift()}});return[new mr(()=>o(e),this.controller,this.client),new mr(()=>o(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Xh({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:o,done:i}=await n.next();if(i)return r.close();const s=iu(JSON.stringify(o)+`
`);r.enqueue(s)}catch(o){r.error(o)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function pE(t,e){return zt(this,arguments,function*(){var r,o,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Pt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Pt("Attempted to iterate over a response with no body");const l=new mE,u=new gs,d=Qh(t.body);try{for(var f=!0,p=Vt(hE(d)),h;h=yield de(p.next()),r=h.done,!r;f=!0){s=h.value,f=!1;const m=s;for(const _ of u.decode(m)){const y=l.decode(_);y&&(yield yield de(y))}}}catch(m){o={error:m}}finally{try{!f&&!r&&(i=p.return)&&(yield de(i.call(p)))}finally{if(o)throw o.error}}for(const m of u.flush()){const _=l.decode(m);_&&(yield yield de(_))}})}function hE(t){return zt(this,arguments,function*(){var n,r,o,i;let s=new Uint8Array;try{for(var l=!0,u=Vt(t),d;d=yield de(u.next()),n=d.done,!n;l=!0){i=d.value,l=!1;const f=i;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?iu(f):f;let h=new Uint8Array(s.length+p.length);h.set(s),h.set(p,s.length),s=h;let m;for(;(m=dE(s))!==-1;)yield yield de(s.slice(0,m)),s=s.slice(m)}}catch(f){r={error:f}}finally{try{!l&&!n&&(o=u.return)&&(yield de(o.call(u)))}finally{if(r)throw r.error}}s.length>0&&(yield yield de(s))})}class mE{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,o]=gE(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function gE(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yE(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:o,startTime:i}=e,s=await(async()=>{var l;if(e.options.stream)return it(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):mr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),d=(l=u==null?void 0:u.split(";")[0])===null||l===void 0?void 0:l.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return it(t).debug(`[${r}] response parsed`,Fn({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class su extends Promise{constructor(e,n,r=yE){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new su(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const om=Symbol("brand.privateNullableHeaders");function*vE(t){if(!t)return;if(om in t){const{values:r,nulls:o}=t;yield*r.entries();for(const i of o)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Gd(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const o=r[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const i=Gd(r[1])?r[1]:[r[1]];let s=!1;for(const l of i)l!==void 0&&(e&&!s&&(s=!0,yield[o,null]),yield[o,l])}}const Yr=t=>{const e=new Headers,n=new Set;for(const r of t){const o=new Set;for(const[i,s]of vE(r)){const l=i.toLowerCase();o.has(l)||(e.delete(i),o.add(l)),s===null?(e.delete(i),n.add(l)):(e.append(i,s),n.delete(l))}}return{[om]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ws=t=>{var e,n,r,o,i,s;if(typeof globalThis.process<"u")return(r=(n=(e=q0)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||i===void 0?void 0:i.call(o,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var im;class ys{constructor(e){var n,r,o,i,s,l,u,{baseURL:d=Ws("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Ws("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,h=Wi(e,["baseURL","apiKey","apiVersion"]);const m=Object.assign(Object.assign({apiKey:f,apiVersion:p},h),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(r=m.timeout)!==null&&r!==void 0?r:ys.DEFAULT_TIMEOUT,this.logger=(o=m.logger)!==null&&o!==void 0?o:console;const _="warn";this.logLevel=_,this.logLevel=(s=(i=Wd(m.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:Wd(Ws("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:_,this.fetchOptions=m.fetchOptions,this.maxRetries=(l=m.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(u=m.fetch)!==null&&u!==void 0?u:Zx(),this.encoder=tE,this._options=m,this.apiKey=f,this.apiVersion=p,this.clientAdapter=m.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Yr([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Yr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Yr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Pt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${jn}`}defaultIdempotencyKey(){return`stainless-node-retry-${Bx()}`}makeStatusError(e,n,r,o){return at.generate(e,n,r,o)}buildURL(e,n,r){const o=!this.baseURLOverridden()&&r||this.baseURL,i=Vx(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Ox(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new su(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var o,i,s;const l=await e,u=(o=l.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=u),await this.prepareOptions(l);const{req:d,url:f,timeout:p}=await this.buildRequest(l,{retryCount:u-n});await this.prepareRequest(d,{url:f,options:l});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,_=Date.now();if(it(this).debug(`[${h}] sending request`,Fn({retryOfRequestLogID:r,method:l.method,url:f,options:l,headers:d.headers})),!((i=l.signal)===null||i===void 0)&&i.aborted)throw new jl;const y=new AbortController,x=await this.fetchWithTimeout(f,d,p,y).catch(Zl),g=Date.now();if(x instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if(!((s=l.signal)===null||s===void 0)&&s.aborted)throw new jl;const T=Ql(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return it(this).info(`[${h}] connection ${T?"timed out":"failed"} - ${w}`),it(this).debug(`[${h}] connection ${T?"timed out":"failed"} (${w})`,Fn({retryOfRequestLogID:r,url:f,durationMs:g-_,message:x.message})),this.retryRequest(l,n,r??h);throw it(this).info(`[${h}] connection ${T?"timed out":"failed"} - error; no more retries left`),it(this).debug(`[${h}] connection ${T?"timed out":"failed"} (error; no more retries left)`,Fn({retryOfRequestLogID:r,url:f,durationMs:g-_,message:x.message})),T?new Gh:new ms({cause:x})}const v=`[${h}${m}] ${d.method} ${f} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${g-_}ms`;if(!x.ok){const w=await this.shouldRetry(x);if(n&&w){const b=`retrying, ${n} attempts remaining`;return await eE(x.body),it(this).info(`${v} - ${b}`),it(this).debug(`[${h}] response error (${b})`,Fn({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,durationMs:g-_})),this.retryRequest(l,n,r??h,x.headers)}const T=w?"error; no more retries left":"error; not retryable";it(this).info(`${v} - ${T}`);const I=await x.text().catch(b=>Zl(b).message),D=Wx(I),R=D?void 0:I;throw it(this).debug(`[${h}] response error (${T})`,Fn({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,message:R,durationMs:Date.now()-_})),this.makeStatusError(x.status,D,R,x.headers)}return it(this).info(v),it(this).debug(`[${h}] response start`,Fn({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,durationMs:g-_})),{response:x,options:l,controller:y,requestLogID:h,retryOfRequestLogID:r,startTime:_}}async fetchWithTimeout(e,n,r,o){const i=n||{},{signal:s,method:l}=i,u=Wi(i,["signal","method"]);s&&s.addEventListener("abort",()=>o.abort());const d=setTimeout(()=>o.abort(),r),f=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},f?{duplex:"half"}:{}),{method:"GET"}),u);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,o){var i;let s;const l=o==null?void 0:o.get("retry-after-ms");if(l){const d=parseFloat(l);Number.isNaN(d)||(s=d)}const u=o==null?void 0:o.get("retry-after");if(u&&!s){const d=parseFloat(u);Number.isNaN(d)?s=Date.parse(u)-Date.now():s=d*1e3}if(!(s&&0<=s&&s<60*1e3)){const d=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Jx(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,s=Math.min(.5*Math.pow(2,i),8),l=1-Math.random()*.25;return s*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,o,i;const s=Object.assign({},e),{method:l,path:u,query:d,defaultBaseURL:f}=s,p=this.buildURL(u,d,f);"timeout"in s&&$x("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:h,body:m}=this.buildBody({options:s}),_=await this.buildHeaders({options:e,method:l,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:_},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:p,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:o}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let l=Yr([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Qx()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Yr([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:jx(e)}:this.encoder({body:e,headers:r})}}ys.DEFAULT_TIMEOUT=6e4;class $e extends ys{constructor(){super(...arguments),this.interactions=new rm(this)}}im=$e;$e.GeminiNextGenAPIClient=im;$e.GeminiNextGenAPIClientError=Pt;$e.APIError=at;$e.APIConnectionError=ms;$e.APIConnectionTimeoutError=Gh;$e.APIUserAbortError=jl;$e.NotFoundError=$h;$e.ConflictError=Wh;$e.RateLimitError=Yh;$e.BadRequestError=Hh;$e.AuthenticationError=Oh;$e.InternalServerError=Kh;$e.PermissionDeniedError=qh;$e.UnprocessableEntityError=Jh;$e.toFile=sE;$e.Interactions=rm;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _E(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function SE(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function wE(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function xE(t,e){const n={},r=a(t,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function EE(t,e,n){const r={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=a(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&c(e,["displayName"],o),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=a(t,["epochCount"]);e!==void 0&&i!=null&&c(e,["tuningTask","hyperparameters","epochCount"],i);const s=a(t,["learningRateMultiplier"]);if(s!=null&&c(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=a(t,["batchSize"]);e!==void 0&&l!=null&&c(e,["tuningTask","hyperparameters","batchSize"],l);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&c(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function CE(t,e,n){const r={};let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const m=a(t,["validationDataset"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec"],Yd(m))}else if(o==="PREFERENCE_TUNING"){const m=a(t,["validationDataset"]);e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec"],Yd(m))}const i=a(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&c(e,["tunedModelDisplayName"],i);const s=a(t,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const m=a(t,["epochCount"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],m)}else if(l==="PREFERENCE_TUNING"){const m=a(t,["epochCount"]);e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],m)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const m=a(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m)}else if(u==="PREFERENCE_TUNING"){const m=a(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],m)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const m=a(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m)}else if(d==="PREFERENCE_TUNING"){const m=a(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],m)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const m=a(t,["adapterSize"]);e!==void 0&&m!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m)}else if(f==="PREFERENCE_TUNING"){const m=a(t,["adapterSize"]);e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],m)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);const h=a(t,["beta"]);return e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function TE(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const o=a(t,["preTunedModel"]);o!=null&&c(n,["preTunedModel"],o);const i=a(t,["trainingDataset"]);i!=null&&UE(i);const s=a(t,["config"]);return s!=null&&EE(s,n),n}function IE(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const o=a(t,["preTunedModel"]);o!=null&&c(n,["preTunedModel"],o);const i=a(t,["trainingDataset"]);i!=null&&FE(i,n,e);const s=a(t,["config"]);return s!=null&&CE(s,n,e),n}function kE(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function AE(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function NE(t,e,n){const r={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&c(e,["_query","pageToken"],i);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function RE(t,e,n){const r={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&c(e,["_query","pageToken"],i);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function PE(t,e){const n={},r=a(t,["config"]);return r!=null&&NE(r,n),n}function ME(t,e){const n={},r=a(t,["config"]);return r!=null&&RE(r,n),n}function DE(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const o=a(t,["nextPageToken"]);o!=null&&c(n,["nextPageToken"],o);const i=a(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>sm(l))),c(n,["tuningJobs"],s)}return n}function bE(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const o=a(t,["nextPageToken"]);o!=null&&c(n,["nextPageToken"],o);const i=a(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>na(l))),c(n,["tuningJobs"],s)}return n}function LE(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["model"],r);const o=a(t,["name"]);return o!=null&&c(n,["endpoint"],o),n}function UE(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=a(t,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),c(n,["examples","examples"],o)}return n}function FE(t,e,n){const r={};let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function sm(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const o=a(t,["name"]);o!=null&&c(n,["name"],o);const i=a(t,["state"]);i!=null&&c(n,["state"],xh(i));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);u!=null&&c(n,["endTime"],u);const d=a(t,["updateTime"]);d!=null&&c(n,["updateTime"],d);const f=a(t,["description"]);f!=null&&c(n,["description"],f);const p=a(t,["baseModel"]);p!=null&&c(n,["baseModel"],p);const h=a(t,["_self"]);return h!=null&&c(n,["tunedModel"],LE(h)),n}function na(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const o=a(t,["name"]);o!=null&&c(n,["name"],o);const i=a(t,["state"]);i!=null&&c(n,["state"],xh(i));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(n,["endTime"],u);const d=a(t,["updateTime"]);d!=null&&c(n,["updateTime"],d);const f=a(t,["error"]);f!=null&&c(n,["error"],f);const p=a(t,["description"]);p!=null&&c(n,["description"],p);const h=a(t,["baseModel"]);h!=null&&c(n,["baseModel"],h);const m=a(t,["tunedModel"]);m!=null&&c(n,["tunedModel"],m);const _=a(t,["preTunedModel"]);_!=null&&c(n,["preTunedModel"],_);const y=a(t,["supervisedTuningSpec"]);y!=null&&c(n,["supervisedTuningSpec"],y);const x=a(t,["preferenceOptimizationSpec"]);x!=null&&c(n,["preferenceOptimizationSpec"],x);const g=a(t,["tuningDataStats"]);g!=null&&c(n,["tuningDataStats"],g);const v=a(t,["encryptionSpec"]);v!=null&&c(n,["encryptionSpec"],v);const w=a(t,["partnerModelTuningSpec"]);w!=null&&c(n,["partnerModelTuningSpec"],w);const T=a(t,["customBaseModel"]);T!=null&&c(n,["customBaseModel"],T);const I=a(t,["experiment"]);I!=null&&c(n,["experiment"],I);const D=a(t,["labels"]);D!=null&&c(n,["labels"],D);const R=a(t,["outputUri"]);R!=null&&c(n,["outputUri"],R);const F=a(t,["pipelineJob"]);F!=null&&c(n,["pipelineJob"],F);const b=a(t,["serviceAccount"]);b!=null&&c(n,["serviceAccount"],b);const V=a(t,["tunedModelDisplayName"]);V!=null&&c(n,["tunedModelDisplayName"],V);const J=a(t,["veoTuningSpec"]);return J!=null&&c(n,["veoTuningSpec"],J),n}function BE(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const o=a(t,["name"]);o!=null&&c(n,["name"],o);const i=a(t,["metadata"]);i!=null&&c(n,["metadata"],i);const s=a(t,["done"]);s!=null&&c(n,["done"],s);const l=a(t,["error"]);return l!=null&&c(n,["error"],l),n}function Yd(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["validationDatasetUri"],r);const o=a(t,["vertexDatasetResource"]);return o!=null&&c(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zE extends an{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Xn(sn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),i=await this.tuneMldevInternal(o);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:ql.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=AE(e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>na(f))}else{const d=kE(e);return l=ie("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>sm(f))}}async listInternal(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=ME(e);return l=ie("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=bE(f),h=new Sd;return Object.assign(h,p),h})}else{const d=PE(e);return l=ie("tunedModels",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=DE(f),h=new Sd;return Object.assign(h,p),h})}}async cancel(e){var n,r,o,i;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=SE(e);return l=ie("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=xE(f),h=new wd;return Object.assign(h,p),h})}else{const d=_E(e);return l=ie("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=wE(f),h=new wd;return Object.assign(h,p),h})}}async tuneInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const l=IE(e,e);return i=ie("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>na(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=TE(e);return i=ie("tunedModels",l._url),s=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:u.headers},f})),o.then(u=>BE(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VE{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const GE=1024*1024*8,HE=3,OE=1e3,qE=2,Yi="x-goog-upload-status";async function $E(t,e,n){var r;const o=await lm(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Yi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function WE(t,e,n){var r;const o=await lm(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Yi])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=gh(i),l=new ja;return Object.assign(l,s),l}async function lm(t,e,n){var r,o;let i=0,s=0,l=new $l(new Response),u="upload";for(i=t.size;s<i;){const d=Math.min(GE,i-s),f=t.slice(s,s+d);s+d>=i&&(u+=", finalize");let p=0,h=OE;for(;p<HE&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[Yi]));)p++,await YE(h),h=h*qE;if(s+=d,((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[Yi])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function JE(t){return{size:t.size,type:t.type}}function YE(t){return new Promise(e=>setTimeout(e,t))}class KE{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $E(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WE(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JE(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XE{create(e,n,r){return new QE(e,n,r)}}class QE{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kd="x-goog-api-key";class ZE{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Kd)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Kd,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jE="gl-node/";class eC{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new $e({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Y0(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new ZE(this.apiKey);this.apiClient=new Jw({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:jE+"web",uploader:new KE,downloader:new VE}),this.models=new fx(this.apiClient),this.live=new sx(this.apiClient,o,new XE),this.batches=new Ev(this.apiClient),this.chats=new o_(this.models,this.apiClient),this.caches=new t_(this.apiClient),this.files=new h_(this.apiClient),this.operations=new px(this.apiClient),this.authTokens=new Nx(this.apiClient),this.tunings=new zE(this.apiClient),this.fileSearchStores=new Fx(this.apiClient)}}const tC=`
You are an expert curriculum analyzer. Your goal is to determine if a user's request is a complex, abstract topic that requires breaking down into smaller sub-concepts for effective teaching, or if it is a specific, singular query.

Input: User learning request.
Output: JSON object with the following structure:
{
  "isAbstract": boolean, // true if topic is broad (e.g., "Quantum Physics", "History of Rome"), false if specific (e.g., "What is a quark?", "Date of Julius Caesar's death")
  "topics": string[] // If isAbstract is true, list 3-5 sub-topics to explain the concept step-by-step. If false, return an array with the single refined topic.
}
Do not include any markdown formatting in the response, just the raw JSON string.
`,nC=`
You are an advanced AI Teacher Environment.
Your goal is to explain concepts visually using SVG whiteboards and clear, structured text for a list of topics provided.

the whiteboard should contain, concept, visuals, step by step solution or example depending case, little quiz, and bottom reference guide ofr symbols and abbreviations etc. make sure text does not overlaps.

### STRICT GUIDELINES


1. **Visual Aids (SVG)**:
   For each topic, provide a visual aid via an SVG image styled as a whiteboard.
   The SVG should be clean, use a hand-drawn or schematic style.
   Return the RAW SVG code in the 'svg' field (do NOT use markdown backticks inside the JSON field).
2. **Size hierarchy (INSIDE SVG)**
   Canvas (viewbox default 1920x1080 horizontal orientation) will be as big as the amount of zones in canvas range of zones 2 - 4.
   As mentioned whiteboard canvas will be divided in zones if invisible better.
   Use colors and graphs constantly
3. **Tone**:
   Educational, clear, and structured.
   Use Permanent marker font with curv-ish style.
4. **Text**
   text will have size hierarchy. Tille, sub-title, content etc.
   keep it simple. do not overuse it.
`,rC=`
You are a creative coding assistant. Your task is to generate a self-contained HTML/JS/CSS snippet that serves as an interactive "Practice Playground" for a student.

Input: A topic or concept (e.g., "Binary Search", "Solar System", "French Conjugation").
Output: A complete, single-file HTML string containing CSS and JavaScript.
- The code should be safe to run in an iframe.
- It should be interactive (a quiz, a simulation, a visualizer, or a 3D scene using Three.js via CDN if needed).
- Use Tailwind CSS via CDN for styling if needed: <script src="https://cdn.tailwindcss.com"><\/script>
- If 3D is requested or appropriate, use <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"><\/script>.

Return ONLY the HTML code wrapped in \`\`\`html\`\`\`. Do not add explanations.
`,oC=`
You are Bruno a helpful AI teaching assistant. You answer specific questions the user has about the current lesson.
You have access to the context of what the user is currently looking at (Whiteboards, Playgrounds). Use this context to answer accurately.
Respect the word counting rules (System Prompt 3) in your responses.
`,iC=`
You are a curriculum architect. Create a focused syllabus for the requested topic at the SPECIFIC level requested.

Input: Topic and Level (Intro, Beginner, Intermediate, Advanced, Master).
Output JSON format:
{
  "level": "String (as requested)",
  "topic": "String",
  "description": "Brief description of what this level covers.",
  "concepts": ["concept 1", "concept 2", "concept 3", "concept 4", "concept 5"]
}
Return only valid JSON. The 'concepts' array should contain 4-10 key learnable units.
`,sC=`
You are an AI Teacher looking at a student's whiteboard. 
The image provided is a screenshot of a whiteboard concept with user annotations (drawings, arrows, boxes, text) on top of it.
Analyze the user's annotations and their specific question to provide a helpful, educational response.
If they circled something, explain it. If they crossed something out, correct it.
`,lC=`
You are an expert exam creator. Your task is to generate a comprehensive JSON database of questions based on a provided set of syllabi ranging from Introduction to Master levels.

Input: A list of Syllabi contexts.
Output: A JSON Object containing an array of questions.

Rules:
1. **Introduction/Beginner**: Generate purely Multiple Choice Questions (MCQ).
2. **Intermediate/Advanced/Master**: Generate a mix of MCQ and "Problem Solving" scenarios (text-based logic puzzles).
3. The output must be strictly JSON.
4. 8-12 items per level.

Structure:
{
  "topic": "Main Topic Name",
  "questions": [
    {
       "id": "q1",
       "level": "Beginner",
       "type": "MCQ",
       "question": "Question text...",
       "options": ["A", "B", "C", "D"],
       "correctAnswer": "A",
       "explanation": "Why A is correct."
    },
    ...
  ]
}
`,aC=`
You are a specialized coding assistant for creating assessment tools.
Your task is to generate a **Level Test Application** as a single HTML/JS file.

Input: A JSON Database of questions.
Goal: Create a clean, modern, interactive Quiz App that administers these questions to the user.

Features required in the HTML/JS:
1. **Welcome Screen**: Explain the test covers levels Intro to Master.
2. **Progressive Logic**: Start with easy questions. If the user gets them right, move to harder ones. If they fail easy ones, stop early or downgrade.
3. **UI**: Use Tailwind CSS for a professional "Exam" look (different from the standard playful playground).
4. **Results**: At the end, calculate a Score and assign a "Competency Level" (e.g., "Novice", "Expert").
5. **No External Logic**: Embed the provided JSON question database directly into the JavaScript variable inside the HTML.

**CRITICAL REQUIREMENT - SCORE COMMUNICATION**:
When the test finishes (at the results screen), you **MUST** execute the following JavaScript code to inform the parent app of the results:

\`\`\`javascript
try {
  window.parent.postMessage({
    type: 'FATY_TEST_COMPLETE',
    payload: {
      score: YOUR_CALCULATED_SCORE_VARIABLE,
      maxScore: TOTAL_QUESTIONS_VARIABLE,
      level: ASSIGNED_LEVEL_STRING_VARIABLE,
      topic: "TOPIC_NAME"
    }
  }, '*');
} catch (e) { console.error("Could not send results", e); }
\`\`\`

Return ONLY the HTML code wrapped in \`\`\`html\`\`\`.
`,Mn=t=>new eC({apiKey:t}),uC=async(t,e,n,r)=>{r&&r({type:"info",source:"analyzeTopic",summary:`Starting analysis for: "${e}"`});const o=Mn(t);try{const i={systemInstruction:tC,responseMimeType:"application/json",responseSchema:{type:Ye.OBJECT,properties:{isAbstract:{type:Ye.BOOLEAN},topics:{type:Ye.ARRAY,items:{type:Ye.STRING}}},required:["isAbstract","topics"]}};r&&r({type:"request",source:"analyzeTopic",summary:"Sending generation request",details:{model:n,contents:e,config:i}});const s=await o.models.generateContent({model:n,contents:e,config:i}),l=s.text;if(r&&r({type:"response",source:"analyzeTopic",summary:"Received response",details:{text:l,candidates:s.candidates}}),!l)throw new Error("No response from analysis model");return JSON.parse(l)}catch(i){return r&&r({type:"error",source:"analyzeTopic",summary:"Analysis failed",details:i}),console.error("Analysis failed:",i),{isAbstract:!1,topics:[e]}}},cC=async(t,e,n,r,o)=>{const i=Mn(t),s=`
    Please generate teaching materials for the following topics: ${JSON.stringify(e)}.
    
    ${n?`
CONTEXT FROM PREVIOUS RELATED TOPICS:
${n}
`:""}

    Ensure each topic has a unique SVG whiteboard and a detailed explanation following the word counting rules.
  `;o&&o({type:"request",source:"generateWhiteboardBatch",summary:`Generating batch for ${e.length} topics`,details:{model:r,topics:e,promptContent:s}});try{const u=(await i.models.generateContent({model:r,contents:s,config:{systemInstruction:nC,responseMimeType:"application/json",responseSchema:{type:Ye.ARRAY,items:{type:Ye.OBJECT,properties:{topic:{type:Ye.STRING},svg:{type:Ye.STRING,description:"Raw SVG code for the whiteboard. Do not use markdown."},explanation:{type:Ye.STRING,description:"Detailed explanation with word counts per line."}},required:["topic","svg","explanation"]}}}})).text||"[]";return o&&o({type:"response",source:"generateWhiteboardBatch",summary:"Received batch response",details:{fullText:u.substring(0,500)+"... (truncated)",itemsCount:JSON.parse(u).length}}),JSON.parse(u)}catch(l){throw o&&o({type:"error",source:"generateWhiteboardBatch",summary:"Batch generation failed",details:l}),l}},Xd=async(t,e,n,r)=>{const o=Mn(t),i=`Create a practice playground for: ${e}`;r&&r({type:"request",source:"generatePlayground",summary:"Generating interactive playground",details:{model:n,prompt:i}});try{const l=(await o.models.generateContent({model:n,contents:i,config:{systemInstruction:rC}})).text||"";r&&r({type:"response",source:"generatePlayground",summary:"Received playground code",details:{fullText:l}});const u=l.match(/```html\n([\s\S]*?)\n```/),d=u?u[1]:"<h1>Error generating playground</h1>";return{id:Date.now().toString(),html:d,description:`Playground: ${e}`,timestamp:Date.now(),type:"practice"}}catch(s){throw r&&r({type:"error",source:"generatePlayground",summary:"Playground generation failed",details:s}),s}},Qd=async(t,e,n,r,o,i)=>{const s=Mn(t);o&&o({type:"request",source:"generateSyllabus",summary:`Generating syllabus for ${e} at ${n}`,details:{context:i}});try{const l=`Create a syllabus for: ${e}. Level: ${n}.${i?`

CONTEXT FROM OTHER LEVELS:
${i}`:""}`,d=(await s.models.generateContent({model:r,contents:l,config:{systemInstruction:iC,responseMimeType:"application/json"}})).text||"{}";return o&&o({type:"response",source:"generateSyllabus",summary:"Syllabus generated",details:{text:d}}),JSON.parse(d)}catch(l){throw console.error("Syllabus generation failed",l),l}},dC=async(t,e,n,r,o)=>{const i=Mn(t);o&&o({type:"request",source:"generateQuizDatabase",summary:`Generating comprehensive quiz DB for ${e}`,details:{syllabiContextLength:n.length}});try{const l=(await i.models.generateContent({model:r,contents:`Generate a quiz database for topic: ${e}. 

SYLLABI CONTEXT:
${n}`,config:{systemInstruction:lC,responseMimeType:"application/json"}})).text||"{}";return o&&o({type:"response",source:"generateQuizDatabase",summary:"Quiz DB generated",details:{text:l}}),l}catch(s){throw o&&o({type:"error",source:"generateQuizDatabase",summary:"Quiz DB gen failed",details:s}),s}},fC=async(t,e,n,r,o)=>{const i=Mn(t);o&&o({type:"request",source:"generateLevelTestPlayground",summary:"Generating Level Test App",details:{quizJsonLength:n.length}});try{const l=(await i.models.generateContent({model:r,contents:`Create a Level Test App for ${e}. 

Here is the question database to embed:
${n}`,config:{systemInstruction:aC}})).text||"",u=l.match(/```html\n([\s\S]*?)\n```/),d=u?u[1]:"<h1>Error generating test</h1>";return o&&o({type:"response",source:"generateLevelTestPlayground",summary:"Test Playground generated",details:{fullText:l}}),{id:Date.now().toString(),html:d,description:`Level Test: ${e}`,timestamp:Date.now(),type:"test"}}catch(s){throw o&&o({type:"error",source:"generateLevelTestPlayground",summary:"Test Playground gen failed",details:s}),s}},pC=async(t,e,n,r,o)=>{const i=Mn(t),s=r.includes("flash")?"gemini-2.5-flash":"gemini-3-flash-preview";o&&o({type:"request",source:"analyzeImageWithContext",summary:"Sending visual analysis request"});try{const u=(await i.models.generateContent({model:s,contents:{parts:[{inlineData:{mimeType:"image/png",data:e}},{text:n}]},config:{systemInstruction:sC}})).text||"I couldn't analyze the image.";return o&&o({type:"response",source:"analyzeImageWithContext",summary:"Received analysis",details:{text:u}}),u}catch(l){throw console.error("Image analysis failed",l),l}},hC=async(t,e,n,r,o,i)=>{const s=Mn(t),l=`${oC}

CURRENT APP CONTEXT:
${r}`;i&&i({type:"request",source:"sendChatMessage",summary:"Sending chat message with context",details:{model:o,message:n,contextLength:r.length}});try{const f=(await s.chats.create({model:o,history:e.map(p=>({role:p.role,parts:[{text:p.content}]})),config:{systemInstruction:l}}).sendMessage({message:n})).text||"";return i&&i({type:"response",source:"sendChatMessage",summary:"Received chat response",details:{text:f}}),f}catch(u){throw i&&i({type:"error",source:"sendChatMessage",summary:"Chat failed",details:u}),u}},mC=({apiKey:t,model:e,history:n,setHistory:r,logger:o,context:i="",isOpen:s,toggleOpen:l})=>{const[u,d]=Ys.useState(""),[f,p]=Ys.useState(!1),h=te.useRef(null),m=()=>{var y;(y=h.current)==null||y.scrollIntoView({behavior:"smooth"})};te.useEffect(()=>{m()},[n,s]);const _=async y=>{if(y==null||y.preventDefault(),!u.trim()||!t)return;const x={id:Date.now().toString(),role:"user",content:u,timestamp:Date.now()},g=[...n,x];r(g),d(""),p(!0);try{const v=g.map(I=>({role:I.role,content:I.content})),w=await hC(t,v.slice(0,-1),x.content,i,e,o),T={id:(Date.now()+1).toString(),role:"model",content:w,timestamp:Date.now()};r([...g,T])}catch(v){console.error(v);const w={id:(Date.now()+1).toString(),role:"model",content:"Error: Could not connect to AI. Please check your API Key.",timestamp:Date.now()};r([...g,w])}finally{p(!1)}};return E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:l,className:`fixed bottom-6 right-6 z-50 p-4 rounded-full bg-blue-600 text-white shadow-lg hover:bg-blue-700 transition-all transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-300 ${s?"hidden sm:flex":"flex"}`,"aria-label":"Open Chat Assistant",children:s?E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),E.jsxs("div",{className:`fixed z-50 bg-white dark:bg-gray-800 shadow-2xl flex flex-col transition-all duration-300 transform border border-gray-200 dark:border-gray-700 
          ${s?"scale-100 opacity-100 pointer-events-auto":"scale-0 opacity-0 pointer-events-none origin-bottom-right"}
          sm:bottom-24 sm:right-6 sm:w-96 sm:rounded-2xl sm:h-[500px]
          inset-0 w-full h-full rounded-none bottom-0 right-0
        `,children:[E.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 rounded-t-none sm:rounded-t-2xl flex justify-between items-center",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100",children:"Bruno"}),E.jsx("p",{className:"text-xs text-gray-500",children:"I see your whiteboard & playground."})]}),E.jsx("button",{onClick:l,className:"sm:hidden p-2 text-gray-500",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900",children:[n.length===0&&E.jsx("div",{className:"text-center text-gray-400 text-sm mt-10",children:"No messages yet. Ask me anything!"}),n.map(y=>E.jsx("div",{className:`flex ${y.role==="user"?"justify-end":"justify-start"}`,children:E.jsx("div",{className:`max-w-[85%] rounded-2xl px-4 py-2 text-sm ${y.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-700 rounded-bl-none"}`,children:E.jsx("div",{className:"whitespace-pre-wrap",children:y.content})})},y.id)),f&&E.jsx("div",{className:"flex justify-start",children:E.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl rounded-bl-none px-4 py-3 border border-gray-200 dark:border-gray-700",children:E.jsxs("div",{className:"flex space-x-1",children:[E.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),E.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),E.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),E.jsx("div",{ref:h})]}),E.jsx("form",{onSubmit:_,className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 rounded-b-none sm:rounded-b-2xl",children:E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"text",value:u,onChange:y=>d(y.target.value),placeholder:"Type your question...",className:"flex-1 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),E.jsx(De,{type:"submit",size:"sm",disabled:f||!u.trim(),className:"rounded-full w-10 h-10 p-0 flex items-center justify-center",children:E.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})},gC=({code:t,onClose:e,onRetry:n,onTestComplete:r})=>{const o=te.useRef(null);te.useEffect(()=>{if(t.status==="ready"&&o.current){const s=o.current.contentDocument;s&&(s.open(),s.write(t.html),s.close())}},[t]),te.useEffect(()=>{const s=l=>{l.data&&l.data.type==="FATY_TEST_COMPLETE"&&r&&r({...l.data.payload,testId:t.id})};return window.addEventListener("message",s),()=>window.removeEventListener("message",s)},[r,t.id]);const i=()=>{const s=new Blob([t.html],{type:"text/html"}),l=URL.createObjectURL(s),u=document.createElement("a");u.href=l,u.download=`${t.description.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.html`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(l)};return E.jsxs("div",{className:"w-full h-full flex flex-col bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-800",children:[E.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 select-none",children:[E.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[t.type==="test"?E.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}):E.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),E.jsx("span",{className:"text-xs font-mono font-semibold text-gray-600 dark:text-gray-300 truncate uppercase tracking-wider",children:t.description}),t.status==="loading"&&E.jsx("span",{className:"text-xs text-blue-500 animate-pulse",children:"(Building...)"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[n&&E.jsx("button",{onClick:n,className:"text-gray-500 hover:text-orange-500 transition-colors p-1",title:"Retry Generation",disabled:t.status==="loading",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),t.status==="ready"&&E.jsx("button",{onClick:i,className:"text-gray-500 hover:text-blue-500 transition-colors p-1",title:"Download HTML App",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),E.jsx("button",{onClick:e,className:"text-gray-400 hover:text-red-500 transition-colors p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none",title:"Close Panel",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),E.jsx("div",{className:"flex-1 relative bg-white",children:t.status==="loading"?E.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900",children:[E.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-4"}),E.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Designing interactive environment..."})]}):t.status==="error"?E.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-8 text-center",children:[E.jsx("p",{className:"text-red-500",children:"Failed to load playground."}),n&&E.jsx("button",{onClick:n,className:"mt-4 text-blue-500 hover:underline",children:"Try Again"})]}):E.jsx("iframe",{ref:o,className:"absolute inset-0 w-full h-full border-none",title:"Interactive Playground",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-same-origin"})})]})},yC=({entry:t})=>{const[e,n]=te.useState(!1),r=o=>{switch(o){case"request":return"text-blue-600 dark:text-blue-400";case"response":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";default:return"text-gray-500"}};return E.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 text-sm",children:[E.jsxs("div",{className:"flex items-start gap-2 p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",onClick:()=>n(!e),children:[E.jsx("span",{className:"font-mono text-xs text-gray-400 min-w-[60px]",children:new Date(t.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),E.jsxs("div",{className:"flex-1 overflow-hidden",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:`uppercase text-[10px] font-bold tracking-wider ${r(t.type)}`,children:t.type}),E.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:t.source})]}),E.jsx("p",{className:"text-gray-600 dark:text-gray-400 truncate mt-1",children:t.summary})]}),E.jsx("div",{className:"text-gray-400",children:e?"":"+"})]}),e&&t.details&&E.jsx("div",{className:"p-3 bg-gray-100 dark:bg-gray-900 overflow-x-auto",children:E.jsx("pre",{className:"text-xs font-mono text-gray-700 dark:text-gray-300 whitespace-pre-wrap break-all",children:JSON.stringify(t.details,null,2)})})]})},vC=({logs:t,isOpen:e,onClose:n,onClear:r})=>{const o=te.useRef(null);return te.useEffect(()=>{var i;e&&((i=o.current)==null||i.scrollIntoView({behavior:"smooth"}))},[t,e]),E.jsxs("div",{className:`fixed top-0 right-0 h-full w-full sm:w-[450px] bg-white dark:bg-[#1a1a1a] shadow-2xl z-50 transform transition-transform duration-300 ease-in-out flex flex-col border-l border-gray-200 dark:border-gray-700 ${e?"translate-x-0":"translate-x-full"}`,children:[E.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-[#2b2b2b]",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("svg",{className:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),E.jsx("h2",{className:"font-bold text-gray-900 dark:text-white",children:"API Advanced Mode"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:r,className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded text-gray-700 dark:text-gray-300 transition-colors",children:"Clear"}),E.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto bg-white dark:bg-[#1a1a1a]",children:[t.length===0?E.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 p-8 text-center",children:[E.jsx("svg",{className:"w-12 h-12 mb-2 opacity-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),E.jsx("p",{className:"text-sm",children:"No API activity yet."}),E.jsx("p",{className:"text-xs mt-1",children:"Requests and responses will appear here."})]}):t.map(i=>E.jsx(yC,{entry:i},i.id)),E.jsx("div",{ref:o})]}),E.jsxs("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700 text-xs text-gray-500 text-center bg-gray-50 dark:bg-[#2b2b2b]",children:[t.length," events logged"]})]})},_C=({isOpen:t,onClose:e,title:n,children:r})=>{const o=te.useRef(null);return te.useEffect(()=>{const i=s=>{s.key==="Escape"&&e()};return t&&document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t,e]),t?E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:E.jsxs("div",{ref:o,className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden",children:[E.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[E.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n}),E.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsx("div",{className:"flex-1 overflow-auto p-4",children:r})]})}):null};function oi(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var am={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,o,i){function s(d,f){if(!o[d]){if(!r[d]){var p=typeof oi=="function"&&oi;if(!f&&p)return p(d,!0);if(l)return l(d,!0);var h=new Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h}var m=o[d]={exports:{}};r[d][0].call(m.exports,function(_){var y=r[d][1][_];return s(y||_)},m,m.exports,n,r,o,i)}return o[d].exports}for(var l=typeof oi=="function"&&oi,u=0;u<i.length;u++)s(i[u]);return s}({1:[function(n,r,o){var i=n("./utils"),s=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(u){for(var d,f,p,h,m,_,y,x=[],g=0,v=u.length,w=v,T=i.getTypeOf(u)!=="string";g<u.length;)w=v-g,p=T?(d=u[g++],f=g<v?u[g++]:0,g<v?u[g++]:0):(d=u.charCodeAt(g++),f=g<v?u.charCodeAt(g++):0,g<v?u.charCodeAt(g++):0),h=d>>2,m=(3&d)<<4|f>>4,_=1<w?(15&f)<<2|p>>6:64,y=2<w?63&p:64,x.push(l.charAt(h)+l.charAt(m)+l.charAt(_)+l.charAt(y));return x.join("")},o.decode=function(u){var d,f,p,h,m,_,y=0,x=0,g="data:";if(u.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var v,w=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&w--,u.charAt(u.length-2)===l.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=s.uint8array?new Uint8Array(0|w):new Array(0|w);y<u.length;)d=l.indexOf(u.charAt(y++))<<2|(h=l.indexOf(u.charAt(y++)))>>4,f=(15&h)<<4|(m=l.indexOf(u.charAt(y++)))>>2,p=(3&m)<<6|(_=l.indexOf(u.charAt(y++))),v[x++]=d,m!==64&&(v[x++]=f),_!==64&&(v[x++]=p);return v}},{"./support":30,"./utils":32}],2:[function(n,r,o){var i=n("./external"),s=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function d(f,p,h,m,_){this.compressedSize=f,this.uncompressedSize=p,this.crc32=h,this.compression=m,this.compressedContent=_}d.prototype={getContentWorker:function(){var f=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),p=this;return f.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(f,p,h){return f.pipe(new l).pipe(new u("uncompressedSize")).pipe(p.compressWorker(h)).pipe(new u("compressedSize")).withStreamInfo("compression",p)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,o){var i=n("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},o.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,o){var i=n("./utils"),s=function(){for(var l,u=[],d=0;d<256;d++){l=d;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;u[d]=l}return u}();r.exports=function(l,u){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?function(d,f,p,h){var m=s,_=h+p;d^=-1;for(var y=h;y<_;y++)d=d>>>8^m[255&(d^f[y])];return-1^d}(0|u,l,l.length,0):function(d,f,p,h){var m=s,_=h+p;d^=-1;for(var y=h;y<_;y++)d=d>>>8^m[255&(d^f.charCodeAt(y))];return-1^d}(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(n,r,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(n,r,o){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,o){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),l=n("./utils"),u=n("./stream/GenericWorker"),d=i?"uint8array":"array";function f(p,h){u.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=h,this.meta={}}o.magic="\b\0",l.inherits(f,u),f.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,p.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(h){p.push({data:h,meta:p.meta})}},o.compressWorker=function(p){return new f("Deflate",p)},o.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,o){function i(m,_){var y,x="";for(y=0;y<_;y++)x+=String.fromCharCode(255&m),m>>>=8;return x}function s(m,_,y,x,g,v){var w,T,I=m.file,D=m.compression,R=v!==d.utf8encode,F=l.transformTo("string",v(I.name)),b=l.transformTo("string",d.utf8encode(I.name)),V=I.comment,J=l.transformTo("string",v(V)),N=l.transformTo("string",d.utf8encode(V)),z=b.length!==I.name.length,C=N.length!==V.length,q="",se="",X="",Y=I.dir,O=I.date,W={crc32:0,compressedSize:0,uncompressedSize:0};_&&!y||(W.crc32=m.crc32,W.compressedSize=m.compressedSize,W.uncompressedSize=m.uncompressedSize);var B=0;_&&(B|=8),R||!z&&!C||(B|=2048);var M=0,ne=0;Y&&(M|=16),g==="UNIX"?(ne=798,M|=function(ee,pe){var ye=ee;return ee||(ye=pe?16893:33204),(65535&ye)<<16}(I.unixPermissions,Y)):(ne=20,M|=function(ee){return 63&(ee||0)}(I.dosPermissions)),w=O.getUTCHours(),w<<=6,w|=O.getUTCMinutes(),w<<=5,w|=O.getUTCSeconds()/2,T=O.getUTCFullYear()-1980,T<<=4,T|=O.getUTCMonth()+1,T<<=5,T|=O.getUTCDate(),z&&(se=i(1,1)+i(f(F),4)+b,q+="up"+i(se.length,2)+se),C&&(X=i(1,1)+i(f(J),4)+N,q+="uc"+i(X.length,2)+X);var j="";return j+=`
\0`,j+=i(B,2),j+=D.magic,j+=i(w,2),j+=i(T,2),j+=i(W.crc32,4),j+=i(W.compressedSize,4),j+=i(W.uncompressedSize,4),j+=i(F.length,2),j+=i(q.length,2),{fileRecord:p.LOCAL_FILE_HEADER+j+F+q,dirRecord:p.CENTRAL_FILE_HEADER+i(ne,2)+j+i(J.length,2)+"\0\0\0\0"+i(M,4)+i(x,4)+F+q+J}}var l=n("../utils"),u=n("../stream/GenericWorker"),d=n("../utf8"),f=n("../crc32"),p=n("../signature");function h(m,_,y,x){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=y,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(h,u),h.prototype.push=function(m){var _=m.meta.percent||0,y=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,u.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:y?(_+100*(y-x-1))/y:100}}))},h.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var _=this.streamFiles&&!m.file.dir;if(_){var y=s(m,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(m){this.accumulate=!1;var _=this.streamFiles&&!m.file.dir,y=s(m,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),_)this.push({data:function(x){return p.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var m=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var y=this.bytesWritten-m,x=function(g,v,w,T,I){var D=l.transformTo("string",I(T));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(v,4)+i(w,4)+i(D.length,2)+D}(this.dirRecords.length,y,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(m){this._sources.push(m);var _=this;return m.on("data",function(y){_.processChunk(y)}),m.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),m.on("error",function(y){_.error(y)}),this},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(m){var _=this._sources;if(!u.prototype.error.call(this,m))return!1;for(var y=0;y<_.length;y++)try{_[y].error(m)}catch{}return!0},h.prototype.lock=function(){u.prototype.lock.call(this);for(var m=this._sources,_=0;_<m.length;_++)m[_].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,o){var i=n("../compressions"),s=n("./ZipFileWorker");o.generateWorker=function(l,u,d){var f=new s(u.streamFiles,d,u.platform,u.encodeFileName),p=0;try{l.forEach(function(h,m){p++;var _=function(v,w){var T=v||w,I=i[T];if(!I)throw new Error(T+" is not a valid compression method !");return I}(m.options.compression,u.compression),y=m.options.compressionOptions||u.compressionOptions||{},x=m.dir,g=m.date;m._compressWorker(_,y).withStreamInfo("file",{name:h,dir:x,date:g,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(f)}),f.entriesCount=p}catch(h){f.error(h)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,o){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var l in this)typeof this[l]!="function"&&(s[l]=this[l]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,l){return new i().loadAsync(s,l)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,o){var i=n("./utils"),s=n("./external"),l=n("./utf8"),u=n("./zipEntries"),d=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function p(h){return new s.Promise(function(m,_){var y=h.decompressed.getContentWorker().pipe(new d);y.on("error",function(x){_(x)}).on("end",function(){y.streamInfo.crc32!==h.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}r.exports=function(h,m){var _=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),f.isNode&&f.isStream(h)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",h,!0,m.optimizedBinaryString,m.base64).then(function(y){var x=new u(m);return x.load(y),x}).then(function(y){var x=[s.Promise.resolve(y)],g=y.files;if(m.checkCRC32)for(var v=0;v<g.length;v++)x.push(p(g[v]));return s.Promise.all(x)}).then(function(y){for(var x=y.shift(),g=x.files,v=0;v<g.length;v++){var w=g[v],T=w.fileNameStr,I=i.resolve(w.fileNameStr);_.file(I,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:m.createFolders}),w.dir||(_.file(I).unsafeOriginalName=T)}return x.zipComment.length&&(_.comment=x.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,o){var i=n("../utils"),s=n("../stream/GenericWorker");function l(u,d){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(l,s),l.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(f){d.push({data:f,meta:{percent:0}})}).on("error",function(f){d.isPaused?this.generatedError=f:d.error(f)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,o){var i=n("readable-stream").Readable;function s(l,u,d){i.call(this,u),this._helper=l;var f=this;l.on("data",function(p,h){f.push(p)||f._helper.pause(),d&&d(h)}).on("error",function(p){f.emit("error",p)}).on("end",function(){f.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,o){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,s)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var s=new Buffer(i);return s.fill(0),s},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,o){function i(I,D,R){var F,b=l.getTypeOf(D),V=l.extend(R||{},f);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(I=g(I)),V.createFolders&&(F=x(I))&&v.call(this,F,!0);var J=b==="string"&&V.binary===!1&&V.base64===!1;R&&R.binary!==void 0||(V.binary=!J),(D instanceof p&&D.uncompressedSize===0||V.dir||!D||D.length===0)&&(V.base64=!1,V.binary=!0,D="",V.compression="STORE",b="string");var N=null;N=D instanceof p||D instanceof u?D:_.isNode&&_.isStream(D)?new y(I,D):l.prepareContent(I,D,V.binary,V.optimizedBinaryString,V.base64);var z=new h(I,N,V);this.files[I]=z}var s=n("./utf8"),l=n("./utils"),u=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),f=n("./defaults"),p=n("./compressedObject"),h=n("./zipObject"),m=n("./generate"),_=n("./nodejsUtils"),y=n("./nodejs/NodejsStreamInputAdapter"),x=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var D=I.lastIndexOf("/");return 0<D?I.substring(0,D):""},g=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},v=function(I,D){return D=D!==void 0?D:f.createFolders,I=g(I),this.files[I]||i.call(this,I,null,{dir:!0,createFolders:D}),this.files[I]};function w(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var D,R,F;for(D in this.files)F=this.files[D],(R=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&I(R,F)},filter:function(I){var D=[];return this.forEach(function(R,F){I(R,F)&&D.push(F)}),D},file:function(I,D,R){if(arguments.length!==1)return I=this.root+I,i.call(this,I,D,R),this;if(w(I)){var F=I;return this.filter(function(V,J){return!J.dir&&F.test(V)})}var b=this.files[this.root+I];return b&&!b.dir?b:null},folder:function(I){if(!I)return this;if(w(I))return this.filter(function(b,V){return V.dir&&I.test(b)});var D=this.root+I,R=v.call(this,D),F=this.clone();return F.root=R.name,F},remove:function(I){I=this.root+I;var D=this.files[I];if(D||(I.slice(-1)!=="/"&&(I+="/"),D=this.files[I]),D&&!D.dir)delete this.files[I];else for(var R=this.filter(function(b,V){return V.name.slice(0,I.length)===I}),F=0;F<R.length;F++)delete this.files[R[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var D,R={};try{if((R=l.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");l.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var F=R.comment||this.comment||"";D=m.generateWorker(this,R,F)}catch(b){(D=new u("error")).error(b)}return new d(D,R.type||"string",R.mimeType)},generateAsync:function(I,D){return this.generateInternalStream(I).accumulate(D)},generateNodeStream:function(I,D){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(D)}};r.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,o){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,o){var i=n("./DataReader");function s(l){i.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}n("../utils").inherits(s,i),s.prototype.byteAt=function(l){return this.data[this.zero+l]},s.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),d=l.charCodeAt(1),f=l.charCodeAt(2),p=l.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===u&&this.data[h+1]===d&&this.data[h+2]===f&&this.data[h+3]===p)return h-this.zero;return-1},s.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),d=l.charCodeAt(1),f=l.charCodeAt(2),p=l.charCodeAt(3),h=this.readData(4);return u===h[0]&&d===h[1]&&f===h[2]&&p===h[3]},s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,o){var i=n("../utils");function s(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,d=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=l,d},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,o){var i=n("./Uint8ArrayReader");function s(l){i.call(this,l)}n("../utils").inherits(s,i),s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,o){var i=n("./DataReader");function s(l){i.call(this,l)}n("../utils").inherits(s,i),s.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},s.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},s.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,o){var i=n("./ArrayReader");function s(l){i.call(this,l)}n("../utils").inherits(s,i),s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,o){var i=n("../utils"),s=n("../support"),l=n("./ArrayReader"),u=n("./StringReader"),d=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(p){var h=i.getTypeOf(p);return i.checkSupport(h),h!=="string"||s.uint8array?h==="nodebuffer"?new d(p):s.uint8array?new f(i.transformTo("uint8array",p)):new l(i.transformTo("array",p)):new u(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,o){var i=n("./GenericWorker"),s=n("../utils");function l(u){i.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(l,i),l.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,o){var i=n("./GenericWorker"),s=n("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,i),l.prototype.processChunk=function(u){this.streamInfo.crc32=s(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,o){var i=n("../utils"),s=n("./GenericWorker");function l(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(l,s),l.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}s.prototype.processChunk.call(this,u)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,o){var i=n("../utils"),s=n("./GenericWorker");function l(u){s.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){d.dataIsReady=!0,d.data=f,d.max=f&&f.length||0,d.type=i.getTypeOf(f),d.isPaused||d._tickAndRepeat()},function(f){d.error(f)})}i.inherits(l,s),l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,o){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,l){return this._listeners[s].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,l){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,l)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var l=this;return s.on("data",function(u){l.processChunk(u)}),s.on("end",function(){l.end()}),s.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,l){return this.extraStreamInfo[s]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(n,r,o){var i=n("../utils"),s=n("./ConvertWorker"),l=n("./GenericWorker"),u=n("../base64"),d=n("../support"),f=n("../external"),p=null;if(d.nodestream)try{p=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(_,y){return new f.Promise(function(x,g){var v=[],w=_._internalType,T=_._outputType,I=_._mimeType;_.on("data",function(D,R){v.push(D),y&&y(R)}).on("error",function(D){v=[],g(D)}).on("end",function(){try{var D=function(R,F,b){switch(R){case"blob":return i.newBlob(i.transformTo("arraybuffer",F),b);case"base64":return u.encode(F);default:return i.transformTo(R,F)}}(T,function(R,F){var b,V=0,J=null,N=0;for(b=0;b<F.length;b++)N+=F[b].length;switch(R){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(J=new Uint8Array(N),b=0;b<F.length;b++)J.set(F[b],V),V+=F[b].length;return J;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+R+"'")}}(w,v),I);x(D)}catch(R){g(R)}v=[]}).resume()})}function m(_,y,x){var g=y;switch(y){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=y,this._mimeType=x,i.checkSupport(g),this._worker=_.pipe(new s(g)),_.lock()}catch(v){this._worker=new l("error"),this._worker.error(v)}}m.prototype={accumulate:function(_){return h(this,_)},on:function(_,y){var x=this;return _==="data"?this._worker.on(_,function(g){y.call(x,g.data,g.meta)}):this._worker.on(_,function(){i.delay(y,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var i=new ArrayBuffer(0);try{o.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),o.blob=s.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!n("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,o){for(var i=n("./utils"),s=n("./support"),l=n("./nodejsUtils"),u=n("./stream/GenericWorker"),d=new Array(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;d[254]=d[254]=1;function p(){u.call(this,"utf-8 decode"),this.leftOver=null}function h(){u.call(this,"utf-8 encode")}o.utf8encode=function(m){return s.nodebuffer?l.newBufferFrom(m,"utf-8"):function(_){var y,x,g,v,w,T=_.length,I=0;for(v=0;v<T;v++)(64512&(x=_.charCodeAt(v)))==55296&&v+1<T&&(64512&(g=_.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),v++),I+=x<128?1:x<2048?2:x<65536?3:4;for(y=s.uint8array?new Uint8Array(I):new Array(I),v=w=0;w<I;v++)(64512&(x=_.charCodeAt(v)))==55296&&v+1<T&&(64512&(g=_.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(g-56320),v++),x<128?y[w++]=x:(x<2048?y[w++]=192|x>>>6:(x<65536?y[w++]=224|x>>>12:(y[w++]=240|x>>>18,y[w++]=128|x>>>12&63),y[w++]=128|x>>>6&63),y[w++]=128|63&x);return y}(m)},o.utf8decode=function(m){return s.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):function(_){var y,x,g,v,w=_.length,T=new Array(2*w);for(y=x=0;y<w;)if((g=_[y++])<128)T[x++]=g;else if(4<(v=d[g]))T[x++]=65533,y+=v-1;else{for(g&=v===2?31:v===3?15:7;1<v&&y<w;)g=g<<6|63&_[y++],v--;1<v?T[x++]=65533:g<65536?T[x++]=g:(g-=65536,T[x++]=55296|g>>10&1023,T[x++]=56320|1023&g)}return T.length!==x&&(T.subarray?T=T.subarray(0,x):T.length=x),i.applyFromCharCode(T)}(m=i.transformTo(s.uint8array?"uint8array":"array",m))},i.inherits(p,u),p.prototype.processChunk=function(m){var _=i.transformTo(s.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var y=_;(_=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),_.set(y,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var x=function(v,w){var T;for((w=w||v.length)>v.length&&(w=v.length),T=w-1;0<=T&&(192&v[T])==128;)T--;return T<0||T===0?w:T+d[v[T]]>w?T:w}(_),g=_;x!==_.length&&(s.uint8array?(g=_.subarray(0,x),this.leftOver=_.subarray(x,_.length)):(g=_.slice(0,x),this.leftOver=_.slice(x,_.length))),this.push({data:o.utf8decode(g),meta:m.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=p,i.inherits(h,u),h.prototype.processChunk=function(m){this.push({data:o.utf8encode(m.data),meta:m.meta})},o.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,o){var i=n("./support"),s=n("./base64"),l=n("./nodejsUtils"),u=n("./external");function d(y){return y}function f(y,x){for(var g=0;g<y.length;++g)x[g]=255&y.charCodeAt(g);return x}n("setimmediate"),o.newBlob=function(y,x){o.checkSupport("blob");try{return new Blob([y],{type:x})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(y),g.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(y,x,g){var v=[],w=0,T=y.length;if(T<=g)return String.fromCharCode.apply(null,y);for(;w<T;)x==="array"||x==="nodebuffer"?v.push(String.fromCharCode.apply(null,y.slice(w,Math.min(w+g,T)))):v.push(String.fromCharCode.apply(null,y.subarray(w,Math.min(w+g,T)))),w+=g;return v.join("")},stringifyByChar:function(y){for(var x="",g=0;g<y.length;g++)x+=String.fromCharCode(y[g]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function h(y){var x=65536,g=o.getTypeOf(y),v=!0;if(g==="uint8array"?v=p.applyCanBeUsed.uint8array:g==="nodebuffer"&&(v=p.applyCanBeUsed.nodebuffer),v)for(;1<x;)try{return p.stringifyByChunk(y,g,x)}catch{x=Math.floor(x/2)}return p.stringifyByChar(y)}function m(y,x){for(var g=0;g<y.length;g++)x[g]=y[g];return x}o.applyFromCharCode=h;var _={};_.string={string:d,array:function(y){return f(y,new Array(y.length))},arraybuffer:function(y){return _.string.uint8array(y).buffer},uint8array:function(y){return f(y,new Uint8Array(y.length))},nodebuffer:function(y){return f(y,l.allocBuffer(y.length))}},_.array={string:h,array:d,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return l.newBufferFrom(y)}},_.arraybuffer={string:function(y){return h(new Uint8Array(y))},array:function(y){return m(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:d,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return l.newBufferFrom(new Uint8Array(y))}},_.uint8array={string:h,array:function(y){return m(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:d,nodebuffer:function(y){return l.newBufferFrom(y)}},_.nodebuffer={string:h,array:function(y){return m(y,new Array(y.length))},arraybuffer:function(y){return _.nodebuffer.uint8array(y).buffer},uint8array:function(y){return m(y,new Uint8Array(y.length))},nodebuffer:d},o.transformTo=function(y,x){if(x=x||"",!y)return x;o.checkSupport(y);var g=o.getTypeOf(x);return _[g][y](x)},o.resolve=function(y){for(var x=y.split("/"),g=[],v=0;v<x.length;v++){var w=x[v];w==="."||w===""&&v!==0&&v!==x.length-1||(w===".."?g.pop():g.push(w))}return g.join("/")},o.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(y)?"nodebuffer":i.uint8array&&y instanceof Uint8Array?"uint8array":i.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(y){if(!i[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(y){var x,g,v="";for(g=0;g<(y||"").length;g++)v+="\\x"+((x=y.charCodeAt(g))<16?"0":"")+x.toString(16).toUpperCase();return v},o.delay=function(y,x,g){setImmediate(function(){y.apply(g||null,x||[])})},o.inherits=function(y,x){function g(){}g.prototype=x.prototype,y.prototype=new g},o.extend=function(){var y,x,g={};for(y=0;y<arguments.length;y++)for(x in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],x)&&g[x]===void 0&&(g[x]=arguments[y][x]);return g},o.prepareContent=function(y,x,g,v,w){return u.Promise.resolve(x).then(function(T){return i.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new u.Promise(function(I,D){var R=new FileReader;R.onload=function(F){I(F.target.result)},R.onerror=function(F){D(F.target.error)},R.readAsArrayBuffer(T)}):T}).then(function(T){var I=o.getTypeOf(T);return I?(I==="arraybuffer"?T=o.transformTo("uint8array",T):I==="string"&&(w?T=s.decode(T):g&&v!==!0&&(T=function(D){return f(D,i.uint8array?new Uint8Array(D.length):new Array(D.length))}(T))),T):u.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,o){var i=n("./reader/readerFor"),s=n("./utils"),l=n("./signature"),u=n("./zipEntry"),d=n("./support");function f(p){this.files=[],this.loadOptions=p}f.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(h)+", expected "+s.pretty(p)+")")}},isSignature:function(p,h){var m=this.reader.index;this.reader.setIndex(p);var _=this.reader.readString(4)===h;return this.reader.setIndex(m),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),h=d.uint8array?"uint8array":"array",m=s.transformTo(h,p);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,h,m,_=this.zip64EndOfCentralSize-44;0<_;)p=this.reader.readInt(2),h=this.reader.readInt(4),m=this.reader.readData(h),this.zip64ExtensibleData[p]={id:p,length:h,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,h;for(p=0;p<this.files.length;p++)h=this.files[p],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(p=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var h=p;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var _=h-m;if(0<_)this.isSignature(h,l.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(p){this.reader=i(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,o){var i=n("./reader/readerFor"),s=n("./utils"),l=n("./compressedObject"),u=n("./crc32"),d=n("./utf8"),f=n("./compressions"),p=n("./support");function h(m,_){this.options=m,this.loadOptions=_}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var _,y;if(m.skip(22),this.fileNameLength=m.readInt(2),y=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(x){for(var g in f)if(Object.prototype.hasOwnProperty.call(f,g)&&f[g].magic===x)return f[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,_,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var _=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(_),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var _,y,x,g=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<g;)_=m.readInt(2),y=m.readInt(2),x=m.readData(y),this.extraFields[_]={id:_,length:y,value:x};m.setIndex(g)},handleUTF8:function(){var m=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var y=s.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var g=s.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var _=i(m.value);return _.readInt(1)!==1||u(this.fileName)!==_.readInt(4)?null:d.utf8decode(_.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var _=i(m.value);return _.readInt(1)!==1||u(this.fileComment)!==_.readInt(4)?null:d.utf8decode(_.readData(m.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,o){function i(_,y,x){this.name=_,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=y,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),u=n("./utf8"),d=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(_){var y=null,x="string";try{if(!_)throw new Error("No output type specified.");var g=(x=_.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),y=this._decompressWorker();var v=!this._dataBinary;v&&!g&&(y=y.pipe(new u.Utf8EncodeWorker)),!v&&g&&(y=y.pipe(new u.Utf8DecodeWorker))}catch(w){(y=new f("error")).error(w)}return new s(y,x,"")},async:function(_,y){return this.internalStream(_).accumulate(y)},nodeStream:function(_,y){return this.internalStream(_||"nodebuffer").toNodejsStream(y)},_compressWorker:function(_,y){if(this._data instanceof d&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(x,_,y)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof f?this._data:new l(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<p.length;m++)i.prototype[p[m]]=h;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,o){(function(i){var s,l,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var d=0,f=new u(_),p=i.document.createTextNode("");f.observe(p,{characterData:!0}),s=function(){p.data=d=++d%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var y=i.document.createElement("script");y.onreadystatechange=function(){_(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},i.document.documentElement.appendChild(y)}:function(){setTimeout(_,0)};else{var h=new i.MessageChannel;h.port1.onmessage=_,s=function(){h.port2.postMessage(0)}}var m=[];function _(){var y,x;l=!0;for(var g=m.length;g;){for(x=m,m=[],y=-1;++y<g;)x[y]();g=m.length}l=!1}r.exports=function(y){m.push(y)!==1||l||s()}}).call(this,typeof Lo<"u"?Lo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,o){var i=n("immediate");function s(){}var l={},u=["REJECTED"],d=["FULFILLED"],f=["PENDING"];function p(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,g!==s&&y(this,g)}function h(g,v,w){this.promise=g,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function m(g,v,w){i(function(){var T;try{T=v(w)}catch(I){return l.reject(g,I)}T===g?l.reject(g,new TypeError("Cannot resolve promise with itself")):l.resolve(g,T)})}function _(g){var v=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof v=="function")return function(){v.apply(g,arguments)}}function y(g,v){var w=!1;function T(R){w||(w=!0,l.reject(g,R))}function I(R){w||(w=!0,l.resolve(g,R))}var D=x(function(){v(I,T)});D.status==="error"&&T(D.value)}function x(g,v){var w={};try{w.value=g(v),w.status="success"}catch(T){w.status="error",w.value=T}return w}(r.exports=p).prototype.finally=function(g){if(typeof g!="function")return this;var v=this.constructor;return this.then(function(w){return v.resolve(g()).then(function(){return w})},function(w){return v.resolve(g()).then(function(){throw w})})},p.prototype.catch=function(g){return this.then(null,g)},p.prototype.then=function(g,v){if(typeof g!="function"&&this.state===d||typeof v!="function"&&this.state===u)return this;var w=new this.constructor(s);return this.state!==f?m(w,this.state===d?g:v,this.outcome):this.queue.push(new h(w,g,v)),w},h.prototype.callFulfilled=function(g){l.resolve(this.promise,g)},h.prototype.otherCallFulfilled=function(g){m(this.promise,this.onFulfilled,g)},h.prototype.callRejected=function(g){l.reject(this.promise,g)},h.prototype.otherCallRejected=function(g){m(this.promise,this.onRejected,g)},l.resolve=function(g,v){var w=x(_,v);if(w.status==="error")return l.reject(g,w.value);var T=w.value;if(T)y(g,T);else{g.state=d,g.outcome=v;for(var I=-1,D=g.queue.length;++I<D;)g.queue[I].callFulfilled(v)}return g},l.reject=function(g,v){g.state=u,g.outcome=v;for(var w=-1,T=g.queue.length;++w<T;)g.queue[w].callRejected(v);return g},p.resolve=function(g){return g instanceof this?g:l.resolve(new this(s),g)},p.reject=function(g){var v=new this(s);return l.reject(v,g)},p.all=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,T=!1;if(!w)return this.resolve([]);for(var I=new Array(w),D=0,R=-1,F=new this(s);++R<w;)b(g[R],R);return F;function b(V,J){v.resolve(V).then(function(N){I[J]=N,++D!==w||T||(T=!0,l.resolve(F,I))},function(N){T||(T=!0,l.reject(F,N))})}},p.race=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,T=!1;if(!w)return this.resolve([]);for(var I=-1,D=new this(s);++I<w;)R=g[I],v.resolve(R).then(function(F){T||(T=!0,l.resolve(D,F))},function(F){T||(T=!0,l.reject(D,F))});var R;return D}},{immediate:36}],38:[function(n,r,o){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,o){var i=n("./zlib/deflate"),s=n("./utils/common"),l=n("./utils/strings"),u=n("./zlib/messages"),d=n("./zlib/zstream"),f=Object.prototype.toString,p=0,h=-1,m=0,_=8;function y(g){if(!(this instanceof y))return new y(g);this.options=s.assign({level:h,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},g||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var w=i.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(w!==p)throw new Error(u[w]);if(v.header&&i.deflateSetHeader(this.strm,v.header),v.dictionary){var T;if(T=typeof v.dictionary=="string"?l.string2buf(v.dictionary):f.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(w=i.deflateSetDictionary(this.strm,T))!==p)throw new Error(u[w]);this._dict_set=!0}}function x(g,v){var w=new y(v);if(w.push(g,!0),w.err)throw w.msg||u[w.err];return w.result}y.prototype.push=function(g,v){var w,T,I=this.strm,D=this.options.chunkSize;if(this.ended)return!1;T=v===~~v?v:v===!0?4:0,typeof g=="string"?I.input=l.string2buf(g):f.call(g)==="[object ArrayBuffer]"?I.input=new Uint8Array(g):I.input=g,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new s.Buf8(D),I.next_out=0,I.avail_out=D),(w=i.deflate(I,T))!==1&&w!==p)return this.onEnd(w),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(s.shrinkBuf(I.output,I.next_out))):this.onData(s.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&w!==1);return T===4?(w=i.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===p):T!==2||(this.onEnd(p),!(I.avail_out=0))},y.prototype.onData=function(g){this.chunks.push(g)},y.prototype.onEnd=function(g){g===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},o.Deflate=y,o.deflate=x,o.deflateRaw=function(g,v){return(v=v||{}).raw=!0,x(g,v)},o.gzip=function(g,v){return(v=v||{}).gzip=!0,x(g,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,o){var i=n("./zlib/inflate"),s=n("./utils/common"),l=n("./utils/strings"),u=n("./zlib/constants"),d=n("./zlib/messages"),f=n("./zlib/zstream"),p=n("./zlib/gzheader"),h=Object.prototype.toString;function m(y){if(!(this instanceof m))return new m(y);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},y||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||y&&y.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,x.windowBits);if(g!==u.Z_OK)throw new Error(d[g]);this.header=new p,i.inflateGetHeader(this.strm,this.header)}function _(y,x){var g=new m(x);if(g.push(y,!0),g.err)throw g.msg||d[g.err];return g.result}m.prototype.push=function(y,x){var g,v,w,T,I,D,R=this.strm,F=this.options.chunkSize,b=this.options.dictionary,V=!1;if(this.ended)return!1;v=x===~~x?x:x===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof y=="string"?R.input=l.binstring2buf(y):h.call(y)==="[object ArrayBuffer]"?R.input=new Uint8Array(y):R.input=y,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new s.Buf8(F),R.next_out=0,R.avail_out=F),(g=i.inflate(R,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&b&&(D=typeof b=="string"?l.string2buf(b):h.call(b)==="[object ArrayBuffer]"?new Uint8Array(b):b,g=i.inflateSetDictionary(this.strm,D)),g===u.Z_BUF_ERROR&&V===!0&&(g=u.Z_OK,V=!1),g!==u.Z_STREAM_END&&g!==u.Z_OK)return this.onEnd(g),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&g!==u.Z_STREAM_END&&(R.avail_in!==0||v!==u.Z_FINISH&&v!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=l.utf8border(R.output,R.next_out),T=R.next_out-w,I=l.buf2string(R.output,w),R.next_out=T,R.avail_out=F-T,T&&s.arraySet(R.output,R.output,w,T,0),this.onData(I)):this.onData(s.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(V=!0)}while((0<R.avail_in||R.avail_out===0)&&g!==u.Z_STREAM_END);return g===u.Z_STREAM_END&&(v=u.Z_FINISH),v===u.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===u.Z_OK):v!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(R.avail_out=0))},m.prototype.onData=function(y){this.chunks.push(y)},m.prototype.onEnd=function(y){y===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},o.Inflate=m,o.inflate=_,o.inflateRaw=function(y,x){return(x=x||{}).raw=!0,_(y,x)},o.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,o){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var f=d.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])}}return u},o.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var s={arraySet:function(u,d,f,p,h){if(d.subarray&&u.subarray)u.set(d.subarray(f,f+p),h);else for(var m=0;m<p;m++)u[h+m]=d[f+m]},flattenChunks:function(u){var d,f,p,h,m,_;for(d=p=0,f=u.length;d<f;d++)p+=u[d].length;for(_=new Uint8Array(p),d=h=0,f=u.length;d<f;d++)m=u[d],_.set(m,h),h+=m.length;return _}},l={arraySet:function(u,d,f,p,h){for(var m=0;m<p;m++)u[h+m]=d[f+m]},flattenChunks:function(u){return[].concat.apply([],u)}};o.setTyped=function(u){u?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,s)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,l))},o.setTyped(i)},{}],42:[function(n,r,o){var i=n("./common"),s=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new i.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function f(p,h){if(h<65537&&(p.subarray&&l||!p.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(p,h));for(var m="",_=0;_<h;_++)m+=String.fromCharCode(p[_]);return m}u[254]=u[254]=1,o.string2buf=function(p){var h,m,_,y,x,g=p.length,v=0;for(y=0;y<g;y++)(64512&(m=p.charCodeAt(y)))==55296&&y+1<g&&(64512&(_=p.charCodeAt(y+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),y++),v+=m<128?1:m<2048?2:m<65536?3:4;for(h=new i.Buf8(v),y=x=0;x<v;y++)(64512&(m=p.charCodeAt(y)))==55296&&y+1<g&&(64512&(_=p.charCodeAt(y+1)))==56320&&(m=65536+(m-55296<<10)+(_-56320),y++),m<128?h[x++]=m:(m<2048?h[x++]=192|m>>>6:(m<65536?h[x++]=224|m>>>12:(h[x++]=240|m>>>18,h[x++]=128|m>>>12&63),h[x++]=128|m>>>6&63),h[x++]=128|63&m);return h},o.buf2binstring=function(p){return f(p,p.length)},o.binstring2buf=function(p){for(var h=new i.Buf8(p.length),m=0,_=h.length;m<_;m++)h[m]=p.charCodeAt(m);return h},o.buf2string=function(p,h){var m,_,y,x,g=h||p.length,v=new Array(2*g);for(m=_=0;m<g;)if((y=p[m++])<128)v[_++]=y;else if(4<(x=u[y]))v[_++]=65533,m+=x-1;else{for(y&=x===2?31:x===3?15:7;1<x&&m<g;)y=y<<6|63&p[m++],x--;1<x?v[_++]=65533:y<65536?v[_++]=y:(y-=65536,v[_++]=55296|y>>10&1023,v[_++]=56320|1023&y)}return f(v,_)},o.utf8border=function(p,h){var m;for((h=h||p.length)>p.length&&(h=p.length),m=h-1;0<=m&&(192&p[m])==128;)m--;return m<0||m===0?h:m+u[p[m]]>h?m:h}},{"./common":41}],43:[function(n,r,o){r.exports=function(i,s,l,u){for(var d=65535&i|0,f=i>>>16&65535|0,p=0;l!==0;){for(l-=p=2e3<l?2e3:l;f=f+(d=d+s[u++]|0)|0,--p;);d%=65521,f%=65521}return d|f<<16|0}},{}],44:[function(n,r,o){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,o){var i=function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l}();r.exports=function(s,l,u,d){var f=i,p=d+u;s^=-1;for(var h=d;h<p;h++)s=s>>>8^f[255&(s^l[h])];return-1^s}},{}],46:[function(n,r,o){var i,s=n("../utils/common"),l=n("./trees"),u=n("./adler32"),d=n("./crc32"),f=n("./messages"),p=0,h=4,m=0,_=-2,y=-1,x=4,g=2,v=8,w=9,T=286,I=30,D=19,R=2*T+1,F=15,b=3,V=258,J=V+b+1,N=42,z=113,C=1,q=2,se=3,X=4;function Y(S,$){return S.msg=f[$],$}function O(S){return(S<<1)-(4<S?9:0)}function W(S){for(var $=S.length;0<=--$;)S[$]=0}function B(S){var $=S.state,H=$.pending;H>S.avail_out&&(H=S.avail_out),H!==0&&(s.arraySet(S.output,$.pending_buf,$.pending_out,H,S.next_out),S.next_out+=H,$.pending_out+=H,S.total_out+=H,S.avail_out-=H,$.pending-=H,$.pending===0&&($.pending_out=0))}function M(S,$){l._tr_flush_block(S,0<=S.block_start?S.block_start:-1,S.strstart-S.block_start,$),S.block_start=S.strstart,B(S.strm)}function ne(S,$){S.pending_buf[S.pending++]=$}function j(S,$){S.pending_buf[S.pending++]=$>>>8&255,S.pending_buf[S.pending++]=255&$}function ee(S,$){var H,A,k=S.max_chain_length,U=S.strstart,K=S.prev_length,L=S.nice_match,P=S.strstart>S.w_size-J?S.strstart-(S.w_size-J):0,G=S.window,re=S.w_mask,Z=S.prev,le=S.strstart+V,ge=G[U+K-1],he=G[U+K];S.prev_length>=S.good_match&&(k>>=2),L>S.lookahead&&(L=S.lookahead);do if(G[(H=$)+K]===he&&G[H+K-1]===ge&&G[H]===G[U]&&G[++H]===G[U+1]){U+=2,H++;do;while(G[++U]===G[++H]&&G[++U]===G[++H]&&G[++U]===G[++H]&&G[++U]===G[++H]&&G[++U]===G[++H]&&G[++U]===G[++H]&&G[++U]===G[++H]&&G[++U]===G[++H]&&U<le);if(A=V-(le-U),U=le-V,K<A){if(S.match_start=$,L<=(K=A))break;ge=G[U+K-1],he=G[U+K]}}while(($=Z[$&re])>P&&--k!=0);return K<=S.lookahead?K:S.lookahead}function pe(S){var $,H,A,k,U,K,L,P,G,re,Z=S.w_size;do{if(k=S.window_size-S.lookahead-S.strstart,S.strstart>=Z+(Z-J)){for(s.arraySet(S.window,S.window,Z,Z,0),S.match_start-=Z,S.strstart-=Z,S.block_start-=Z,$=H=S.hash_size;A=S.head[--$],S.head[$]=Z<=A?A-Z:0,--H;);for($=H=Z;A=S.prev[--$],S.prev[$]=Z<=A?A-Z:0,--H;);k+=Z}if(S.strm.avail_in===0)break;if(K=S.strm,L=S.window,P=S.strstart+S.lookahead,G=k,re=void 0,re=K.avail_in,G<re&&(re=G),H=re===0?0:(K.avail_in-=re,s.arraySet(L,K.input,K.next_in,re,P),K.state.wrap===1?K.adler=u(K.adler,L,re,P):K.state.wrap===2&&(K.adler=d(K.adler,L,re,P)),K.next_in+=re,K.total_in+=re,re),S.lookahead+=H,S.lookahead+S.insert>=b)for(U=S.strstart-S.insert,S.ins_h=S.window[U],S.ins_h=(S.ins_h<<S.hash_shift^S.window[U+1])&S.hash_mask;S.insert&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[U+b-1])&S.hash_mask,S.prev[U&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=U,U++,S.insert--,!(S.lookahead+S.insert<b)););}while(S.lookahead<J&&S.strm.avail_in!==0)}function ye(S,$){for(var H,A;;){if(S.lookahead<J){if(pe(S),S.lookahead<J&&$===p)return C;if(S.lookahead===0)break}if(H=0,S.lookahead>=b&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+b-1])&S.hash_mask,H=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),H!==0&&S.strstart-H<=S.w_size-J&&(S.match_length=ee(S,H)),S.match_length>=b)if(A=l._tr_tally(S,S.strstart-S.match_start,S.match_length-b),S.lookahead-=S.match_length,S.match_length<=S.max_lazy_match&&S.lookahead>=b){for(S.match_length--;S.strstart++,S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+b-1])&S.hash_mask,H=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart,--S.match_length!=0;);S.strstart++}else S.strstart+=S.match_length,S.match_length=0,S.ins_h=S.window[S.strstart],S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+1])&S.hash_mask;else A=l._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++;if(A&&(M(S,!1),S.strm.avail_out===0))return C}return S.insert=S.strstart<b-1?S.strstart:b-1,$===h?(M(S,!0),S.strm.avail_out===0?se:X):S.last_lit&&(M(S,!1),S.strm.avail_out===0)?C:q}function fe(S,$){for(var H,A,k;;){if(S.lookahead<J){if(pe(S),S.lookahead<J&&$===p)return C;if(S.lookahead===0)break}if(H=0,S.lookahead>=b&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+b-1])&S.hash_mask,H=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),S.prev_length=S.match_length,S.prev_match=S.match_start,S.match_length=b-1,H!==0&&S.prev_length<S.max_lazy_match&&S.strstart-H<=S.w_size-J&&(S.match_length=ee(S,H),S.match_length<=5&&(S.strategy===1||S.match_length===b&&4096<S.strstart-S.match_start)&&(S.match_length=b-1)),S.prev_length>=b&&S.match_length<=S.prev_length){for(k=S.strstart+S.lookahead-b,A=l._tr_tally(S,S.strstart-1-S.prev_match,S.prev_length-b),S.lookahead-=S.prev_length-1,S.prev_length-=2;++S.strstart<=k&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+b-1])&S.hash_mask,H=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),--S.prev_length!=0;);if(S.match_available=0,S.match_length=b-1,S.strstart++,A&&(M(S,!1),S.strm.avail_out===0))return C}else if(S.match_available){if((A=l._tr_tally(S,0,S.window[S.strstart-1]))&&M(S,!1),S.strstart++,S.lookahead--,S.strm.avail_out===0)return C}else S.match_available=1,S.strstart++,S.lookahead--}return S.match_available&&(A=l._tr_tally(S,0,S.window[S.strstart-1]),S.match_available=0),S.insert=S.strstart<b-1?S.strstart:b-1,$===h?(M(S,!0),S.strm.avail_out===0?se:X):S.last_lit&&(M(S,!1),S.strm.avail_out===0)?C:q}function me(S,$,H,A,k){this.good_length=S,this.max_lazy=$,this.nice_length=H,this.max_chain=A,this.func=k}function Pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*R),this.dyn_dtree=new s.Buf16(2*(2*I+1)),this.bl_tree=new s.Buf16(2*(2*D+1)),W(this.dyn_ltree),W(this.dyn_dtree),W(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(F+1),this.heap=new s.Buf16(2*T+1),W(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*T+1),W(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ee(S){var $;return S&&S.state?(S.total_in=S.total_out=0,S.data_type=g,($=S.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?N:z,S.adler=$.wrap===2?0:1,$.last_flush=p,l._tr_init($),m):Y(S,_)}function nt(S){var $=Ee(S);return $===m&&function(H){H.window_size=2*H.w_size,W(H.head),H.max_lazy_match=i[H.level].max_lazy,H.good_match=i[H.level].good_length,H.nice_match=i[H.level].nice_length,H.max_chain_length=i[H.level].max_chain,H.strstart=0,H.block_start=0,H.lookahead=0,H.insert=0,H.match_length=H.prev_length=b-1,H.match_available=0,H.ins_h=0}(S.state),$}function rt(S,$,H,A,k,U){if(!S)return _;var K=1;if($===y&&($=6),A<0?(K=0,A=-A):15<A&&(K=2,A-=16),k<1||w<k||H!==v||A<8||15<A||$<0||9<$||U<0||x<U)return Y(S,_);A===8&&(A=9);var L=new Pe;return(S.state=L).strm=S,L.wrap=K,L.gzhead=null,L.w_bits=A,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=k+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+b-1)/b),L.window=new s.Buf8(2*L.w_size),L.head=new s.Buf16(L.hash_size),L.prev=new s.Buf16(L.w_size),L.lit_bufsize=1<<k+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new s.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=$,L.strategy=U,L.method=H,nt(S)}i=[new me(0,0,0,0,function(S,$){var H=65535;for(H>S.pending_buf_size-5&&(H=S.pending_buf_size-5);;){if(S.lookahead<=1){if(pe(S),S.lookahead===0&&$===p)return C;if(S.lookahead===0)break}S.strstart+=S.lookahead,S.lookahead=0;var A=S.block_start+H;if((S.strstart===0||S.strstart>=A)&&(S.lookahead=S.strstart-A,S.strstart=A,M(S,!1),S.strm.avail_out===0)||S.strstart-S.block_start>=S.w_size-J&&(M(S,!1),S.strm.avail_out===0))return C}return S.insert=0,$===h?(M(S,!0),S.strm.avail_out===0?se:X):(S.strstart>S.block_start&&(M(S,!1),S.strm.avail_out),C)}),new me(4,4,8,4,ye),new me(4,5,16,8,ye),new me(4,6,32,32,ye),new me(4,4,16,16,fe),new me(8,16,32,32,fe),new me(8,16,128,128,fe),new me(8,32,128,256,fe),new me(32,128,258,1024,fe),new me(32,258,258,4096,fe)],o.deflateInit=function(S,$){return rt(S,$,v,15,8,0)},o.deflateInit2=rt,o.deflateReset=nt,o.deflateResetKeep=Ee,o.deflateSetHeader=function(S,$){return S&&S.state?S.state.wrap!==2?_:(S.state.gzhead=$,m):_},o.deflate=function(S,$){var H,A,k,U;if(!S||!S.state||5<$||$<0)return S?Y(S,_):_;if(A=S.state,!S.output||!S.input&&S.avail_in!==0||A.status===666&&$!==h)return Y(S,S.avail_out===0?-5:_);if(A.strm=S,H=A.last_flush,A.last_flush=$,A.status===N)if(A.wrap===2)S.adler=0,ne(A,31),ne(A,139),ne(A,8),A.gzhead?(ne(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),ne(A,255&A.gzhead.time),ne(A,A.gzhead.time>>8&255),ne(A,A.gzhead.time>>16&255),ne(A,A.gzhead.time>>24&255),ne(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),ne(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(ne(A,255&A.gzhead.extra.length),ne(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(S.adler=d(S.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(ne(A,0),ne(A,0),ne(A,0),ne(A,0),ne(A,0),ne(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),ne(A,3),A.status=z);else{var K=v+(A.w_bits-8<<4)<<8;K|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(K|=32),K+=31-K%31,A.status=z,j(A,K),A.strstart!==0&&(j(A,S.adler>>>16),j(A,65535&S.adler)),S.adler=1}if(A.status===69)if(A.gzhead.extra){for(k=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>k&&(S.adler=d(S.adler,A.pending_buf,A.pending-k,k)),B(S),k=A.pending,A.pending!==A.pending_buf_size));)ne(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>k&&(S.adler=d(S.adler,A.pending_buf,A.pending-k,k)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){k=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>k&&(S.adler=d(S.adler,A.pending_buf,A.pending-k,k)),B(S),k=A.pending,A.pending===A.pending_buf_size)){U=1;break}U=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,ne(A,U)}while(U!==0);A.gzhead.hcrc&&A.pending>k&&(S.adler=d(S.adler,A.pending_buf,A.pending-k,k)),U===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){k=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>k&&(S.adler=d(S.adler,A.pending_buf,A.pending-k,k)),B(S),k=A.pending,A.pending===A.pending_buf_size)){U=1;break}U=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,ne(A,U)}while(U!==0);A.gzhead.hcrc&&A.pending>k&&(S.adler=d(S.adler,A.pending_buf,A.pending-k,k)),U===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&B(S),A.pending+2<=A.pending_buf_size&&(ne(A,255&S.adler),ne(A,S.adler>>8&255),S.adler=0,A.status=z)):A.status=z),A.pending!==0){if(B(S),S.avail_out===0)return A.last_flush=-1,m}else if(S.avail_in===0&&O($)<=O(H)&&$!==h)return Y(S,-5);if(A.status===666&&S.avail_in!==0)return Y(S,-5);if(S.avail_in!==0||A.lookahead!==0||$!==p&&A.status!==666){var L=A.strategy===2?function(P,G){for(var re;;){if(P.lookahead===0&&(pe(P),P.lookahead===0)){if(G===p)return C;break}if(P.match_length=0,re=l._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++,re&&(M(P,!1),P.strm.avail_out===0))return C}return P.insert=0,G===h?(M(P,!0),P.strm.avail_out===0?se:X):P.last_lit&&(M(P,!1),P.strm.avail_out===0)?C:q}(A,$):A.strategy===3?function(P,G){for(var re,Z,le,ge,he=P.window;;){if(P.lookahead<=V){if(pe(P),P.lookahead<=V&&G===p)return C;if(P.lookahead===0)break}if(P.match_length=0,P.lookahead>=b&&0<P.strstart&&(Z=he[le=P.strstart-1])===he[++le]&&Z===he[++le]&&Z===he[++le]){ge=P.strstart+V;do;while(Z===he[++le]&&Z===he[++le]&&Z===he[++le]&&Z===he[++le]&&Z===he[++le]&&Z===he[++le]&&Z===he[++le]&&Z===he[++le]&&le<ge);P.match_length=V-(ge-le),P.match_length>P.lookahead&&(P.match_length=P.lookahead)}if(P.match_length>=b?(re=l._tr_tally(P,1,P.match_length-b),P.lookahead-=P.match_length,P.strstart+=P.match_length,P.match_length=0):(re=l._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++),re&&(M(P,!1),P.strm.avail_out===0))return C}return P.insert=0,G===h?(M(P,!0),P.strm.avail_out===0?se:X):P.last_lit&&(M(P,!1),P.strm.avail_out===0)?C:q}(A,$):i[A.level].func(A,$);if(L!==se&&L!==X||(A.status=666),L===C||L===se)return S.avail_out===0&&(A.last_flush=-1),m;if(L===q&&($===1?l._tr_align(A):$!==5&&(l._tr_stored_block(A,0,0,!1),$===3&&(W(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),B(S),S.avail_out===0))return A.last_flush=-1,m}return $!==h?m:A.wrap<=0?1:(A.wrap===2?(ne(A,255&S.adler),ne(A,S.adler>>8&255),ne(A,S.adler>>16&255),ne(A,S.adler>>24&255),ne(A,255&S.total_in),ne(A,S.total_in>>8&255),ne(A,S.total_in>>16&255),ne(A,S.total_in>>24&255)):(j(A,S.adler>>>16),j(A,65535&S.adler)),B(S),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?m:1)},o.deflateEnd=function(S){var $;return S&&S.state?($=S.state.status)!==N&&$!==69&&$!==73&&$!==91&&$!==103&&$!==z&&$!==666?Y(S,_):(S.state=null,$===z?Y(S,-3):m):_},o.deflateSetDictionary=function(S,$){var H,A,k,U,K,L,P,G,re=$.length;if(!S||!S.state||(U=(H=S.state).wrap)===2||U===1&&H.status!==N||H.lookahead)return _;for(U===1&&(S.adler=u(S.adler,$,re,0)),H.wrap=0,re>=H.w_size&&(U===0&&(W(H.head),H.strstart=0,H.block_start=0,H.insert=0),G=new s.Buf8(H.w_size),s.arraySet(G,$,re-H.w_size,H.w_size,0),$=G,re=H.w_size),K=S.avail_in,L=S.next_in,P=S.input,S.avail_in=re,S.next_in=0,S.input=$,pe(H);H.lookahead>=b;){for(A=H.strstart,k=H.lookahead-(b-1);H.ins_h=(H.ins_h<<H.hash_shift^H.window[A+b-1])&H.hash_mask,H.prev[A&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=A,A++,--k;);H.strstart=A,H.lookahead=b-1,pe(H)}return H.strstart+=H.lookahead,H.block_start=H.strstart,H.insert=H.lookahead,H.lookahead=0,H.match_length=H.prev_length=b-1,H.match_available=0,S.next_in=L,S.input=P,S.avail_in=K,H.wrap=U,m},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,o){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,o){r.exports=function(i,s){var l,u,d,f,p,h,m,_,y,x,g,v,w,T,I,D,R,F,b,V,J,N,z,C,q;l=i.state,u=i.next_in,C=i.input,d=u+(i.avail_in-5),f=i.next_out,q=i.output,p=f-(s-i.avail_out),h=f+(i.avail_out-257),m=l.dmax,_=l.wsize,y=l.whave,x=l.wnext,g=l.window,v=l.hold,w=l.bits,T=l.lencode,I=l.distcode,D=(1<<l.lenbits)-1,R=(1<<l.distbits)-1;e:do{w<15&&(v+=C[u++]<<w,w+=8,v+=C[u++]<<w,w+=8),F=T[v&D];t:for(;;){if(v>>>=b=F>>>24,w-=b,(b=F>>>16&255)===0)q[f++]=65535&F;else{if(!(16&b)){if(!(64&b)){F=T[(65535&F)+(v&(1<<b)-1)];continue t}if(32&b){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}V=65535&F,(b&=15)&&(w<b&&(v+=C[u++]<<w,w+=8),V+=v&(1<<b)-1,v>>>=b,w-=b),w<15&&(v+=C[u++]<<w,w+=8,v+=C[u++]<<w,w+=8),F=I[v&R];n:for(;;){if(v>>>=b=F>>>24,w-=b,!(16&(b=F>>>16&255))){if(!(64&b)){F=I[(65535&F)+(v&(1<<b)-1)];continue n}i.msg="invalid distance code",l.mode=30;break e}if(J=65535&F,w<(b&=15)&&(v+=C[u++]<<w,(w+=8)<b&&(v+=C[u++]<<w,w+=8)),m<(J+=v&(1<<b)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(v>>>=b,w-=b,(b=f-p)<J){if(y<(b=J-b)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(z=g,(N=0)===x){if(N+=_-b,b<V){for(V-=b;q[f++]=g[N++],--b;);N=f-J,z=q}}else if(x<b){if(N+=_+x-b,(b-=x)<V){for(V-=b;q[f++]=g[N++],--b;);if(N=0,x<V){for(V-=b=x;q[f++]=g[N++],--b;);N=f-J,z=q}}}else if(N+=x-b,b<V){for(V-=b;q[f++]=g[N++],--b;);N=f-J,z=q}for(;2<V;)q[f++]=z[N++],q[f++]=z[N++],q[f++]=z[N++],V-=3;V&&(q[f++]=z[N++],1<V&&(q[f++]=z[N++]))}else{for(N=f-J;q[f++]=q[N++],q[f++]=q[N++],q[f++]=q[N++],2<(V-=3););V&&(q[f++]=q[N++],1<V&&(q[f++]=q[N++]))}break}}break}}while(u<d&&f<h);u-=V=w>>3,v&=(1<<(w-=V<<3))-1,i.next_in=u,i.next_out=f,i.avail_in=u<d?d-u+5:5-(u-d),i.avail_out=f<h?h-f+257:257-(f-h),l.hold=v,l.bits=w}},{}],49:[function(n,r,o){var i=n("../utils/common"),s=n("./adler32"),l=n("./crc32"),u=n("./inffast"),d=n("./inftrees"),f=1,p=2,h=0,m=-2,_=1,y=852,x=592;function g(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(N){var z;return N&&N.state?(z=N.state,N.total_in=N.total_out=z.total=0,N.msg="",z.wrap&&(N.adler=1&z.wrap),z.mode=_,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new i.Buf32(y),z.distcode=z.distdyn=new i.Buf32(x),z.sane=1,z.back=-1,h):m}function T(N){var z;return N&&N.state?((z=N.state).wsize=0,z.whave=0,z.wnext=0,w(N)):m}function I(N,z){var C,q;return N&&N.state?(q=N.state,z<0?(C=0,z=-z):(C=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?m:(q.window!==null&&q.wbits!==z&&(q.window=null),q.wrap=C,q.wbits=z,T(N))):m}function D(N,z){var C,q;return N?(q=new v,(N.state=q).window=null,(C=I(N,z))!==h&&(N.state=null),C):m}var R,F,b=!0;function V(N){if(b){var z;for(R=new i.Buf32(512),F=new i.Buf32(32),z=0;z<144;)N.lens[z++]=8;for(;z<256;)N.lens[z++]=9;for(;z<280;)N.lens[z++]=7;for(;z<288;)N.lens[z++]=8;for(d(f,N.lens,0,288,R,0,N.work,{bits:9}),z=0;z<32;)N.lens[z++]=5;d(p,N.lens,0,32,F,0,N.work,{bits:5}),b=!1}N.lencode=R,N.lenbits=9,N.distcode=F,N.distbits=5}function J(N,z,C,q){var se,X=N.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new i.Buf8(X.wsize)),q>=X.wsize?(i.arraySet(X.window,z,C-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(q<(se=X.wsize-X.wnext)&&(se=q),i.arraySet(X.window,z,C-q,se,X.wnext),(q-=se)?(i.arraySet(X.window,z,C-q,q,0),X.wnext=q,X.whave=X.wsize):(X.wnext+=se,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=se))),0}o.inflateReset=T,o.inflateReset2=I,o.inflateResetKeep=w,o.inflateInit=function(N){return D(N,15)},o.inflateInit2=D,o.inflate=function(N,z){var C,q,se,X,Y,O,W,B,M,ne,j,ee,pe,ye,fe,me,Pe,Ee,nt,rt,S,$,H,A,k=0,U=new i.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return m;(C=N.state).mode===12&&(C.mode=13),Y=N.next_out,se=N.output,W=N.avail_out,X=N.next_in,q=N.input,O=N.avail_in,B=C.hold,M=C.bits,ne=O,j=W,$=h;e:for(;;)switch(C.mode){case _:if(C.wrap===0){C.mode=13;break}for(;M<16;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}if(2&C.wrap&&B===35615){U[C.check=0]=255&B,U[1]=B>>>8&255,C.check=l(C.check,U,2,0),M=B=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&B)<<8)+(B>>8))%31){N.msg="incorrect header check",C.mode=30;break}if((15&B)!=8){N.msg="unknown compression method",C.mode=30;break}if(M-=4,S=8+(15&(B>>>=4)),C.wbits===0)C.wbits=S;else if(S>C.wbits){N.msg="invalid window size",C.mode=30;break}C.dmax=1<<S,N.adler=C.check=1,C.mode=512&B?10:12,M=B=0;break;case 2:for(;M<16;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}if(C.flags=B,(255&C.flags)!=8){N.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){N.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=B>>8&1),512&C.flags&&(U[0]=255&B,U[1]=B>>>8&255,C.check=l(C.check,U,2,0)),M=B=0,C.mode=3;case 3:for(;M<32;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}C.head&&(C.head.time=B),512&C.flags&&(U[0]=255&B,U[1]=B>>>8&255,U[2]=B>>>16&255,U[3]=B>>>24&255,C.check=l(C.check,U,4,0)),M=B=0,C.mode=4;case 4:for(;M<16;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}C.head&&(C.head.xflags=255&B,C.head.os=B>>8),512&C.flags&&(U[0]=255&B,U[1]=B>>>8&255,C.check=l(C.check,U,2,0)),M=B=0,C.mode=5;case 5:if(1024&C.flags){for(;M<16;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}C.length=B,C.head&&(C.head.extra_len=B),512&C.flags&&(U[0]=255&B,U[1]=B>>>8&255,C.check=l(C.check,U,2,0)),M=B=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&(O<(ee=C.length)&&(ee=O),ee&&(C.head&&(S=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),i.arraySet(C.head.extra,q,X,ee,S)),512&C.flags&&(C.check=l(C.check,q,ee,X)),O-=ee,X+=ee,C.length-=ee),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(O===0)break e;for(ee=0;S=q[X+ee++],C.head&&S&&C.length<65536&&(C.head.name+=String.fromCharCode(S)),S&&ee<O;);if(512&C.flags&&(C.check=l(C.check,q,ee,X)),O-=ee,X+=ee,S)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(O===0)break e;for(ee=0;S=q[X+ee++],C.head&&S&&C.length<65536&&(C.head.comment+=String.fromCharCode(S)),S&&ee<O;);if(512&C.flags&&(C.check=l(C.check,q,ee,X)),O-=ee,X+=ee,S)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;M<16;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}if(B!==(65535&C.check)){N.msg="header crc mismatch",C.mode=30;break}M=B=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),N.adler=C.check=0,C.mode=12;break;case 10:for(;M<32;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}N.adler=C.check=g(B),M=B=0,C.mode=11;case 11:if(C.havedict===0)return N.next_out=Y,N.avail_out=W,N.next_in=X,N.avail_in=O,C.hold=B,C.bits=M,2;N.adler=C.check=1,C.mode=12;case 12:if(z===5||z===6)break e;case 13:if(C.last){B>>>=7&M,M-=7&M,C.mode=27;break}for(;M<3;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}switch(C.last=1&B,M-=1,3&(B>>>=1)){case 0:C.mode=14;break;case 1:if(V(C),C.mode=20,z!==6)break;B>>>=2,M-=2;break e;case 2:C.mode=17;break;case 3:N.msg="invalid block type",C.mode=30}B>>>=2,M-=2;break;case 14:for(B>>>=7&M,M-=7&M;M<32;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}if((65535&B)!=(B>>>16^65535)){N.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&B,M=B=0,C.mode=15,z===6)break e;case 15:C.mode=16;case 16:if(ee=C.length){if(O<ee&&(ee=O),W<ee&&(ee=W),ee===0)break e;i.arraySet(se,q,X,ee,Y),O-=ee,X+=ee,W-=ee,Y+=ee,C.length-=ee;break}C.mode=12;break;case 17:for(;M<14;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}if(C.nlen=257+(31&B),B>>>=5,M-=5,C.ndist=1+(31&B),B>>>=5,M-=5,C.ncode=4+(15&B),B>>>=4,M-=4,286<C.nlen||30<C.ndist){N.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;M<3;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}C.lens[K[C.have++]]=7&B,B>>>=3,M-=3}for(;C.have<19;)C.lens[K[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,H={bits:C.lenbits},$=d(0,C.lens,0,19,C.lencode,0,C.work,H),C.lenbits=H.bits,$){N.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;me=(k=C.lencode[B&(1<<C.lenbits)-1])>>>16&255,Pe=65535&k,!((fe=k>>>24)<=M);){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}if(Pe<16)B>>>=fe,M-=fe,C.lens[C.have++]=Pe;else{if(Pe===16){for(A=fe+2;M<A;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}if(B>>>=fe,M-=fe,C.have===0){N.msg="invalid bit length repeat",C.mode=30;break}S=C.lens[C.have-1],ee=3+(3&B),B>>>=2,M-=2}else if(Pe===17){for(A=fe+3;M<A;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}M-=fe,S=0,ee=3+(7&(B>>>=fe)),B>>>=3,M-=3}else{for(A=fe+7;M<A;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}M-=fe,S=0,ee=11+(127&(B>>>=fe)),B>>>=7,M-=7}if(C.have+ee>C.nlen+C.ndist){N.msg="invalid bit length repeat",C.mode=30;break}for(;ee--;)C.lens[C.have++]=S}}if(C.mode===30)break;if(C.lens[256]===0){N.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,H={bits:C.lenbits},$=d(f,C.lens,0,C.nlen,C.lencode,0,C.work,H),C.lenbits=H.bits,$){N.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,H={bits:C.distbits},$=d(p,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,H),C.distbits=H.bits,$){N.msg="invalid distances set",C.mode=30;break}if(C.mode=20,z===6)break e;case 20:C.mode=21;case 21:if(6<=O&&258<=W){N.next_out=Y,N.avail_out=W,N.next_in=X,N.avail_in=O,C.hold=B,C.bits=M,u(N,j),Y=N.next_out,se=N.output,W=N.avail_out,X=N.next_in,q=N.input,O=N.avail_in,B=C.hold,M=C.bits,C.mode===12&&(C.back=-1);break}for(C.back=0;me=(k=C.lencode[B&(1<<C.lenbits)-1])>>>16&255,Pe=65535&k,!((fe=k>>>24)<=M);){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}if(me&&!(240&me)){for(Ee=fe,nt=me,rt=Pe;me=(k=C.lencode[rt+((B&(1<<Ee+nt)-1)>>Ee)])>>>16&255,Pe=65535&k,!(Ee+(fe=k>>>24)<=M);){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}B>>>=Ee,M-=Ee,C.back+=Ee}if(B>>>=fe,M-=fe,C.back+=fe,C.length=Pe,me===0){C.mode=26;break}if(32&me){C.back=-1,C.mode=12;break}if(64&me){N.msg="invalid literal/length code",C.mode=30;break}C.extra=15&me,C.mode=22;case 22:if(C.extra){for(A=C.extra;M<A;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}C.length+=B&(1<<C.extra)-1,B>>>=C.extra,M-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;me=(k=C.distcode[B&(1<<C.distbits)-1])>>>16&255,Pe=65535&k,!((fe=k>>>24)<=M);){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}if(!(240&me)){for(Ee=fe,nt=me,rt=Pe;me=(k=C.distcode[rt+((B&(1<<Ee+nt)-1)>>Ee)])>>>16&255,Pe=65535&k,!(Ee+(fe=k>>>24)<=M);){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}B>>>=Ee,M-=Ee,C.back+=Ee}if(B>>>=fe,M-=fe,C.back+=fe,64&me){N.msg="invalid distance code",C.mode=30;break}C.offset=Pe,C.extra=15&me,C.mode=24;case 24:if(C.extra){for(A=C.extra;M<A;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}C.offset+=B&(1<<C.extra)-1,B>>>=C.extra,M-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){N.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(W===0)break e;if(ee=j-W,C.offset>ee){if((ee=C.offset-ee)>C.whave&&C.sane){N.msg="invalid distance too far back",C.mode=30;break}pe=ee>C.wnext?(ee-=C.wnext,C.wsize-ee):C.wnext-ee,ee>C.length&&(ee=C.length),ye=C.window}else ye=se,pe=Y-C.offset,ee=C.length;for(W<ee&&(ee=W),W-=ee,C.length-=ee;se[Y++]=ye[pe++],--ee;);C.length===0&&(C.mode=21);break;case 26:if(W===0)break e;se[Y++]=C.length,W--,C.mode=21;break;case 27:if(C.wrap){for(;M<32;){if(O===0)break e;O--,B|=q[X++]<<M,M+=8}if(j-=W,N.total_out+=j,C.total+=j,j&&(N.adler=C.check=C.flags?l(C.check,se,j,Y-j):s(C.check,se,j,Y-j)),j=W,(C.flags?B:g(B))!==C.check){N.msg="incorrect data check",C.mode=30;break}M=B=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;M<32;){if(O===0)break e;O--,B+=q[X++]<<M,M+=8}if(B!==(4294967295&C.total)){N.msg="incorrect length check",C.mode=30;break}M=B=0}C.mode=29;case 29:$=1;break e;case 30:$=-3;break e;case 31:return-4;case 32:default:return m}return N.next_out=Y,N.avail_out=W,N.next_in=X,N.avail_in=O,C.hold=B,C.bits=M,(C.wsize||j!==N.avail_out&&C.mode<30&&(C.mode<27||z!==4))&&J(N,N.output,N.next_out,j-N.avail_out)?(C.mode=31,-4):(ne-=N.avail_in,j-=N.avail_out,N.total_in+=ne,N.total_out+=j,C.total+=j,C.wrap&&j&&(N.adler=C.check=C.flags?l(C.check,se,j,N.next_out-j):s(C.check,se,j,N.next_out-j)),N.data_type=C.bits+(C.last?64:0)+(C.mode===12?128:0)+(C.mode===20||C.mode===15?256:0),(ne==0&&j===0||z===4)&&$===h&&($=-5),$)},o.inflateEnd=function(N){if(!N||!N.state)return m;var z=N.state;return z.window&&(z.window=null),N.state=null,h},o.inflateGetHeader=function(N,z){var C;return N&&N.state&&2&(C=N.state).wrap?((C.head=z).done=!1,h):m},o.inflateSetDictionary=function(N,z){var C,q=z.length;return N&&N.state?(C=N.state).wrap!==0&&C.mode!==11?m:C.mode===11&&s(1,z,q,0)!==C.check?-3:J(N,z,q,q)?(C.mode=31,-4):(C.havedict=1,h):m},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,o){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,p,h,m,_,y,x,g){var v,w,T,I,D,R,F,b,V,J=g.bits,N=0,z=0,C=0,q=0,se=0,X=0,Y=0,O=0,W=0,B=0,M=null,ne=0,j=new i.Buf16(16),ee=new i.Buf16(16),pe=null,ye=0;for(N=0;N<=15;N++)j[N]=0;for(z=0;z<m;z++)j[p[h+z]]++;for(se=J,q=15;1<=q&&j[q]===0;q--);if(q<se&&(se=q),q===0)return _[y++]=20971520,_[y++]=20971520,g.bits=1,0;for(C=1;C<q&&j[C]===0;C++);for(se<C&&(se=C),N=O=1;N<=15;N++)if(O<<=1,(O-=j[N])<0)return-1;if(0<O&&(f===0||q!==1))return-1;for(ee[1]=0,N=1;N<15;N++)ee[N+1]=ee[N]+j[N];for(z=0;z<m;z++)p[h+z]!==0&&(x[ee[p[h+z]]++]=z);if(R=f===0?(M=pe=x,19):f===1?(M=s,ne-=257,pe=l,ye-=257,256):(M=u,pe=d,-1),N=C,D=y,Y=z=B=0,T=-1,I=(W=1<<(X=se))-1,f===1&&852<W||f===2&&592<W)return 1;for(;;){for(F=N-Y,V=x[z]<R?(b=0,x[z]):x[z]>R?(b=pe[ye+x[z]],M[ne+x[z]]):(b=96,0),v=1<<N-Y,C=w=1<<X;_[D+(B>>Y)+(w-=v)]=F<<24|b<<16|V|0,w!==0;);for(v=1<<N-1;B&v;)v>>=1;if(v!==0?(B&=v-1,B+=v):B=0,z++,--j[N]==0){if(N===q)break;N=p[h+x[z]]}if(se<N&&(B&I)!==T){for(Y===0&&(Y=se),D+=C,O=1<<(X=N-Y);X+Y<q&&!((O-=j[X+Y])<=0);)X++,O<<=1;if(W+=1<<X,f===1&&852<W||f===2&&592<W)return 1;_[T=B&I]=se<<24|X<<16|D-y|0}}return B!==0&&(_[D+B]=N-Y<<24|64<<16|0),g.bits=se,0}},{"../utils/common":41}],51:[function(n,r,o){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,o){var i=n("../utils/common"),s=0,l=1;function u(k){for(var U=k.length;0<=--U;)k[U]=0}var d=0,f=29,p=256,h=p+1+f,m=30,_=19,y=2*h+1,x=15,g=16,v=7,w=256,T=16,I=17,D=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(h+2));u(J);var N=new Array(2*m);u(N);var z=new Array(512);u(z);var C=new Array(256);u(C);var q=new Array(f);u(q);var se,X,Y,O=new Array(m);function W(k,U,K,L,P){this.static_tree=k,this.extra_bits=U,this.extra_base=K,this.elems=L,this.max_length=P,this.has_stree=k&&k.length}function B(k,U){this.dyn_tree=k,this.max_code=0,this.stat_desc=U}function M(k){return k<256?z[k]:z[256+(k>>>7)]}function ne(k,U){k.pending_buf[k.pending++]=255&U,k.pending_buf[k.pending++]=U>>>8&255}function j(k,U,K){k.bi_valid>g-K?(k.bi_buf|=U<<k.bi_valid&65535,ne(k,k.bi_buf),k.bi_buf=U>>g-k.bi_valid,k.bi_valid+=K-g):(k.bi_buf|=U<<k.bi_valid&65535,k.bi_valid+=K)}function ee(k,U,K){j(k,K[2*U],K[2*U+1])}function pe(k,U){for(var K=0;K|=1&k,k>>>=1,K<<=1,0<--U;);return K>>>1}function ye(k,U,K){var L,P,G=new Array(x+1),re=0;for(L=1;L<=x;L++)G[L]=re=re+K[L-1]<<1;for(P=0;P<=U;P++){var Z=k[2*P+1];Z!==0&&(k[2*P]=pe(G[Z]++,Z))}}function fe(k){var U;for(U=0;U<h;U++)k.dyn_ltree[2*U]=0;for(U=0;U<m;U++)k.dyn_dtree[2*U]=0;for(U=0;U<_;U++)k.bl_tree[2*U]=0;k.dyn_ltree[2*w]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function me(k){8<k.bi_valid?ne(k,k.bi_buf):0<k.bi_valid&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function Pe(k,U,K,L){var P=2*U,G=2*K;return k[P]<k[G]||k[P]===k[G]&&L[U]<=L[K]}function Ee(k,U,K){for(var L=k.heap[K],P=K<<1;P<=k.heap_len&&(P<k.heap_len&&Pe(U,k.heap[P+1],k.heap[P],k.depth)&&P++,!Pe(U,L,k.heap[P],k.depth));)k.heap[K]=k.heap[P],K=P,P<<=1;k.heap[K]=L}function nt(k,U,K){var L,P,G,re,Z=0;if(k.last_lit!==0)for(;L=k.pending_buf[k.d_buf+2*Z]<<8|k.pending_buf[k.d_buf+2*Z+1],P=k.pending_buf[k.l_buf+Z],Z++,L===0?ee(k,P,U):(ee(k,(G=C[P])+p+1,U),(re=R[G])!==0&&j(k,P-=q[G],re),ee(k,G=M(--L),K),(re=F[G])!==0&&j(k,L-=O[G],re)),Z<k.last_lit;);ee(k,w,U)}function rt(k,U){var K,L,P,G=U.dyn_tree,re=U.stat_desc.static_tree,Z=U.stat_desc.has_stree,le=U.stat_desc.elems,ge=-1;for(k.heap_len=0,k.heap_max=y,K=0;K<le;K++)G[2*K]!==0?(k.heap[++k.heap_len]=ge=K,k.depth[K]=0):G[2*K+1]=0;for(;k.heap_len<2;)G[2*(P=k.heap[++k.heap_len]=ge<2?++ge:0)]=1,k.depth[P]=0,k.opt_len--,Z&&(k.static_len-=re[2*P+1]);for(U.max_code=ge,K=k.heap_len>>1;1<=K;K--)Ee(k,G,K);for(P=le;K=k.heap[1],k.heap[1]=k.heap[k.heap_len--],Ee(k,G,1),L=k.heap[1],k.heap[--k.heap_max]=K,k.heap[--k.heap_max]=L,G[2*P]=G[2*K]+G[2*L],k.depth[P]=(k.depth[K]>=k.depth[L]?k.depth[K]:k.depth[L])+1,G[2*K+1]=G[2*L+1]=P,k.heap[1]=P++,Ee(k,G,1),2<=k.heap_len;);k.heap[--k.heap_max]=k.heap[1],function(he,We){var Ot,ot,Dn,Ae,bn,Qn,Mt=We.dyn_tree,Do=We.max_code,Fr=We.stat_desc.static_tree,vs=We.stat_desc.has_stree,bo=We.stat_desc.extra_bits,Q=We.stat_desc.extra_base,ue=We.stat_desc.max_length,ce=0;for(Ae=0;Ae<=x;Ae++)he.bl_count[Ae]=0;for(Mt[2*he.heap[he.heap_max]+1]=0,Ot=he.heap_max+1;Ot<y;Ot++)ue<(Ae=Mt[2*Mt[2*(ot=he.heap[Ot])+1]+1]+1)&&(Ae=ue,ce++),Mt[2*ot+1]=Ae,Do<ot||(he.bl_count[Ae]++,bn=0,Q<=ot&&(bn=bo[ot-Q]),Qn=Mt[2*ot],he.opt_len+=Qn*(Ae+bn),vs&&(he.static_len+=Qn*(Fr[2*ot+1]+bn)));if(ce!==0){do{for(Ae=ue-1;he.bl_count[Ae]===0;)Ae--;he.bl_count[Ae]--,he.bl_count[Ae+1]+=2,he.bl_count[ue]--,ce-=2}while(0<ce);for(Ae=ue;Ae!==0;Ae--)for(ot=he.bl_count[Ae];ot!==0;)Do<(Dn=he.heap[--Ot])||(Mt[2*Dn+1]!==Ae&&(he.opt_len+=(Ae-Mt[2*Dn+1])*Mt[2*Dn],Mt[2*Dn+1]=Ae),ot--)}}(k,U),ye(G,ge,k.bl_count)}function S(k,U,K){var L,P,G=-1,re=U[1],Z=0,le=7,ge=4;for(re===0&&(le=138,ge=3),U[2*(K+1)+1]=65535,L=0;L<=K;L++)P=re,re=U[2*(L+1)+1],++Z<le&&P===re||(Z<ge?k.bl_tree[2*P]+=Z:P!==0?(P!==G&&k.bl_tree[2*P]++,k.bl_tree[2*T]++):Z<=10?k.bl_tree[2*I]++:k.bl_tree[2*D]++,G=P,ge=(Z=0)===re?(le=138,3):P===re?(le=6,3):(le=7,4))}function $(k,U,K){var L,P,G=-1,re=U[1],Z=0,le=7,ge=4;for(re===0&&(le=138,ge=3),L=0;L<=K;L++)if(P=re,re=U[2*(L+1)+1],!(++Z<le&&P===re)){if(Z<ge)for(;ee(k,P,k.bl_tree),--Z!=0;);else P!==0?(P!==G&&(ee(k,P,k.bl_tree),Z--),ee(k,T,k.bl_tree),j(k,Z-3,2)):Z<=10?(ee(k,I,k.bl_tree),j(k,Z-3,3)):(ee(k,D,k.bl_tree),j(k,Z-11,7));G=P,ge=(Z=0)===re?(le=138,3):P===re?(le=6,3):(le=7,4)}}u(O);var H=!1;function A(k,U,K,L){j(k,(d<<1)+(L?1:0),3),function(P,G,re,Z){me(P),ne(P,re),ne(P,~re),i.arraySet(P.pending_buf,P.window,G,re,P.pending),P.pending+=re}(k,U,K)}o._tr_init=function(k){H||(function(){var U,K,L,P,G,re=new Array(x+1);for(P=L=0;P<f-1;P++)for(q[P]=L,U=0;U<1<<R[P];U++)C[L++]=P;for(C[L-1]=P,P=G=0;P<16;P++)for(O[P]=G,U=0;U<1<<F[P];U++)z[G++]=P;for(G>>=7;P<m;P++)for(O[P]=G<<7,U=0;U<1<<F[P]-7;U++)z[256+G++]=P;for(K=0;K<=x;K++)re[K]=0;for(U=0;U<=143;)J[2*U+1]=8,U++,re[8]++;for(;U<=255;)J[2*U+1]=9,U++,re[9]++;for(;U<=279;)J[2*U+1]=7,U++,re[7]++;for(;U<=287;)J[2*U+1]=8,U++,re[8]++;for(ye(J,h+1,re),U=0;U<m;U++)N[2*U+1]=5,N[2*U]=pe(U,5);se=new W(J,R,p+1,h,x),X=new W(N,F,0,m,x),Y=new W(new Array(0),b,0,_,v)}(),H=!0),k.l_desc=new B(k.dyn_ltree,se),k.d_desc=new B(k.dyn_dtree,X),k.bl_desc=new B(k.bl_tree,Y),k.bi_buf=0,k.bi_valid=0,fe(k)},o._tr_stored_block=A,o._tr_flush_block=function(k,U,K,L){var P,G,re=0;0<k.level?(k.strm.data_type===2&&(k.strm.data_type=function(Z){var le,ge=4093624447;for(le=0;le<=31;le++,ge>>>=1)if(1&ge&&Z.dyn_ltree[2*le]!==0)return s;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return l;for(le=32;le<p;le++)if(Z.dyn_ltree[2*le]!==0)return l;return s}(k)),rt(k,k.l_desc),rt(k,k.d_desc),re=function(Z){var le;for(S(Z,Z.dyn_ltree,Z.l_desc.max_code),S(Z,Z.dyn_dtree,Z.d_desc.max_code),rt(Z,Z.bl_desc),le=_-1;3<=le&&Z.bl_tree[2*V[le]+1]===0;le--);return Z.opt_len+=3*(le+1)+5+5+4,le}(k),P=k.opt_len+3+7>>>3,(G=k.static_len+3+7>>>3)<=P&&(P=G)):P=G=K+5,K+4<=P&&U!==-1?A(k,U,K,L):k.strategy===4||G===P?(j(k,2+(L?1:0),3),nt(k,J,N)):(j(k,4+(L?1:0),3),function(Z,le,ge,he){var We;for(j(Z,le-257,5),j(Z,ge-1,5),j(Z,he-4,4),We=0;We<he;We++)j(Z,Z.bl_tree[2*V[We]+1],3);$(Z,Z.dyn_ltree,le-1),$(Z,Z.dyn_dtree,ge-1)}(k,k.l_desc.max_code+1,k.d_desc.max_code+1,re+1),nt(k,k.dyn_ltree,k.dyn_dtree)),fe(k),L&&me(k)},o._tr_tally=function(k,U,K){return k.pending_buf[k.d_buf+2*k.last_lit]=U>>>8&255,k.pending_buf[k.d_buf+2*k.last_lit+1]=255&U,k.pending_buf[k.l_buf+k.last_lit]=255&K,k.last_lit++,U===0?k.dyn_ltree[2*K]++:(k.matches++,U--,k.dyn_ltree[2*(C[K]+p+1)]++,k.dyn_dtree[2*M(U)]++),k.last_lit===k.lit_bufsize-1},o._tr_align=function(k){j(k,2,3),ee(k,w,J),function(U){U.bi_valid===16?(ne(U,U.bi_buf),U.bi_buf=0,U.bi_valid=0):8<=U.bi_valid&&(U.pending_buf[U.pending++]=255&U.bi_buf,U.bi_buf>>=8,U.bi_valid-=8)}(k)}},{"../utils/common":41}],53:[function(n,r,o){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,o){(function(i){(function(s,l){if(!s.setImmediate){var u,d,f,p,h=1,m={},_=!1,y=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,u={}.toString.call(s.process)==="[object process]"?function(T){process.nextTick(function(){v(T)})}:function(){if(s.postMessage&&!s.importScripts){var T=!0,I=s.onmessage;return s.onmessage=function(){T=!1},s.postMessage("","*"),s.onmessage=I,T}}()?(p="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",w,!1):s.attachEvent("onmessage",w),function(T){s.postMessage(p+T,"*")}):s.MessageChannel?((f=new MessageChannel).port1.onmessage=function(T){v(T.data)},function(T){f.port2.postMessage(T)}):y&&"onreadystatechange"in y.createElement("script")?(d=y.documentElement,function(T){var I=y.createElement("script");I.onreadystatechange=function(){v(T),I.onreadystatechange=null,d.removeChild(I),I=null},d.appendChild(I)}):function(T){setTimeout(v,0,T)},x.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var I=new Array(arguments.length-1),D=0;D<I.length;D++)I[D]=arguments[D+1];var R={callback:T,args:I};return m[h]=R,u(h),h++},x.clearImmediate=g}function g(T){delete m[T]}function v(T){if(_)setTimeout(v,0,T);else{var I=m[T];if(I){_=!0;try{(function(D){var R=D.callback,F=D.args;switch(F.length){case 0:R();break;case 1:R(F[0]);break;case 2:R(F[0],F[1]);break;case 3:R(F[0],F[1],F[2]);break;default:R.apply(l,F)}})(I)}finally{g(T),_=!1}}}}function w(T){T.source===s&&typeof T.data=="string"&&T.data.indexOf(p)===0&&v(+T.data.slice(p.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Lo<"u"?Lo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(am);var SC=am.exports;const um=ef(SC),uo=t=>t.replace(/[^a-z0-9]/gi,"_").toLowerCase(),wC=(t,e,n,r,o,i)=>{const s=t.folder("whiteboards"),l=t.folder("playgrounds"),u=e.map(p=>{const h=`${uo(p.topic)}_${p.id.substring(0,6)}.svg`;return s==null||s.file(h,p.svgContent),{id:p.id,topic:p.topic,explanation:p.explanation,timestamp:p.timestamp,filePath:`whiteboards/${h}`}}),d=r.map(p=>{const h=`${uo(p.description)}_${p.id}.html`;return l==null||l.file(h,p.html),{id:p.id,description:p.description,timestamp:p.timestamp,filePath:`playgrounds/${h}`}}),f={version:"1.1",createdAt:Date.now(),theme:o,model:i,chatHistory:n,whiteboards:u,playgrounds:d};t.file("session_manifest.json",JSON.stringify(f,null,2))},xC=async t=>{const e=new um;return t.forEach(n=>{const r=n.group?`${uo(n.group)}/${uo(n.name)}`:uo(n.name),o=e.folder(r);o&&wC(o,n.whiteboards,n.chatHistory,n.playgrounds,n.theme,n.model)}),await e.generateAsync({type:"blob"})},EC=async(t,e)=>{const n=t.file(e+"session_manifest.json");if(!n)throw new Error(`Manifest not found in ${e}`);const r=JSON.parse(await n.async("string")),o=await Promise.all(r.whiteboards.map(async s=>{const l=e+s.filePath,u=t.file(l);return{id:s.id,topic:s.topic,explanation:s.explanation,timestamp:s.timestamp,svgContent:u?await u.async("string"):""}}));let i=[];if(r.playgrounds)i=await Promise.all(r.playgrounds.map(async s=>{const l=e+s.filePath,u=t.file(l),d=s.description.toLowerCase().includes("level test")||s.description.toLowerCase().startsWith("test:");return{id:s.id,description:s.description,timestamp:s.timestamp||Date.now(),html:u?await u.async("string"):"",status:"ready",type:d?"test":"practice"}}));else if(r.playground){const s=r.playground,l=e+s.filePath,u=t.file(l);u&&i.push({id:"legacy",description:s.description,timestamp:Date.now(),html:await u.async("string"),status:"ready",type:"practice"})}return{whiteboards:o,chatHistory:r.chatHistory,playgrounds:i,theme:r.theme,model:r.model}},CC=async t=>{const e=await um.loadAsync(t),n=[],r=[];if(e.forEach(o=>{o.endsWith("session_manifest.json")&&r.push(o)}),r.length===0)throw new Error("No valid session manifests found in ZIP.");for(const o of r){const i=o.replace("session_manifest.json","");try{const s=await EC(e,i),l=i.split("/").filter(u=>u.length>0);l.length===0?(s.name=t.name.replace(".zip",""),s.group=void 0):l.length===1?(s.name=l[0],s.group=void 0):(s.name=l[l.length-1],s.group=l.slice(0,l.length-1).join("/")),n.push(s)}catch(s){console.warn(`Failed to import session at ${o}`,s)}}return n},Js=(t,e)=>{const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},TC=()=>`
const fs = require('fs');
const path = require('path');

// CONFIGURATION
// Use the current directory where this script runs as the target
const TARGET_DIR = __dirname;
const CRYPTO_TAG = '${mh}';
const KEEP_COUNT = 2; // Keep last 2 instances

console.log(\`Starting Session Cleanup for tag: \${CRYPTO_TAG} in \${TARGET_DIR}\`);

try {
    const files = fs.readdirSync(TARGET_DIR);
    
    // Group files by Session Name
    // Expected format: Name_Date_CRYPTO_TAG.json
    const sessions = {};

    files.forEach(file => {
        if (!file.endsWith('.json') || !file.includes(CRYPTO_TAG)) return;

        // Simple parsing logic
        // Assuming: SessionName_YYYY-MM-DDTHH-mm-ss_FATY_V4_AUTO.json
        // We split by the crypto tag to isolate the unique name+date part
        const parts = file.split('_' + CRYPTO_TAG);
        if (parts.length < 1) return;

        // To group effectively, we need the "Base Name" (Session Name).
        // This is tricky if the session name has underscores.
        // Strategy: Use the Date regex to find the split point.
        // ISO Date usually contains colons or dashes. 
        // Our App saves as: Name_Timestamp_Tag.json
        
        // Let's rely on the file stats for sorting, grouping by name is the challenge.
        // Let's assume the name is everything before the last 2 underscores if we use a strict format.
        // Format: Name_TIMESTAMP_TAG.json
        
        const nameParts = file.replace('.json', '').split('_');
        // Remove Tag
        nameParts.pop(); // Remove Tag
        const timestamp = nameParts.pop(); // Remove Timestamp
        const sessionName = nameParts.join('_'); // Reconstruct Name

        if (!sessions[sessionName]) {
            sessions[sessionName] = [];
        }
        
        sessions[sessionName].push({
            filename: file,
            time: parseInt(timestamp) || 0
        });
    });

    // Process Deletion
    Object.keys(sessions).forEach(name => {
        const filesList = sessions[name];
        
        // Sort descending by time (newest first)
        filesList.sort((a, b) => b.time - a.time);

        if (filesList.length > KEEP_COUNT) {
            console.log(\`Cleaning session: \${name} (Found \${filesList.length}, keeping \${KEEP_COUNT})\`);
            
            // Files to delete
            const toDelete = filesList.slice(KEEP_COUNT);
            
            toDelete.forEach(f => {
                const fullPath = path.join(TARGET_DIR, f.filename);
                try {
                    fs.unlinkSync(fullPath);
                    console.log(\`  Deleted: \${f.filename}\`);
                } catch (err) {
                    console.error(\`  Error deleting \${f.filename}: \${err.message}\`);
                }
            });
        }
    });

    console.log("Cleanup Complete.");

} catch (err) {
    console.error("Critical Error:", err);
}

// Keep terminal open briefly
setTimeout(() => {}, 2000);
`,IC=()=>`# Fatygoras Auto-Save Cleanup Script

This script automatically cleans up old session files generated by Fatygoras Auto-Save.
It keeps the last 2 instances of every unique session and deletes older ones to save space.

## Prerequisites
1. You must have **Node.js** installed on your system.
   - Download: https://nodejs.org/

## Setup
1. Place the \`cleanup_sessions.js\` file inside the folder where you are Auto-Saving your sessions.

## Usage

### Windows (Easy)
1. Create a file named \`run_cleanup.bat\` in the same folder.
2. Edit it and paste the following code:
   \`\`\`batch
   @echo off
   node cleanup_sessions.js
   timeout /t 5
   \`\`\`
3. Double click \`run_cleanup.bat\` to run.
4. **To run on boot**: Press \`Win + R\`, type \`shell:startup\`, and paste a **Shortcut** to this .bat file inside that folder.

### Windows (Manual)
1. Right-click the folder and "Open Terminal".
2. Type: \`node cleanup_sessions.js\`

### Mac / Linux
1. Open Terminal.
2. Navigate to the folder: \`cd /path/to/your/save/folder\`
3. Run: \`node cleanup_sessions.js\`
4. **To run automatically:** Add a cron job (\`crontab -e\`) to run this script periodically.
   Example: \`*/2 * * * * cd /path/to/js/file /usr/bin/node cleanup_sessions.js\` (Runs every 2 mins).
`,kC=async(t,e,n)=>{try{const o=await(await t.getFileHandle(e,{create:!0})).createWritable();return await o.write(n),await o.close(),!0}catch(r){throw console.error("Auto-save write error:",r),r}},AC=({isOpen:t,onClose:e,whiteboards:n,chatHistory:r,playgrounds:o,theme:i,model:s,onImport:l,onConfigureAutoSave:u,onUpdateAutoSaveSettings:d,autoSaveActive:f,initialAutoSaveName:p,initialAutoSaveInterval:h})=>{const[m,_]=te.useState(!1),[y,x]=te.useState(null),g=te.useRef(null),[v,w]=te.useState([]),[T,I]=te.useState(""),[D,R]=te.useState(""),[F,b]=te.useState(p),[V,J]=te.useState(h);te.useEffect(()=>{b(p),J(h)},[p,h]),te.useEffect(()=>{t&&N()},[t]);const N=()=>{try{const M=localStorage.getItem(ze.LIBRARY_INDEX),ne=M?JSON.parse(M):[];w(ne)}catch(M){console.error("Failed to load library index",M),w([])}},z=()=>{if(!T.trim())return;const M=Date.now().toString(36)+Math.random().toString(36).substr(2),ne={id:M,name:T.trim(),group:D.trim()||void 0,timestamp:Date.now(),topicCount:n.length},j={whiteboards:n,chatHistory:r,playgrounds:o,theme:i,model:s};try{localStorage.setItem(`${ze.LIBRARY_DATA_PREFIX}${M}`,JSON.stringify(j));const ee=[...v,ne];localStorage.setItem(ze.LIBRARY_INDEX,JSON.stringify(ee)),w(ee),I(""),R("")}catch{x("Storage full. Cannot save session locally.")}},C=M=>{const ne=localStorage.getItem(`${ze.LIBRARY_DATA_PREFIX}${M}`);if(ne){const j=JSON.parse(ne);l({whiteboards:j.whiteboards||[],chatHistory:j.chatHistory||[],playgrounds:j.playgrounds||[],theme:j.theme||i,model:j.model||s}),e()}else x("Session data not found.")},q=M=>{if(!confirm("Are you sure you want to delete this session?"))return;localStorage.removeItem(`${ze.LIBRARY_DATA_PREFIX}${M}`);const ne=v.filter(j=>j.id!==M);localStorage.setItem(ze.LIBRARY_INDEX,JSON.stringify(ne)),w(ne)},se=async()=>{_(!0);try{const M=[];for(const j of v){const ee=localStorage.getItem(`${ze.LIBRARY_DATA_PREFIX}${j.id}`);if(ee){const pe=JSON.parse(ee);M.push({name:j.name,group:j.group,...pe})}}const ne=await xC(M);Js(ne,`AI_Teacher_Library_${new Date().toISOString().slice(0,10)}.zip`)}catch(M){console.error(M),x("Export failed.")}finally{_(!1)}},X=async M=>{var j;const ne=(j=M.target.files)==null?void 0:j[0];if(ne){_(!0),x(null);try{const ee=await CC(ne),pe=[...v];ee.forEach(ye=>{const fe=Date.now().toString(36)+Math.random().toString(36).substr(2),me={id:fe,name:ye.name||`Imported ${new Date().toLocaleTimeString()}`,group:ye.group,timestamp:Date.now(),topicCount:ye.whiteboards.length};localStorage.setItem(`${ze.LIBRARY_DATA_PREFIX}${fe}`,JSON.stringify({whiteboards:ye.whiteboards,chatHistory:ye.chatHistory,playgrounds:ye.playgrounds,theme:ye.theme,model:ye.model})),pe.push(me)}),localStorage.setItem(ze.LIBRARY_INDEX,JSON.stringify(pe)),w(pe)}catch(ee){console.error(ee),x("Failed to import. Ensure file is a valid ZIP archive.")}finally{_(!1),g.current&&(g.current.value="")}}},Y=async()=>{try{if(!("showDirectoryPicker"in window)){alert("Your browser does not support the File System Access API. Please use Chrome, Edge, or Opera.");return}const M=await window.showDirectoryPicker();M&&u(M,V,F)}catch(M){console.error("Directory picker cancelled or failed",M)}},O=()=>{const M=TC(),ne=IC();Js(new Blob([M],{type:"text/javascript"}),"cleanup_sessions.js"),Js(new Blob([ne],{type:"text/markdown"}),"README_CLEANUP.md")},W=te.useMemo(()=>{const M={Ungrouped:[]};return v.forEach(ne=>{const j=ne.group||"Ungrouped";M[j]||(M[j]=[]),M[j].push(ne)}),M},[v]),B=Object.keys(W).sort((M,ne)=>M==="Ungrouped"?1:ne==="Ungrouped"?-1:M.localeCompare(ne));return E.jsx(_C,{isOpen:t,onClose:e,title:"Session Library",children:E.jsxs("div",{className:"flex flex-col h-[70vh]",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[E.jsxs("div",{children:[E.jsx("h4",{className:"font-bold text-sm mb-2 text-blue-800 dark:text-blue-300",children:"Browser Storage"}),E.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[E.jsx("input",{type:"text",placeholder:"Session Name...",value:T,onChange:M=>I(M.target.value),className:"flex-1 text-sm px-2 py-1.5 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-800"}),E.jsx(De,{size:"sm",onClick:z,disabled:!T||n.length===0,children:"Save"})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"file",accept:".zip",ref:g,onChange:X,className:"hidden"}),E.jsx(De,{size:"sm",variant:"secondary",onClick:()=>{var M;return(M=g.current)==null?void 0:M.click()},disabled:m,children:m?"Importing...":"Import ZIP"}),E.jsx(De,{size:"sm",variant:"ghost",onClick:se,disabled:v.length===0||m,children:"Export All"})]})]}),E.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-lg border border-orange-100 dark:border-orange-900/30",children:[E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("h4",{className:"font-bold text-sm text-orange-800 dark:text-orange-300",children:"Auto-Save to Disk"}),f&&E.jsx("span",{className:"text-xs font-bold text-green-600 animate-pulse",children:" Active"})]}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Automatically saves session snapshots to a folder on your computer."}),E.jsxs("div",{className:"flex gap-2 mb-2",children:[E.jsx("input",{type:"text",value:F,onChange:M=>{const ne=M.target.value;b(ne),d(V,ne)},placeholder:"Base Filename",className:"flex-1 text-sm px-2 py-1.5 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-800"}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("input",{type:"number",value:V,onChange:M=>{const ne=Math.max(1,parseInt(M.target.value)||1);J(ne),d(ne,F)},className:"w-12 text-sm px-1 py-1.5 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-800 text-center"}),E.jsx("span",{className:"text-xs text-gray-500",children:"min"})]})]}),E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx(De,{size:"sm",onClick:Y,variant:f?"secondary":"primary",children:f?"Change Folder":"Select Folder & Start"}),E.jsx("button",{onClick:O,className:"text-xs underline text-gray-500 hover:text-orange-500",children:"Get Cleanup Script"})]})]})]}),E.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:v.length===0?E.jsx("div",{className:"text-center py-12 text-gray-400",children:E.jsx("p",{children:"Browser Library is empty."})}):E.jsx("div",{className:"space-y-4",children:B.map(M=>E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[M!=="Ungrouped"&&E.jsxs("details",{className:"group",open:!0,children:[E.jsxs("summary",{className:"bg-gray-100 dark:bg-gray-700 px-4 py-2 font-bold text-sm cursor-pointer select-none flex items-center gap-2",children:[E.jsx("svg",{className:"w-4 h-4 transform group-open:rotate-90 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),E.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),M,E.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-auto",children:[W[M].length," items"]})]}),E.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:W[M].map(ne=>E.jsx(Zd,{session:ne,onLoad:C,onDelete:q},ne.id))})]}),M==="Ungrouped"&&W[M].length>0&&E.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:[B.length>1&&E.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 px-4 py-2 text-xs font-bold text-gray-500 uppercase",children:"Unsorted"}),W[M].map(ne=>E.jsx(Zd,{session:ne,onLoad:C,onDelete:q},ne.id))]})]},M))})}),y&&E.jsx("div",{className:"mt-4 text-red-500 text-sm text-center font-medium",children:y})]})})},Zd=({session:t,onLoad:e,onDelete:n})=>E.jsxs("div",{className:"p-3 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:t.name}),E.jsxs("div",{className:"text-xs text-gray-400 flex gap-3",children:[E.jsx("span",{children:new Date(t.timestamp).toLocaleDateString()}),E.jsx("span",{children:""}),E.jsxs("span",{children:[t.topicCount," Topics"]})]})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx(De,{size:"sm",onClick:()=>e(t.id),children:"Load"}),E.jsx("button",{onClick:()=>n(t.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Delete",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),NC=({data:t,gallery:e,onGenerate:n,onImportLevel:r,onDelete:o,onSelect:i,isLoading:s})=>{const[l,u]=te.useState(""),[d,f]=te.useState("Introduction"),[p,h]=te.useState(!0),m=[{label:"Introduction",value:"Introduction"},{label:"Beginner",value:"Beginner"},{label:"Intermediate",value:"Intermediate"},{label:"Advanced",value:"Advanced"},{label:"Master",value:"Master"}],_=()=>{l.trim()&&n(l,d)};return E.jsxs("div",{className:"max-w-4xl mx-auto p-2 sm:p-6 pb-20",children:[E.jsxs("div",{className:"text-center py-8",children:[E.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-600",children:"Course Architect"}),E.jsx("div",{className:"max-w-2xl mx-auto bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[E.jsx("input",{type:"text",value:l,onChange:y=>u(y.target.value),placeholder:"Enter a topic (e.g., Python, History, Baking)",className:"flex-[2] px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:ring-2 focus:ring-purple-500 outline-none"}),E.jsx("div",{className:"flex-1 min-w-[150px]",children:E.jsx(pr,{options:m,value:d,onChange:y=>f(y.target.value),className:"h-full py-3"})})]}),E.jsx(De,{onClick:_,disabled:s||!l.trim(),className:"w-full sm:w-auto self-end",children:s?"Designing Curriculum...":"Create Syllabus"})]})})]}),t&&E.jsx("div",{className:"animate-fade-in mt-8 mb-16",children:E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-8 shadow-sm border border-gray-200 dark:border-gray-700 ring-2 ring-purple-500/20",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-xs font-bold text-purple-500 uppercase tracking-widest mb-1 block",children:"Active Design"}),E.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-1",children:t.topic}),E.jsxs("div",{className:"inline-block px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-full text-sm font-semibold",children:[t.level," Level"]})]}),E.jsx(De,{size:"lg",onClick:()=>r(t.concepts),children:"Send All to Classroom"})]}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8 text-lg leading-relaxed",children:t.description}),E.jsxs("div",{children:[E.jsx("h4",{className:"font-bold text-gray-500 uppercase tracking-wide text-sm mb-4",children:"Key Concepts"}),E.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.concepts.map((y,x)=>E.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-100 dark:border-gray-700/50 group hover:border-blue-200 dark:hover:border-blue-800 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3 w-full",children:[E.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 flex items-center justify-center font-bold text-sm shrink-0",children:x+1}),E.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:y})]}),E.jsx(De,{size:"sm",variant:"ghost",className:"shrink-0 opacity-100 sm:opacity-0 group-hover:opacity-100 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20",onClick:()=>r([y]),children:"Teach this"})]},x))})]})]})}),E.jsxs("div",{className:"mt-12",children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsxs("h3",{className:"text-xl font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[E.jsx("svg",{className:"w-6 h-6 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"My Course Gallery"]}),E.jsx("button",{onClick:()=>h(!p),className:"text-sm text-gray-500 hover:text-purple-600 underline",children:p?"Hide Gallery":"Show Gallery"})]}),p&&E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.length===0?E.jsx("div",{className:"col-span-full py-12 text-center border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl",children:E.jsx("p",{className:"text-gray-400",children:"No courses saved yet. Generate one above!"})}):e.map(y=>E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow flex flex-col h-full",children:[E.jsxs("div",{className:"p-5 flex-1",children:[E.jsxs("div",{className:"flex justify-between items-start mb-2",children:[E.jsx("div",{className:"inline-block px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded text-xs font-semibold uppercase tracking-wide",children:y.level}),E.jsx("span",{className:"text-xs text-gray-400",children:y.timestamp?new Date(y.timestamp).toLocaleDateString():"Saved"})]}),E.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white mb-2 line-clamp-1",children:y.topic}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4 line-clamp-2",children:y.description}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Contents Preview:"}),E.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-300 pl-4 list-disc marker:text-purple-400",children:[y.concepts.slice(0,3).map((x,g)=>E.jsx("li",{className:"truncate",children:x},g)),y.concepts.length>3&&E.jsxs("li",{className:"list-none text-xs text-gray-400 mt-1 italic",children:["+",y.concepts.length-3," more concepts"]})]})]})]}),E.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center gap-2",children:[E.jsxs("div",{className:"flex gap-2",children:[E.jsx(De,{size:"sm",variant:"secondary",onClick:()=>i(y),children:"View"}),E.jsx(De,{size:"sm",onClick:()=>r(y.concepts),children:"Teach This"})]}),E.jsx("button",{onClick:()=>y.id&&o(y.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Delete Course",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},y.id||y.timestamp))})]})]})},RC=({onStartTest:t,isGenerating:e,results:n})=>{const[r,o]=te.useState(""),[i,s]=te.useState(hh),l=n.reduce((u,d)=>(u[d.topic]||(u[d.topic]=[]),u[d.topic].push(d),u),{});return E.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 pb-20",children:[E.jsxs("div",{className:"text-center py-8",children:[E.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-orange-500 to-red-600",children:"Competency Level Test"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-2xl mx-auto mb-8",children:"Challenge yourself! The AI will generate a complete curriculum (Intro to Master) and create a personalized exam to determine your proficiency level."}),E.jsx("div",{className:"max-w-xl mx-auto bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[E.jsx("div",{className:"flex-[2]",children:E.jsx("input",{type:"text",value:r,onChange:u=>o(u.target.value),placeholder:"Enter topic (e.g. Biology, Java)...",className:"w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:ring-2 focus:ring-orange-500 outline-none",disabled:e})}),E.jsx("div",{className:"flex-1 min-w-[160px]",children:E.jsx(pr,{options:Hl,value:i,onChange:u=>s(u.target.value),className:"h-full py-3",disabled:e})})]}),E.jsx(De,{onClick:()=>t(r,i),disabled:e||!r.trim(),className:"w-full bg-orange-600 hover:bg-orange-700 focus:ring-orange-500",children:e?"Analyzing & Building Exam...":"Start Level Test"}),e&&E.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"This may take a minute. We are generating 5 syllabi and a quiz database."})]})})]}),n.length>0&&E.jsxs("div",{className:"mt-12 animate-fade-in",children:[E.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center gap-2",children:[E.jsx("svg",{className:"w-6 h-6 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Student Record"]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[E.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 font-semibold text-sm",children:"Recent Attempts"}),E.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700 max-h-[300px] overflow-y-auto",children:n.slice().reverse().map(u=>E.jsxs("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[E.jsxs("div",{className:"flex justify-between items-center mb-1",children:[E.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200",children:u.topic}),E.jsx("span",{className:"text-xs text-gray-400",children:new Date(u.timestamp).toLocaleDateString()})]}),E.jsxs("div",{className:"flex justify-between items-center text-sm",children:[E.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Level: ",E.jsx("span",{className:"text-orange-500 font-semibold",children:u.levelAssigned})]}),E.jsx("span",{className:"text-gray-500",children:"Completed"})]})]},u.id))})]}),E.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 flex flex-col justify-center",children:[E.jsx("h4",{className:"font-bold text-sm text-gray-500 uppercase tracking-wide mb-4",children:"Topic Mastery Frequency"}),E.jsxs("div",{className:"flex items-end gap-4 h-[200px] w-full overflow-x-auto",children:[Object.entries(l).map(([u,d])=>{const f=Math.min(100,d.length*20);return E.jsxs("div",{className:"flex flex-col items-center gap-2 group min-w-[60px]",children:[E.jsx("div",{className:"text-xs font-bold text-orange-500 opacity-0 group-hover:opacity-100 transition-opacity",children:d.length}),E.jsx("div",{className:"w-12 bg-gradient-to-t from-orange-500 to-yellow-400 rounded-t-md transition-all duration-500",style:{height:`${f}%`}}),E.jsx("div",{className:"text-[10px] text-gray-500 text-center truncate w-16",title:u,children:u})]},u)}),Object.keys(l).length===0&&E.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:"No data to chart yet."})]})]})]})]})]})},PC=()=>{const e=(()=>{try{const Q=localStorage.getItem(ze.SETTINGS);return Q?JSON.parse(Q):{}}catch{return{}}})(),[n,r]=te.useState(()=>e.theme||B0),[o,i]=te.useState(()=>e.model||hh),[s,l]=te.useState(()=>localStorage.getItem(ze.API_KEY)||""),[u,d]=te.useState(()=>e.saveToLocal||!1),[f,p]=te.useState(()=>e.autoSaveName||"MySession"),[h,m]=te.useState(()=>e.autoSaveInterval||5),[_,y]=te.useState(null),x=te.useRef(null),[g,v]=te.useState("classroom"),[w,T]=te.useState(""),[I,D]=te.useState([]),[R,F]=te.useState([]),[b,V]=te.useState(!1),[J,N]=te.useState([]),[z,C]=te.useState(null),[q,se]=te.useState(!1),[X,Y]=te.useState(500),[O,W]=te.useState("practice"),[B,M]=te.useState(()=>{try{const Q=localStorage.getItem(ze.TEST_RESULTS);return Q?JSON.parse(Q):[]}catch{return[]}}),[ne,j]=te.useState(!1),[ee,pe]=te.useState(null),[ye,fe]=te.useState(()=>{try{const Q=localStorage.getItem(ze.SYLLABUS_GALLERY);return Q?JSON.parse(Q):[]}catch{return[]}}),[me,Pe]=te.useState(!1),[Ee,nt]=te.useState(!1),[rt,S]=te.useState(!1),[$,H]=te.useState(!1),[A,k]=te.useState(!1),[U,K]=te.useState([]),[L,P]=te.useState(!1),G=te.useCallback(Q=>{const ue={...Q,id:Math.random().toString(36).substr(2,9),timestamp:Date.now()};K(ce=>[...ce,ue])},[]),re=te.useMemo(()=>{const Q=J.find(Ce=>Ce.id===z);let ue="[No Active Playground]";Q&&(ue=`[Active ${Q.type==="test"?"Level Test":"Playground"}]: ${Q.description} (${Q.status})`);const ce=I.slice(0,3).map(Ce=>`[Whiteboard - ${Ce.topic}]: ${Ce.explanation.substring(0,150)}...`).join(`
`);return`USER SCREEN CONTEXT:
${ue}

${ce||"[No Whiteboards Visible]"}`},[I,J,z]),Z=te.useRef({whiteboards:I,chatHistory:R,playgrounds:J,theme:n,model:o,testResults:B});te.useEffect(()=>{Z.current={whiteboards:I,chatHistory:R,playgrounds:J,theme:n,model:o,testResults:B}},[I,R,J,n,o,B]);const le=async()=>{if(!_)return;const Q=Date.now(),ue=`${f}_${Q}_${mh}.json`,ce=Z.current,Ce=JSON.stringify({...ce,timestamp:Q},null,2);try{await kC(_,ue,Ce),G({type:"info",source:"AutoSave",summary:`Saved session to ${ue}`})}catch(xe){console.error("Auto save failed",xe),G({type:"error",source:"AutoSave",summary:"Failed to write file"})}};te.useEffect(()=>(_&&(x.current&&window.clearInterval(x.current),G({type:"info",source:"AutoSave",summary:`Timer started: ${h} mins`}),x.current=window.setInterval(()=>{le()},h*60*1e3)),()=>{x.current&&window.clearInterval(x.current)}),[_,h]),te.useEffect(()=>{if(u)try{const Q=localStorage.getItem(ze.SESSION);if(Q){const ue=JSON.parse(Q);ue.whiteboards&&D(ue.whiteboards),ue.chatHistory&&F(ue.chatHistory),ue.playgrounds&&N(ue.playgrounds)}}catch(Q){console.error("Failed to load session",Q)}},[]),te.useEffect(()=>{s&&localStorage.setItem(ze.API_KEY,s)},[s]),te.useEffect(()=>{localStorage.setItem(ze.SYLLABUS_GALLERY,JSON.stringify(ye))},[ye]),te.useEffect(()=>{localStorage.setItem(ze.TEST_RESULTS,JSON.stringify(B))},[B]),te.useEffect(()=>{const Q={saveToLocal:u,theme:n,model:o,autoSaveName:f,autoSaveInterval:h};localStorage.setItem(ze.SETTINGS,JSON.stringify(Q))},[u,n,o,f,h]),te.useEffect(()=>{u?localStorage.setItem(ze.SESSION,JSON.stringify({whiteboards:I,chatHistory:R,playgrounds:J})):localStorage.removeItem(ze.SESSION)},[u,I,R,J]),te.useEffect(()=>{const Q=window.document.documentElement;Q.classList.remove("light","dark","chalkboard","blueprint"),n===Tt.DARK?Q.classList.add("dark"):n===Tt.CHALKBOARD?Q.classList.add("dark","chalkboard"):n===Tt.BLUEPRINT?Q.classList.add("blueprint","dark"):Q.classList.add("light")},[n]);const ge=te.useCallback(Q=>{if($){const ue=document.body.clientWidth-Q.clientX;ue>300&&ue<document.body.clientWidth-100&&Y(ue)}},[$]),he=te.useCallback(()=>H(!1),[]);te.useEffect(()=>($&&(window.addEventListener("mousemove",ge),window.addEventListener("mouseup",he)),()=>{window.removeEventListener("mousemove",ge),window.removeEventListener("mouseup",he)}),[$,ge,he]);const We=(Q,ue)=>{m(Q),p(ue)},Ot=()=>{D([]),F([]),N([]),C(null),pe(null),T(""),K([]),se(!1)},ot=async Q=>{const ue=Q||w;if(!ue.trim()||!s){s||alert("Please enter a Gemini API Key.");return}Pe(!0),v("classroom");try{const ce=await uC(s,ue,o,G),Ce=ce.isAbstract?ce.topics:[ue],xe=4;let Ne=I.slice(0,2).map(Ue=>Ue.topic).join(", ");for(let Ue=0;Ue<Ce.length;Ue+=xe){const Br=Ce.slice(Ue,Ue+xe),qt=await cC(s,Br,Ne,o,G);Ne=qt.map(gt=>gt.topic).join(", ");const cn=qt.map(gt=>({id:Date.now().toString()+Math.random(),topic:gt.topic,svgContent:gt.svg,explanation:gt.explanation,timestamp:Date.now()}));D(gt=>[...cn.reverse(),...gt])}Q||T("")}catch(ce){console.error(ce),alert("Generation failed.")}finally{Pe(!1)}},Dn=async Q=>{if(!s){alert("Please enter API Key");return}se(!0),W("practice");const ue=J.find(xe=>xe.description.includes(Q)&&xe.type==="practice");if(ue){C(ue.id);return}const ce=Date.now().toString(),Ce={id:ce,html:"",description:Q,timestamp:Date.now(),status:"loading",type:"practice",model:o};N(xe=>[...xe,Ce]),C(ce);try{const xe=await Xd(s,Q,o,G);N(Ne=>Ne.map(Ue=>Ue.id===ce?{...xe,status:"ready",id:ce,type:"practice",model:o}:Ue))}catch{N(Ne=>Ne.map(Ue=>Ue.id===ce?{...Ue,status:"error"}:Ue))}},Ae=async(Q,ue)=>{if(!s){alert("Please enter API Key");return}j(!0),se(!0),W("test");const ce=Date.now().toString(),Ce={id:ce,html:"",description:`Test: ${Q}`,timestamp:Date.now(),status:"loading",type:"test",relatedTopic:Q,model:ue};N(xe=>[...xe,Ce]),C(ce);try{const xe=["Introduction","Beginner","Intermediate","Advanced","Master"];let Ne="";for(const qt of xe){const cn=ye.find(gt=>gt.topic.trim().toLowerCase()===Q.trim().toLowerCase()&&gt.level===qt);if(cn)Ne+=JSON.stringify(cn)+`
`,G({type:"info",source:"LevelTest",summary:`Using existing syllabus for ${qt}`,details:cn});else{const gt=await Qd(s,Q,qt,ue,G,Ne);Ne+=JSON.stringify(gt)+`
`,fe(dm=>[{...gt,id:Date.now().toString()+Math.random()},...dm])}}const Ue=await dC(s,Q,Ne,ue,G),Br=await fC(s,Q,Ue,ue,G);N(qt=>qt.map(cn=>cn.id===ce?{...Br,status:"ready",id:ce,type:"test",relatedTopic:Q,model:ue}:cn)),M(qt=>[...qt,{id:ce,topic:Q,levelAssigned:"Pending",score:0,maxScore:0,timestamp:Date.now()}])}catch(xe){console.error(xe),N(Ne=>Ne.map(Ue=>Ue.id===ce?{...Ue,status:"error"}:Ue)),alert("Failed to generate level test. Please try again.")}finally{j(!1)}},bn=Q=>{M(ue=>ue.map(ce=>ce.id===Q.testId?{...ce,levelAssigned:Q.level||"Unknown",score:Q.score||0,maxScore:Q.maxScore||0}:ce)),G({type:"info",source:"LevelTest",summary:"Received test results",details:Q})},Qn=async()=>{if(!z||!s)return;const Q=J.find(ce=>ce.id===z);if(!Q)return;const ue=Q.model||o;if(Q.type==="test"){const ce=Q.relatedTopic||Q.description.replace("Test: ","");Fr(Q.id),Ae(ce,ue);return}N(ce=>ce.map(Ce=>Ce.id===Q.id?{...Ce,status:"loading"}:Ce));try{const ce=Q.description.replace("Playground: ",""),Ce=await Xd(s,ce,ue,G);N(xe=>xe.map(Ne=>Ne.id===Q.id?{...Ce,status:"ready",id:Q.id,type:"practice",model:ue}:Ne))}catch{N(Ce=>Ce.map(xe=>xe.id===Q.id?{...xe,status:"error"}:xe))}},Mt=async(Q,ue)=>{if(!s){alert("Please enter API Key");return}nt(!0);const ce=Q.trim().toLowerCase(),Ce=ye.filter(Ne=>Ne.topic.toLowerCase().includes(ce));let xe="";Ce.length>0&&(xe=`Existing courses:
`+Ce.map(Ne=>`- ${Ne.level} (${Ne.topic})`).join(`
`));try{const Ue={...await Qd(s,Q,ue,o,G,xe),id:Date.now().toString(),timestamp:Date.now()};pe(Ue),fe(Br=>[Ue,...Br])}catch(Ne){console.error(Ne)}finally{nt(!1)}},Do=async(Q,ue)=>{S(!0),V(!0);try{const ce=await pC(s,Q,ue,o,G);F(Ce=>[...Ce,{id:Date.now().toString(),role:"user",content:`[Image Analysis]: ${ue}`,timestamp:Date.now()},{id:(Date.now()+1).toString(),role:"model",content:ce,timestamp:Date.now()}])}catch(ce){console.error(ce)}finally{S(!1)}},Fr=Q=>{N(ue=>ue.filter(ce=>ce.id!==Q)),z===Q&&C(null)},vs=()=>{switch(n){case Tt.CHALKBOARD:return"bg-[#2b2b2b] text-gray-100";case Tt.BLUEPRINT:return"bg-[#1e3a8a] text-blue-100";case Tt.DARK:return"bg-gray-900 text-gray-100";default:return"bg-[#fdfbf7] text-gray-900"}},bo=J.find(Q=>Q.id===z);return E.jsxs("div",{className:`h-[100dvh] flex flex-col font-sans transition-colors duration-300 overflow-hidden ${vs()}`,children:[E.jsx(V0,{theme:n,setTheme:r,model:o,setModel:i,apiKey:s,setApiKey:l,onClearSession:Ot,saveToLocal:u,setSaveToLocal:d,toggleAdvancedMode:()=>k(!A),onOpenSessionManager:()=>P(!0),playgroundOpen:q,togglePlayground:()=>se(!q),hasPlaygroundCode:J.length>0}),E.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[E.jsxs("main",{className:`flex-1 overflow-y-auto w-full scroll-smooth flex flex-col ${q?"hidden md:flex":"flex"}`,children:[E.jsxs("div",{className:"flex-shrink-0 flex w-full border-b border-gray-200 dark:border-gray-700 bg-white/50 dark:bg-gray-900/50 backdrop-blur sticky top-0 z-10 overflow-x-auto no-scrollbar",children:[E.jsx("button",{onClick:()=>v("classroom"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors ${g==="classroom"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-500 hover:text-gray-700"}`,children:"Classroom"}),E.jsx("button",{onClick:()=>v("syllabus"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors ${g==="syllabus"?"border-b-2 border-purple-500 text-purple-600 dark:text-purple-400":"text-gray-500 hover:text-gray-700"}`,children:"Syllabus Architect"}),E.jsx("button",{onClick:()=>v("level_test"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors ${g==="level_test"?"border-b-2 border-orange-500 text-orange-600 dark:text-orange-400":"text-gray-500 hover:text-gray-700"}`,children:"Level Test"})]}),E.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 pb-32 w-full flex-grow",children:[g==="classroom"&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"mb-12",children:[E.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:"What would you like to learn today?"}),E.jsx("div",{className:"bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:E.jsxs("div",{className:"flex flex-col relative bg-white dark:bg-gray-900 transition-shadow shadow-inner",children:[E.jsx("textarea",{value:w,onChange:Q=>T(Q.target.value),placeholder:"Explain Quantum Physics...",className:"w-full h-32 p-4 bg-transparent border-none focus:ring-0 resize-none text-base sm:text-lg outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400",disabled:me}),E.jsx("div",{className:"flex justify-end p-3 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-100 dark:border-gray-700",children:E.jsx(De,{onClick:()=>ot(),disabled:me||!w.trim(),size:"md",children:me?"Thinking...":"Create Lesson"})})]})})]}),E.jsxs("div",{className:"space-y-16",children:[I.length===0&&!me&&E.jsx("div",{className:"text-center py-20 opacity-50",children:E.jsx("p",{className:"text-xl font-medium",children:"Classroom is empty."})}),I.map(Q=>E.jsxs("div",{className:"relative",children:[E.jsx(O0,{topic:Q.topic,svgContent:Q.svgContent,explanation:Q.explanation,onRefine:Do,isRefining:rt}),E.jsx("div",{className:"mt-4 flex justify-end",children:E.jsx(De,{variant:"secondary",onClick:()=>Dn(Q.topic),children:"Practice this Topic"})})]},Q.id))]})]}),g==="syllabus"&&E.jsx(NC,{data:ee,gallery:ye,onGenerate:Mt,isLoading:Ee,onImportLevel:Q=>ot(Q.join(", ")),onDelete:Q=>fe(ue=>ue.filter(ce=>ce.id!==Q)),onSelect:pe}),g==="level_test"&&E.jsx(RC,{onStartTest:Ae,isGenerating:ne,results:B})]})]}),q&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:`hidden md:flex flex-shrink-0 border-l border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 relative transition-[width] ease-in-out flex-col shadow-2xl z-20 ${$?"duration-0 select-none":"duration-300"}`,style:{width:X},children:[E.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 -ml-0.5 cursor-ew-resize hover:bg-blue-500/50 active:bg-blue-600 transition-colors z-30",onMouseDown:Q=>{Q.preventDefault(),H(!0)}}),E.jsx(jd,{playgrounds:J,activePlaygroundId:z,setActivePlaygroundId:C,activePlaygroundTab:O,setActivePlaygroundTab:W,activePlayground:bo,onClose:()=>se(!1),onCloseItem:Fr,onRetry:Qn,onTestComplete:bn})]}),E.jsx("div",{className:"md:hidden fixed inset-0 z-40 bg-white dark:bg-gray-900 flex flex-col",children:E.jsx(jd,{playgrounds:J,activePlaygroundId:z,setActivePlaygroundId:C,activePlaygroundTab:O,setActivePlaygroundTab:W,activePlayground:bo,onClose:()=>se(!1),onCloseItem:Fr,onRetry:Qn,onTestComplete:bn})})]})]}),E.jsx(mC,{isOpen:b,toggleOpen:()=>V(!b),apiKey:s,model:o,history:R,setHistory:F,logger:G,context:re}),E.jsx(vC,{logs:U,isOpen:A,onClose:()=>k(!1),onClear:()=>K([])}),E.jsx(AC,{isOpen:L,onClose:()=>P(!1),whiteboards:I,chatHistory:R,playgrounds:J,theme:n,model:o,onImport:Q=>{D(Q.whiteboards),F(Q.chatHistory),N(Q.playgrounds),r(Q.theme),i(Q.model)},autoSaveActive:!!_,onConfigureAutoSave:(Q,ue,ce)=>{y(Q),m(ue),p(ce)},onUpdateAutoSaveSettings:We,initialAutoSaveName:f,initialAutoSaveInterval:h})]})},jd=({playgrounds:t,activePlaygroundId:e,setActivePlaygroundId:n,activePlaygroundTab:r,setActivePlaygroundTab:o,activePlayground:i,onClose:s,onCloseItem:l,onRetry:u,onTestComplete:d})=>{const f=t.filter(p=>p.type===r);return E.jsxs("div",{className:"flex-1 overflow-hidden min-w-[300px] h-full flex flex-col",children:[E.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[E.jsx("button",{onClick:()=>o("practice"),className:`flex-1 px-4 py-2 text-xs font-bold uppercase tracking-wider ${r==="practice"?"bg-white dark:bg-gray-900 border-t-2 border-blue-500 text-blue-600":"text-gray-500"}`,children:"Practice Apps"}),E.jsx("button",{onClick:()=>o("test"),className:`flex-1 px-4 py-2 text-xs font-bold uppercase tracking-wider ${r==="test"?"bg-white dark:bg-gray-900 border-t-2 border-orange-500 text-orange-600":"text-gray-500"}`,children:"Level Tests"})]}),f.length>0&&E.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 no-scrollbar",children:f.map(p=>E.jsxs("div",{className:`flex items-center group max-w-[160px] border-r border-gray-200 dark:border-gray-700 ${e===p.id?"bg-white dark:bg-gray-900":"opacity-80 hover:opacity-100"}`,children:[E.jsxs("button",{onClick:()=>n(p.id),className:`px-3 py-2 text-xs truncate flex-1 text-left flex items-center gap-2 ${e===p.id?"text-blue-600 dark:text-blue-400 font-semibold":""}`,children:[p.status==="loading"&&E.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"}),p.description]}),E.jsx("button",{onClick:h=>{h.stopPropagation(),l(p.id)},className:"p-1 mx-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},p.id))}),i?E.jsx(gC,{code:i,onClose:s,onRetry:u,onTestComplete:d}):E.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[E.jsx("p",{className:"text-gray-400 mb-4",children:"No active app selected."}),E.jsx(De,{variant:"ghost",size:"sm",onClick:s,children:"Close Panel"})]})]})},cm=document.getElementById("root");if(!cm)throw new Error("Could not find root element to mount to");const MC=Ks.createRoot(cm);MC.render(E.jsx(Ys.StrictMode,{children:E.jsx(PC,{})}));
